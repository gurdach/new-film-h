(function () {
  "use strict";
  function a(g, c) {
    var d = g.split("."),
      a = f;
    // console.log(d, a);
    !(d[0] in a) && a.execScript && a.execScript("var " + d[0]);
    for (var h; d.length && (h = d.shift()); )
      d.length || c === void 0 ? (a = a[h] ? a[h] : (a[h] = {})) : (a[h] = c);
  }
  function i(i) {
    var c,
      j,
      o,
      q,
      r,
      t,
      u,
      v,
      w,
      y,
      z = i.length,
      d = 0,
      A = Number.POSITIVE_INFINITY;
    for (v = 0; v < z; ++v) i[v] > d && (d = i[v]), i[v] < A && (A = i[v]);
    for (
      c = 1 << d, j = new (k ? Uint32Array : Array)(c), o = 1, q = 0, r = 2;
      o <= d;

    ) {
      for (v = 0; v < z; ++v)
        if (i[v] === o) {
          for (t = 0, u = q, w = 0; w < o; ++w)
            (t = (t << 1) | (1 & u)), (u >>= 1);
          for (y = (o << 16) | v, w = t; w < c; w += r) j[w] = y;
          ++q;
        }
      ++o, (q <<= 1), (r <<= 1);
    }
    // console.log(j, d, A);
    return [j, d, A];
  }
  function b(a, b) {
    switch (
      ((this.g = []),
      (this.h = 32768),
      (this.c = this.f = this.d = this.k = 0),
      (this.input = k ? new Uint8Array(a) : a),
      (this.l = !1),
      (this.i = g),
      (this.p = !1),
      (b || !(b = {})) &&
        (b.index && (this.d = b.index),
        b.bufferSize && (this.h = b.bufferSize),
        b.bufferType && (this.i = b.bufferType),
        b.resize && (this.p = b.resize)),
      this.i)
    ) {
      case e:
        (this.a = 32768),
          (this.b = new (k ? Uint8Array : Array)(32768 + this.h + 258));
        break;
      case g:
        (this.a = 0),
          (this.b = new (k ? Uint8Array : Array)(this.h)),
          (this.e = this.u),
          (this.m = this.r),
          (this.j = this.s);
        break;
      default:
        throw Error("invalid inflate mode");
    }
    console.log(this.h);
  }
  function j(i, c) {
    for (var d, j = i.f, k = i.c, l = i.input, e = i.d, m = l.length; k < c; ) {
      if (e >= m) throw Error("input buffer is broken");
      (j |= l[e++] << k), (k += 8);
    }
    return (
      (d = j & ((1 << c) - 1)), (i.f = j >>> c), (i.c = k - c), (i.d = e), d
    );
  }
  function m(i, c) {
    for (
      var d,
        j,
        k = i.f,
        o = i.c,
        p = i.input,
        e = i.d,
        q = p.length,
        g = c[0],
        h = c[1];
      o < h && !(e >= q);

    )
      (k |= p[e++] << o), (o += 8);
    if (((d = g[k & ((1 << h) - 1)]), (j = d >>> 16), j > o))
      throw Error("invalid code length: " + j);
    return (i.f = k >> j), (i.c = o - j), (i.d = e), 65535 & d;
  }
  var o,
    f = this;
  var k =
    "undefined" != typeof Uint8Array &&
    "undefined" != typeof Uint16Array &&
    "undefined" != typeof Uint32Array &&
    "undefined" != typeof DataView;
  var e = 0,
    g = 1;
  b.prototype.t = function () {
    for (; !this.l; ) {
      var r = j(this, 3);
      switch ((1 & r && (this.l = !0), (r >>>= 1), r)) {
        case 0:
          var t = this.input,
            d = this.d,
            u = this.b,
            w = this.a,
            y = t.length,
            f = o,
            C = o,
            D = u.length,
            E = o;
          if (((this.c = this.f = 0), d + 1 >= y))
            throw Error("invalid uncompressed block header: LEN");
          if (((f = t[d++] | (t[d++] << 8)), d + 1 >= y))
            throw Error("invalid uncompressed block header: NLEN");
          if (((C = t[d++] | (t[d++] << 8)), f === ~C))
            throw Error("invalid uncompressed block header: length verify");
          if (d + f > t.length) throw Error("input buffer is broken");
          switch (this.i) {
            case 0:
              for (; w + f > u.length; ) {
                if (((E = D - w), (f -= E), k))
                  u.set(t.subarray(d, d + E), w), (w += E), (d += E);
                else for (; E--; ) u[w++] = t[d++];
                (this.a = w), (u = this.e()), (w = this.a);
              }
              break;
            case 1:
              for (; w + f > u.length; )
                u = this.e({
                  o: 2,
                });
              break;
            default:
              throw Error("invalid inflate mode");
          }
          if (k) u.set(t.subarray(d, d + f), w), (w += f), (d += f);
          else for (; f--; ) u[w++] = t[d++];
          (this.d = d), (this.a = w), (this.b = u);
          break;
        case 1:
          this.j(A, B);
          break;
        case 2:
          for (
            var G = j(this, 5) + 257,
              H = j(this, 5) + 1,
              p = j(this, 4) + 4,
              I = new (k ? Uint8Array : Array)(l.length),
              x = o,
              J = o,
              K = o,
              L = o,
              N = o,
              O = o,
              P = o,
              U = o,
              V = o,
              U = 0;
            U < p;
            ++U
          )
            I[l[U]] = j(this, 3);
          if (!k) for (U = p, p = I.length; U < p; ++U) I[l[U]] = 0;
          for (
            x = i(I), L = new (k ? Uint8Array : Array)(G + H), U = 0, V = G + H;
            U < V;

          )
            switch (((N = m(this, x)), N)) {
              case 16:
                for (P = 3 + j(this, 2); P--; ) L[U++] = O;
                break;
              case 17:
                for (P = 3 + j(this, 3); P--; ) L[U++] = 0;
                O = 0;
                break;
              case 18:
                for (P = 11 + j(this, 7); P--; ) L[U++] = 0;
                O = 0;
                break;
              default:
                O = L[U++] = N;
            }
          (J = k ? i(L.subarray(0, G)) : i(L.slice(0, G))),
            (K = k ? i(L.subarray(G)) : i(L.slice(G))),
            this.j(J, K);
          break;
        default:
          throw Error("unknown BTYPE: " + r);
      }
    }
    return this.m();
  };
  var c,
    d,
    h = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
    l = k ? new Uint16Array(h) : h,
    n = [
      3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59,
      67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258,
    ],
    p = k ? new Uint16Array(n) : n,
    q = [
      0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5,
      5, 5, 5, 0, 0, 0,
    ],
    r = k ? new Uint8Array(q) : q,
    s = [
      1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513,
      769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577,
    ],
    t = k ? new Uint16Array(s) : s,
    u = [
      0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10,
      11, 11, 12, 12, 13, 13,
    ],
    v = k ? new Uint8Array(u) : u,
    w = new (k ? Uint8Array : Array)(288);
  for (c = 0, d = w.length; c < d; ++c)
    w[c] = 143 >= c ? 8 : 255 >= c ? 9 : 279 >= c ? 7 : 8;
  var x,
    y,
    A = i(w),
    z = new (k ? Uint8Array : Array)(30);
  for (x = 0, y = z.length; x < y; ++x) z[x] = 5;
  var B = i(z);
  (b.prototype.j = function (i, c) {
    var d = this.b,
      k = this.a;
    this.n = i;
    for (var n, o, q, s, u = d.length - 258; 256 !== (n = m(this, i)); )
      if (256 > n)
        k >= u && ((this.a = k), (d = this.e()), (k = this.a)), (d[k++] = n);
      else
        for (
          o = n - 257,
            s = p[o],
            0 < r[o] && (s += j(this, r[o])),
            n = m(this, c),
            q = t[n],
            0 < v[n] && (q += j(this, v[n])),
            k >= u && ((this.a = k), (d = this.e()), (k = this.a));
          s--;

        )
          d[k] = d[k++ - q];
    for (; 8 <= this.c; ) (this.c -= 8), this.d--;
    this.a = k;
  }),
    (b.prototype.s = function (i, c) {
      var d = this.b,
        k = this.a;
      this.n = i;
      for (var n, o, q, s, u = d.length; 256 !== (n = m(this, i)); )
        if (256 > n) k >= u && ((d = this.e()), (u = d.length)), (d[k++] = n);
        else
          for (
            o = n - 257,
              s = p[o],
              0 < r[o] && (s += j(this, r[o])),
              n = m(this, c),
              q = t[n],
              0 < v[n] && (q += j(this, v[n])),
              k + s > u && ((d = this.e()), (u = d.length));
            s--;

          )
            d[k] = d[k++ - q];
      for (; 8 <= this.c; ) (this.c -= 8), this.d--;
      this.a = k;
    }),
    (b.prototype.e = function () {
      var f,
        g,
        h = new (k ? Uint8Array : Array)(this.a - 32768),
        c = this.a - 32768,
        d = this.b;
      if (k) h.set(d.subarray(32768, h.length));
      else for (f = 0, g = h.length; f < g; ++f) h[f] = d[f + 32768];
      if ((this.g.push(h), (this.k += h.length), k))
        d.set(d.subarray(c, c + 32768));
      else for (f = 0; 32768 > f; ++f) d[f] = d[c + f];
      return (this.a = 32768), d;
    }),
    (b.prototype.u = function (i) {
      var c,
        j,
        l,
        m,
        n = 0 | (this.input.length / this.d + 1),
        o = this.input,
        g = this.b;
      return (
        i &&
          ("number" == typeof i.o && (n = i.o),
          "number" == typeof i.q && (n += i.q)),
        2 > n
          ? ((j = (o.length - this.d) / this.n[2]),
            (m = 0 | (258 * (j / 2))),
            (l = m < g.length ? g.length + m : g.length << 1))
          : (l = g.length * n),
        k ? ((c = new Uint8Array(l)), c.set(g)) : (c = g),
        (this.b = c)
      );
    }),
    (b.prototype.m = function () {
      var i,
        j,
        m,
        n,
        o,
        p = 0,
        q = this.b,
        d = this.g,
        a = new (k ? Uint8Array : Array)(this.k + (this.a - 32768));
      if (0 === d.length)
        return k ? this.b.subarray(32768, this.a) : this.b.slice(32768, this.a);
      for (j = 0, m = d.length; j < m; ++j)
        for (i = d[j], n = 0, o = i.length; n < o; ++n) a[p++] = i[n];
      for (j = 32768, m = this.a; j < m; ++j) a[p++] = q[j];
      return (this.g = []), (this.buffer = a);
    }),
    (b.prototype.r = function () {
      var a,
        b = this.a;
      return (
        k
          ? this.p
            ? ((a = new Uint8Array(b)), a.set(this.b.subarray(0, b)))
            : (a = this.b.subarray(0, b))
          : (this.b.length > b && (this.b.length = b), (a = this.b)),
        (this.buffer = a)
      );
    }),
    a("Zlib.RawInflate", b),
    a("Zlib.RawInflate.prototype.decompress", b.prototype.t);
  var C,
    D,
    E,
    F,
    G = {
      ADAPTIVE: 1,
      BLOCK: 0,
    };
  if (Object.keys) C = Object.keys(G);
  else for (D in ((C = []), (E = 0), G)) C[E++] = D;
  for (E = 0, F = C.length; E < F; ++E)
    (D = C[E]), a("Zlib.RawInflate.BufferType." + D, G[D]);
}.call(this));
var pljssglobal = [],
  pljssglobalid;
function Playerjs(options) {
  const _0x728afd = _0x39f8;
  function _0x1d5a() {
    var e = [
      "zNjVBunOyxjdB2rL",
      "nte0ndK0oxDfEhfWuq",
      "Cgm0t3H0",
      "mte2odq2muzOEuvKza",
      "BgvUz3rO",
      "BwfW",
      "DxrMltG",
      "nNjsqxj3qq",
      "C3bSAxq",
      "zMLSzq",
      "zgvJB21WCMvZCW",
      "y2HHCKnVzgvbDa",
      "mZbutvbuvfq",
      "mZyWmZK2nejsu0Lbta",
      "zgvJB2rL",
      "A2v5",
      "otm3nduYqMXiD2jT",
      "uMf3sw5MBgf0zq",
      "mLnyqMnyAG",
      "mti4mty3oxrcqxL5yG",
      "mJi3nJG1n05uBw5bCa",
      "ntaZmZC1nvHkAhHgEG",
      "oenzy2j0ra",
    ];
    return (_0x1d5a = function () {
      return e;
    })();
  }
  function rc4(e, t) {
    const o = _0x39f8;
    for (var i, s = [], n = 0, a = "", r = 0; r < 256; r++) s[r] = r;
    for (r = 0; r < 256; r++)
      (n = (n + s[r] + t[o(173)](r % t[o(166)])) % 256),
        (i = s[r]),
        (s[r] = s[n]),
        (s[n] = i);
    for (var l = (n = r = 0); l < e[o(166)]; l++)
      (n = (n + s[(r = (r + 1) % 256)]) % 256),
        (i = s[r]),
        (s[r] = s[n]),
        (s[n] = i),
        (a += String[o(162)](e[o(173)](l) ^ s[(s[r] + s[n]) % 256]));
    return a;
  }
  function dec(e, t) {
    const o = _0x39f8;
    console.log(e, t);
    let i = o(164),
      s = rc4(atob(e), "z" + t + i),
      n = s[o(170)]("")[o(167)](function (e) {
        const t = o;
        return e[t(173)](0);
      }),
      a = new Zlib[o(179)](n),
      r = a[o(172)]();
    console.log(new TextDecoder(o(168))[o(176)](r));
    return new TextDecoder(o(168))[o(176)](r);

    // console.log(e, t);
    // const o = _0x39f8;
    // console.log(o(168), o(164), atob(e));
    // let i = o(164),
    //   s = rc4(atob(e), "z" + t + i),
    //   n = s[o(170)]("")[o(167)](function (e) {
    //     const t = o;
    //     return e[t(173)](0);
    //   }),
    //   a = new Zlib[o(179)](n),
    //   r = a[o(172)]();
    // let listFiles = new TextDecoder(o(168))[o(176)](r);
    // console.log(listFiles);
    // let replaceDomain = listFiles.split(",");
    // let resultList = replaceDomain.map((url) => {
    //   let domain = url.split("//");
    //   let quality = domain[0];
    //   let spliter = domain[1].split("/");
    //   // spliter[0] = "192.168.88.244:3001/player";
    //   domain[1] = spliter.join("/");
    //   const result = domain.join("https://");
    //   console.log(result);
    //   return result;
    // });
    // console.log(resultList);
    // return resultList.join(", ");
  }
  function _0x39f8(n, e) {
    var a = _0x1d5a();
    return (_0x39f8 = function (e, t) {
      let o = a[(e -= 157)];
      void 0 === _0x39f8.HvUbwT &&
        ((_0x39f8.fMUolY = function (s) {
          let n = "",
            o = "";
          for (
            let e = 0, t, o, i = 0;
            (o = s.charAt(i++));
            ~o &&
            ((t = e % 4 ? 64 * t + o : o), e++ % 4) &&
            (n += String.fromCharCode(255 & (t >> ((-2 * e) & 6))))
          )
            o =
              "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(
                o
              );
          for (let e = 0, t = n.length; e < t; e++)
            o += "%" + ("00" + n.charCodeAt(e).toString(16)).slice(-2);
          return decodeURIComponent(o);
        }),
        (n = arguments),
        (_0x39f8.HvUbwT = !0));
      var i = a[0],
        s = e + i,
        i = n[s];
      return i ? (o = i) : ((o = _0x39f8.fMUolY(o)), (n[s] = o)), o;
    })(n, e);
  }
  !(function () {
    const e = _0x39f8,
      t = _0x1d5a();
    for (;;)
      try {
        if (
          794916 ==
          +parseInt(e(157)) * (parseInt(e(178)) / 2) +
            parseInt(e(165)) / 3 +
            -parseInt(e(175)) / 4 +
            (parseInt(e(160)) / 5) * (-parseInt(e(169)) / 6) +
            parseInt(e(158)) / 7 +
            (-parseInt(e(161)) / 8) * (-parseInt(e(163)) / 9) +
            (-parseInt(e(174)) / 10) * (-parseInt(e(159)) / 11)
        )
          break;
        t.push(t.shift());
      } catch (e) {
        t.push(t.shift());
      }
  })(),
    (options[_0x728afd(171)] = dec(
      options[_0x728afd(171)],
      options[_0x728afd(177)]
    ));
  console.log(_0x728afd(177));
  var o = {
      play: !1,
      audiosrc: [],
      audioctx: [],
      playerid: "hwyu61c0f6xt",
      default_w: 640,
      default_h: 360,
      version: "13.14.3",
      compilation: ["", "VASTP"],
      compilations: "",
      fullscreen: !1,
      realfullscreen: !1,
      nativecontrols: !1,
      fullwheel: !1,
      fullscreen_start: !1,
      airplay: !1,
      pipwebkit: !1,
      ispipkit: !1,
      u:
        '{"screencolor":"000000","toolbar":{"color":"000000","hide":1,"margin":"-20 0 0 0","gradient":1,"animation":"alpha","a":"0.8","h":34,"leftandrightpadding":4,"image":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOUUyQUJGRUFEQjlBMUNBQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxNTNBMjk0NTM0MDUxMUU5OTIyQ0JEOTYwQjc3Nzg4QyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNTNBMjk0NDM0MDUxMUU5OTIyQ0JEOTYwQjc3Nzg4QyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4MDExNzQwNzIwNjgxMTlFMkFCRkVBREI5QTFDQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTlFMkFCRkVBREI5QTFDQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uQEgNAAAAuElEQVR42pSS3Q7CMAiFKXX+JL7/ja9ponNrp7js4GmoyW6+cKB09DARkZt+IIyr4WzIyFVDQeSHF0YFPCccSZBb9kj5K78zHwDFQKPhEYwxAxPLF3ITVwvui86VoDBzr0cuK+dqgNWIvD3rxyHLpcjivEVrlWXUoVxI8NQ7NEAGFN5n3kezmcFw5OoQFE7cO/TOedVl87YL7vPfotmMBL5EMu2R0rsv8jT11qNssWDmp+HefOgtwAB0a0c0or7QVAAAAABJRU5ErkJggg=="},"control_title":{"order":1,"on":0,"action":"title","type":"text","position":"top-left","click":0,"hand":0,"text":"","var":"title","hide":1,"hideonplay":1,"animation":"position","bg":1,"bga":0.4,"bgpadding":"16 16 16 16","title":"TITLE","font":"Open Sans Condensed","fontsize":24,"letterspacing":"2"},"control_line":{"order":6,"on":1,"type":"shape","action":"line","h":4,"rounding":0,"w":100,"a":1,"abg":"0.3","aload":"0.4","aover":"0.4","color":"' +
        options.color +
        '","colorbg":"ffffff","colorload":"ffffff","colorover":"ffffff","buffer":{"on":0,"color":"ffffff","a":0.5},"position":"controls","margin":"0 10 35 10","handle":0,"bgpadding":"5 0 5 0","tip":1,"hide":1,"hideonlive":1,"expand":"3","linetipmarginbottom":6,"tipfont":"Open Sans","tippadding":"4 6 4 6","tipbga":"0.5","tipfontsize":11},"control_play":{"order":2,"on":1,"icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' transform=\'translate(6, 3)\'><path d=\'M0.856992949,13.5 C0.809393893,13.5 0.761794831,13.4923836 0.717595702,13.4796897 C0.584998323,13.4365304 0.5,13.3400565 0.5,13.2334275 L0.5,0.767991713 C0.5,0.66136273 0.584998323,0.562350104 0.717595702,0.521729539 C0.850193087,0.478570189 1.00319007,0.501419257 1.10518805,0.57504403 L9.74101753,6.80776195 C9.81241613,6.85853766 9.84981539,6.92708485 9.84981539,7.00070964 C9.84981539,7.07433438 9.8090162,7.14288161 9.74101753,7.19365732 L1.10518805,13.4238364 C1.0371894,13.4746121 0.948791139,13.5 0.856992949,13.5 L0.856992949,13.5 Z M1.2139859,1.40014925 L1.2139859,12.60127 L8.97603266,7.00070964 L1.2139859,1.40014925 L1.2139859,1.40014925 Z\' fill=\'#ffffff\'/></g></svg>","icon2":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' fill=\'#000000\' transform=\'translate(6, 4)\'><path d=\'M0.5,1 L0.5,11 C0.5,11.2761424 0.723857625,11.5 1,11.5 C1.27614237,11.5 1.5,11.2761424 1.5,11 L1.5,1 C1.5,0.723857625 1.27614237,0.5 1,0.5 C0.723857625,0.5 0.5,0.723857625 0.5,1 Z\' fill=\'#ffffff\'/><path d=\'M6.5,1 L6.5,11 C6.5,11.2761424 6.72385763,11.5 7,11.5 C7.27614237,11.5 7.5,11.2761424 7.5,11 L7.5,1 C7.5,0.723857625 7.27614237,0.5 7,0.5 C6.72385763,0.5 6.5,0.723857625 6.5,1 Z\' fill=\'#ffffff\'/></g></svg>","icon3":"<svg width=\'20\' height=\'20\'><g transform=\'translate(2, 3)\'><path d=\'M16,7.13661132 L16,7.10916945 L15.2081785,7.10916945 L14.275093,7.10916945 C14.275093,3.19912625 11.063197,0 7.13754645,0 C3.21189591,0 0,3.19912625 0,7.10916945 C0,11.0192126 3.21189591,14.2183389 7.13754645,14.2183389 L7.13754645,12.4410465 C4.19330855,12.4410465 1.78438662,10.0417018 1.78438662,7.10916945 C1.78438662,4.17663705 4.19330855,1.77729236 7.13754645,1.77729236 C10.0817844,1.77729236 12.4907063,4.17663705 12.4907063,7.10916945 L10.6445167,7.10916945 L13.3828996,11.5524004 L16,7.13661132 Z\' fill=\'#ffffff\'></path></g></svg>","action":"play","action2":"pause","type":"svg","scale":1.2,"scaleover":1.5,"margin":"0 0 14 17","position":"bottom-left"},"control_mute":{"order":3,"on":1,"icon":"<svg width=\'20\' height=\'20\'><g transform=\'translate(1, 1.5)\'><path d=\'M0.912384372,10.8187193 L5.07650665,10.8187193 L5.07650665,5.98783824 L0.912384372,5.98783824 L0.912384372,10.8187193 Z M5.98889102,5.19867201 L5.98889102,11.6078856 L0,11.6078856 L6.7530009e-17,5.19867201 L5.98889102,5.19867201 Z M0.912384372,10.8187193 L5.07650665,10.8187193 L5.07650665,5.98783824 L0.912384372,5.98783824 L0.912384372,10.8187193 Z M5.98889102,5.19867201 L5.98889102,11.6078856 L0,11.6078856 L6.7530009e-17,5.19867201 L5.98889102,5.19867201 Z M11.5754205,2.0961728 L11.5754205,14.8644385 L5.81659128,10.9044339 L5.24880639,11.522171 L12.4878049,16.5 L12.4878049,0.5 L5.25572401,5.27972293 L5.80967366,5.90678733 L11.5754205,2.0961728 Z\' fill-rule=\'nonzero\' fill=\'#ffffff\'></path><path d=\'M15.4097874,14.7534652 L15.0722969,14.0450074 C15.7782028,13.7348592 16.3825189,13.2715913 16.8741741,12.6738314 C17.7472331,11.6123564 18.2206851,10.165722 18.2154449,8.65213795 C18.2102093,7.13986351 17.727416,5.68960429 16.849982,4.62278894 C16.3399467,4.00266989 15.7120789,3.52595822 14.9793354,3.21334782 L15.3062199,2.5 C16.1457052,2.86167315 16.8694485,3.4114408 17.4558825,4.12444803 C18.452798,5.33653316 18.9941123,6.96258314 18.9999522,8.64942192 C19.0058019,10.3390478 18.4741217,11.9635987 17.4800697,13.1721782 C16.9143669,13.8599661 16.2179213,14.3944294 15.4097874,14.7534652 Z\' id=\'pjs_volume_element2\' fill=\'#ffffff\'></path><path d=\'M14.3785661,12.5887318 L14.0405243,11.8791166 C14.4994685,11.6999192 14.8869255,11.4095522 15.1969359,11.0218161 C15.7073318,10.383454 15.9832554,9.50183287 15.9756369,8.57363562 C15.9680285,7.6466786 15.678125,6.75709165 15.1602439,6.1071515 C14.8559493,5.72526213 14.4825315,5.43474116 14.0468372,5.2483037 L14.3737304,4.53493701 C14.9202873,4.77237525 15.3923535,5.1395521 15.7737974,5.6182638 C16.4056761,6.41127081 16.7511275,7.47130999 16.7601225,8.56719665 C16.769159,9.66816034 16.4382067,10.7256074 15.8096744,11.5117249 C15.424549,11.9934088 14.9420982,12.358438 14.3785661,12.5887318 Z\' id=\'pjs_volume_element1\' fill=\'#ffffff\'></path></g></svg>","icon2":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' fill=\'#ffffff\' transform=\'translate(1, 1.5)\'><path d=\'M0.912384372,10.8187193 L5.07650665,10.8187193 L5.07650665,5.98783824 L0.912384372,5.98783824 L0.912384372,10.8187193 Z M5.98889102,5.19867201 L5.98889102,11.6078856 L0,11.6078856 L6.7530009e-17,5.19867201 L5.98889102,5.19867201 Z M0.912384372,10.8187193 L5.07650665,10.8187193 L5.07650665,5.98783824 L0.912384372,5.98783824 L0.912384372,10.8187193 Z M5.98889102,5.19867201 L5.98889102,11.6078856 L0,11.6078856 L6.7530009e-17,5.19867201 L5.98889102,5.19867201 Z M11.5754205,2.0961728 L11.5754205,14.8644385 L5.81659128,10.9044339 L5.24880639,11.522171 L12.4878049,16.5 L12.4878049,0.5 L5.25572401,5.27972293 L5.80967366,5.90678733 L11.5754205,2.0961728 Z\' fill=\'#ffffff\'></path></g></svg>","action":"mute","action2":"unmute","type":"svg","position":"bottom-left","margin":"0 0 14 60","scaleover":"1.3","displayvolume":1},"control_volume":{"order":4,"on":1,"type":"shape","action":"volume","h":4,"rounding":0,"customwidth":1,"w":50,"a":1,"abg":"0.3","aover":"0","color":"' +
        options.color +
        '","colorbg":"ffffff","colorover":"ffffff","hide":0,"hideoutmute":1,"rotation":0,"bgpadding":"5 0 5 0","bg":0,"handle":0,"position":"bottom-left","margin":"0 0 23 105","expand":"2"},"control_time":{"order":5,"on":1,"action":"time","type":"text","text":"0:00","fontsize":20,"margin":"0 0 35 14","click":0,"separator":"/","position":"controls","font":"Open Sans","a":"1"},"control_duration":{"order":7,"on":1,"action":"duration","type":"text","text":"0:00","fontsize":20,"margin":"0 10 35 0","click":0,"font":"Open Sans"},"control_buffer":{"order":8,"on":1,"icon":"<div class=\'loader(rand)\'><svg class=\'circular(rand)\' viewBox=\'25 25 50 50\'><circle class=\'path(rand)\' stroke=\'(color)\' cx=\'50\' cy=\'50\' r=\'20\' fill=\'none\' stroke-width=\'2\' stroke-miterlimit=\'10\'/></svg></div>|||.loader(rand) {position: relative;margin: 0 auto;width: 50px;}.loader(rand):before {content: \'\';display: block;padding-top: 100%;}.circular(rand) {animation: rotate(rand) 2s linear infinite;height: 100%;transform-origin: center center;width: 100%;position: absolute;top: 0;bottom: 0;left: 0;right: 0;margin: auto;}.path(rand) {stroke-dasharray: 1, 200;stroke-dashoffset: 0;animation: dash(rand) 1.5s ease-in-out infinite;}@keyframes rotate(rand) {100% {transform: rotate(360deg);}}@keyframes dash(rand) {0% {stroke-dasharray: 1, 200;stroke-dashoffset: 0;}50% {stroke-dasharray: 89, 200;stroke-dashoffset: -35px;}100% {stroke-dasharray: 89, 200;stroke-dashoffset: -124px;}}","action":"buffer","type":"css","position":"center","scale":1,"click":0,"hide":1,"nicn":"0"},"control_settings":{"order":9,"on":1,"icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' transform=\'translate(1, 1)\'><path d=\'M5.08281025,3.78991703 L5.03897727,3.74608395 C4.85993485,3.56684222 4.61698156,3.4661285 4.36363636,3.4661285 C4.11029117,3.4661285 3.86733788,3.56684222 3.68790212,3.74647728 C3.5086604,3.9255197 3.40794668,4.16847299 3.40794668,4.42181819 C3.40794668,4.67516337 3.5086604,4.91811666 3.68809884,5.0973557 L3.7356131,5.14491297 C4.2215719,5.64171143 4.35621249,6.38427473 4.08744987,6.99077235 C3.84649788,7.64591297 3.2295466,8.08717614 2.52,8.10363636 L2.45454545,8.10363636 C1.92736456,8.10363636 1.5,8.53100092 1.5,9.05818181 C1.5,9.58536271 1.92736456,10.0127273 2.45454545,10.0127273 L2.58017596,10.0127313 C3.25774746,10.0154336 3.8690147,10.4202464 4.13379492,11.0381173 C4.41439432,11.6739071 4.27975371,12.4164704 3.78991707,12.9171897 L3.74608395,12.9610227 C3.56684221,13.1400652 3.4661285,13.3830184 3.4661285,13.6363636 C3.4661285,13.8897088 3.56684221,14.1326621 3.74647728,14.3120978 C3.92551973,14.4913396 4.16847303,14.5920533 4.42181819,14.5920533 C4.67516333,14.5920533 4.91811663,14.4913396 5.09735565,14.3119012 L5.14491301,14.2643868 C5.64171146,13.7784281 6.3842747,13.6437875 6.99077242,13.9125501 C7.645913,14.1535022 8.08717614,14.7704535 8.10363636,15.48 L8.10363636,15.5454545 C8.10363636,16.0726354 8.53100092,16.5 9.05818181,16.5 C9.58536272,16.5 10.0127273,16.0726354 10.0127273,15.5454545 L10.0127313,15.419824 C10.0154336,14.7422525 10.4202464,14.1309854 11.0381173,13.8662051 C11.673907,13.5856057 12.4164704,13.7202463 12.9171898,14.210083 L12.9610227,14.2539161 C13.1400652,14.4331578 13.3830184,14.5338715 13.6363636,14.5338715 C13.8897088,14.5338715 14.1326621,14.4331578 14.3120978,14.2535228 C14.4913396,14.0744803 14.5920533,13.831527 14.5920533,13.5781819 C14.5920533,13.3248367 14.4913396,13.0818833 14.3119011,12.9026443 L14.2643868,12.855087 C13.7784281,12.3582886 13.6437875,11.6157253 13.9243868,10.9799356 C14.1891671,10.3620646 14.8004344,9.95725182 15.48,9.95454545 L15.5454545,9.95454545 C16.0726354,9.95454545 16.5,9.5271809 16.5,9 C16.5,8.4728191 16.0726354,8.04545455 15.5454545,8.04545455 L15.419824,8.04545057 C14.7422525,8.04274818 14.1309854,7.63793546 13.8640665,7.01514756 L13.8405379,6.90052192 C13.5945876,6.27881012 13.7359232,5.5675044 14.210083,5.0828102 L14.2539161,5.03897728 C14.4331578,4.85993487 14.5338715,4.61698159 14.5338715,4.36363636 C14.5338715,4.11029113 14.4331578,3.86733785 14.2535228,3.68790213 C14.0744803,3.50866039 13.831527,3.40794668 13.5781819,3.40794668 C13.3248367,3.40794668 13.0818833,3.50866042 12.9026442,3.68809888 L12.855087,3.73561306 C12.3582887,4.22157189 11.6157253,4.3562125 10.9848525,4.07775173 C10.3620646,3.8108329 9.95725182,3.19956566 9.95454545,2.52 L9.95454545,2.45454545 C9.95454545,1.92736455 9.5271809,1.5 9,1.5 C8.4728191,1.5 8.04545455,1.92736455 8.04545455,2.45454545 L8.04545057,2.58017597 C8.04274818,3.25774748 7.63793544,3.86901471 7.01514753,4.13593355 L6.90052189,4.15946214 C6.27881011,4.40541232 5.56750441,4.26407681 5.08281025,3.78991703 Z M15.4218181,7.04545455 L15.5454545,7.04545455 C16.6249202,7.04545455 17.5,7.92053434 17.5,9 C17.5,10.0794657 16.6249202,10.9545455 15.5454545,10.9545455 L15.4819942,10.9545415 C15.2029941,10.9556542 14.9512958,11.1223418 14.841388,11.3787839 C14.7237086,11.6454966 14.7791488,11.951258 14.9753715,12.1519011 L15.0188112,12.1953409 C15.3858299,12.5619516 15.5920533,13.0594274 15.5920533,13.5781819 C15.5920533,14.0969363 15.38583,14.594412 15.0192045,14.9606294 C14.6525938,15.3276482 14.1551181,15.5338715 13.6363636,15.5338715 C13.1176092,15.5338715 12.6201334,15.3276482 12.2537194,14.9608261 L12.2140039,14.9210677 C12.0094398,14.720967 11.7036785,14.6655267 11.4369658,14.7832063 C11.1805236,14.8931141 11.013836,15.1448123 11.0127273,15.4218181 L11.0127273,15.5454545 C11.0127273,16.6249202 10.1376475,17.5 9.05818181,17.5 C7.97871617,17.5 7.10363636,16.6249202 7.10363636,15.5454545 L7.10377309,15.4916923 C7.09705165,15.2043406 6.91535503,14.9503018 6.6162992,14.8392495 C6.35450339,14.7237086 6.04874198,14.7791488 5.84809888,14.9753715 L5.80465909,15.0188112 C5.4380484,15.38583 4.9405726,15.5920533 4.42181819,15.5920533 C3.90306376,15.5920533 3.40558797,15.38583 3.0393706,15.0192045 C2.67235183,14.6525938 2.4661285,14.1551181 2.4661285,13.6363636 C2.4661285,13.1176092 2.67235183,12.6201334 3.03917384,12.2537194 L3.07893234,12.2140039 C3.27903302,12.0094398 3.33447327,11.7036784 3.21679373,11.4369657 C3.10688596,11.1805236 2.85518769,11.013836 2.57818181,11.0127273 L2.45454545,11.0127273 C1.37507981,11.0127273 0.5,10.1376475 0.5,9.05818181 C0.5,7.97871617 1.37507981,7.10363636 2.45454545,7.10363636 L2.50830771,7.10377309 C2.79565948,7.09705165 3.04969824,6.91535506 3.16075052,6.61629913 C3.27629145,6.35450336 3.2208512,6.04874201 3.02462842,5.84809884 L2.98118878,5.80465909 C2.61417002,5.43804841 2.40794668,4.94057262 2.40794668,4.42181819 C2.40794668,3.90306374 2.61417001,3.40558795 2.98079545,3.0393706 C3.34740614,2.67235183 3.84488192,2.4661285 4.36363636,2.4661285 C4.8823908,2.4661285 5.37986659,2.67235183 5.74628067,3.03917388 L5.78599612,3.07893235 C5.99056019,3.27903302 6.29632154,3.33447327 6.55811733,3.21893235 L6.66441407,3.19651876 C6.89622286,3.0779487 7.04440933,2.83931003 7.04545455,2.57818181 L7.04545455,2.45454545 C7.04545455,1.37507981 7.92053435,0.5 9,0.5 C10.0794656,0.5 10.9545455,1.37507981 10.9545455,2.45454545 L10.9545415,2.51800584 C10.9556542,2.79700587 11.1223418,3.04870415 11.3837009,3.16075052 C11.6454966,3.27629145 11.951258,3.2208512 12.1519012,3.02462838 L12.1953409,2.98118877 C12.5619516,2.61417002 13.0594274,2.40794668 13.5781819,2.40794668 C14.0969363,2.40794668 14.594412,2.61417001 14.9606294,2.98079546 C15.3276482,3.34740613 15.5338715,3.84488191 15.5338715,4.36363636 C15.5338715,4.88239081 15.3276482,5.37986659 14.9608261,5.74628071 L14.9210676,5.78599614 C14.720967,5.9905602 14.6655267,6.29632153 14.7810677,6.5581173 L14.8034812,6.66441404 C14.9220513,6.89622288 15.1606899,7.04440933 15.4218181,7.04545455 Z\' fill=\'#ffffff\'></path><path d=\'M9,12.5909091 C7.01679567,12.5909091 5.40909091,10.9832043 5.40909091,9 C5.40909091,7.01679567 7.01679567,5.40909091 9,5.40909091 C10.9832043,5.40909091 12.5909091,7.01679567 12.5909091,9 C12.5909091,10.9832043 10.9832043,12.5909091 9,12.5909091 Z M9,11.5909091 C10.4309196,11.5909091 11.5909091,10.4309196 11.5909091,9 C11.5909091,7.56908042 10.4309196,6.40909091 9,6.40909091 C7.56908042,6.40909091 6.40909091,7.56908042 6.40909091,9 C6.40909091,10.4309196 7.56908042,11.5909091 9,11.5909091 Z\' fill=\'#ffffff\'></path></g></svg>","action":"settings","position":"bottom-right","margin":"0 60 12 0","type":"svg","scaleover":"1.3","scale":"1.1","hdicon":1,"hdicon2":1,"hdiconlist":"720:HD,1080:FHD,2160:4K"},"control_playlist":{"order":10,"on":1,"icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' transform=\'translate(2, 3)\'><path d=\'M0,0 L16,0 L16,2 L0,2 L0,0 Z M0,6 L16,6 L16,8 L0,8 L0,6 Z M0,12 L16,12 L16,14 L0,14 L0,12 Z\' fill=\'#ffffff\'/></g></svg>","action":"playlist","position":"bottom-right","margin":"0 100 12 0","bg":0,"scale":"1.2","type":"svg","animation":"none","bgpadding":"3 3 3 3","bga":0.4,"bgaover":0.8,"tip":0,"scaleover":"1.4"},"control_full":{"order":11,"on":1,"icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' transform=\'translate(1, 1)\'><path d=\'M6.67440511,0 L6.67440511,1.74193548 L1.74114916,1.74193548 L1.74114916,6.67741935 L0,6.67741935 L0,0 L6.67440511,0 Z M18,0 L18,6.67741935 L16.2588508,6.67741935 L16.2588508,1.74193548 L11.3255949,1.74193548 L11.3255949,0 L18,0 Z M1.74114916,11.3225806 L1.74114916,16.2580645 L6.67440511,16.2580645 L6.67440511,18 L0,18 L0,11.3225806 L1.74114916,11.3225806 Z M18,11.3225806 L18,18 L11.3255949,18 L11.3255949,16.2580645 L16.2588508,16.2580645 L16.2588508,11.3225806 L18,11.3225806 Z\' fill=\'#ffffff\'/></g></svg>","icon2":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' fill=\'#000000\' transform=\'translate(1, 1)\'><path d=\'M0,6.67741935 L0,4.93548387 L4.93325595,4.93548387 L4.93325595,-8.8817842e-16 L6.67440511,-8.8817842e-16 L6.67440511,6.67741935 L0,6.67741935 Z M11.3255949,6.67741935 L11.3255949,0 L13.0667441,0 L13.0667441,4.93548387 L18,4.93548387 L18,6.67741935 L11.3255949,6.67741935 Z M4.93325595,18 L4.93325595,13.0645161 L-8.8817842e-16,13.0645161 L-8.8817842e-16,11.3225806 L6.67440511,11.3225806 L6.67440511,18 L4.93325595,18 Z M11.3255949,18 L11.3255949,11.3225806 L18,11.3225806 L18,13.0645161 L13.0667441,13.0645161 L13.0667441,18 L11.3255949,18 Z\' fill=\'#ffffff\'/></g></svg>","action":"fullscreen","action2":"normalscreen","type":"svg","position":"bottom-right","margin":"0 18 12 0","scaleover":"1.2"},"control_start":{"order":12,"position":"center","scale":"2.9","on":1,"icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' transform=\'translate(6, 3)\'><path d=\'M0.856992949,13.5 C0.809393893,13.5 0.761794831,13.4923836 0.717595702,13.4796897 C0.584998323,13.4365304 0.5,13.3400565 0.5,13.2334275 L0.5,0.767991713 C0.5,0.66136273 0.584998323,0.562350104 0.717595702,0.521729539 C0.850193087,0.478570189 1.00319007,0.501419257 1.10518805,0.57504403 L9.74101753,6.80776195 C9.81241613,6.85853766 9.84981539,6.92708485 9.84981539,7.00070964 C9.84981539,7.07433438 9.8090162,7.14288161 9.74101753,7.19365732 L1.10518805,13.4238364 C1.0371894,13.4746121 0.948791139,13.5 0.856992949,13.5 L0.856992949,13.5 Z M1.2139859,1.40014925 L1.2139859,12.60127 L8.97603266,7.00070964 L1.2139859,1.40014925 L1.2139859,1.40014925 Z\' fill=\'#ffffff\'/></g></svg>","icon3":"<svg width=\'20\' height=\'20\'><g transform=\'translate(2, 3)\'><path d=\'M16,7.13661132 L16,7.10916945 L15.2081785,7.10916945 L14.275093,7.10916945 C14.275093,3.19912625 11.063197,0 7.13754645,0 C3.21189591,0 0,3.19912625 0,7.10916945 C0,11.0192126 3.21189591,14.2183389 7.13754645,14.2183389 L7.13754645,12.4410465 C4.19330855,12.4410465 1.78438662,10.0417018 1.78438662,7.10916945 C1.78438662,4.17663705 4.19330855,1.77729236 7.13754645,1.77729236 C10.0817844,1.77729236 12.4907063,4.17663705 12.4907063,7.10916945 L10.6445167,7.10916945 L13.3828996,11.5524004 L16,7.13661132 Z\' fill=\'#ffffff\'></path></g></svg>","action":"play","type":"svg","bg":1,"bgcolor":"000000","bgo":"1","bgpadding":"7 7 7 7","iconmargin":"0 0 0 4","bga":0.3,"bgaover":"0.4","scaleover":"3.2","hide":1,"hideonplay":1,"hideonyoutube":1,"iconsreplay":0},"control_live":{"order":13,"on":0,"text":"live","letterspacing":2,"action":"live","type":"text","hand":0,"click":0,"fontsize":10,"margin":"0 0 0 15","a":0.5,"hide":1,"hideonvod":1},"control_stop":{"order":14,"on":0,"icon":"<svg width=\'20\' height=\'20\'><g transform=\'translate(4, 4)\'><rect x=\'0\' y=\'0\' width=\'12\' height=\'12\' fill=\'#ffffff\'/></g></svg>","action":"stop","type":"svg","bg":0},"control_prev":{"order":15,"on":0,"icon":"<svg width=\'20\' height=\'20\'><g transform=\'translate(5.5, 5)\'><path d=\'M8.99999,10.43749 L8.99999,10.4375 L2,5.21875 L8.99999,0 L8.99999,10.43749 Z M0,0 L2,0 L2,10.24983 L0,10.24983 L0,0 Z\' fill=\'#ffffff\'/></g></svg>","action":"prev","type":"svg","scale":1.2,"position":"controls","margin":"0 0 0 15"},"control_next":{"order":16,"on":0,"icon":"<svg width=\'20\' height=\'20\'><g transform=\'translate(5, 5)\'><path d=\'M0.46948,1e-05 L0.46948,1e-05 L0.46948,0 L7.46947,5.21875 L0.46948,10.4375 L0.46948,1e-05 Z M7.53052,0 L9.53052,0 L9.53052,10.62482 L7.53052,10.62482 L7.53052,0 Z\' fill=\'#ffffff\'/></g></svg>","action":"next","type":"svg","scale":1.2,"position":"controls","margin":"0 0 0 15"},"control_share":{"order":17,"on":0,"icon":"<svg width=\'20\' height=\'20\'><g transform=\'translate(1, 3)\'><path d=\'M10.5227503,12.3484128 L10.5227503,9.30339401 C5.53658648,9.11950898 2.53480989,11.3896981 0,13.9125305 C0,7.91592519 5.22696877,3.19271536 10.5227503,3.1398601 L10.5227503,0.117647059 L18.0035818,6.23302993 L10.5227503,12.3484128 Z\' fill=\'#ffffff\'/></g></svg>","action":"share","type":"svg","position":"top-right","margin":"15 15 0 0","bg":1,"bgo":1,"scale":1,"bgpadding":"6 6 6 6","bga":0.3,"bgaover":0.6,"animation":"position","ease":"elastic"},"lang":"ru","fonts":0,"fontnames":"Open Sans:300,Open Sans Condensed:300","settings":{"settings4":0,"settings4action":"","margin":"0 0 40 0","valuecolor":"' +
        options.color +
        '","settings5":0,"settings2":1,"settings2action":"speed","combined":0,"combinednotitle":0,"combinedsize":85,"combinedbgcolor":"000000","bga":"0.7","bgcolorover":"252525","customspeeds":0,"speeds":"0.25,0.5,0.75,1,1.25,1.5,2","fontsize":12,"show1value":0,"customqualities":0,"bgaover":"-1"},"control_abn7M":{"on":1,"order":18,"action":"custom","icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' fill=\'#ffffff\' transform=\'translate(1.5, 3)\'><path d=\'M3.29174805,11.4443359 L2.52783203,11.4443359 C1.96017608,11.4443359 1.5,10.9841599 1.5,10.4165039 L1.5,2.77734375 C1.5,2.20968779 1.96017608,1.74951172 2.52783203,1.74951172 L14.7504883,1.74951172 C15.3181442,1.74951172 15.7783203,2.20968779 15.7783203,2.77734375 L15.7783203,10.4165039 C15.7783203,10.9841599 15.3181442,11.4443359 14.7504883,11.4443359 L13.9865723,11.4443359 C13.7104299,11.4443359 13.4865723,11.6681936 13.4865723,11.9443359 C13.4865723,12.2204783 13.7104299,12.4443359 13.9865723,12.4443359 L14.7504883,12.4443359 C15.870429,12.4443359 16.7783203,11.5364446 16.7783203,10.4165039 L16.7783203,2.77734375 C16.7783203,1.65740304 15.870429,0.749511719 14.7504883,0.749511719 L2.52783203,0.749511719 C1.40789133,0.749511719 0.5,1.65740304 0.5,2.77734375 L0.5,10.4165039 C0.5,11.5364446 1.40789133,12.4443359 2.52783203,12.4443359 L3.29174805,12.4443359 C3.56789042,12.4443359 3.79174805,12.2204783 3.79174805,11.9443359 C3.79174805,11.6681936 3.56789042,11.4443359 3.29174805,11.4443359 Z\' fill=\'#ffffff\'></path><path d=\'M5.88710088,14.5 L11.3912194,14.5 L8.63916016,11.1975289 L5.88710088,14.5 Z M9.0232708,10.0964117 L12.8428509,14.6799078 C13.1142371,15.0055713 12.8826591,15.5 12.4587402,15.5 L4.81958008,15.5 C4.39566125,15.5 4.16408322,15.0055713 4.43546944,14.6799078 L8.25504952,10.0964117 C8.45494707,9.85653464 8.82337324,9.85653464 9.0232708,10.0964117 Z\' fill=\'#ffffff\'></path></g></svg>","type":"svg","position":"top-right","margin":"14 20 0 0","link":1,"linkurl":"airplay","scale":"1","tip":1,"tiptext":"Просмотр на телевизоре","bg":0,"bgpadding":"5 5 5 5","iconmargin":"5 5 5 5","bgaover":"0.6","bga":"0.5","bgcolorover":"252525"},"playlist":{"color":"ffffff","valuecolor":"' +
        options.color +
        '","floatleft":1,"autoplaylist":1,"position":"bottom-left","padding":"10 10 10 15","floatlimitwidth":0,"hidecontrol":0,"openplaylistbefore":0,"openplaylistroot":1,"openplaylistpause":1,"openplaylistafter":1,"margin":"0 20 40 20","always":1,"floatheight":40,"alwaysnotfullscreen":0,"historytitlestrike":0,"bga":"0.5","bgcolor":"000000","bgaover":"0.6","bgcolorover":"252525","historybgcolor":"252525","droplist":0,"dropautoplay":0,"dropclrs":1,"autohide":1,"floatmarginright":0,"hmaxk":30,"borderbottom":1,"width100":1,"noprevicon":0,"fontsize":14,"font":"","scrollarrows":1,"hidesmoothly":0,"bordercolor":"444444","historybga":"1","historybgaover":"0.6","scrollarrowbg":1,"scrollarrowbgover":1,"scrollarrowbgovercolor":"444444","scrollarrowbgcolor":"252525"},"control_VEM33":{"on":1,"order":19,"action":"custom","icon":"<svg width=\'20\' height=\'20\'><g fill-rule=\'nonzero\' fill=\'#ffffff\' transform=\'translate(1.5, 3)\'><path d=\'M0,12.2727273 L0,14.7272727 L2.45454545,14.7272727 C2.45454545,13.3690909 1.35818182,12.2727273 0,12.2727273 L0,12.2727273 Z M0,9 L0,10.6363636 C2.25818182,10.6363636 4.09090909,12.4690909 4.09090909,14.7272727 L5.72727273,14.7272727 C5.72727273,11.5609091 3.16636364,9 0,9 L0,9 Z M0,5.72727273 L0,7.36363636 C4.06636364,7.36363636 7.36363636,10.6609091 7.36363636,14.7272727 L9,14.7272727 C9,9.75272727 4.96636364,5.72727273 0,5.72727273 L0,5.72727273 Z M16.3636364,0 L1.63636364,0 C0.736363636,0 0,0.736363636 0,1.63636364 L0,4.09090909 L1.63636364,4.09090909 L1.63636364,1.63636364 L16.3636364,1.63636364 L16.3636364,13.0909091 L10.6363636,13.0909091 L10.6363636,14.7272727 L16.3636364,14.7272727 C17.2636364,14.7272727 18,13.9909091 18,13.0909091 L18,1.63636364 C18,0.736363636 17.2636364,0 16.3636364,0 L16.3636364,0 Z\' fill=\'#ffffff\'></path></g></svg>","type":"svg","position":"top-right","margin":"14 20 0 0","link":1,"linkurl":"chromecast","hide":0,"hideonplay":1,"hideonfullscreen":0,"bg":0,"scale":"1","tip":1,"tiptext":"Просмотр на телевизоре","bgpadding":"5 5 5 5","bgaover":"0.6","bga":"0.5","bgcolorlink2":"-1","bgcolorover":"252525","iconmargin":"5 5 5 5"},"chromecast":{"on":1},"effects":0,"preload":0,"volume":"0.7","covervideo":0,"hls":0,"hlschangequality":"next","hlsconfig":{"maxBufferLength":60},"hlsdebug":0,"eventstracker":1,"aspect":"off","playerheight":360,"timestore":1,"mutestore":1,"landfullmobile":1,"landscapefull":0,"vast":1,"prerolls":1,"partnerpreroll_1":"","vast_poster":0,"vastbgpreload":1,"postmessage":1,"partnerpreroll_2":"","partnerpreroll_3":"","partnerprerollor2":"def","partnerprerollor3":"def","partnerprerollor1":"def","stopotherplayers":0,"reload":0,"reloadlive":0,"finishrewind":0,"postrolls":0,"partnerpostroll_1":"","channels":0,"midrolls":0,"partnermidroll_1":"","partnermidrolltimes":"50%","vast_longtimeout":"0.5","ynxnopip":1,"ab":0,"rc_custom":1,"rc_version":0,"rc_anyway":1,"rc_label":"BAZON PLAYER","nativecontrolsmobile":0,"nativenotandroid":1,"nativenotios":1,"nativenotipad":1,"nativenotiphone":1,"nativenodownload":1,"nativeontv":1,"playsinlineonmobile":1,"playonhover":0,"volumegain":"1.6","tagcors":1,"control_u3F3B":{"on":0,"text":"ОТКЛЮЧИТЕ ADBLOCK","order":20,"action":"custom","type":"text","position":"top","bg":1,"bgpadding":"5 5 5 5","bgcolor":"ff0000","margin":"0 0 0 0","animation":"none","bold":1,"triangle":0,"link":0,"click":0,"fontsize":12,"bgstretch":1,"hide":1,"hidenoab":1,"tip":0},"vast_preroll_vmap":0,"vast_preroll_counter":1,"vast_preroll_andlimit":-1,"partnerprerollor":"and","vast_preroll_limit":1,"partnerpreroll_4":"","vast_postroll_limit":20,"posteronpause":0,"hotkey":{"seeksides":1},"playedstore":1,"timestore0plroot":1,"partnerprerollor4":"def","partnerpreroll_5":"","partnerprerollor5":"def","partnerpreroll_6":"","vast_longtimemsg":"Загрузка","qualitystore":1,"pip":{"on":0},"base64":0,"file3_separator":"@","bk0":"a1!","bk1":"b2@","bk2":"c3#","bk3":"d4$","bk4":"e5%","fplace":0,"eventstrackervast":1,"pass":0,"mobileseek":1,"nativefullios":1,"playsinlineonmobileiphone":0,"fpv1":"","noyt":1,"sub_size":20,"sub_size_fullscreen":26,"sub_sizemob":-1,"tryotherquality":1,"nativefulldroid":0,"volumestore":1,"apiprm":{"on":0},"youtubeposter":0,"hlsforce":0,"hlsautoquality":1,"hlslowquality":0,"hlsqhsort":0,"hlsaudio":0,"trackstore":0,"speedstore":0}',
      u2: "",
      u3: "",
      u4: "",
      u5: "",
      u6: "",
      u7: "",
      u8: "",
      u9: "",
      y: "xx???x=xx?xxx=",
      p: "",
      isflash: -1,
      brand: "playerjs",
      brandurl: "//playerjs.com",
      motions: [],
      dt: !0,
      pr: !0,
      ga: !1,
      ab: !1,
      gatracked: [],
      pjsga: !1,
      pltxt: "//.txt//",
      files_quality: [],
      files_audiotrack: [],
      files_quality_ag: [],
      files_subtitle: [],
      files_channel: [],
      plhistory: [],
      rightclick: 0,
      vastclick: !1,
      focus: !1,
      start: !1,
      start2: !1,
      metadata: !1,
      small: window.screen.width < 1e3 && window.screen.height < 1e3,
      moving: [],
      moved: [],
      piped: 0,
      subtitle_on: !1,
      starttimeout: !1,
      thumbs_on: !1,
      thumbs_img: [],
      noads: !1,
      clicks: 0,
      airplayed: !1,
      timerInterval: void 0,
      toolbarInterval: void 0,
      toolbarhidden: !1,
      HhrQHEyE: function (e) {},
      reloaderTimer: 0,
      timerTime: 200,
      tagvideo: !1,
      controlover: !1,
      doctype: document.doctype,
      d: location.hostname,
      domain: location.hostname,
      href: location.href,
      https: 0 == location.href.indexOf("https"),
      logos: {},
      gaurl: "",
      fd: ["HhrQHEyE", "zYtDsEGy"],
      files_speed: [],
      files_scale: [],
      files_sleep: [],
      custom_speed: 1,
      gifed: [],
      zYtDsEGy: function (e) {},
      time: 0,
      timeld: 0,
      casting: !1,
      dk: -1,
      current_speed: 3,
      current_sleep: 0,
      vastgo: 0,
      reloadTimer: 0,
      mediascale: {
        x: 1,
        y: 1,
        x0: 1,
        y0: 1,
      },
      sub_options: [
        "sub_sizeproc",
        "sub_color",
        "sub_color2",
        "sub_bgcolor",
        "sub_bga",
        "sub_shadow",
        "sub_weight",
        "sub_bottom",
        "sub_shift",
        "sub_reset",
      ],
      vast_impressions: 0,
      vast_impressions_all: 0,
      vast_starts: 0,
      vast_longtimeout: 0,
      midrollimprsd: [],
      vsts: ["preroll", "pauseroll", "postroll", "midroll"],
      vast_remove: [],
      adsfirst: !0,
      overlays: [],
      stuck: 0,
      ws: "ws",
      acted: !1,
      quartile: [!1, !1, !1],
    },
    default_style = {
      but: {
        w: 20,
        h: 20,
        action: "-",
        action_back: "-",
        a: 1,
        aover: -1,
        color: "ffffff",
        type: "",
        scale: 1,
        scaleover: -1,
        rotation: 0,
        tip: 0,
        icon: "",
        text: "",
        font: "Verdana",
        fontsize: 12,
        letterspacing: 0,
        position: "controls",
        margin: "0 3 0 3",
        marginproc: "0 0 0 0",
        click: 1,
        clickmargin: "0 0 0 0",
        normalonclick: 0,
        hand: 1,
        bg: 0,
        bgo: 0,
        bgstretch: 0,
        bga: 1,
        bgaover: -1,
        bgcolor: "000000",
        bgcolorover: -1,
        bgpadding: "0 0 0 0",
        bgborder: -1,
        bgbordercolor: "ffffff",
        iconscolor: -1,
        iconscolorover: -1,
        animation: "none",
        target: "_blank",
        tipbgcolor: "000000",
        tipbga: 0.7,
        tipbgrounding: 0,
        tipcolor: "ffffff",
        tippadding: "3 5 3 5",
        tippmargin: "0 0 0 0",
        tipa: 1,
        tipfont: "sans-serif",
        tipfontsize: 11,
        tipletterspacing: 0,
        tiptext: "",
        linetipmarginbottom: 5,
        toptip: 0,
        hidden: 0,
        stripsw: 2,
        stripsspace: 2,
        linespeed1: 0.2,
        linespeed2: 0,
        linespeed3: 0.1,
        pointed: 0,
        pointcolor: "ffce00",
        pointa: 1,
        pointw: 5,
        gradientcolorbg: "000000",
        gradientcolorload: "ffffff",
        gradientcolor: "ffffff",
        ontop: 1,
        clickscalex: 1,
        clickscaley: 1,
        rounding: 0,
        handle: 0,
        handle_width: 20,
        handleicon:
          "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",
        handlea: 1,
        handleaover: -1,
        handlehide: 0,
        handlescale: 1,
        handlecolor: -1,
        slidespeed: 0.1,
        link: 0,
        linkurl: "",
        linkpause: 0,
        linktarget: "_blank",
        src: "",
        hideonwidthlimit: 700,
        hideoverwidthlimit: 700,
        displayvolume: 0,
        value: 0,
        valuecolor: "ffffff",
        valuebg: 0,
        valuebgcolor: "000000",
        valuesize: 9,
        valuemargin: "0 0 10 0",
        valuepadding: "0 0 0 0",
        valuerounding: 0,
      },
    };
  function prtObj() {
    if (1 == v.vast && "" != o.p) {
      for (var e = JSON.parse(decode(o.p)), t = 0; t < e.x.length; t++) {
        exist(v[e.x[t]]) || (v[e.x[t]] = "");
        for (var i = 1; i < 10; i++) {
          var s,
            n,
            a,
            r = v[e.x[t] + "_deny"] ? v[e.x[t] + "_deny"].split(",") : [],
            l = v["partner" + e.x[t] + "_" + i];
          exist(l) &&
            "" != l &&
            ("midroll" == e.x[t] && 1 == i && (v[e.x[t]] = ""),
            (s = e[l]),
            exist(s) &&
              ("midroll" == (a = e.x[t]) && (a = "preroll"),
              v["partner" + e.x[t] + "deny" + i] &&
                "" != v["partner" + e.x[t] + "deny" + i] &&
                -1 <
                  v["partner" + e.x[t] + "deny" + i]
                    .split(",")
                    .indexOf(o.domain) &&
                (s[a] = ""),
              v["partner" + e.x[t] + "accept" + i] &&
                "" != v["partner" + e.x[t] + "accept" + i] &&
                -1 ==
                  v["partner" + e.x[t] + "accept" + i]
                    .split(",")
                    .indexOf(o.domain) &&
                (s[a] = ""),
              s.id && -1 < r.indexOf(s.id) && (s[a] = ""),
              s[a] &&
                "" != s[a] &&
                ((s[a] = s[a].replace(" and ", "")),
                (s[a] = s[a].replace("http://", "//")),
                v["partner" + e.x[t] + "geo" + i] &&
                  "" != v["partner" + e.x[t] + "geo" + i] &&
                  (s[a] =
                    s[a] + "[geo:" + v["partner" + e.x[t] + "geo" + i] + "]"),
                (n = v["partner" + e.x[t] + "or"]),
                (r = 1 < i ? v["partner" + e.x[t] + "or" + (i - 1)] : "def"),
                "or50" == v["partner" + e.x[t] + "or" + i] &&
                  ((s[a] = s[a] + "[50%]"),
                  (v["partner" + e.x[t] + "or" + i] = "or")),
                "stop" == v["partner" + e.x[t] + "or" + i] &&
                  ((s[a] = s[a] + "[stop]"),
                  (v["partner" + e.x[t] + "or" + i] = "and")),
                (a =
                  "prt" +
                  (exist(s.cpm) ? "cpm" + s.cpm : "") +
                  (0 == l.indexOf("myvast")
                    ? l
                    : s.title.substr(0, s.title.indexOf(" "))) +
                  (exist(s.imp) ? "[imp]" + s.imp : "") +
                  "_" +
                  (exist(s.pimp) ? "[pimp]" + s.pimp + "**" : "") +
                  s[a]),
                "midroll" == e.x[t]
                  ? (v["midroll" + (1 == i ? "" : i)] = a)
                  : (v[e.x[t]] +=
                      ("" != v[e.x[t]]
                        ? " " + (exist(r) && "def" != r ? r : n) + " "
                        : "") + a))));
        }
      }
      if (1 == v.midrolls)
        for (var c = 1; c < 8; c++) {
          var d = 1 == c ? "" : c;
          if (
            "string" == typeof v["midroll" + d] &&
            "prt" == v["midroll" + d].substr(0, 3) &&
            exist(v["partnermidrolltimes" + d]) &&
            exist(v["midroll" + d]) &&
            "" != v["partnermidrolltimes" + d]
          ) {
            o.midrollo || (o.midrollo = []);
            for (
              var u = v["partnermidrolltimes" + d].split(","), t = 0;
              t < u.length;
              t++
            ) {
              for (var p = !1, f = 0; f < o.midrollo.length; f++)
                o.midrollo[f].time == trim(u[t]) &&
                  ((o.midrollo[f].vast =
                    o.midrollo[f].vast +
                    " " +
                    v.partnermidrollor +
                    " " +
                    v["midroll" + d]),
                  (p = !0));
              p ||
                o.midrollo.push({
                  time: trim(u[t]),
                  vast: v["midroll" + d],
                });
            }
          }
        }
    }
    o.prted = !0;
  }
  function fd0(e) {
    if (-1 == e.indexOf(".")) {
      for (e = e.substr(1), s2 = "", i = 0; i < e.length; i += 3)
        s2 += "%u0" + e.slice(i, i + 3);
      e = unescape(s2);
    }
    return e;
  }
  function optStr() {
    if (
      ("" != o.u && (v = UpdateObject(v, JSON.parse(decode(o.u)))),
      0 == options.indexOf("#" + v.enc2))
    )
      try {
        options = JSON.parse(o[o.fd[0]](options));
      } catch (e) {}
    else if (0 == options.indexOf("#" + v.enc3))
      try {
        options = JSON.parse(o[o.fd[1]](options));
      } catch (e) {}
  }
  function SettingsTimers(e) {}
  function Touch(e, t) {
    var i;
    1 == v.mobileseek &&
      ((!o.fullscreen && 1 == v.mobileseekfull) ||
        ("start" == e &&
          (-1 < o.mobileseektime
            ? -1 < o.mobileseekstart &&
              (hide2(o.mobileseek),
              (o.nopause = !1),
              o.nopauseplay && o.media.Play(),
              o.actions.Seek(o.mobileseekstart, !0),
              (o.mobileseekstart = -1),
              (o.nopauseplay = !1),
              (o.mobileseeknow = -1),
              (o.mobileseektime = -1))
            : ((o.mobileseekstart = o.media.time()),
              (o.mobileseektime = -1),
              (o.mobileseeknow = new Date().getTime()))),
        "move" == e &&
          ((i = new Date().getTime()),
          -1 == o.mobileseektime &&
            0 < o.mobileseekstart &&
            (exist(o.mobileseek)
              ? show2(o.mobileseek)
              : ((o.mobileseek = createElement("div")),
                o.frame.appendChild(o.mobileseek),
                css(o.mobileseek, {
                  position: "absolute",
                  top: 0,
                  height: "100%",
                }))),
          -1 < o.mobileseeknow &&
            0 < o.mobileseekstart &&
            200 < i - o.mobileseeknow &&
            o.mobileseek &&
            (i = t.changedTouches[0].pageX) &&
            (o.fullscreen || (i -= findLeft(o.frame)),
            (t = o.media.duration()),
            i > o.screen_w / 2
              ? css(o.mobileseek, {
                  left: "auto",
                  right: o.screen_w - i + "px",
                  padding: "20% 0",
                  border: 0,
                  "border-right":
                    "1px " +
                    (v.mobileseekln || "solid") +
                    " " +
                    hex2rgb(v.mobileseekclr || "ffffff", v.mobileseeka || 0.5),
                })
              : css(o.mobileseek, {
                  left: i + "px",
                  right: "auto",
                  padding: "20% 0",
                  border: 0,
                  "border-left":
                    "1px " +
                    (v.mobileseekln || "solid") +
                    " " +
                    hex2rgb(v.mobileseekclr || "ffffff", v.mobileseeka || 0.5),
                }),
            0 < t &&
              (i < o.screen_w && 0 < i
                ? ((o.mobileseektime = (t * i) / o.screen_w),
                  o.play && (o.nopauseplay = !0),
                  (o.nopause = !0),
                  o.media.Pause(),
                  o.actions.Seek(o.mobileseektime, !0))
                : (o.mobileseektime = -1),
              1 != v.mobileseeknotime &&
                (o.mobileseek.innerHTML =
                  "<pjsdiv style='background:rgba(0,0,0,0.5);padding:2px 6px;'>" +
                  timeFormat((t * i) / o.screen_w) +
                  "</pjsdiv>"))))),
      "end" == e &&
        o.mobileseek &&
        isVisible(o.mobileseek) &&
        (hide2(o.mobileseek),
        (o.nopause = !1),
        o.nopauseplay && o.media.Play(),
        (o.mobileseekstart = -1),
        (o.nopauseplay = !1),
        (o.mobileseeknow = -1),
        (o.mobileseektime = -1)));
  }
  var Alert = function () {
    var i = createElement("div");
    o.frame.appendChild(i),
      css(i, {
        position: "absolute",
        left: 0,
        top: 0,
        width: "100%",
        height: 30,
        "background-color": v.alertsbgcolor,
        opacity: v.alertsbga,
        display: "none",
      });
    var s = createElement("div");
    o.frame.appendChild(s),
      css(s, {
        position: "absolute",
        left: 0,
        top: 0,
        width: "100%",
        color: v.alertscolor,
        "font-size": v.alertsfontsize,
        padding: v.alertspaddingv + "px " + v.alertspaddingh + "px",
        display: "none",
      }),
      (this.txt = function (e, t) {
        (s.innerHTML = e),
          show2(s),
          css(i, {
            height: s.offsetHeight,
            display: "block",
          }),
          (i.style.zIndex = "1005");
        for (var o = 0; o < s.getElementsByTagName("a").length; o++)
          s.getElementsByTagName("a")[o].style.color = "#fff";
        t && setTimeout(this.close, 1e3 * t), (s.style.zIndex = "1006");
      }),
      (this.close = function () {
        hide2(s), hide2(i);
      });
  };
  function datetime(e) {
    1 == e && o.container.appendChild(o.frame),
      2 == e && 1 == v.vast && o.media && o.media.BeforeVast(),
      (o.dt = !0);
  }
  var v = {
      log: 0,
      logout: 0,
      screencolor: "#000000",
      border: 0,
      bordersize: 1,
      bordercolor: "#000000",
      bgcolor: "#ffffff",
      rounding: 0,
      screenclick: 1,
      doubleclick: 1,
      player: 0,
      stopotherplayers: 1,
      iframe: 0,
      toolbar: {
        customimage: 0,
        color: "000000",
        a: "0.4",
        h: 34,
        stretchonfullscreen: 1,
        hide: 1,
        hidewithoutmoving: 1,
        hidejustfull: 0,
        hidetimeout: 3,
        hideleavetimeout: 0,
        leftandrightpadding: 3,
        animation: "none",
        position: "bottom",
        margin: "0 0 0 0",
        rounding: 0,
        clickarea: 0,
        image: "",
      },
      hotkey: {
        on: 1,
        f: 1,
        r: 1,
        m: 1,
        seek: 5,
        leftright: "seek",
        space: 1,
        updown: "volume",
        seeksides: 0,
        nums: 1,
        volumewheelfull: 1,
        wheelstep: 0.2,
      },
      playlist: {
        bgcolor: "000000",
        bgcolorover: "333333",
        bga: 0.9,
        bgaover: -1,
        position: "left",
        margin: "0 0 0 0",
        padding: "7 15 7 15",
        color: "ffffff",
        font: "arial, helvetica, sans-serif",
        fontsize: 12,
        valuefontsize: 10,
        letterspacing: 0,
        valuecolor: "ffdd1f",
        borderbottom: 1,
        bordercolor: "666666",
        a: 1,
        aover: -1,
        posters: 0,
        posterheight: 100,
        posterwidth: 177,
        postertitleonhover: 1,
        historytitlea: 1,
        historycolor: "999999",
        historybgcolor: "000000",
        historybga: -1,
        historybgaover: -1,
        historytitlestrike: 0,
        activeiconsize: 3,
        headfontsize: 16,
        headbordercolor: "888888",
        rounding: 0,
        scrollarrows: 1,
        scrollarrowsize: 1,
        scrollarrowcolor: "ffffff",
        scrollarrowbg: 0,
        scrollarrowbgcolor: "000000",
        scrollarrowgradient: 1,
        scrollarrowbgover: 0,
        scrollarrowbgovercolor: "333333",
        limitwidth: 0,
        limitmaxwidth: 200,
        autoplaylist: 0,
        always: 0,
        alwaysjustpause: 0,
        alwaysnotfullscreen: 0,
        autohide: 1,
        floatleft: 0,
        floatheight: 50,
        floatmarginright: 0,
        floatlimitwidth: 1,
        floatwidth: 170,
        marginbg: 0,
        marginbgcolor: "333333",
        marginbgpadding: "0 0 0 0",
        hmaxk: 30,
      },
      settings: {
        bgcolor: "000000",
        bgcolorover: "222222",
        bga: 0.7,
        bgaover: -1,
        font: "arial, helvetica, sans-serif",
        position: "bottom-right",
        margin: "0 0 0 0",
        padding: "7 10 7 15",
        color: "ffffff",
        fontsize: 12,
        headfontsize: 16,
        valuefontsize: 10,
        letterspacing: 0,
        titlecolor: "ffffff",
        valuecolor: "ffdd1f",
        a: 1,
        scale: 5,
        aover: -1,
        activeicon: 1,
        activeiconsize: 3,
        scrollarrows: 1,
        scrollarrowsize: 1,
        scrollarrowcolor: "ffffff",
        limitwidth: 0,
        limitmaxwidth: 200,
        rounding: 0,
        settings1: 1,
        settings1action: "quality",
        settings2: 1,
        settings2action: "audiotrack",
        settings3: 1,
        settings3action: "subtitle",
        settings4: 0,
        settings4action: "download",
        settings5: 0,
        settings5action: "speed",
        hmaxk: 30,
        bordercolor: "666666",
      },
      logo: {
        position: "bottom-right",
        margin: "0 10 50 0",
      },
      volume: 0.8,
      volumestore: 1,
      mutestore: 1,
      loop: 0,
      shuffle: 0,
      finishrewind: 1,
      mute: 0,
      preload: 0,
      preloadhls: 0,
      preloaddash: 0,
      autoplay: 0,
      autoplaymute: 1,
      showtitleplaylist: 0,
      addtitleplaylistbr: 0,
      addtitleplaylist: 0,
      file_separator: ",",
      file2_separator: ";",
      file3_separator: "//",
      poster_scale: "fill",
      poster_a: 1,
      poster_aover: -1,
      poster_float: 0,
      poster_floatmargin: "20 0 0 20",
      poster_floatposition: "top-left",
      poster_floatwidth: 100,
      poster_floatheight: 100,
      poster_floatbgcolor: -1,
      posteronpause: 0,
      alerts: 1,
      alertsbgcolor: "ff0000",
      alertscolor: "ffffff",
      alertspaddingv: 5,
      alertspaddingh: 10,
      alertsbga: 1,
      alertsfontsize: 10,
      rightclick: 0,
      youtubeposter: 1,
      ytautoquality: 1,
      posterhide: 1,
      aspect: "16x9",
      landfullmobile: 0,
      hlschangequality: "next",
      hlsautoquality: 1,
      hlsdebug: 0,
      hlscookies: 0,
      hlslowquality: 0,
      hlsquality: 1,
      hlsaudio: 1,
      livewakeuptime: 5,
      reload: 0,
      reloadlive: 1,
      livewakeup: 0,
      reloadtimeout: 5,
      dashdebug: 0,
      dashcookies: 0,
      dashlowquality: 0,
      dashquality: 1,
      dashaudio: 1,
      nameofhlsquality: 0,
      nameofyoutubequality: 0,
      nameofdashquality: 0,
      qualitystore: 1,
      eventstracker: 0,
      events: "PlayerjsEvents",
      errortimeout: 5e3,
      container_h_procent: "100%",
      ga: 0,
      ga_event: {
        init: 1,
        error: 0,
        full: 0,
        end: 0,
        play: 1,
        play25: 0,
        play50: 0,
        play75: 0,
        vast_skip: 0,
        vast_click: 0,
        vast_impression: 0,
      },
      yamtr_event: {
        init: 1,
        error: 0,
        full: 0,
        end: 0,
        play: 1,
        play25: 0,
        play50: 0,
        play75: 0,
      },
      ga_proc: 100,
      playsinlineonmobile: 1,
      subtitle_start: 1,
      sub_size: 14,
      sub_sizeproc: "100%",
      sub_big_fullscreen: 1,
      sub_size_fullscreen: 20,
      sub_bg: 1,
      sub_bga: 0.7,
      sub_bgo: 2,
      sub_bgpadding: 3,
      sub_bottom: 10,
      sub_color: "ffffff",
      sub_color2: "ffeeab",
      sub_bgcolor: "000000",
      sub_shadow: 0,
      sub_weight: 400,
      sub_designstore: 1,
      sub_shift: 0,
      sub_store: 1,
      sub_off: 1,
      sharetitle: 1,
      sharetop: 0.3,
      shareiconscale: 3,
      shareiconscaleover: 4,
      shareiconmargin: 5,
      embedsize: 0,
      embedwidth: 560,
      embedheight: 315,
      fullonplay: 0,
      fullonplaymobile: 1,
      fullblack: 1,
      nativefullios: 1,
      hidestartbutios: 1,
      thumbs: 0,
      thumb_width: 160,
      thumb_height: 90,
      thumb_border: 0,
      thumb_borderwidth: 1,
      thumb_bordercolor: "333333",
      thumb_radius: 0,
      thumb_shadow: 1,
      enc2: "2",
      enc3: "3",
      vast_timeout: 10,
      vast_pauseonclick: 1,
      vast_closeonclick: 1,
      vast_volume: -1,
      vast_title: 1,
      vast_preroll_limit: 1,
      vast_preroll_andlimit: -1,
      vast_prerolltimebreak: 0,
      vast_prerolltbimp: 1,
      vast_preroll_counter: 0,
      vast_pauseroll_limit: 1,
      vast_pauserolltimebreak: 0,
      vast_pauserolltbimp: 1,
      vast_pauseroll_counter: 0,
      vast_postroll_limit: 1,
      vast_postrolltimebreak: 0,
      vast_postrolltbimp: 1,
      vast_postroll_counter: 0,
      vast_playroll_limit: 1,
      vast_playroll_counter: 0,
      vast_midroll_limit: 1,
      vast_midroll_counter: 0,
      vast_midrolltimebreak: 0,
      vast_midrolltbimp: 1,
      vast_introtimebreak: 0,
      vast_introtbimp: 1,
      vast_linktxtbgcolor: "#ffffff",
      vast_linktxtcolor: "#000000",
      vast_skipbgcolor: "#000000",
      vast_skipcolor: "#ffffff",
      vast_titlebgcolor: "#000000",
      vast_titlecolor: "#ffffff",
      vast_xbgcolor: "#000000",
      vast_xcolor: "#ffffff",
      vast_progressbgcolor: "#000000",
      vast_progresscolor: "#ffffff",
      vast_volumebgcolor: "#000000",
      vast_volumecolor: "#ffffff",
      vast_linktxtonmobile: 1,
      vast_unmutehover: 0,
      vast_unmutebutonce: 1,
      vast_default_volume: 0.5,
      vast_unmutebutbgcolor: "#ffffff",
      vast_unmutebutcolor: "#000000",
      vast_openclick: 1,
      vast_preroll_vmap: 1,
      vast_pauseroll_vmap: 1,
      vast_postroll_vmap: 1,
      vast_midroll_vmap: 1,
      vpaid_timeout: 10,
      vpaid_timeout2: -1,
      vast_resound: 1,
      vpaid_slotinframe: 1,
      eventstrackervast: 0,
      pauserollonplay: 0,
      partnerprerollor: "or",
      partnerpauserollor: "or",
      partnerpostrollor: "or",
      partnermidrollor: "or",
      midrollpoint: "50%",
      introskiptime: -1,
      introclickable: 0,
      introclosetime: -1,
      introtitle: 0,
      introtxt: 0,
      rc_version: 1,
      rc_anyway: 0,
      heartbeatinterval: 30,
      default_channel: 2,
      tagsinterval: 10,
      playedquartile: 0,
      minivis: 30,
      lsfullstart: 1,
      lsfullplay: 1,
      captions: 0,
      pip: {
        on: 0,
        bgcolor: "000000",
        border: 0,
        shadow: 2,
        bordercolor: "000000",
        position: "left",
        margin: "20 0 0 20",
        width: 150,
        hide: 0,
      },
      lang: "ru",
    },
    VastLoader = function (preload) {
      var vast = [],
        vastType = "",
        vastUrl,
        partner,
        _x = "",
        _preload = 1 == preload,
        _preloaded = [],
        _status = "",
        _ltime = -1,
        _nocred = !1,
        die_error = !1;
      (vast.events = []), (vast.wrapper0 = " -> "), (o.vast_adid = "");
      var no = ["desktop", "mobile", "mobiletv", "tv", "lg"],
        wait_url,
        wait_wrap;
      function LoadXml(x, wrap) {
        if ((preload && _preloaded.push(x), "" != x)) {
          "" == _x && (_x = x), (_nocred = !1);
          var stop = !1,
            to,
            tmp,
            to,
            tmp;
          if (1 == o.waitingads || o.destroyed)
            o.destroyed ||
              (wait_url || ((wait_url = x), (wait_wrap = wrap)),
              setTimeout(LoadXml, 500));
          else {
            if (
              (x ||
                wrap ||
                !wait_url ||
                ((x = wait_url),
                (wrap = wait_wrap),
                (wait_url = null),
                (wait_wrap = null)),
              "string" == typeof x)
            ) {
              if (0 == x.indexOf("js:")) {
                try {
                  x = eval(x.substr(3) + "()");
                } catch (e) {}
                -1 == x.indexOf(".") && o.actions.EmptyVastUrl();
              }
              if (0 == x.indexOf("<VAST>")) {
                var x2 = new Object(),
                  p,
                  p;
                return (
                  window.DOMParser
                    ? ((p = new DOMParser()),
                      (x2.responseXML = p.parseFromString(x, "text/xml")))
                    : ((p = new ActiveXObject("Microsoft.XMLDOC")),
                      (p.async = "false"),
                      (p.loadXML = x),
                      (x2.responseXML = p)),
                  void Parsing(x2)
                );
              }
            }
            if (
              (-1 < x.indexOf("[remove]") &&
                (o.vast_remove && o.vast_remove.push(x),
                o.actions.VastRemoveUrl(vastUrl),
                (x = x.replace("[remove]", ""))),
              (o.vast_stop = 0),
              -1 < x.indexOf("[stop]") &&
                ((o.vast_stop = 1), (x = x.replace("[stop]", ""))),
              -1 < x.indexOf("nocontrols") &&
                ((vast.nocontrols = 1),
                -1 < x.indexOf("nocontrolsvpaid") &&
                  (vast.nocontrolsvpaid = 1)),
              -1 < x.indexOf("yescontrols") && (vast.yescontrols = 1),
              -1 < x.indexOf("[ima]") &&
                (1 == v.vast_ima && (vast.ima = 1),
                (x = x.replace("[ima]", ""))),
              -1 < x.indexOf("[pausemute]") && (vast.pause_mute = 1),
              -1 < x.indexOf("[mute]") &&
                ((vast.mute = 1), (x = x.replace("[mute]", ""))),
              -1 < x.indexOf("[unmute]") &&
                ((vast.mute = -1), (x = x.replace("[unmute]", ""))),
              0 < x.indexOf("[skip:") &&
                ((to = x.match(/\[skip:\d*\]/g)),
                to &&
                  0 < to.length &&
                  ((tmp = to[0].substr(to[0].indexOf(":") + 1)),
                  vast.extensions || (vast.extensions = []),
                  (vast.extensions.skipTime = tmp.substr(0, tmp.length - 1))),
                (x = x.replace(/\[skip:\d*\]/g, ""))),
              0 < x.indexOf("[imp:") &&
                ((to = x.match(/\[imp:\d*\]/g)),
                to &&
                  0 < to.length &&
                  ((tmp = to[0].substr(to[0].indexOf(":") + 1)),
                  (v["vast_" + vastType + "_andlimit"] = tmp.substr(
                    0,
                    tmp.length - 1
                  ))),
                (x = x.replace(/\[imp:\d*\]/g, ""))),
              0 < x.indexOf("[controls]") &&
                ((vast.yescontrols = 1), (x = x.replace("[controls]", ""))),
              (x = vastURL(x, wrap)),
              1 == o[vastType + "skipimprsd"] &&
                o[vastType + "imprsd"] &&
                -1 < o[vastType + "imprsd"].indexOf(x) &&
                (log("Impressed"), (stop = !0)),
              stop)
            )
              (die_error = !0),
                (_status = "next"),
                _preload ||
                  setTimeout(function () {
                    o.actions.VastNext();
                  }, 100);
            else if (
              (o.vast_poster && show2(o.vast_poster),
              (vastUrl = x),
              1 == v.vast_ima && DestroyIma(),
              1 == vast.ima)
            )
              o.ima = new VastIMA(x, vast);
            else if (
              (wrap || ((vast.vasturl = x), (o.current_vast_url = x)),
              js(wrap ? "vast_wrapper" : "vast_url", x),
              "" != trim(x))
            ) {
              var xhr = new XMLHttpRequest();
              xhr.open("GET", x, !0),
                1 == v.vast_nocredentials ||
                -1 < x.indexOf("nocredentials") ||
                0 < x.indexOf("kxcdn.com") ||
                0 < x.indexOf("pljs.ru") ||
                0 < x.indexOf("plrjs.org")
                  ? (_nocred = !0)
                  : (xhr.withCredentials = !0),
                (xhr.timeout = 1e3 * parseInt(v.vast_timeout)),
                (xhr.onload = function (e) {
                  Parsing(this);
                }),
                (xhr.onerror = function (e) {
                  0 != e.target.status || _nocred
                    ? ErrorLoad()
                    : LoadXmlNoCredentials(x);
                }),
                (xhr.ontimeout = function (e) {
                  ErrorLoad(301);
                });
              try {
                xhr.send();
              } catch (e) {
                ErrorLoad();
              }
            } else ErrorLoad();
          }
        } else ErrorLoad();
      }
      function LoadXmlNoCredentials(e) {
        var t = XHR(e);
        (t.timeout = 1e3 * parseInt(v.vast_timeout)),
          (t.onload = function (e) {
            Parsing(this);
          }),
          (t.onerror = function (e) {
            ErrorLoad();
          }),
          (t.ontimeout = function (e) {
            ErrorLoad(301);
          });
        try {
          t.send();
        } catch (e) {
          ErrorLoad();
        }
      }
      function ChX(e) {
        if (e) {
          o.vast_remove &&
            -1 < o.vast_remove.indexOf(e) &&
            (log("VAST removed"), o.actions.VastError(), (e = ""));
          for (var t = 0; t < no.length; t++)
            -1 < e.indexOf("[no_" + no[t] + "]") &&
              ((e = e.replace("[no_" + no[t] + "]", "")),
              o.system[no[t]] &&
                (log("VAST no " + no[t]), o.actions.VastError(), (e = "")));
          1 == v.geo && o.geo && (e = o.geo.V(e));
        }
        return e;
      }
      function ErrorLoad(e) {
        log("VAST Loading Error"),
          vast.isWrapper
            ? Event("Error", 0 < e ? e : 300)
            : Event("Error", 100),
          (_status = "error"),
          die_error || _preload || o.actions.VastError(),
          (die_error = !0);
      }
      function Parsing(e) {
        var i = e.responseXML;
        if (null == i && e.responseText)
          try {
            0 < e.responseText.indexOf("VAST") &&
              (i = new DOMParser().parseFromString(e.responseText, "text/xml"));
          } catch (e) {}
        if (null == i || "" == vastType)
          js("vast_empty", VastInfo()), log("VAST XML Error"), ErrorLoad(303);
        else {
          vast.type = vastType;
          var s = i,
            n = g("vmap:VMAP", s),
            a = !1;
          if (
            (exist(vast.wrapperTime) &&
              ((_ltime = new Date().getTime() - vast.wrapperTime),
              Event("loadTime")),
            n)
          ) {
            var r = n.getElementsByTagName("vmap:AdBreak");
            if (0 < r.length) {
              for (var l, c = [], d = [], u = 0; u < r.length; u++)
                "linear" != r[u].getAttribute("breakType") ||
                  ("" != (l = t("vmap:AdTagURI", g("vmap:AdSource", r[u]))) &&
                    (0 == v["vast_" + vastType + "_vmap"] ? d : c).push(l));
              0 < c.length && o.actions.VastInsertAnd(c, _x),
                0 < d.length && o.actions.VastInsertOr(d, _x),
                (_status = "error"),
                _preload || o.actions.VastRemoveAndPlay(),
                (a = !0);
            }
          }
          var p = t("PjsWrapper", s);
          if (p)
            for (var f = p.split(","), u = 0; u < f.length; u++) {
              var h = "wrapper_events" + f[u];
              if (exist(o[h]))
                for (var m in o[h])
                  o[h].hasOwnProperty(m) &&
                    (exist(vast.events[m]) || (vast.events[m] = []),
                    (vast.events[m] = vast.events[m].concat(o[h][m])));
            }
          var y = s.getElementsByTagName("Ad");
          if (1 < y.length) {
            var b = random(1e4, 2e4);
            for (m in ((o["wrapper_events" + b] = []), vast.events))
              vast.events.hasOwnProperty(m) &&
                (o["wrapper_events" + b][m] = vast.events[m].slice());
            for (var _ = [], x = [], u = 1; u < y.length; u++) {
              var w,
                k = g("Wrapper", y[u]);
              k
                ? t("VASTAdTagURI", k) &&
                  "" !=
                    (w =
                      "<VAST><PjsWrapper>" +
                      (p ? p + "," : "") +
                      b +
                      "</PjsWrapper>" +
                      new XMLSerializer().serializeToString(y[u]) +
                      "</VAST>") &&
                  (("true" != k.getAttribute("allowMultipleAds") &&
                    1 != v.vast_adsfalland) ||
                  1 != v["vast_" + vastType + "_vmap"]
                    ? x
                    : _
                  ).push(w)
                : y[u] &&
                  ((w =
                    "<VAST><PjsWrapper>" +
                    (p ? p + "," : "") +
                    b +
                    "</PjsWrapper>" +
                    new XMLSerializer().serializeToString(y[u]) +
                    "</VAST>"),
                  (1 == v.vast_adsfalland ||
                  "true" == y[u].getAttribute("allowMultipleAds")
                    ? _
                    : x
                  ).push(w));
            }
            0 < _.length && o.actions.VastInsertAnd(_, _x),
              0 < x.length && o.actions.VastInsertOr(x, _x);
          }
          if (!a) {
            var S = g("Ad", s),
              n = g("InLine", S),
              a = g("Wrapper", S);
            (vast.isWrapper = !1),
              (vast.isVpaid = !1),
              (vast.isImg = !1),
              _Event("Error", S),
              a &&
                ((vast.isWrapper = !0),
                (n = a),
                vast.wrapper && (vast.wrapper0 += vast.wrapper + " -> "),
                (vast.wrapper = t("VASTAdTagURI", n)),
                (L = a.getAttribute("minVisibility")) &&
                  0 < L &&
                  exist(o.visibility) &&
                  o.visibility < L &&
                  (log("Wrapper visibility", o.visibility + "<" + L),
                  (vast.file = void 0),
                  (vast.isWrapper = !1)));
            var T,
              L = new XMLSerializer().serializeToString(s.documentElement);
            if ((js("vast_xml", escape(L)), n)) {
              if (
                ((o.vast_adid +=
                  ("" != o.vast_adid ? " -> " : "") + S.getAttribute("id")),
                (vast.adsystem = t("AdSystem", n)),
                (S = g("Creatives", n)),
                _Event("Impression", n),
                (vast.version = s.documentElement.getAttribute("version")),
                _Event("Error", n),
                "PjsVast" == vast.adsystem &&
                  vast.pjstat &&
                  vast.events.Error.push(vast.pjstat + "err"),
                S)
              )
                for (
                  var C = S.getElementsByTagName("Creative"), u = 0;
                  u < C.length;
                  u++
                ) {
                  T = g("Linear", C[u]);
                  var O = g("NonLinearAds", C[u]);
                  if (O)
                    for (
                      var P = O.getElementsByTagName("NonLinear"), E = 0;
                      E < P.length;
                      E++
                    )
                      OverlayParsing(P[E]);
                  if (T) {
                    if (
                      ("" != t("Duration", T) &&
                        (vast.duration = seconds(t("Duration", T))),
                      "" != t("AdParameters", T) &&
                        (vast.adparameters = t("AdParameters", T)),
                      g("MediaFiles", T) &&
                        ((vast.file = _Media("MediaFile", g("MediaFiles", T))),
                        exist(v.vast_denied_files)))
                    )
                      for (
                        var A = v.vast_denied_files.split(","), u = 0;
                        u < A.length;
                        u++
                      )
                        -1 < vast.file.indexOf(A[u]) &&
                          (log("VAST file denied", A[u]),
                          js("vast_file_denied", vast.file),
                          (vast.file = void 0));
                    g("TrackingEvents", T) &&
                      _Tracking("Tracking", "event", g("TrackingEvents", T));
                    var I = g("VideoClicks", T);
                    I &&
                      ((vast.click = t("ClickThrough", I)),
                      _Tracking("ClickTracking", "id", I));
                    I = T.getAttribute("skipoffset");
                    I &&
                      (exist(vast.extensions) || (vast.extensions = []),
                      (vast.extensions.skipTime = seconds(I)));
                  }
                  I = g("CompanionAds", C[u]);
                  if (I)
                    for (
                      var j = I.getElementsByTagName("Companion"),
                        M = 100,
                        V = 0,
                        E = 0;
                      E < j.length;
                      E++
                    ) {
                      var H,
                        z,
                        R = g("StaticResource", j[E]);
                      !R ||
                        ((z = R.getAttribute("creativeType")) &&
                          -1 < z.indexOf("image") &&
                          ((H = Math.abs(
                            j[E].getAttribute("width") /
                              j[E].getAttribute("height") -
                              o.aspect
                          )),
                          (z =
                            j[E].getAttribute("width") *
                            j[E].getAttribute("height")),
                          H < M &&
                            V <= z &&
                            ((M = H),
                            (V = z),
                            (vast.companionImg = textContent(R)),
                            _Event("CompanionClickThrough", j[E]))));
                    }
                }
              exist(vast.extensions) || (vast.extensions = []);
              n = g("Extensions", n);
              n && _Extensions(n);
            }
            vast.isWrapper
              ? (log("Wrapper", vast.wrapper),
                (vast.wrapperTime = new Date().getTime()),
                LoadXml(vast.wrapper, !0))
              : Done();
          }
        }
      }
      function Done() {
        Event("onVastLoad"),
          exist(vast.file) && o.vok
            ? ((_status = "ready"), _preload || o.actions.VastReady(vast))
            : (js("vast_empty", VastInfo()),
              Event("Error", 401),
              (_status = "error"),
              die_error || _preload || o.actions.VastError(),
              (die_error = !0));
      }
      function g(e, t) {
        return exist(t) ? t.getElementsByTagName(e)[0] : null;
      }
      function t(e, t, o) {
        return (
          exist(o) || (o = 0),
          exist(t.getElementsByTagName(e)[o]) &&
          exist(t.getElementsByTagName(e)[o].childNodes[0])
            ? t.getElementsByTagName(e)[o].childNodes[0].wholeText.trim()
            : ""
        );
      }
      function _Event(e, t) {
        if (
          (exist(vast.events[e]) || (vast.events[e] = []),
          exist(t) && exist(t.getElementsByTagName(e)[0]))
        )
          for (var o = 0; o < t.getElementsByTagName(e).length; o++)
            for (
              var i, s, n = t.getElementsByTagName(e)[o].childNodes, a = 0;
              a < n.length;
              a++
            )
              n[a].wholeText &&
                ((i = n[a].wholeText),
                exist(n[a].nextSibling) &&
                  "URL" == n[a].nextSibling.localName &&
                  (i = textContent(n[a].nextSibling)),
                i && (s = i.replace(/\s+/g, " ").trim()),
                s &&
                  "" != s &&
                  ("CompanionClickThrough" == e
                    ? (vast.click = s)
                    : -1 == vast.events[e].indexOf(s) && vast.events[e].push(s),
                  s.indexOf("pjstat") &&
                    "Impression" == e &&
                    (vast.pjstat = s)));
      }
      function _Tracking(e, t, o) {
        if (exist(o.getElementsByTagName(e)[0]))
          for (var i = 0; i < o.getElementsByTagName(e).length; i++) {
            var s,
              n,
              a = o.getElementsByTagName(e)[i].getAttribute(t);
            "ClickTracking" == e && "skipAd" != a && (a = "click"),
              !a ||
                (0 < (n = o.getElementsByTagName(e)[i].childNodes).length &&
                  ((s = n[0].wholeText.replace(/\s+/g, " ").trim()),
                  "impression" == a && (a = "Impression"),
                  "progress" != a ||
                    ((n = o
                      .getElementsByTagName(e)
                      [i].getAttribute("offset")) &&
                      (exist(vast.progresstimes) || (vast.progresstimes = []),
                      vast.progresstimes.push(seconds(n)),
                      (a = a + "_" + seconds(n)))),
                  exist(vast.events[a]) || (vast.events[a] = []),
                  vast.events[a].push(s)));
          }
      }
      function _Extensions(e) {
        if (exist(e.getElementsByTagName("Extension")[0]))
          for (var i = 0; i < e.getElementsByTagName("Extension").length; i++) {
            var s = e.getElementsByTagName("Extension")[i].getAttribute("type");
            if (s) {
              var n = "";
              exist(e.getElementsByTagName("Extension")[i].childNodes[0]) &&
                exist(
                  e.getElementsByTagName("Extension")[i].childNodes[0].wholeText
                ) &&
                (n = e
                  .getElementsByTagName("Extension")
                  [i].childNodes[0].wholeText.replace(/\s+/g, " ")
                  .trim()),
                "CustomTracking" == s &&
                  _Tracking(
                    "Tracking",
                    "event",
                    e.getElementsByTagName("Extension")[i]
                  ),
                "or" == s && o.actions.VastInsertOr(t("Extension", e, i)),
                "and" == s && o.actions.VastInsertAnd(t("Extension", e, i));
              var a = exist(o.media) ? o.media.duration() : 0;
              if ("Allowblock" == s && (120 < a || 0 == a))
                "1" == n &&
                  ("preroll" == vastType &&
                    (0 < vastUrl.indexOf("vr=1") &&
                      o.actions.VastInsertAnd(vastUrl.replace("vr=1", "vr=5")),
                    0 < vastUrl.indexOf("vr=5") &&
                      o.actions.VastInsertAnd(vastUrl.replace("vr=5", "vr=9"))),
                  "midroll" == vastType &&
                    (0 < vastUrl.indexOf("vr=2") &&
                      o.actions.VastInsertAnd(vastUrl.replace("vr=2", "vr=6")),
                    0 < vastUrl.indexOf("vr=6") &&
                      o.actions.VastInsertAnd(
                        vastUrl.replace("vr=6", "vr=10")
                      )),
                  "pauseroll" == vastType &&
                    (0 < vastUrl.indexOf("vr=3") &&
                      o.actions.VastInsertAnd(vastUrl.replace("vr=3", "vr=7")),
                    0 < vastUrl.indexOf("vr=7") &&
                      o.actions.VastInsertAnd(
                        vastUrl.replace("vr=7", "vr=11")
                      )),
                  "postroll" == vastType &&
                    (0 < vastUrl.indexOf("vr=4") &&
                      o.actions.VastInsertAnd(vastUrl.replace("vr=4", "vr=8")),
                    0 < vastUrl.indexOf("vr=8") &&
                      o.actions.VastInsertAnd(
                        vastUrl.replace("vr=8", "vr=12")
                      )));
              else if (
                "loadTime" == s ||
                "skipAd" == s ||
                "addClick" == s ||
                "viewable" == s ||
                0 == s.indexOf("second")
              )
                0 == s.indexOf("second") &&
                  (exist(vast.events.sec) || (vast.events.sec = []),
                  vast.events.sec.push(parseInt(s.substr(6)))),
                  exist(vast.events[s]) || (vast.events[s] = []),
                  vast.events[s].push(n);
              else {
                if (
                  (-1 < s.indexOf("Time") && -1 != n && (n = seconds(n)),
                  -1 < s.indexOf("Txt") && (n = decodeHtml(n)),
                  "controls" == s)
                ) {
                  var r = e
                    .getElementsByTagName("Extension")
                    [i].getElementsByTagName("control");
                  if (0 < r.length)
                    for (var l = 0; l < r.length; l++)
                      r[l].getAttribute("id") &&
                        (vast["control_" + r[l].getAttribute("id")] =
                          r[l].getAttribute("layout"));
                }
                "minVisibility" == s &&
                  0 < n &&
                  0 != v.vast_visibility &&
                  exist(o.visibility) &&
                  o.visibility < n &&
                  (log("VAST visibility", o.visibility + "<" + n),
                  js("vast_visibility", o.visibility + "<" + n),
                  (vast.file = void 0),
                  (vast.isWrapper = !1)),
                  "callPjsEvent" == s && n && js(n, VastInfo()),
                  "hideAfterComplete" == s && (vast.hidevpaid = 1),
                  (1 == vast.extensions.extensionsPriority &&
                    -1 == n.toString().indexOf("//") &&
                    exist(vast.extensions[s])) ||
                    (vast.extensions[s] = n);
              }
            }
          }
      }
      function _Media(e, t) {
        var i = "",
          s = [];
        if (exist(t.getElementsByTagName(e)[0]))
          for (var n = 0; n < t.getElementsByTagName(e).length; n++) {
            var a = t.getElementsByTagName(e)[n],
              r = a.getAttribute("type"),
              l = a.getAttribute("apiFramework"),
              i = textContent(a);
            if (r) {
              if (
                -1 < (vast.filetype = r).indexOf("javascript") &&
                "VPAID" == l
              ) {
                vast.isVpaid = !0;
                break;
              }
              if (
                (-1 < r.indexOf("mp4") &&
                  (((l = {}).x = i),
                  a.getAttribute("width") && (l.w = a.getAttribute("width")),
                  s.push(l)),
                -1 < r.indexOf("image") && 0 == s.length)
              ) {
                vast.isImg = !0;
                break;
              }
            }
          }
        if (0 < s.length) {
          i = s[0].x;
          for (var c = 0, n = 0; n < s.length; n++)
            if (
              s[n].w &&
              (s[n].w > c && ((i = s[n].x), (c = s[n].w)), s[n].w >= o.screen_w)
            )
              return s[n].x;
        }
        return i;
      }
      function textContent(e) {
        if (e) {
          e = e.textContent;
          if (e) return e.replace(/\s+/g, " ").trim();
        }
      }
      function vastURL(e, t) {
        0 == e.indexOf("prt") &&
          ((partner = !0), (e = Prt(e)), log("VASTP " + vast.prt)),
          -1 == e.indexOf("random") &&
            1 == v.vast_addrandom &&
            -1 < e.indexOf("//") &&
            (e = e + (-1 == e.indexOf("?") ? "?" : "&") + "rand=(random)"),
          0 <
            (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e =
              (e = (e = (e = e.replace(/\{/g, "(")).replace(
                /\}/g,
                ")"
              )).replace(/\(ref\)/g, Href())).replace(
                /\(referer\)/g,
                Href()
              )).replace(/\(host\)/g, encodeURIComponent(o.domain))).replace(
              /\(referrer\)/g,
              encodeURIComponent(
                exist(v.parent_domain) ? v.parent_domain : document.referrer
              )
            )).replace(
              /\(rereferer\)/g,
              encodeURIComponent(
                exist(v.parent_domain) ? v.parent_domain : document.referrer
              )
            )).replace(/\(random\)/g, Math.random())).replace(
              /\(vast_id1\)/g,
              v.vast_id1
            )).replace(/\[random\]/g, Math.random())).replace(
              /\(adblock\)/g,
              o.ab ? 1 : 0
            )).replace(/\[CACHEBUSTING\]/g, Math.random())).replace(
              /\(width\)/g,
              o.screen_w
            )).replace(/\(height\)/g, o.screen_h)).replace(
              /\(duration\)/g,
              o.media ? o.media.duration() : 0
            )).replace(
              /\(visibility\)/g,
              exist(o.visibility) ? o.visibility : -1
            )).indexOf("(platform)") &&
            (o.system.tv && (e = e.replace(/\(platform\)/g, "smarttv")),
            (e = o.system.mobile
              ? e.replace(/\(platform\)/g, "mobile")
              : e.replace(/\(platform\)/g, "web-html5")));
        for (var i, s = 1; s < 6; s++) {
          var n,
            a,
            r = 1 < s ? s : "";
          0 < e.indexOf("(timeout" + r + ":") &&
            ((n = new RegExp("\\(timeout" + r + ":\\d*\\)", "g")),
            0 < (a = e.match(n)).length &&
              ((a = (a = a[0].substr(a[0].indexOf(":") + 1)).substr(
                0,
                a.indexOf(")")
              )),
              "" == r
                ? ((v.vast_timeout = +a), (v.vpaid_timeout = +a))
                : (v["vpaid_timeout" + r] = +a)),
            (e = e.replace(n, "")));
        }
        return (
          0 < e.indexOf("(connection)") &&
            ((i =
              navigator.connection ||
              navigator.mozConnection ||
              navigator.webkitConnection),
            (e = e.replace(
              /\(connection\)/g,
              void 0 !== i && void 0 !== i.type ? i.type : "undefined"
            ))),
          (e = VastReplace(e)),
          1 != t &&
            (1 == v.vpaidimpression || 0 < e.indexOf("vpaidimpression")) &&
            (vast.vpaidImOnVdSrt = 1),
          0 == e.indexOf("http://") && (e = "//" + e.substr(7)),
          e
        );
      }
      function seconds(e) {
        var t = e.split(":"),
          e = 0;
        return (
          3 == t.length &&
            (e = 3600 * parseInt(t[0]) + 60 * parseInt(t[1]) + parseInt(t[2])),
          2 == t.length && (e = 60 * parseInt(t[0]) + parseInt(t[1])),
          e
        );
      }
      function decodeHtml(e) {
        var t;
        if (e)
          return (
            ((t = createElement("div")).innerHTML = e),
            decodeURIComponent(t.textContent)
          );
      }
      function Event(e, t) {
        if (
          exist(vast) &&
          ((exist(vast.prt) && 0 == v.eventstrackervast) ||
            "intro" == vast.adsystem ||
            "outro" == vast.adsystem ||
            (0 < t ? js("vast_" + e, t) : js("vast_" + e)),
          exist(vast.events[e]))
        )
          for (var i = 0; i < vast.events[e].length; i++) {
            log("VAST " + e);
            var s = vast.events[e][i];
            0 < t &&
              0 < s.indexOf("[ERRORCODE]") &&
              (s = s.replace("[ERRORCODE]", t)),
              0 < s.indexOf("(time)") && (s = s.replace("(time)", _ltime)),
              0 < s.indexOf("(url)") &&
                (s = s.replace("(url)", encodeURIComponent(vastUrl))),
              0 <
                (s = (s = VastReplace(s)).replace(
                  "(adblock)",
                  o.ab ? 1 : 0
                )).indexOf(".pjstat") &&
                (s =
                  s +
                  "&h=" +
                  (exist(v.parent_domain) ? v.parent_domain : o.d) +
                  (1 == v.ab ? "&a=" + (o.ab ? 1 : 0) : "")),
              gif(s);
          }
      }
      function AddEvnt(e, t) {
        if ((exist(vast.events[t]) || (vast.events[t] = []), e))
          for (var o = e.split(","), i = 0; i < o.length; i++)
            (o[i] = o[i].replace(/\(random\)/g, random(1e3, 2e3))),
              -1 == vast.events.indexOf(t) && vast.events[t].push(o[i]);
      }
      function VastReplace(e) {
        if (
          ((e = e.replace(
            /\(visibility\)/g,
            exist(o.visibility) ? o.visibility : -1
          )),
          "object" == typeof v.vast_replace)
        )
          for (var t in v.vast_replace)
            v.vast_replace.hasOwnProperty(t) &&
              (e = e.replace(t, v.vast_replace[t]));
        return e;
      }
      function Prt(e) {
        return (e = e.substr(e.indexOf("_") + 1));
      }
      function OverlayParsing(e) {
        var t;
        e &&
          ((vast.overlay = []),
          (vast.overlay.width = e.getAttribute("width")),
          (vast.overlay.height = e.getAttribute("height")),
          (t = e.getAttribute("minSuggestedDuration")) &&
            (vast.duration = seconds(t)),
          (vast.overlay.scalable = e.getAttribute("scalable")),
          (vast.overlay.keepratio = e.getAttribute("maintainAspectRatio")),
          (vast.file = textContent(g("StaticResource", e))),
          _Event("NonLinearClickTracking", e),
          (t = e.getAttribute("skipoffset")) &&
            (vast.extensions || (vast.extensions = []),
            (vast.extensions.skipTime = seconds(t))),
          (vast.click = textContent(g("NonLinearClickThrough", e))));
      }
      function DestroyIma() {
        if (o.ima) {
          try {
            o.ima.Destroy();
          } catch (e) {
            log(o.ima, e);
          }
          o.ima = void 0;
        }
      }
      (this.Load = function (i, e, t) {
        (o.dt = !0), (vastType = e), (vast.second = t);
        var s = (t = "playerjs.com,").split(","),
          n = !1;
        if (
          ((o.vok = !0),
          s.forEach(function (e) {
            var t;
            0 < e.indexOf("_dt20") &&
              ((t = e.substr(-10)),
              (t = new Date(t).getTime()),
              (e =
                new Date().getTime() < t || 1 != o.dk
                  ? e.substr(0, e.indexOf("_dt20"))
                  : (log("expired"), "expired"))),
              (o.d = location.hostname),
              0 < e.indexOf(".*") &&
                -1 < o.d.indexOf(e.substr(0, e.indexOf("."))) &&
                (e = o.d),
              0 < e.indexOf(".") &&
                (new RegExp(e + "$", "i").test(o.d) ||
                  0 == i.indexOf("<VAST><Pjs")) &&
                (n = !0);
          }),
          0 == i.indexOf("prt") && (n = !0),
          "" != (i = ChX(i)))
        ) {
          if (0 == i.indexOf("id:")) {
            if (
              (-1 < i.indexOf("[remove]") &&
                (o.vast_remove && o.vast_remove.push(i),
                (i = i.replace("[remove]", ""))),
              (i = i.substr(3)),
              !o.p)
            )
              return void ErrorLoad();
            var a,
              r = JSON.parse(decode(o.p));
            for (a in r)
              r.hasOwnProperty(a) &&
                exist(r[a].id) &&
                i == r[a].id &&
                ((r[a].preroll = ChX(r[a].preroll)),
                (i =
                  "prt" +
                  (exist(r[a].cpm) ? "cpm" + r[a].cpm : "") +
                  e +
                  "_" +
                  r[a].preroll),
                (n = !0));
          }
          !n && exist(options[e])
            ? (log("VAST Domains Error " + o.d + " " + e),
              (v.zdmn = t),
              (v.vast = 0),
              console.log("Pjs", o.d),
              o.actions.EmptyVastUrl(),
              o.actions.VastError())
            : (js("vast_load", vastType), LoadXml(i));
        }
      }),
        (this.break = function () {
          die_error || ErrorLoad();
        }),
        (this.Ready = function () {
          o.actions.VastReady(vast);
        }),
        (this.disablePreload = function () {
          _preload = !1;
        }),
        (this.Status = function () {
          return _status;
        }),
        (this.info = function (e) {
          return !!vast && vast[e];
        }),
        (this.getVolume = function () {}),
        (this.preloaded = function (e) {
          return -1 < _preloaded.indexOf(e);
        });
    },
    VastVideo = function () {
      var vast,
        over = o.mousehere,
        no = ["desktop", "mobile", "mobiletv", "tv", "lg", "winmob"];
      (o.vastcontainer = createElement("div")),
        css(o.vastcontainer, {
          position: "absolute",
          left: 0,
          top: 0,
          width: "100%",
          height: "100%",
          "background-color": exist(v.vast_bgcolor)
            ? v.vast_bgcolor
            : "#000000",
        }),
        exist(v.vast_bga) || (1 == v.hidevideo && (v.vast_bga = 0.5)),
        css(o.vastcontainer, {
          opacity: v.vast_bga,
        }),
        o.frame.appendChild(o.vastcontainer),
        o.system.mobile ||
          (o.vastcontainer.addEventListener("mouseover", onOver, !1),
          o.vastcontainer.addEventListener("mouseleave", onOut, !1));
      var tag = createElement("video"),
        duration,
        paused,
        controls,
        uiplay,
        uiplay2,
        uibuffer,
        uiposter,
        uit,
        uitxt,
        uimute,
        uiunmutebut,
        uiprogress,
        uix,
        uiskip,
        vpaidframe,
        vpaidslot,
        vpaidslot2,
        vpaid,
        vpaid_int,
        vpaidframe_int,
        vpaid_t,
        vpaid_stop_t,
        vpaid_complete_t,
        push_wait_int,
        video_t;
      o.vastcontainer.appendChild(tag),
        (o.vastcontainer.style.zIndex = 1001),
        hide(o.vastcontainer),
        css(tag, {
          width: "100%",
          height: "100%",
          "object-fit": "contain",
          "min-height": "auto",
          "max-height": "none",
          "min-width": "auto",
          "max-width": "none",
        }),
        1 !== v.vpaid_waitstart &&
          css(tag, {
            autoplay: 1,
          }),
        attr(tag, {
          preload: "auto",
          "x-webkit-airplay": "deny",
          "webkit-playsinline": !0,
          cursor: "pointer",
          playsinline: "1",
          pip: "false",
        }),
        (1 != v.vast_unmutehover && 1 != v.vast_unmutebut) ||
          ((tag.muted = !0),
          attr(tag, {
            muted: "true",
          }));
      var vpaidvolume = 1,
        vpaidvolume2,
        vpaidstopped = !1,
        vpaidstarted = !1,
        vaststarted = !1,
        vpaidskipped = !1,
        vpaidcompleted = !1,
        vpaidvideostarted = !1,
        vpaidquartile = !1,
        vpaid_int2,
        removed = !1,
        last_skiptime = 0,
        last_time = 0,
        imgtime = 0,
        img_int,
        _move = !1,
        _go = !1,
        _muted = !1,
        muteicon =
          "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" +
          v.vast_volumecolor +
          "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001zm10.44167,-0.75275c-0.26762,-0.30766 -0.69733,-0.30766 -0.96359,0.00158c-0.26557,0.30925 -0.26557,0.80989 0.00136,1.11992l0,-0.00157c0.58769,0.68334 0.94997,1.62056 0.94997,2.66218c0,1.04083 -0.3616,1.97489 -0.94861,2.65823c-0.2683,0.30766 -0.2683,0.8083 -0.00136,1.11912c0.13279,0.15423 0.30713,0.23173 0.48146,0.23173c0.17501,0 0.34934,-0.0775 0.48213,-0.23173c0.83216,-0.9649 1.34835,-2.30548 1.34767,-3.77735c0.00068,-1.47504 -0.51755,-2.8172 -1.34903,-3.7821l0,-0.00001zm1.55246,-1.75907c-0.27124,0.30979 -0.27124,0.81211 0,1.12031c1.00334,1.14962 1.62195,2.73104 1.62195,4.4852c0,1.75256 -0.61861,3.3332 -1.62056,4.48361c-0.27125,0.30899 -0.27125,0.81053 0,1.12031c0.13493,0.1545 0.31208,0.23214 0.48991,0.23214c0.17713,0 0.35428,-0.07764 0.48921,-0.23214c1.25105,-1.43327 2.02674,-3.41876 2.02536,-5.60392c0.00069,-2.18675 -0.775,-4.17383 -2.02813,-5.60551c-0.27194,-0.30979 -0.70857,-0.30979 -0.97774,0z'/></g></svg>",
        unmuteicon =
          "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" +
          v.vast_volumecolor +
          "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001z'/><path d='m18.125,12.20836l-2.20816,-2.20816l2.20776,-2.20816l-1.13498,-1.13579l-2.20816,2.20816l-2.20816,-2.20816l-1.13498,1.13579l2.20776,2.20816l-2.20816,2.20816l1.13579,1.13539l2.20776,-2.20816l2.20776,2.20816' fill-opacity='null' stroke-opacity='null' stroke-width='0' fill='" +
          v.vast_volumecolor +
          "'/></g></svg>",
        impression = !1,
        remainigs = 0,
        unmute_volume = 0,
        slow_unmute,
        js_events,
        remove_t,
        complete_t,
        ytag,
        youtube = !1,
        vimeo = !1,
        mp3 = !1,
        ytinterval,
        start_timeout = !0,
        pp;
      function onOutSkip() {
        css(1 == v.vast_skip2right ? uiskip : uiprogress, {
          "background-color": hex2rgb(
            v.vast_skipbgcolor,
            existv(v.vast_skipbga, 0.5)
          ),
        });
      }
      function PlayStart() {
        var e = tag.play();
        void 0 !== e &&
          e
            .then(function () {})
            .catch(function (e) {
              log("playError VAST", e.message),
                0 < e.message.indexOf("user denied permission") ||
                1 == vast.pause_mute
                  ? Pause(!0)
                  : die_error || removed || (onMute(), tag.play());
            }),
          (video_t = setTimeout(tagTimeout, 1e3 * v.vast_timeout)),
          (vaststarted = !0);
      }
      function vpaidframeloaded() {
        try {
          var e;
          vpaidframe.contentWindow &&
            (clearInterval(vpaidframe_int),
            js2("vpaidframeloaded"),
            (e =
              '<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><script type="text/javascript" src="' +
              vast.file +
              '"></script><script type="text/javascript">window.parent.postMessage("PJS_VPAID_LOADED","*");</script></body></html>'),
            window.addEventListener("message", waitVpaid),
            vpaidframe.contentWindow.document.open(),
            vpaidframe.contentWindow.document.write(e),
            vpaidframe.contentWindow.document.close());
        } catch (e) {
          log("VPAID frame error"), onError(901);
        }
      }
      function waitVpaid(e) {
        "PJS_VPAID_LOADED" == e.data &&
          (window.removeEventListener("message", waitVpaid), initVpaid());
      }
      function initVpaid() {
        var e;
        vpaidframe.contentWindow &&
          ((e = vpaidframe.contentWindow.getVPAIDAd) &&
          "function" == typeof e &&
          (vpaid = e())
            ? Vpaid()
            : onError(900));
      }
      function CheckMuteStart() {
        (0 == v.vast_volume ||
          (o.muted && 1 != v.vast_resound) ||
          1 == vast.mute ||
          1 == vast.mutedautoplay ||
          (1 == v.vast_unmutehover && !o.mouseHere && !o.system.mobile) ||
          tag.muted ||
          0 == tag.volume) &&
          -1 != vast.mute &&
          onMute();
      }
      function startTimeout() {
        start_timeout = !1;
      }
      function onLoadStart() {}
      1 !== v.vpaid_waitstart &&
        ((pp = tag.play()),
        void 0 !== pp &&
          pp
            .then(function () {})
            .catch(function (e) {
              0 < e.message.indexOf("interact") &&
                (log("play mute"),
                (tag.muted = !0),
                attr(tag, {
                  muted: "true",
                }));
            })),
        (this.break = function () {
          exist(uiplay) && (log("VAST break"), onError());
        }),
        (this.Go = function (x) {
          if (
            (removed && show(tag),
            (tag.volume = 0.4),
            (duration = 0),
            (paused = !1),
            (controls = !0),
            (impression = !1),
            (remainigs = 0),
            (removed = !1),
            (last_time = 0),
            (last_skiptime = 0),
            (vast = x),
            (die_error = !1),
            (js_events = []),
            (_go = !0),
            show(o.vastcontainer),
            exist(vast.extensions.controls) &&
              ((0 !== vast.extensions.controls &&
                "0" !== vast.extensions.controls) ||
                (controls = !1)),
            (1 != vast.nocontrols && 1 != v.vast_nocontrols) ||
              (1 == vast.nocontrolsvpaid && !vast.isVpaid) ||
              (controls = !1),
            1 == vast.yescontrols && (controls = !0),
            o.controls && o.controls.SettingsVisible() && o.controls.Settings(),
            exist(vast.prt) && (vast.prtg = 1),
            vast.isVpaid && 1 == v.vast_novpaid)
          )
            onError("NO VPAID");
          else {
            var stop = !1,
              elm,
              _clck,
              tmp,
              tmp,
              unmutebuticon,
              rg,
              unmutebuticon,
              image,
              base;
            if (
              exist(vast.file) &&
              ((-1 < vast.file.indexOf("youtube.com/") ||
                -1 < vast.file.indexOf("youtu.be/")) &&
                (youtube = !0),
              1 == v.vimeo &&
                -1 < vast.file.indexOf("vimeo.com/") &&
                (vimeo = !0),
              -1 < vast.file.indexOf(".mp3") && (mp3 = !0),
              "intro" == vast.adsystem)
            )
              for (var i = 0; i < no.length; i++)
                if (
                  -1 < vast.file.indexOf("[no_" + no[i] + "]") &&
                  ((vast.file = vast.file.replace("[no_" + no[i] + "]", "")),
                  o.system[no[i]])
                ) {
                  onError("no " + no[i]), (stop = !0);
                  break;
                }
            stop ||
              ((vast.isImg || vast.isVpaid || youtube || vimeo) &&
                ((vpaidslot = createElement("div")),
                o.vastcontainer.appendChild(vpaidslot),
                css(vpaidslot, {
                  position: "absolute",
                  top: "0",
                  left: "0",
                  width: "100%",
                  height: "100%",
                })),
              youtube &&
                (ytag = new MediaYoutube("intro" + vast.file, vpaidslot)),
              vimeo && (ytag = new MediaVimeo("intro" + vast.file, vpaidslot)),
              youtube ||
                vimeo ||
                ((elm = vast.isImg ? vpaidslot : tag),
                o.system.mobile
                  ? (elm.removeEventListener("touchstart", onTouchStart),
                    elm.removeEventListener("touchmove", onTouchMove),
                    elm.removeEventListener("touchend", onScreenClick))
                  : elm.removeEventListener("click", onScreenClick),
                (_clck = !0),
                exist(vast.extensions.isClickable) &&
                  (_clck = 1 == vast.extensions.isClickable),
                _clck &&
                  (o.system.mobile
                    ? (elm.addEventListener("touchend", onScreenClick),
                      elm.addEventListener("touchstart", onTouchStart),
                      elm.addEventListener("touchmove", onTouchMove))
                    : (elm.addEventListener("click", onScreenClick),
                      css(elm, {
                        cursor: "pointer",
                      })))),
              RemoveInterface(),
              (uiplay = createElement("div")),
              css(uiplay, {
                position: "absolute",
                top: "0",
                left: "0",
                width: "100%",
                height: "100%",
                display: "none",
                cursor: "pointer",
                "z-index": 1,
              }),
              o.vastcontainer.appendChild(uiplay),
              (uiplay2 = createElement("div")),
              css(uiplay2, {
                position: "absolute",
                top: "50%",
                left: "50%",
                "margin-left": -10,
                "margin-top": -10,
                cursor: "pointer",
                background: "rgba(0,0,0,0.5)",
                "border-radius": 20,
                width: 20,
                height: 20,
                padding: "3px 2px 3px 4px",
                zIndex: 1,
              }),
              o.system.safari && o.system.desktop
                ? css(uiplay2, {
                    zoom: "3",
                  })
                : css(uiplay2, {
                    transform: "scale(3)",
                  }),
              (uiplay2.innerHTML =
                "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='m4.59375,3.48438l-0.03125,13.03125l10.875,-6.51563l-10.84375,-6.51562z' fill='#ffffff'/></g></svg>"),
              uiplay.appendChild(uiplay2),
              (uiplay.onclick = onScreenClick),
              vast.companionImg &&
                ((uiposter = createElement("div")),
                css(uiposter, {
                  position: "absolute",
                  top: "0",
                  left: "0",
                  width: "100%",
                  height: "100%",
                  pointerEvents: "none",
                  background:
                    "url(" + vast.companionImg + ") 50% 50% no-repeat",
                  "background-size": "contain",
                }),
                o.vastcontainer.appendChild(uiposter)),
              uibuffer && RemoveControl("uibuffer"),
              (uibuffer = createElement("div")),
              css(uibuffer, {
                position: "absolute",
                top: "50%",
                left: "50%",
                pointerEvents: "none",
                zIndex: 1,
              }),
              v.control_buffer.icon &&
                0 != v.vast_buffering &&
                (controlCSS(
                  v.control_buffer.icon,
                  v.control_buffer.color,
                  uibuffer
                ),
                o.vastcontainer.appendChild(uibuffer),
                v.control_buffer.scale &&
                  css(uibuffer, {
                    transform: "scale(" + v.control_buffer.scale + ")",
                  }),
                css(uibuffer, {
                  "margin-left": -uibuffer.offsetWidth / 2,
                  "margin-top": -uibuffer.offsetHeight / 2,
                }),
                (vast.buffering = !0)),
              (!controls && 1 != v.vast_title_important) ||
                0 == vast.introtitle ||
                (1 == v.vast_title &&
                  ((uit = createElement("div")),
                  css(uit, {
                    "font-size": existv(v.vast_title_size, 14),
                    color: v.vast_titlecolor,
                    position: "absolute",
                    top: existv(v.vast_title_top, 0),
                    left: existv(v.vast_title_left, 0),
                    backgroundColor: hex2rgb(
                      v.vast_titlebgcolor,
                      existv(v.vast_titlebga, 0)
                    ),
                    opacity: existv(v.vast_titlea, 1),
                    padding: "5px 8px 5px 8px",
                    "box-sizing": "border-box",
                    zIndex: 1,
                  }),
                  o.vastcontainer.appendChild(uit),
                  (vast.uititle = Lang("ads")),
                  exist(v.vast_title_text) &&
                    "" != v.vast_title_text &&
                    (vast.uititle = v.vast_title_text),
                  (uit.innerHTML =
                    vast.uititle +
                    (1 == v["vast_" + o.vasttype + "_counter"] &&
                    o.adscounter <= o.adsinchain &&
                    1 < o.adsinchain
                      ? " " + o.adscounter + "/" + o.adsinchain
                      : "")))),
              controls &&
                (exist(vast.control_adlabel) &&
                  ("0" === vast.control_adlabel || "-1" === vast.control_adlabel
                    ? css(uit, {
                        top: -1e3,
                      })
                    : "1" !== vast.control_adlabel &&
                      (("TR" != vast.control_adlabel &&
                        "BR" != vast.control_adlabel) ||
                        css(uit, {
                          right: 0,
                          left: "auto",
                        }),
                      ("BR" != vast.control_adlabel &&
                        "BL" != vast.control_adlabel) ||
                        css(uit, {
                          bottom: 0,
                          top: "auto",
                        }))),
                exist(vast.extensions.linkTxt)
                  ? (o.system.mobile && 0 == v.vast_linktxtonmobile) ||
                    "" == vast.extensions.linkTxt ||
                    (exist(uitxt)
                      ? (show2(uitxt),
                        (uitxt.innerHTML = vast.extensions.linkTxt))
                      : ((uitxt = createElement("div")),
                        css(uitxt, {
                          position: "absolute",
                          bottom: 50,
                          "margin-left": "auto",
                          "margin-right": "auto",
                          left: 0,
                          right: 0,
                          "font-size": existv(
                            v.vast_linktxt_size,
                            o.system.mobile ? "12px" : "14px"
                          ),
                          color: v.vast_linktxtcolor,
                          display: "table",
                          width: "50%",
                          "text-align": "center",
                          zIndex: 1,
                        }),
                        (uitxt.innerHTML =
                          "<pjspan style='background:" +
                          hex2rgb(v.vast_linktxtbgcolor, 1) +
                          ";padding:7px 15px;border-radius:20px;display:inline-block;cursor:pointer'>" +
                          vast.extensions.linkTxt +
                          "</pjspan>"),
                        o.vastcontainer.appendChild(uitxt),
                        "" == vast.click && vast.isVpaid
                          ? (css(uitxt.firstElementChild, {
                              "pointer-events": "none",
                            }),
                            css(uitxt, {
                              "pointer-events": "none",
                            }))
                          : uitxt.firstElementChild.addEventListener(
                              "click",
                              onInvite
                            ),
                        hide2(uitxt),
                        (o.mouseHere || o.system.mobile) &&
                          setTimeout(function () {
                            show2(uitxt);
                          }, 200)))
                  : exist(uitxt) && hide2(uitxt),
                (uimute = createElement("div")),
                css(uimute, {
                  position: "absolute",
                  bottom: 10,
                  right: 10,
                  "text-align": "center",
                  cursor: "pointer",
                  transform: "scale(1)",
                  "border-radius": 30,
                  height: 30,
                  width: 30,
                  "padding-top": 5,
                  "box-sizing": "border-box",
                  zIndex: 1,
                  transition: "background-color 0.2s linear",
                }),
                (uimute.innerHTML = muteicon),
                o.vastcontainer.appendChild(uimute),
                (uimute.onclick = onToggleMute),
                uimute.addEventListener("mouseover", onOverMute),
                uimute.addEventListener("mouseout", onOutMute),
                onOutMute(),
                exist(vast.control_soundbtn) &&
                  ((tmp = vast.control_soundbtn),
                  "0" === tmp
                    ? (hide(uimute),
                      css(uimute, {
                        top: -1e3,
                      }))
                    : "1" !== tmp &&
                      ("TR" == tmp &&
                        css(uimute, {
                          bottom: "auto",
                          top: 10,
                          right: 10,
                        }),
                      "TL" == tmp &&
                        css(uimute, {
                          bottom: "auto",
                          top: 10,
                          right: "auto",
                          left: 10,
                        }),
                      "BL" == tmp &&
                        css(uimute, {
                          bottom: 10,
                          right: "auto",
                          left: 10,
                        }))),
                (uiprogress = createElement("div")),
                o.vastcontainer.appendChild(uiprogress),
                (uiprogress.innerHTML =
                  '<svg id="pljsvastprogress_' +
                  v.id +
                  '" width="20" height="20" viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" style="transform:rotate(-90deg);float:left"><circle r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' +
                  v.vast_progresscolor +
                  ';opacity:0.3"></circle><circle id="pljsvastprogressbar_' +
                  v.id +
                  '" r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' +
                  v.vast_progresscolor +
                  ';opacity:0;-webkit-transform-origin: center center;transform-origin: center center;"></circle></svg>'),
                css(uiprogress, {
                  "border-radius": 30,
                  padding: 5,
                  overflow: "hidden",
                  height: 20,
                  position: "absolute",
                  bottom: 10,
                  left: 10,
                  "transform-origin": "center center",
                  transition: "background-color 0.2s linear",
                  zIndex: 1,
                  "background-color": hex2rgb(
                    v.vast_progressbgcolor,
                    existv(v.vast_progressbga, 0.5)
                  ),
                }),
                (uiskip = createElement("div")),
                css(uiskip, {
                  padding: "3px 10px 0 12px",
                  float: "left",
                  display: "inline-block",
                  "font-size": existv(v.vast_skip_size, 16),
                  color: v.vast_skipcolor,
                  visibilty: "hidden",
                  transition:
                    "background-color 0.2s linear,opacity 0.2s linear",
                  display: "none",
                  zIndex: 1,
                }),
                (uiskip.innerHTML = Lang("skip")),
                1 == v.vast_skip2right
                  ? (o.vastcontainer.appendChild(uiskip),
                    css(uiskip, {
                      padding: 10,
                      float: "none",
                    }),
                    onOutSkip())
                  : uiprogress.appendChild(uiskip),
                (uix = createElement("div")),
                css(uix, {
                  position: "absolute",
                  top: -100,
                  right: 0,
                  width: 40,
                  height: 40,
                  padding: 10,
                  opacity: 0,
                  visibilty: "hidden",
                  transition:
                    "background-color 0.2s linear,opacity 0.2s linear",
                  cursor: "pointer",
                  "box-sizing": "border-box",
                  zIndex: 1,
                }),
                (uix.innerHTML =
                  "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='M19.25,0.75 L0.75,19.25 L19.25,0.75 Z' stroke='#FFFFFF' stroke-width='3' stroke-linecap='square' style='pointer-events:none'></path><path d='M0.75,0.75 L19.25,19.25 L0.75,0.75 Z' stroke='" +
                  v.vast_xcolor +
                  "' stroke-width='3' stroke-linecap='square'></path></g></svg>"),
                onOutX(),
                o.vastcontainer.appendChild(uix),
                (uix.onclick = onClose),
                uix.addEventListener("mouseover", function () {
                  css(uix, {
                    "background-color": hex2rgb(
                      v.vast_xbgcolor,
                      existv(v.vast_xbga, 0.5) + 0.3
                    ),
                  });
                }),
                uix.addEventListener("mouseout", onOutX),
                exist(vast.extensions) &&
                  exist(vast.extensions.skipTime) &&
                  0 < vast.extensions.skipTime &&
                  vast.extensions.skipTime < 100 &&
                  ((uiskip.innerHTML =
                    Lang("skip_after_") + vast.extensions.skipTime),
                  css(uiskip, {
                    cursor: "default",
                    "font-size": existv(v.vast_skip2_size, 12),
                    display: "block",
                  })),
                exist(vast.control_countdown) &&
                  1 != v.vast_skip2right &&
                  ((tmp = vast.control_countdown),
                  "0" === tmp || "-1" === tmp
                    ? css(uiskip, {
                        bottom: -100,
                      })
                    : "1" !== tmp &&
                      ("TR" == tmp &&
                        (css(uiprogress, {
                          bottom: "auto",
                          left: "auto",
                          top: 10,
                          right: 10,
                        }),
                        css(uix, {
                          top: 0,
                          left: 0,
                          right: "auto",
                        })),
                      "TL" == tmp &&
                        css(uiprogress, {
                          bottom: "auto",
                          top: 10,
                          left: 10,
                        }),
                      "BR" == tmp &&
                        css(uiprogress, {
                          left: "auto",
                          bottom: 10,
                          right: 10,
                        }))),
                1 == v.vast_skip2right &&
                  (css(uimute, {
                    bottom: 10,
                    left: 50,
                    right: "auto",
                  }),
                  css(uiskip, {
                    float: "none",
                    position: "absolute",
                    bottom: v.vast_skip_bottom || 10,
                    right: 0,
                  }))),
              1 == v.vast_unmutebut &&
                ((uiunmutebut = createElement("div")),
                css(uiunmutebut, {
                  background: v.vast_unmutebutbgcolor,
                  padding: "11px 10px 6px 20px",
                  position: "absolute",
                  top: "50%",
                  left: -200,
                  "font-size": "16px",
                  margin: "-20px 0 0 -5px",
                  color: v.vast_unmutebutcolor,
                  cursor: "pointer",
                }),
                (uiunmutebut.style.zIndex = 9999),
                o.vastcontainer.appendChild(uiunmutebut),
                (unmutebuticon = muteicon),
                (rg = RegExp(v.vast_volumecolor, "g")),
                (unmutebuticon = unmutebuticon.replace(
                  rg,
                  v.vast_unmutebutcolor
                )),
                (uiunmutebut.innerHTML =
                  Lang("unmute_video") +
                  ' &nbsp; <span style="float:right;margin-top:-2px">' +
                  unmutebuticon +
                  "</span>"),
                (uiunmutebut.onclick = onUnmute)),
              js3("vast_system", vast.adsystem),
              js3("vast_url", vast.vasturl),
              js3("vast_info", VastInfo()),
              vast.isImg &&
                (hide2(uimute),
                (image = new Image()),
                (image.onload = function () {
                  (vpaidslot.style.backgroundImage =
                    "url('" + vast.file + "')"),
                    (vpaidslot.style.backgroundSize = "cover"),
                    (imgtime = 0),
                    (duration = exist(vast.duration) ? vast.duration : 10),
                    (img_int = setInterval(onTimeupdate, 100)),
                    onTimeupdate(),
                    Event("start", !0);
                }),
                (image.onerror = function () {
                  onError(405);
                }),
                (image.src = vast.file)),
              (vpaidstopped = !1),
              (vpaidskipped = !1),
              (vpaidcompleted = !1),
              (vpaidstarted = !1),
              (vaststarted = !1),
              (vpaidvideostarted = !1),
              (vpaidquartile = !1),
              vast.isVpaid &&
                (vast.customVpaid
                  ? ((vpaid = eval("new " + vast.customVpaid + "()")),
                    (v.vpaid_slotinframe = 0),
                    Vpaid())
                  : ((vpaidframe = document.createElement("iframe")),
                    (vpaidframe.id = "pljsvpaid"),
                    (vpaidframe.allow = "autoplay"),
                    (vpaidframe.scrolling = "no"),
                    vpaidframe.setAttribute("allowFullScreen", ""),
                    1 == v.vpaid_slotinframe
                      ? (css(vpaidframe, {
                          position: "absolute",
                          top: "0",
                          left: "0",
                          width: "100%",
                          height: "100%",
                          border: 0,
                        }),
                        hide2(vpaidslot))
                      : css(vpaidframe, {
                          width: 0,
                          height: 0,
                        }),
                    o.vastcontainer.appendChild(vpaidframe),
                    (base = document.createElement("base")),
                    (base.href = o.href),
                    vpaidframe.contentWindow &&
                      vpaidframe.contentWindow.document
                        .getElementsByTagName("head")[0]
                        .appendChild(base),
                    (vpaidframe_int = setInterval(vpaidframeloaded, 100)),
                    js2("vpaidframe"),
                    clearTimeout(vpaid_t),
                    (vpaid_t = setTimeout(
                      vpaidLoadTimeout,
                      1e3 * v.vast_timeout
                    )))),
              vast.isVpaid ||
                vast.isImg ||
                (youtube || vimeo
                  ? CheckMuteStart()
                  : (tag.addEventListener("loadstart", onLoadStart),
                    tag.addEventListener("error", onTagError),
                    tag.addEventListener("ended", onEnded),
                    tag.addEventListener("playing", onPlay),
                    tag.addEventListener("timeupdate", onTimeupdate),
                    tag.addEventListener("seeking", onSeeking),
                    tag.addEventListener("seeked", onSeeked),
                    tag.addEventListener("loadedmetadata", onMeta),
                    tag.addEventListener("volumechange", onVolume),
                    tag.addEventListener("waiting", onWaiting),
                    tag.addEventListener("durationchange", onDuration),
                    tag.addEventListener("progress", onProgress),
                    attr(tag, {
                      src: x.file,
                    }),
                    -1 != v.vast_volume
                      ? (tag.volume = v.vast_volume)
                      : (tag.volume = v.volume),
                    CheckMuteStart(),
                    1 !== v.vpaid_waitstart && PlayStart())),
              setTimeout(startTimeout, 500));
          }
          function onOutMute() {
            css(uimute, {
              background: hex2rgb(
                v.vast_volumebgcolor,
                existv(v.vast_volumebga, 0.5)
              ),
            });
          }
          function onOverMute() {
            css(uimute, {
              background: hex2rgb(
                v.vast_volumebgcolor,
                existv(v.vast_volumebga, 0.5) + 0.3
              ),
            });
          }
          function onOutX(e) {
            css(uix, {
              "background-color": hex2rgb(
                v.vast_xbgcolor,
                existv(v.vast_xbga, 0.5)
              ),
            });
          }
        }),
        (this.ytReady = function () {
          js3("vast_duration", (duration = ytag.duration())),
            StopBuffering(),
            (ytinterval = setInterval(this.timeUpdate, 500)),
            (0 == v.vast_volume ||
              o.muted ||
              (1 == v.vast_unmutehover && !o.system.mobile)) &&
              onMute();
        }),
        (this.ytError = function () {
          onError();
        }),
        (this.ytWaiting = function () {
          onWaiting();
        }),
        (this.ytWaited = function () {
          StopBuffering();
        }),
        (this.ytEnded = function () {
          onEnded();
        });
      var die_error = !1;
      function onOver() {
        over ||
          (uitxt && show2(uitxt),
          1 != v.vast_unmutehover ||
            o.system.mobile ||
            (onUnmute(), 1 == v.vast_unmuteonce && (v.vast_unmutehover = 0))),
          (over = !0);
      }
      function onMeta() {
        0 < tag.videoHeight &&
          1 == v.changeheight &&
          1 == v.changevastheight &&
          o.actions.changeAspect(tag.videoWidth / tag.videoHeight, !0);
      }
      function onOut() {
        over &&
          (uitxt && hide2(uitxt),
          1 != v.vast_unmutehover ||
            o.system.mobile ||
            (clearInterval(slow_unmute), onMute())),
          (over = !1);
      }
      function onTagError() {
        onError(4 == tag.error.code ? 403 : 405);
      }
      function onError(e) {
        if (!die_error && !removed) {
          if (((die_error = !0), log("VAST video playing error " + e), vpaid))
            for (var t in vpaidCallbacks)
              vpaidCallbacks.hasOwnProperty(t) &&
                vpaid.unsubscribe(vpaidCallbacks[t], t);
          Event("Error", !1, 0 < e ? e : 400),
            clearInterval(vpaid_int),
            clearInterval(vpaidframe_int),
            clearInterval(push_wait_int),
            RemoveTimeouts(),
            o.actions.VastError();
        }
      }
      function RemoveAndPlay() {
        Event("remove"),
          RemoveTimeouts(),
          removed || ((removed = !0), o.actions.VastRemoveAndPlay());
      }
      function RemoveTimeouts() {
        clearTimeout(vpaid_t),
          clearTimeout(vpaid_stop_t),
          clearTimeout(vpaid_complete_t),
          clearTimeout(video_t);
      }
      function onEnded() {
        vpaidcompleted || Event("complete", !0), RemoveAndPlay();
      }
      function onClose() {
        Event("close", !0);
        var e = new Date();
        (o.clicktime = e.getTime()),
          (o.vastclick = !0),
          gaTracker("vast_skip", "VAST Skip"),
          1 == v["vast_" + o.vasttype + "skipor"]
            ? o.actions.VastNext()
            : RemoveAndPlay();
      }
      function onSkip() {
        var e = new Date();
        (o.clicktime = e.getTime()),
          (o.vastclick = !0),
          log("VAST Skip"),
          gaTracker("vast_skip", "VAST Skip"),
          !vpaidskipped && vpaid && vast.isVpaid
            ? (log("VPAID Skip request"), vpaid.skipAd())
            : (Event("skipAd", !0),
              Event("skip", !0),
              1 == v["vast_" + o.vasttype + "skipor"]
                ? o.actions.VastNext()
                : RemoveAndPlay());
      }
      function onInvite() {
        Event("addClick"), Event("acceptInvitation", !1), onClick();
      }
      function onToggleMute() {
        (_muted ? onUnmute : onMute)();
      }
      function onMute() {
        var e = !1;
        log((vast.isVpaid ? "VPAID" : "VAST") + " Mute"),
          youtube || vimeo
            ? ytag.Mute()
            : vast.isVpaid
            ? vpaid
              ? ((vpaidvolume =
                  0 < vpaid.getAdVolume()
                    ? vpaid.getAdVolume()
                    : v.vast_volume),
                vpaid.setAdVolume(0))
              : (e = !0)
            : (Event("mute"), (tag.muted = !0)),
          Unmutebut(1),
          e ||
            ((_muted = !0), exist(uimute) && (uimute.innerHTML = unmuteicon));
      }
      function onUnmute() {
        var e = !1;
        youtube || vimeo
          ? (ytag.Unmute(), Event("unmute"))
          : vast.isVpaid
          ? vpaid
            ? (0 == unmute_volume &&
                (unmute_volume = vpaidvolume) < 0.3 &&
                (unmute_volume = v.vast_default_volume),
              vpaid.setAdVolume(0),
              clearInterval(slow_unmute),
              (slow_unmute = setInterval(SlowUnMute, 200)))
            : (e = !0)
          : ((tag.muted = !1),
            0 == unmute_volume &&
              (unmute_volume = tag.volume) < 0.3 &&
              (unmute_volume = v.vast_default_volume),
            (tag.volume = 0),
            clearInterval(slow_unmute),
            (slow_unmute = setInterval(SlowUnMute, 200))),
          Unmutebut(0),
          e || ((_muted = !1), exist(uimute) && (uimute.innerHTML = muteicon));
      }
      function Unmutebut(e) {
        var t;
        1 == v.vast_unmutebut &&
          uiunmutebut &&
          ((t = {
            mc: uiunmutebut,
            me: "uiunmutebut",
            type: "left",
          }),
          1 == e
            ? (show(uiunmutebut), (t.to = 0))
            : ((t.to = -200), (t.hide = !0)),
          new Motion(t));
      }
      function SlowUnMute() {
        var e;
        (v.vast_volume = unmute_volume),
          vast.isVpaid
            ? (e = vpaid.getAdVolume()) < unmute_volume && e < 0.99
              ? vpaid.setAdVolume(parseFloat(e) + 0.1)
              : ((unmute_volume = 0),
                clearInterval(slow_unmute),
                Event("unmute"))
            : tag.volume < unmute_volume && tag.volume < 0.95
            ? (tag.volume += 0.1)
            : ((unmute_volume = 0),
              clearInterval(slow_unmute),
              Event("unmute"));
      }
      function onTouchStart() {
        _move = !1;
      }
      function onTouchMove() {
        _move = !0;
      }
      function onScreenClick() {
        var e = !1;
        o.system.mobile && _move && (e = !0),
          removed && (e = !0),
          e || (paused ? Resume : onClick)(),
          1 == v.vast_unmuteonclick && onUnmute();
      }
      function onClick() {
        if (!start_timeout) {
          var e = new Date();
          (o.clicktime = e.getTime()),
            Event("click"),
            1 == v.vast_addclick && Event("addClick"),
            gaTracker("vast_click", "VAST Click");
          e = !1;
          if (exist(vast.click) && "" != vast.click) {
            for (var t = ["ref", "referer", "host"], i = 0; i < t.length; i++)
              vast.click = vast.click.replace(
                new RegExp("\\(" + t[i] + "\\)", "gi"),
                "host" == t[i] ? encodeURIComponent(o.domain) : Href()
              );
            js2("vast_clickurl", vast.click),
              1 == v.vast_openclick && window.open(vast.click, "_blank"),
              (e = !0);
          }
          1 == v.vast_pauseonclick
            ? Pause(e)
            : 1 == v.vast_closeonclick &&
              e &&
              o.actions.VastRemoveAndPlay(
                1 == v.vast_playonclick ? "" : "dontplay"
              );
        }
      }
      function onPlay() {
        onTimeupdate(), Event("start", !0);
      }
      function onPause() {
        Pause(!0);
      }
      function Pause(e) {
        vast.isVpaid &&
          vpaid &&
          (vpaid.pauseAd(), controls && show2(uiplay), (paused = !0)),
          vast.isImg &&
            (clearInterval(img_int), controls && show2(uiplay), (paused = !0)),
          vast.isVpaid ||
            vast.isImg ||
            (e &&
              (youtube || vimeo ? ytag.Pause() : tag.pause(),
              Event("pause"),
              show2(uiplay),
              (paused = !0))),
          uitxt && hide2(uitxt),
          StopBuffering();
      }
      function Resume() {
        paused &&
          (vast.isVpaid &&
            vpaid &&
            (vpaid.resumeAd(), hide2(uiplay), (paused = !1)),
          vast.isImg &&
            ((img_int = setInterval(onTimeupdate, 100)),
            onTimeupdate(),
            hide2(uiplay),
            (paused = !1)),
          vast.isVpaid ||
            vast.isImg ||
            (youtube || vimeo ? ytag.Play() : tag.play(),
            Event("resume"),
            hide2(uiplay),
            (paused = !1)),
          uitxt && show2(uitxt));
      }
      function CurrentTime() {
        var e = 0;
        return (
          youtube || vimeo
            ? (e = ytag.time())
            : vast.isImg
            ? ((e = imgtime), (imgtime += 0.1))
            : (e = tag.currentTime),
          e
        );
      }
      function CurrentVolume() {
        if (vast) {
          if (!vast.isVpaid) return tag.muted ? 0 : tag.volume;
          if (vpaid) {
            var e = -1;
            try {
              e = vpaid.getAdVolume();
            } catch (e) {
              log(e);
            }
            return e;
          }
        }
      }
      function onTimeupdate(e) {
        if (tag && !removed) {
          var t = CurrentTime();
          if (
            (impression || (onImpression(), (impression = !0)),
            exist(vast.events.firstQuartile) &&
              duration / 4 < t &&
              Event("firstQuartile", !0),
            exist(vast.events.midpoint) &&
              duration / 2 < t &&
              Event("midpoint", !0),
            exist(vast.events.thirdQuartile) &&
              (duration / 4) * 3 < t &&
              Event("thirdQuartile", !0),
            exist(vast.progresstimes))
          )
            for (var i = 0; i < vast.progresstimes.length; i++)
              t >= vast.progresstimes[i] &&
                Event("progress_" + vast.progresstimes[i], !0);
          onTimeupdateExtensions(t),
            0 < t && last_time < t && StopBuffering(),
            null == o.vasttype &&
              ("intro" == vast.adsystem && (o.vasttype = "preroll"),
              "outro" == vast.adsystem && (o.vasttype = "postroll")),
            vast.isImg && duration < t && onEnded(),
            (last_time = t);
        }
      }
      this.timeUpdate = function () {
        onTimeupdate();
      };
      var tu0 = !0;
      function onTimeupdateExtensions(e) {
        if (
          (js3("vast_time", e),
          !(
            vast.isVpaid &&
            tu0 &&
            ((tu0 = !1), e < duration - 2 && 0 < duration)
          ))
        ) {
          if (exist(vast.extensions)) {
            if (exist(vast.events.sec) && !vpaidcompleted)
              for (var t = 0; t < vast.events.sec.length; t++)
                e >= vast.events.sec[t] &&
                  -1 < vast.events.sec[t] &&
                  (Event("second" + vast.events.sec[t], !0),
                  (vast.events.sec[t] -= 1e3));
            UpdateSkipTimes(e);
          }
          var o, i, s;
          controls &&
            0 < duration &&
            ((o = parseInt((e / duration) * 100)),
            (i = document.getElementById("pljsvastprogressbar_" + v.id)) &&
              (isNaN(o)
                ? (o = 100)
                : ((s = i.getAttribute("r")),
                  (s = Math.PI * (2 * s)),
                  o < 0 && (o = 0),
                  100 < o && (o = 100),
                  css(i, {
                    opacity: 1,
                    strokeDashoffset: ((100 - o) / 100) * s,
                  }))));
        }
      }
      function UpdateSkipTimes(e) {
        var t;
        exist(vast.extensions) &&
          controls &&
          last_skiptime <= e &&
          (exist(vast.extensions.skipTime) &&
            -1 < vast.extensions.skipTime &&
            vast.extensions.skipTime < 100 &&
            uiskip &&
            ((t = !0),
            e > vast.extensions.skipTime
              ? (js3("vast_skipTime", vast.extensions.skipTime),
                ShowSkip(),
                (vast.extensions.skipTime = null))
              : (uiskip.innerHTML =
                  Lang("skip_after_") +
                  Math.round(vast.extensions.skipTime - e))),
          exist(vast.extensions.skipTime2) &&
            -1 < vast.extensions.skipTime2 &&
            (t &&
              vast.extensions.skipTime2 < vast.extensions.skipTime &&
              (vast.extensions.skipTime2 = vast.extensions.skipTime),
            e > vast.extensions.skipTime2 &&
              (js3("vast_skipTime2", vast.extensions.skipTime2),
              Event("skipTime2"),
              uix &&
                css(uix, {
                  top: 0,
                  opacity: 1,
                  display: "block",
                }),
              (vast.extensions.skipTime2 = null))),
          (last_skiptime = e));
      }
      function ShowSkip() {
        uiskip &&
          ((uiskip.innerHTML = Lang("skip")),
          css(uiskip, {
            cursor: "pointer",
            "font-size": v.vast_skip_size || "16px",
            display: "block",
          }),
          1 == v.vast_skip2right
            ? ((uiskip.onclick = onSkip),
              uiskip.addEventListener("mouseover", function () {
                css(uiskip, {
                  "background-color": hex2rgb(
                    v.vast_skipbgcolor,
                    existv(v.vast_skipbga, 0.5) + 0.3
                  ),
                });
              }),
              uiskip.addEventListener("mouseout", onOutSkip))
            : (css(uiprogress, {
                cursor: "pointer",
              }),
              (uiprogress.onclick = onSkip),
              uiprogress.addEventListener("mouseover", function () {
                css(uiprogress, {
                  "background-color": hex2rgb(
                    v.vast_skipbgcolor,
                    existv(v.vast_skipbga, 0.5) + 0.3
                  ),
                });
              }),
              onOutSkip(),
              uiprogress.addEventListener("mouseout", onOutSkip)));
      }
      function onSeeking() {}
      function onSeeked() {}
      function onImpression() {
        die_error ||
          removed ||
          (Event("Impression", !0),
          Event("creativeView", !0),
          gaTracker("vast_impression", "VAST Impression"),
          ImpressionActions());
      }
      function ImpressionActions() {
        var e =
          "intro" == vast.adsystem || "outro" == vast.adsystem
            ? "intro"
            : o.vasttype;
        o.actions.VastImpression(),
          0 < v["vast_" + e + "timebreak"] && StoreImpression(e),
          o.vast_impressions++,
          o.vast_impressions_all++,
          o.vast_longtomsg && o.vast_longtomsg.remove(),
          _muted && Unmutebut(1),
          (impression = !0),
          1 == o.vast_stop && (o.vast_stop = 2),
          o.vast_poster && hide2(o.vast_poster),
          StopBuffering();
      }
      function onDuration() {
        Event("AdLoaded", !0), js3("vast_duration", (duration = tag.duration));
      }
      function onVolume() {
        js3("vast_volume", VastInfo());
      }
      function onProgress(e) {}
      var vpaidCallbacks = {
        AdStarted: vpaidStartAd,
        AdStopped: vpaidStopAd,
        AdSkipped: vpaidSkipAd,
        AdLoaded: vpaidAdLoaded,
        AdLinearChange: vpaidAdLinearChange,
        AdSizeChange: vpaidAdSizeChange,
        AdExpandedChange: vpaidAdExpandedChange,
        AdSkippableStateChange: vpaidAdSkippableStateChange,
        AdDurationChange: vpaidAdDurationChange,
        AdRemainingTimeChange: vpaidAdRemainingTimeChange,
        AdVolumeChange: vpaidAdVolumeChange,
        AdImpression: vpaidAdImpression,
        AdClickThru: vpaidAdClickThru,
        AdInteraction: vpaidAdInteraction,
        AdVideoStart: vpaidAdVideoStart,
        AdVideoFirstQuartile: vpaidAdVideoFirstQuartile,
        AdVideoMidpoint: vpaidAdVideoMidpoint,
        AdVideoThirdQuartile: vpaidAdVideoThirdQuartile,
        AdVideoComplete: vpaidAdVideoComplete,
        AdUserAcceptInvitation: vpaidAdUserAcceptInvitation,
        AdUserMinimize: vpaidAdUserMinimize,
        AdUserClose: vpaidAdUserClose,
        AdPaused: vpaidAdPaused,
        AdPlaying: vpaidAdPlaying,
        AdError: vpaidAdError,
        AdErrorVpaid: vpaidAdErrorVpaid,
        AdLog: vpaidAdLog,
        AdViewable: vpaidAdViewable,
      };
      function Vpaid() {
        if ("function" == typeof vpaid.handshakeVersion) {
          for (var e in vpaidCallbacks)
            vpaidCallbacks.hasOwnProperty(e) &&
              vpaid.subscribe(vpaidCallbacks[e], e, this);
          1 == v.vpaid_slotinframe &&
            vpaidframe &&
            ((vpaidslot2 = document.createElement("div")),
            vpaidframe.contentDocument.body.appendChild(vpaidslot2),
            css(vpaidslot2, {
              position: "absolute",
              top: "0",
              left: "0",
              width: "100%",
              height: "100%",
              cursor: "pointer",
            })),
            vpaid.initAd(
              o.screen_w,
              o.screen_h,
              o.fullscreen ? "fullscreen" : "normal",
              720,
              exist(vast.adparameters)
                ? {
                    AdParameters: vast.adparameters,
                  }
                : "",
              {
                slot: 1 == v.vpaid_slotinframe ? vpaidslot2 : vpaidslot,
                videoSlot: tag,
                videoSlotCanAutoPlay: !0,
              }
            ),
            css(vpaidslot, {
              cursor: "pointer",
            }),
            (vpaidslot.style.zIndex = 0);
        } else log("VPAID incorrect"), onError(901);
      }
      function vpaidAdLog(e) {
        log("VPAID Log: " + e);
      }
      function vpaidAdViewable() {
        Event("viewable", !0);
      }
      function vpaidAdError(e) {
        vpaidcompleted
          ? (log("VPAID Error but completed", e), vpaidStopAd())
          : (log("VPAID Error", e),
            "object" == typeof e && 1 == v.log && console.log(e),
            onError(901));
      }
      function vpaidAdErrorVpaid(e) {
        vpaidcompleted ||
          (log("VPAID Error", e), Event("Error", !1, 0 < e ? e : 400));
      }
      function vpaidAdLoaded() {
        log("VPAID Loaded, ad " + vpaid.getAdLinear()),
          Event("AdLoaded", !0),
          "nonlinear" != vpaid.getAdLinear()
            ? (1 != v.vpaid_waitstart &&
                (StartVpaidVolume(),
                clearTimeout(vpaid_t),
                (vpaid_t = setTimeout(
                  vpaidVideoTimeout,
                  1e3 * v.vpaid_timeout
                )),
                vpaid.startAd()),
              clearInterval(vpaid_int2),
              (vpaid_int2 = setInterval(vpaidAdRemainingTimeChange, 1e3)),
              vpaidAdRemainingTimeChange())
            : vpaidAdError("Nonlinear");
      }
      function StartVpaidVolume() {
        0 == v.vast_volume ||
        1 == vast.mute ||
        (1 == v.vast_unmutehover && !o.system.mobile && 1 != o.mouseHere)
          ? 0 < vpaid.getAdVolume() && -1 != vast.mute && onMute()
          : -1 != v.vast_volume
          ? vpaid.setAdVolume(parseFloat(v.vast_volume))
          : vpaid.setAdVolume(parseFloat(v.volume)),
          0 == vpaid.getAdVolume() && controls && hide2(uimute);
      }
      function StopBuffering() {
        vast.buffering &&
          (uibuffer && hide2(uibuffer),
          (vast.buffering = !1),
          clearInterval(push_wait_int));
      }
      function onWaiting() {
        uibuffer && show2(uibuffer),
          (vast.buffering = !0),
          1 == v.vast_push_waiting &&
            (clearInterval(push_wait_int),
            (push_wait_int = setInterval(PushWaiting, 1500)));
      }
      function PushWaiting() {
        UpdateSkipTimes((last_skiptime += 1));
      }
      function vpaidStartAd() {
        (vpaidstarted = !0),
          1 != v.vpaidvideotimeout && (vpaidvideostarted = !0),
          (duration = vpaid.getAdDuration());
        var e = vpaid.getAdRemainingTime();
        0 < duration ||
          (exist(vast.duration) &&
            vast.duration >= e &&
            (duration = vast.duration)),
          5e3 <= duration && (duration /= 1e3),
          js3("vast_duration", duration),
          o.vast_poster && hide2(o.vast_poster),
          (js_events = []),
          log("VPAID Started"),
          Event("creativeView", !0),
          StopBuffering();
      }
      function vpaidVideoTimeout() {
        vpaidvideostarted ||
          die_error ||
          (log("VPAID timeout"),
          js3("vpaid_video_timeout", VastInfo()),
          onError(901));
      }
      function vpaidQuartileTimeout() {
        vpaidquartile ||
          die_error ||
          (0 == v.vpaid_mute_impression && paused) ||
          (log("VPAID quartile timeout"),
          js3("vpaid_quartile_timeout", VastInfo()),
          onError(901));
      }
      function vpaidStoppedTimeout() {
        vpaidstopped ||
          die_error ||
          (0 == v.vpaid_mute_impression && paused) ||
          (log("VPAID stopped timeout"),
          js3("vpaid_stopped_timeout", VastInfo()),
          removed || (impression ? vpaidStopAd() : onError(901)));
      }
      function tagTimeout() {
        tag &&
          (die_error ||
            0 != tag.currentTime ||
            0 != duration ||
            (log("VAST video loading timeout"),
            js3("vast_video_timeout", VastInfo()),
            onError(402)));
      }
      function vpaidLoadTimeout() {
        vpaidvideostarted ||
          die_error ||
          1 == v.vpaid_waitstart ||
          (log("VPAID loading timeout"),
          js3("vpaid_loading_timeout", VastInfo()),
          onError(901));
      }
      function vpaidStopAd() {
        removed ||
          vpaidstopped ||
          (log("VPAID Stopped"),
          (vpaidstopped = !0),
          removed || impression
            ? vpaidcompleted || vpaidskipped
              ? RemoveAndPlay()
              : (remove_t = setTimeout(RemoveAndPlay, 200))
            : (vpaidstarted &&
                0 < duration &&
                75 < remainigs &&
                exist(vast.prt) &&
                vpaidImpression(),
              log("VPAID No impression --\x3e Error (" + remainigs + ")"),
              onError(901)));
      }
      function vpaidSkipAd() {
        log("VPAID Skipped"), (vpaidskipped = !0), onSkip();
      }
      function vpaidAdSizeChange() {
        log(
          "VPAID SizeChanged: " +
            vpaid.getAdWidth() +
            " x " +
            vpaid.getAdHeight()
        ),
          0 < vpaid.getAdHeight() &&
            0 < vpaid.getAdWidth() &&
            1 == v.changeheight &&
            1 == v.changevastheight &&
            o.actions.changeAspect(
              vpaid.getAdWidth() / vpaid.getAdHeight(),
              !0
            );
      }
      function vpaidAdExpandedChange() {
        log("VPAID ExpandedChange: " + vpaid.getAdExpanded());
      }
      function vpaidAdSkippableStateChange() {
        controls &&
          (log("VPAID AdSkippableStateChange: " + vpaid.getAdSkippableState()),
          vpaid.getAdSkippableState() ? ShowSkip() : hide2(uiskip));
      }
      function vpaidAdDurationChange() {
        log("VPAID DurationChanged: " + vpaid.getAdDuration()),
          0 < vpaid.getAdDuration() &&
            js3("vast_duration", (duration = vpaid.getAdDuration()));
      }
      function vpaidAdRemainingTimeChange(e) {
        var t = vpaid.getAdDuration();
        e && clearInterval(vpaid_int2);
        e = vpaid.getAdRemainingTime();
        0 < t && t != duration && vpaidAdDurationChange(),
          remainigs++,
          (0 == duration || duration < e) &&
            0 < e &&
            js3("vast_duration", (duration = e)),
          0 < e && 0 < duration && onTimeupdateExtensions(duration - e);
      }
      function vpaidAdVolumeChange() {
        null != vpaid.getAdVolume() &&
          (vpaidvolume2 =
            0 == vpaid.getAdVolume()
              ? (Event("mute"), 0)
              : (0 == vpaidvolume2 && Event("unmute"), vpaid.getAdVolume())),
          log("VPAID VolumeChanged: " + vpaid.getAdVolume());
      }
      function vpaidAdImpression() {
        1 != vast.vpaidImOnVdSrt && vpaidImpression();
      }
      function vpaidImpression() {
        (vpaidcompleted = !1),
          log("VPAID Impression", duration),
          Event("Impression"),
          ImpressionActions(),
          gaTracker("vast_impression", "VAST Impression"),
          -1 < v.vpaid_timeout2 &&
            (clearTimeout(vpaid_t),
            (vpaid_t = setTimeout(vpaidVideoTimeout, 1e3 * v.vpaid_timeout2))),
          1 == v.vpaid_mute_impression && onMute();
      }
      function vpaidAdClickThru(e, t, o) {
        log("VPAID ClickThru"),
          exist(e) &&
            "string" == typeof e &&
            -1 < e.indexOf("//") &&
            1 == o &&
            (vast.click = e),
          !exist(vast.extensions.isClickable) ||
          1 == vast.extensions.isClickable
            ? onClick()
            : Event("click");
      }
      function vpaidAdInteraction() {}
      function vpaidAdVideoStart() {
        1 == vast.vpaidImOnVdSrt && vpaidImpression(),
          log("VPAID AdVideoStart"),
          (vpaidvideostarted = !0),
          clearTimeout(vpaid_t),
          -1 < v.vpaid_timeout3 &&
            (vpaid_t = setTimeout(
              vpaidQuartileTimeout,
              1e3 * v.vpaid_timeout3
            )),
          clearTimeout(vpaid_stop_t),
          -1 < v.vpaid_timeout4 &&
            (vpaid_stop_t = setTimeout(
              vpaidStoppedTimeout,
              1e3 * v.vpaid_timeout4
            )),
          1 == v.vpaid_mute_impression && onMute(),
          Event("start", !1);
      }
      function vpaidAdVideoFirstQuartile() {
        (vpaidquartile = !0),
          log("VPAID firstQuartile"),
          Event("firstQuartile", !1);
      }
      function vpaidAdVideoMidpoint() {
        log("VPAID midpoint"), Event("midpoint", !1);
      }
      function vpaidAdVideoThirdQuartile() {
        log("VPAID thirdQuartile"), Event("thirdQuartile", !1);
      }
      function vpaidAdVideoComplete() {
        if (!vpaidcompleted) {
          for (var e in (Event("complete", !1),
          (vpaidcompleted = !0),
          vast.events))
            vast.events.hasOwnProperty(e) &&
              0 == e.indexOf("old_") &&
              (vast.events[e.substr(4)] = vast.events[e]);
          if (exist(vast.events.sec))
            for (var t = 0; t < vast.events.sec.length; t++)
              vast.events.sec[t] += 1e3;
          -1 < v.vpaid_timeout5 &&
            (clearTimeout(vpaid_complete_t),
            (vpaid_complete_t = setTimeout(
              vpaidStoppedTimeout,
              1e3 * v.vpaid_timeout5
            )));
        }
        log("VPAID complete");
      }
      function vpaidAdLinearChange() {
        log("VPAID linear has changed: " + vpaid.getAdLinear());
      }
      function vpaidAdUserAcceptInvitation() {
        Event("acceptInvitation", !1);
      }
      function vpaidAdUserMinimize() {}
      function vpaidAdUserClose() {
        var e = new Date();
        (o.clicktime = e.getTime()),
          Event("close", !0),
          (o.vastclick = !0),
          gaTracker("vast_skip", "VAST Skip");
      }
      function vpaidAdPaused() {
        (vast.isVpaid && vpaidcompleted) ||
          (Event("pause"),
          1 == v.vpaid_nopause
            ? vpaid.resumeAd()
            : (controls && 1 == v.vast_pauseonclick && show2(uiplay),
              (paused = !0)));
      }
      function vpaidAdPlaying() {
        Event("resume"),
          controls && exist(uiplay) && hide2(uiplay),
          (paused = !1);
      }
      function StoreImpression(e) {
        var t, i;
        0 < v["vast_" + e + "timebreak"] &&
          o.storage &&
          ((i = !1),
          (t = +localStorage.getItem("pljs" + e + "i_" + o.d))
            ? t >= v["vast_" + e + "tbimp"] && (i = !0)
            : (t = 0),
          i || o.vast_impressions_all + 1 >= v["vast_" + e + "tbimp"]
            ? ((i = new Date()),
              localStorage.setItem("pljs" + e + "_" + o.d, i.getTime()),
              localStorage.setItem("pljs" + e + "i_" + o.d, 0))
            : localStorage.setItem("pljs" + e + "i_" + o.d, t + 1));
      }
      function Event(e, t, i, s) {
        if (
          ("start" == e &&
            ((o.vast_started = !0),
            1 == v.miniwithvast && o.minify && o.minify.Check()),
          (exist(vast.prt) && 0 == v.eventstrackervast && 1 != v.vpaid) ||
            (t
              ? (exist(js_events[e]) || js3("vast_" + e, VastInfo()),
                (js_events[e] = !0))
              : js3("vast_" + e, 0 < i ? i : VastInfo())),
          exist(vast.events) && exist(vast.events[e]))
        ) {
          log("VAST Event " + e);
          for (var n = 0; n < vast.events[e].length; n++) {
            var a = vast.events[e][n],
              r = !1;
            if (exist(a)) {
              if (
                (0 < i &&
                  (0 < a.indexOf("[ERRORCODE]")
                    ? (a = a.replace("[ERRORCODE]", i))
                    : 1 == s && (r = !0)),
                0 < a.indexOf("(visibility)") &&
                  exist(o.visibility) &&
                  (a = a.replace("(visibility)", o.visibility)),
                0 < a.indexOf("(volume)") &&
                  (a = a.replace("(volume)", CurrentVolume())),
                0 <
                  (a = (a = a.replace("(adblock)", o.ab ? 1 : 0)).replace(
                    /\(random\)/g,
                    Math.random()
                  )).indexOf(".pjstat") &&
                  (a =
                    a +
                    "&m=" +
                    (o.system.tv ? 2 : o.system.mobile ? 1 : 0) +
                    "&h=" +
                    (exist(v.parent_domain) ? v.parent_domain : o.domain)),
                "object" == typeof v.vast_replace)
              )
                for (var l in v.vast_replace)
                  v.vast_replace.hasOwnProperty(l) &&
                    (a = a.replace(l, v.vast_replace[l]));
            } else r = !0;
            r || gif(a);
          }
          t &&
            ((vast.events["old_" + e] = vast.events[e]),
            (vast.events[e] = void 0));
        }
        "click" == e && 1 == v.vast_addclick && Event("addClick");
      }
      function js2(e) {
        "intro" != vast.adsystem && "outro" != vast.adsystem && js(e);
      }
      function js3(e, t) {
        (exist(vast.prt) && 0 == v.eventstrackervast && 1 != v.vpaid) ||
          "intro" == vast.adsystem ||
          "outro" == vast.adsystem ||
          js(e, t);
      }
      function RemoveInterface() {
        if (
          (RemoveControl("uiplay"),
          tag && 0 < tag.played.length && tag.pause(),
          controls && o.vastcontainer.contains(uix))
        ) {
          1 == v.vast_title && RemoveControl("uit");
          for (
            var e = [
                "uiprogress",
                "uiskip",
                "uix",
                "uitxt",
                "uitxt",
                "uimute",
                "uiposter",
                "uiunmutebut",
              ],
              t = 0;
            t < e.length;
            t++
          )
            RemoveControl(e[t]);
        }
      }
      function RemoveControl(x) {
        exist(eval(x)) &&
          o.vastcontainer.contains(eval(x)) &&
          ("uitxt" == x && uitxt.removeEventListener("click", onInvite),
          o.vastcontainer.removeChild(eval(x)),
          eval(x + " = null;"));
      }
      function VpaidSetStartAd() {
        vast.isVpaid
          ? vpaidstarted || vpaid.startAd()
          : vaststarted || PlayStart();
      }
      (this.config = function (e) {
        return !!vast && vast[e];
      }),
        (this.tagLive = function () {
          var t = !1;
          if (tag && tag.parentElement)
            try {
              "PJSDIV" == tag.parentElement.nodeName && (t = !0);
            } catch (e) {
              t = !1;
            }
          return (!vast || !vast.isVpaid) && t;
        }),
        (this.info = function (e) {
          return !!vast && vast[e];
        }),
        (this.active = function () {
          return !removed;
        }),
        (this.Resize = function () {
          vast &&
            vast.isVpaid &&
            vpaid &&
            vpaid.resizeAd(
              o.screen_w,
              o.screen_h,
              o.fullscreen ? "fullscreen" : "normal"
            );
        }),
        (this.getVolume = function () {
          return CurrentVolume();
        }),
        (this.pause = function () {
          return !(removed || paused || !vast) && (Pause(!0), !0);
        }),
        (this.resume = function () {
          return !(removed || !paused || !vast) && (Resume(), !0);
        }),
        (this.VpaidSet = function (e, t) {
          vast &&
            ("setAdVolume" == e && (0 == t ? onMute : onUnmute)(),
            "stopAd" == e && RemoveAndPlay(),
            "startAd" == e && VpaidSetStartAd(),
            "skipAd" == e && onSkip(),
            "pauseAd" == e && onPause(),
            "resumeAd" == e && onPlay());
        }),
        (this.startAd = function () {
          1 != v.vpaid_waitstart ||
            vpaidstarted ||
            (vast.isVpaid && StartVpaidVolume(), VpaidSetStartAd());
        }),
        (this.mute = function () {
          onMute();
        }),
        (this.imp = function (e) {
          if (impression && !removed)
            for (var t = e.split(","), o = 0; o < t.length; o++) gif(t[o]);
        }),
        (this.RemoveForNextAd = function () {
          if (
            ((youtube || vimeo) && (clearInterval(ytinterval), ytag.Remove()),
            vast)
          ) {
            if ((RemoveInterface(), vast.isVpaid)) {
              if (exist(vpaidslot)) {
                if (!vpaidstopped && vpaid && vpaidstarted)
                  try {
                    vpaid.stopAd();
                  } catch (e) {
                    log(e);
                  }
                if (vpaid)
                  for (var e in vpaidCallbacks)
                    vpaidCallbacks.hasOwnProperty(e) &&
                      vpaid.unsubscribe(vpaidCallbacks[e], e);
                o.vastcontainer.contains(vpaidslot) &&
                  1 != vast.hidevpaid &&
                  o.vastcontainer.removeChild(vpaidslot);
              }
              if (
                (clearInterval(vpaid_int),
                clearInterval(vpaid_int2),
                clearInterval(vpaidframe_int),
                clearInterval(push_wait_int),
                RemoveTimeouts(),
                1 != vast.hidevpaid && vpaidframe)
              )
                try {
                  o.vastcontainer.removeChild(vpaidframe);
                } catch (e) {}
            } else hide(tag);
            onWaiting();
          }
          exist(vpaidslot) &&
            (clearInterval(img_int),
            o.vastcontainer.contains(vpaidslot) &&
              1 != vast.hidevpaid &&
              o.vastcontainer.removeChild(vpaidslot)),
            vast && (vast.events = []),
            (mp3 = impression = !(removed = !(remainigs = 0)));
        }),
        (this.waitGo = function (e) {
          vast = e;
        }),
        (this.Remove = function () {
          try {
            o.vastcontainer.contains(tag) && o.vastcontainer.removeChild(tag);
          } catch (e) {}
          this.RemoveForNextAd(), (removed = !0);
          try {
            o.frame.contains(o.vastcontainer) &&
              1 != vast.hidevpaid &&
              o.frame.removeChild(o.vastcontainer),
              1 == vast.hidevpaid && hide2(o.vastcontainer);
          } catch (e) {}
        });
    },
    Settings = function (is) {
      var i,
        style = [],
        f = [],
        fbg = [],
        fimg = [],
        ftitle = [],
        fvalue = [],
        faction = [],
        f2 = [],
        f2bg = [],
        f2img = [],
        f2title = [],
        f2value = [],
        f2action = [],
        stout = [],
        is_visible = !1,
        open_action,
        open_settings = -1,
        empty = !0,
        key = is,
        playlist,
        shuffle = [],
        shuffle_ = [],
        plid = "",
        plfolder = "",
        plx = -1,
        sub_settings_on = !1,
        sub_settings = !1,
        autonextopenfolder = !1,
        autoprevopenfolder = !1,
        justshow = !1,
        removed = !1,
        showinterval,
        arrinterval,
        wheelinterval,
        hidetimeout,
        settimer,
        scale_i = -1,
        _cstm = 0,
        evntclk = "click",
        evntovr = o.system.mobile ? "touchstart" : "mouseover",
        evntout = o.system.mobile ? "touchend" : "mouseout",
        style = UpdateObject(style, v[is]);
      (style = MarginPadding(v[is], "margin", "margin")),
        0 == style.marginbg && (style.marginbgpadding = "0 0 0 0"),
        (style = MarginPadding(v[is], "bgpadding", "marginbgpadding")),
        (style = MarginPadding(v[is], "padding", "padding")),
        (style.scrollwidth = 0);
      var _activeIcon =
          "<svg style='margin-top:3px' width='" +
          2 * style.activeiconsize +
          "' height='" +
          (2 * style.activeiconsize > style.valuefontsize
            ? 2 * style.activeiconsize
            : style.valuefontsize) +
          "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><ellipse ry='" +
          style.activeiconsize +
          "' rx='" +
          style.activeiconsize +
          "' cy='" +
          (2 * style.activeiconsize > style.valuefontsize
            ? style.activeiconsize
            : style.valuefontsize / 2) +
          "' cx='" +
          style.activeiconsize +
          "' fill='#" +
          style.valuecolor +
          "'/></g></svg>",
        _xIcon =
          "<svg width='" +
          2 * style.activeiconsize +
          "' height='" +
          style.valuefontsize +
          "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" +
          (style.activeiconsize - 1) +
          "' rx='" +
          (style.activeiconsize - 1) +
          "' cy='" +
          (style.valuefontsize / 2 + 2) +
          "' cx='" +
          style.activeiconsize +
          "' stroke='#" +
          style.valuecolor +
          "' stroke='1' fill-opacity='0'/></g></svg>",
        xx = 4,
        _nextIcon =
          "<svg width='" +
          (xx + 2) +
          "' height='" +
          style.valuefontsize +
          "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='" +
          (style.valuefontsize / 2 - xx) +
          "' x2='" +
          xx +
          "' y2='" +
          style.valuefontsize / 2 +
          "' stroke='#" +
          style.color +
          "' stroke-width='1' stroke-linecap='round'/><line x1='" +
          xx +
          "' y1='" +
          style.valuefontsize / 2 +
          "' x2='1' y2='" +
          (style.valuefontsize / 2 + xx) +
          "' stroke='#" +
          style.color +
          "' stroke-width='1' stroke-linecap='round'/></g></svg>",
        _prevIcon =
          "<svg width='" +
          (xx + 10) +
          "' height='" +
          (style.valuefontsize + 2) +
          "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='" +
          (style.valuefontsize / 2 + 2) +
          "' x2='" +
          xx +
          "' y2='" +
          (style.valuefontsize / 2 - xx + 2) +
          "' stroke='#" +
          style.color +
          "' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='" +
          (style.valuefontsize / 2 + 2) +
          "' x2='" +
          xx +
          "' y2='" +
          (style.valuefontsize / 2 + xx + 2) +
          "' stroke='#" +
          style.color +
          "' stroke-width='1' stroke-linecap='round'/></g></svg>",
        container = createElement("div");
      o.frame.appendChild(container),
        css(container, {
          overflow: "hidden",
          display: "block",
          opacity: 0,
          "border-radius": style.rounding,
        }),
        (container.style.zIndex = "settings" == is ? 100 : 99);
      var control = createElement("div"),
        control2,
        arr_up,
        scrollbgcolor,
        arr_down;
      if (
        (0 < style.smallfontsize &&
          o.small &&
          (style.fontsize = style.smallfontsize),
        css(control, {
          position: "relative",
          top: 0,
          left: 0,
          display: "block",
          width: "100%",
          "padding-top": style.bgpaddingtop,
          "padding-right": style.bgpaddingright + 20,
          "padding-bottom": style.bgpaddingbottom,
          "padding-left": style.bgpaddingleft,
          color: style.color,
          "font-size": style.fontsize,
          "font-family": style.font,
          "letter-spacing": style.letterspacing + "px",
        }),
        o.system.safari &&
          css(control, {
            "min-width": 220,
          }),
        "playlist" !== is &&
          css(control, {
            "overflow-y": "scroll",
          }),
        container.appendChild(control),
        1 != style.floatleft &&
          ((control2 = createElement("div")),
          css(control2, {
            display: "block",
            overflow: "hidden",
            "border-radius": style.rounding,
          }),
          1 != style.floatleft &&
            o.system.safari &&
            css(control2, {
              "min-width": 220,
            }),
          control.appendChild(control2)),
        "playlist" == is &&
          (attr(control, {
            id: v.id + "_" + is,
          }),
          1 == style.floatleft
            ? (css(control, {
                width: "100%",
                "padding-right": style.bgpaddingright,
                "padding-bottom": style.bgpaddingbottom + 20,
                "overflow-x": "scroll",
                "white-space": "nowrap",
              }),
              css(container, {
                width: o.screen_w - style.marginright - style.marginleft,
                height:
                  style.floatheight +
                  style.bgpaddingtop +
                  style.bgpaddingbottom,
              }))
            : (css(control, {
                "overflow-y": "scroll",
              }),
              1 == style.width100 && ResizePlaylist()),
          1 == style.marginbg &&
            css(container, {
              "background-color": style.marginbgcolor,
            }),
          1 == v.playlist.droplist && hide2(container)),
        1 == style.scrollarrows &&
          ((arr_up = createElement("div")),
          (scrollbgcolor = hexToRgb(
            1 == style.marginbg ? style.marginbgcolor : style.bgcolor
          )),
          1 == style.floatleft
            ? (StyleArrow(
                arr_up,
                "to right, rgba(" +
                  scrollbgcolor +
                  "," +
                  (+style.bga + 0.3) +
                  "), rgba(" +
                  scrollbgcolor +
                  ",0)",
                "left",
                12,
                5,
                7,
                10,
                7,
                10,
                12,
                15
              ),
              arr_up.addEventListener(evntclk, ScrollLeft))
            : (StyleArrow(
                arr_up,
                "to bottom, rgba(" +
                  scrollbgcolor +
                  "," +
                  (+style.bga + 0.3) +
                  "), rgba(" +
                  scrollbgcolor +
                  ",0)",
                "top",
                5,
                12,
                10,
                7,
                10,
                7,
                15,
                12
              ),
              arr_up.addEventListener(evntclk, ScrollUp)),
          (arr_down = createElement("div")),
          1 == style.floatleft
            ? (StyleArrow(
                arr_down,
                "to left, rgba(" +
                  scrollbgcolor +
                  "," +
                  (+style.bga + 0.3) +
                  "), rgba(" +
                  scrollbgcolor +
                  ",0)",
                "right",
                8,
                5,
                13,
                10,
                13,
                10,
                8,
                15
              ),
              arr_down.addEventListener(evntclk, ScrollRight))
            : (StyleArrow(
                arr_down,
                "to bottom, rgba(" +
                  scrollbgcolor +
                  ",0), rgba(" +
                  scrollbgcolor +
                  "," +
                  (+style.bga + 0.3) +
                  ")",
                "bottom",
                5,
                8,
                10,
                13,
                10,
                13,
                15,
                8
              ),
              arr_down.addEventListener(evntclk, ScrollDown)),
          arr_up.addEventListener("mouseover", ScrollOverOut),
          arr_up.addEventListener("mouseout", ScrollOverOut),
          arr_down.addEventListener("mouseover", ScrollOverOut),
          arr_down.addEventListener("mouseout", ScrollOverOut),
          control.addEventListener("wheel", Wheel),
          arr_up.addEventListener("mouseup", onMouseUp),
          arr_down.addEventListener("mouseup", onMouseUp),
          container.appendChild(arr_up),
          container.appendChild(arr_down),
          clearInterval(arrinterval),
          (arrinterval = setInterval(ArrowsInterval, 1e3))),
        control.addEventListener(evntovr, ControlOver),
        control.addEventListener(evntout, ControlOut),
        "settings" == is)
      )
        for (var i = 1; i < 11; i++)
          exist(v["control_" + is][is + i]) &&
            ((v.settings[is + i] = v["control_" + is][is + i]),
            exist(v["control_" + is][is + i + "title"]) &&
              (v.settings[is + i + "title"] =
                v["control_" + is][is + i + "title"]),
            exist(v["control_" + is][is + i + "action"]) &&
              (v.settings[is + i + "action"] =
                v["control_" + is][is + i + "action"])),
            exist(v.settings[is + i]) &&
              1 == v.settings[is + i] &&
              (CreateItem("f", i),
              StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]),
              (ftitle[i].innerHTML = Lang(v.settings[is + i + "action"])),
              exist(v.settings[is + i + "title"]) &&
                "" != v.settings[is + i + "title"] &&
                (ftitle[i].innerHTML = v.settings[is + i + "title"]),
              exist(v.settings[is + i + "action"]) &&
                ((faction[i] = v.settings[is + i + "action"]),
                Value(i),
                "scale" == faction[i] && (scale_i = i)),
              f[i].addEventListener(evntovr, onOver),
              f[i].addEventListener(evntout, onOut),
              f[i].addEventListener(evntclk, onClick),
              f[i].addEventListener("mouseup", onMouseUp),
              1 == v.settings[is + i + "hide"] &&
                css(f[i], {
                  height: 0,
                }));
      function Wheel(e) {
        "playlist" == is &&
          1 == style.floatleft &&
          e &&
          0 == e.deltaX &&
          0 != e.deltaY &&
          ((control.scrollLeft -= e.deltaY), e.preventDefault()),
          clearInterval(wheelinterval),
          (wheelinterval = setInterval(ControlOut, 3e3)),
          Retimer();
      }
      function ControlOver() {
        o.mouseDown = !0;
      }
      function ControlOut() {
        1 == style.showovercontrol &&
          (clearTimeout(o.settingsovertimer),
          (o.settingsovertimer = setTimeout(
            function () {
              o.mouseDown || HideControl();
            },
            0 < v.settings.showoverto
              ? 1e3 * v.settings.showoverto
              : o.system.tv
              ? 2e3
              : 1e3
          ))),
          (o.mouseDown = !1);
      }
      function onOver(event) {
        o.fullscreen && o.volumewheel && o.actions.volumewheel(!1);
        var i = event.target.getAttribute("fid"),
          x,
          opn,
          id;
        i
          ? (x = "f")
          : event.target.getAttribute("f2id") &&
            ((i = event.target.getAttribute("f2id")), (x = "f2")),
          i &&
            ((i = parseInt(i)),
            (opn = !1),
            exist(eval(x)[i]) &&
              (-1 < style.bgaover &&
                css(eval(x + "bg")[i], {
                  opacity: style.bgaover,
                }),
              -1 < style.aover &&
                (css(eval(x + "title")[i], {
                  opacity: style.aover,
                }),
                css(eval(x + "value")[i], {
                  opacity: style.aover,
                })),
              "playlist" == is &&
                0 == faction[i].indexOf("playlist") &&
                ((id = faction[i].substr(8)),
                plid == id || plfolder == id
                  ? (css(eval(x + "title")[i], {
                      color: style.valuecolor,
                    }),
                    css(eval(x + "value")[i], {
                      color: style.valuecolor,
                    }),
                    (opn = !0))
                  : css(eval(x + "title")[i], {
                      color: style.color,
                    })),
              (1 == style.playbgcolored && exist(style.playbgcolor) && opn) ||
                css(eval(x + "bg")[i], {
                  backgroundColor: style.bgcolorover,
                })));
      }
      function onOut(event) {
        o.fullscreen && o.volumewheel && o.actions.volumewheel(!0);
        var i = event.target.getAttribute("fid"),
          x,
          opn = !1,
          id;
        Retimer(),
          i
            ? (x = "f")
            : event.target.getAttribute("f2id") &&
              ((i = event.target.getAttribute("f2id")), (x = "f2")),
          i &&
            exist(eval(x)[i]) &&
            (-1 < style.bgaover &&
              css(eval(x + "bg")[i], {
                opacity: style.bga,
                transition: "opacity 0.1s linear",
              }),
            -1 < style.aover &&
              (css(eval(x + "title")[i], {
                opacity: style.a,
                transition: "opacity 0.1s linear",
              }),
              css(eval(x + "value")[i], {
                opacity: style.a,
                transition: "opacity 0.1s linear",
              })),
            "playlist" == is &&
              0 == faction[i].indexOf("playlist") &&
              ((id = faction[i].substr(8)),
              plid == id || plfolder == id
                ? (css(eval(x + "title")[i], {
                    color: style.valuecolor,
                  }),
                  css(eval(x + "value")[i], {
                    color: style.valuecolor,
                  }),
                  (opn = !0))
                : exist(o.plhistory[id])
                ? HistoryPlaylist(i)
                : css(eval(x + "title")[i], {
                    color: style.color,
                  })),
            (1 == style.playbgcolored && exist(style.playbgcolor) && opn) ||
              css(eval(x + "bg")[i], {
                backgroundColor: o.plhistory[id]
                  ? style.historybgcolor
                  : style.bgcolor,
              }));
      }
      function onClick(e) {
        var t;
        justshow ||
          ((t = new Date()),
          (o.clicktime = t.getTime()),
          (e = e.target.getAttribute("fid")) &&
            exist(f[e]) &&
            exist(faction[e]) &&
            Action(e, 0));
      }
      function onMouseUp(e) {
        (e.cancelBubble = !0), Retimer();
      }
      function onClick2(e) {
        var t;
        justshow ||
          ((t = new Date()),
          (o.clicktime = t.getTime()),
          (e = e.target.getAttribute("f2id")) &&
            (0 == e ? Home() : exist(f2action[e]) && Action2(e)));
      }
      function onClickSubtitle(e) {
        e = e.target.getAttribute("setupx");
        e && ActionOptions(e);
      }
      function onClickSubtitle2(e) {
        Retimer();
        var t,
          o = e.target.getAttribute("f2id");
        exist(f2action[o]) &&
          0 < f2action[o].indexOf("=") &&
          ((t = f2action[o].substr(0, f2action[o].indexOf("="))),
          (e = f2action[o].substr(f2action[o].indexOf("=") + 1)),
          v[(o = open_action + "_reset")] || (v[o] = []),
          exist(v[o][t]) || (v[o][t] = v[t] + ""),
          StyleSubtitle(t, e));
      }
      function StyleSubtitle(e, t) {
        (v[e] = t),
          o.storage &&
            1 == v.sub_designstore &&
            "sub_shift" != e &&
            localStorage.setItem("pljs" + e, t),
          o.actions.RenewSubtitle(),
          ActionOptions(e);
      }
      function onClickTimer2(e) {
        var t = e.target.getAttribute("f2id"),
          e = f2action[t];
        exist(e) &&
          0 < e.indexOf("=") &&
          ((t = e.substr(0, e.indexOf("="))),
          (e = e.substr(e.indexOf("=") + 1)),
          (v[t] = e),
          SubtitleTimerMenu(),
          Value(o[open_action + "_i"]),
          "offsettimer" == open_action && SettingsTimers("offsetwrite"));
      }
      function Value(e) {
        if (exist(faction[e])) {
          var t = !1,
            i = !1,
            s = "";
          if ("settings" == is) {
            if (
              ("quality" == faction[e] && (s = o.media.getQuality()),
              "audiotrack" == faction[e] && (s = o.media.getAudioTrack()),
              "channel" == faction[e] &&
                o.channels &&
                (s = o.files_channel[o.current_channel]),
              ("audiotrack" != faction[e] &&
                "channel" != faction[e] &&
                "quality" != faction[e]) ||
                (0 != o["files_" + faction[e]].length &&
                (1 != o["files_" + faction[e]].length ||
                  (1 == style.show1value && 1 != o["files_" + faction[e]][0]))
                  ? (i = !0)
                  : (t = !0)),
              "airplay" == faction[e] && (o.airplay ? (i = !0) : (t = !0)),
              "download" == faction[e] &&
                ("native" == o.file_type || v.download ? (i = !0) : (t = !0)),
              "subtitle" == faction[e])
            )
              if (exist(o.subs)) {
                (i = !0),
                  o.subtitle_on || 1 == v.sub_off
                    ? o.sbt &&
                      (s =
                        o.files_subtitle[
                          o.subtitle_on ? o.current_subtitle : o.sbt.ioff()
                        ])
                    : (s = "");
                for (var n = 0, a = 0; a < o.subs.length; a++)
                  "" != o.subs[a] && n++;
                1 == n && 1 == o.subload && (n = 0), 0 == n && (i = !(t = !0));
              } else t = !0;
            if (
              ("speed" == faction[e] &&
                (1 == (s = o.files_speed[o.current_speed]) &&
                  (s = Lang("normal")),
                (i = !0),
                ("vimeo" == o.file_type ||
                  (o.media.isLive() && 1 != v.speed4live)) &&
                  (i = !(t = !0))),
              "scale" == faction[e] &&
                ((s = Math.round(100 * o.mediascale.x) + "%"), (i = !0)),
              0 < faction[e].indexOf("timer"))
            ) {
              for (
                var r = " ", l = ["hour", "minute", "second"], c = 0;
                c < l.length;
                c++
              )
                exist(v[faction[e] + l[c]]) &&
                  " " != v[faction[e] + l[c]] &&
                  (r += (" " != r ? ":" : "") + v[faction[e] + l[c]]);
              (s = " 0:0" != r && -1 < r.indexOf(":") ? r : " "), (i = !0);
            }
          }
          (fvalue[e].innerHTML =
            s +
            ("" != s && 1 != style.hidearrow
              ? ' &nbsp;<svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="#' +
                style.valuecolor +
                '" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>'
              : "")),
            t &&
              (hide(f[e]),
              "settings" == is &&
                (stout[e] && clearTimeout(stout[e]),
                o.controls
                  ? o.controls.SettingsN(e, !1, s)
                  : (stout[e] = setTimeout(function () {
                      o.controls.SettingsN(e, !1, s);
                    }, 200))),
              css(f[e], {
                position: "absolute",
                right: 0,
                top: -100,
              })),
            i &&
              (1 == style.floatleft
                ? css(f[e], {
                    display: "inline-block",
                  })
                : show(f[e]),
              "settings" == is &&
                (stout[e] && clearTimeout(stout[e]),
                o.controls
                  ? o.controls.SettingsN(e, !0, s)
                  : (stout[e] = setTimeout(function () {
                      o.controls.SettingsN(e, !0, s);
                    }, 500))),
              css(f[e], {
                position: "relative",
                right: 0,
                top: 0,
              })),
            Resize();
        }
        for (var d, u = 1; u < f.length; u++)
          f[u] &&
            isVisible(f[u]) &&
            ((d = !!empty),
            (empty = !1),
            d && o.controls && o.controls.refresh());
      }
      function Action(e, t) {
        if (exist(faction[e])) {
          (o.setaction = !0), Retimer();
          var i = VisibleItems();
          if (open_action != faction[e]) {
            if (
              "quality" == (open_action = faction[e]) ||
              "audiotrack" == open_action ||
              "subtitle" == open_action ||
              "speed" == open_action ||
              "channel" == open_action ||
              "scale" == open_action ||
              0 < open_action.indexOf("timer")
            ) {
              open_settings = e;
              var s = copyObject(o["files_" + open_action]);
              "sleeptimer" == open_action &&
                (s = SettingsTimers("sleepoptions")),
                "offsettimer" == open_action &&
                  (s = SettingsTimers("offsetoptions"));
              for (
                var n = o["current_" + open_action],
                  a = o["pressed_" + open_action],
                  r = 1;
                r < f.length;
                r++
              )
                f[r] && (f[r].style.display = "none");
              (f2 = []),
                CreateItem("f2", 0),
                StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]),
                css(f2[0], {
                  "border-bottom":
                    "1px solid " +
                    (1 == style.bordercolored
                      ? "#" + style.bordercolor.replace("#", "")
                      : "rgba(100,100,100,0.7)"),
                }),
                (_cstm = t);
              var l,
                t = !1;
              if (
                ((f2title[0].innerHTML =
                  (i[0] < 2 || 1 == _cstm || 1 == style.noprevicon
                    ? ""
                    : _prevIcon) +
                  (v.settings[is + e + "title"] &&
                  "" != v.settings[is + e + "title"]
                    ? v.settings[is + e + "title"]
                    : Lang(v.settings[is + e + "action"]))),
                "subtitle" != open_action ||
                  o.hls_subs ||
                  o.dash_subs ||
                  (((l = createElement("div")).innerHTML = Lang("options")),
                  css(l, {
                    color: style.color,
                    pointerEvents: "auto",
                    cursor: "pointer",
                  }),
                  f2value[0].appendChild(l),
                  l.addEventListener(evntclk, SubtitleSettings),
                  (t = !0)),
                "subtitle" == open_action &&
                  1 == v.sub_upload &&
                  !o.system.tv &&
                  o.sbt &&
                  exist(window.FileReader) &&
                  (((l = createElement("div")).innerHTML =
                    "<input type='file' id='" +
                    v.id +
                    "_subfile' accept='.vtt,.ass,.str' style='display:none'/>" +
                    Lang("upload")),
                  css(l, {
                    color: style.color,
                    pointerEvents: "auto",
                    cursor: "pointer",
                    "margin-left": t ? "10px" : 0,
                  }),
                  f2value[0].appendChild(l),
                  (o.subupld = document.getElementById(v.id + "_subfile")),
                  (o.subupld.onchange = o.sbt.SubUpload),
                  l.addEventListener(evntclk, o.sbt.SubUpload)),
                t && sub_settings_on)
              )
                for (
                  2 == _cstm && ((s = []), hide2(f2[0])), r = 0;
                  r < o.sub_options.length;
                  r++
                )
                  (0 == v.sub_all && "sub_color2" == o.sub_options[r]) ||
                    s.push("pjslng_" + o.sub_options[r]);
              if (
                ("scale" == open_action &&
                  (Scale(),
                  css(f2value[0], {
                    width: 2.5 * style.valuefontsize,
                    "text-align": "right",
                  })),
                css(f2title[0], {
                  "font-size": style.headfontsize,
                }),
                (f2action[0] = "home"),
                1 != _cstm && 1 < i[0]
                  ? (f2[0].addEventListener(evntovr, onOver),
                    f2[0].addEventListener(evntout, onOut),
                    f2[0].addEventListener(evntclk, onClick2),
                    f2[0].addEventListener("mouseup", onMouseUp))
                  : css(f2[0], {
                      cursor: "default",
                    }),
                1 == style.nohead && hide2(f2[0]),
                exist(s))
              )
                for (var c = "", r = 0; r < s.length; r++) {
                  var d,
                    u,
                    p = r + 1,
                    h = 0,
                    m = !1;
                  s[r] &&
                    "" != trim(s[r]) &&
                    ("quality" == open_action &&
                      (s[r] == Lang("auto") && (h = 1),
                      "hls" == o.file_type &&
                        1 == v.hlsqhsort &&
                        ((d = int(s[r])) && d < c && (h = 2), (c = int(s[r])))),
                    CreateItem("f2", p, h),
                    StyleItem(
                      f2[p],
                      f2bg[p],
                      f2title[p],
                      f2value[p],
                      faction[e]
                    ),
                    "speed" == open_action &&
                      1 == s[r] &&
                      (s[r] = Lang("normal")),
                    "string" == typeof s[r]
                      ? (0 == s[r].indexOf("<<<") &&
                          ((s[r] = s[r].replace("<<<", "")), (m = !0)),
                        0 < s[r].indexOf("timer") &&
                          (o[open_action + "_i"] = e),
                        0 == s[r].indexOf("pjslng")
                          ? (0 < (h = s[r]).indexOf("timer")
                              ? (f2title[p].innerHTML = Lang(
                                  s[r].substr(h.indexOf("timer") + 5)
                                ))
                              : (f2title[p].innerHTML = Lang(s[r].substr(7))),
                            "pjslng_sub_sizeproc" == s[r] &&
                              css(f2[p], {
                                "border-top": "1px solid rgba(100,100,100,0.7)",
                              }))
                          : (f2title[p].innerHTML = s[r]))
                      : (f2title[p].innerHTML = s[r]),
                    (f2action[p] = open_action + r),
                    (n != r && a != r) ||
                      ((f2value[p].innerHTML = n == r ? _activeIcon : _xIcon),
                      n == r &&
                        css(f2title[p], {
                          color: style.valuecolor,
                        })),
                    "string" == typeof s[r] &&
                      0 == s[r].indexOf("pjslng") &&
                      (0 < (u = s[r].substr(7)).indexOf("color")
                        ? (f2value[p].innerHTML =
                            "<div style='" +
                            ("000000" == v[u]
                              ? "border:1px solid #999;height:8px;width:8px;"
                              : "height:10px;width:10px;") +
                            ";background-color:" +
                            (-1 == v[u].indexOf("#") ? "#" : "") +
                            v[u] +
                            ";border-radius:10px;'></div>")
                        : exist(v[s[r].substr(7)]) &&
                          (f2value[p].innerHTML = v[s[r].substr(7)])),
                    "quality" == open_action &&
                      (s[r] == Lang("auto") &&
                        o.media.autoQuality() &&
                        css(f2title[p], {
                          color: style.valuecolor,
                        }),
                      exist(v.forbidden_quality) &&
                        -1 < v.forbidden_quality.indexOf(s[r]) &&
                        hide2(f2[p])),
                    (u = ""),
                    "string" == typeof s[r] &&
                      0 == s[r].indexOf("pjslng") &&
                      (attr(f2[p], {
                        f2parent: e,
                        setupx: s[r].substr(7),
                      }),
                      (u = "onClickSubtitle")),
                    m
                      ? css(f2[p], {
                          cursor: "default",
                        })
                      : (f2[p].addEventListener(evntovr, onOver),
                        f2[p].addEventListener(evntout, onOut),
                        "onClickSubtitle" == u
                          ? f2[p].addEventListener(evntclk, onClickSubtitle)
                          : f2[p].addEventListener(evntclk, onClick2),
                        f2[p].addEventListener("mouseup", onMouseUp)));
                }
              Resize();
            }
            "download" == faction[e] && o.actions.Download(),
              -1 < faction[e].indexOf("playlist") &&
                ((i = faction[e].substr(8)),
                exist(o.playlist_dic[i]) &&
                  (exist(o.playlist_dic[i].file)
                    ? ((o.seekto = void 0),
                      ActionPlaylist(e),
                      UpdateStart(i),
                      SettingsTimers("offset"),
                      exist(o.playlist_dic[i].redirect) &&
                      1 == v.redirect &&
                      1 == v.redirectplaylist
                        ? redirect(o.playlist_dic[i].redirect)
                        : (UpdateVars0(i),
                          o.actions.NewFile(
                            o.playlist_dic[i].file,
                            1 == v.playlist.dontplay ? 1 : void 0
                          ),
                          0 == v.playlist.always &&
                            1 == v.playlist.autohide &&
                            setTimeout(HideControl, 200),
                          (autoprevopenfolder = autonextopenfolder = !1),
                          UpdateVars(i)))
                    : exist(o.playlist_dic[i].folder) &&
                      (UpdatePlaylist(i),
                      autonextopenfolder
                        ? -1 == plx && Action(0, 0)
                        : autoprevopenfolder &&
                          -1 == plx &&
                          Action(parseInt(f.length) - 2, 0))),
                o.droplist && o.droplist.Update()),
              "airplay" == faction[e] && o.media.Airplay();
          }
        }
      }
      function ActionOptions(e) {
        if ("sub_reset" != e) {
          Retimer();
          for (var t = 0; t < f2.length; t++)
            f2[t] && (f2[t].style.display = "none");
          (f2 = []),
            CreateItem("f2", 0),
            StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]),
            css(f2[0], {
              "border-bottom":
                "1px solid " +
                (1 == style.bordercolored
                  ? "#" + style.bordercolor.replace("#", "")
                  : "rgba(100,100,100,0.7)"),
            }),
            0 < e.indexOf("timer")
              ? (f2[0].addEventListener(evntclk, SubtitleTimerMenu),
                (f2title[0].innerHTML = Lang(e.substr(e.indexOf("timer") + 5))))
              : (f2[0].addEventListener(evntclk, SubtitleSettingsMenu),
                (f2title[0].innerHTML =
                  (1 != style.noprevicon ? _prevIcon : "") + Lang(e))),
            css(f2title[0], {
              "font-size": style.headfontsize,
            }),
            f2[0].addEventListener(evntovr, onOver),
            f2[0].addEventListener(evntout, onOut),
            f2[0].addEventListener("mouseup", onMouseUp);
          var o,
            i = [],
            s = !1;
          if (
            (0 < e.indexOf("size") &&
              (i = [
                "50%",
                "75%",
                "100%",
                "125%",
                "150%",
                "175%",
                "200%",
                "250%",
                "300%",
                "400%",
              ]),
            0 < e.indexOf("bga") &&
              (i = [
                "0",
                "0.2",
                "0.3",
                "0.4",
                "0.5",
                "0.6",
                "0.7",
                "0.8",
                "0.9",
                "1",
              ]),
            0 < e.indexOf("shift"))
          )
            for (t = -5; t < 5.5; t += 0.5) i.push(Math.round(100 * t) / 100);
          if (
            (0 < e.indexOf("weight") && (i = [200, 400, 600]),
            0 < e.indexOf("bottom"))
          )
            for (t = 0; t < 21; t++) i[t] = 10 * t;
          if (0 < e.indexOf("hour")) for (t = 0; t < 24; t++) i[t] = t;
          if (0 < e.indexOf("minute") || 0 < e.indexOf("second"))
            for (t = 0; t < 60; t++) i[t] = t;
          for (
            0 < e.indexOf("shadow") && ((s = !0), (i = [0, 1])),
              0 < e.indexOf("color") &&
                ((i = [
                  "ffffff",
                  "ffeeab",
                  "72ccf8",
                  "62de50",
                  "faed54",
                  "feba54",
                  "e8bbff",
                  "ffc7d1",
                  "aaaaaa",
                  "d9bb8c",
                  "b3fee8",
                  "4bd9ac",
                  "FEF370",
                  "D90000",
                  "073DA0",
                  "409829",
                  "644082",
                  "000000",
                ]),
                (o = v[e].replace("#", "")),
                -1 == i.indexOf(o) && (i[8] = o)),
              a = 1;
            a <= i.length;
            a++
          )
            CreateItem("f2", a, 0),
              StyleItem(f2[a], f2bg[a], f2title[a], f2value[a]),
              css(f2value[a], {
                "padding-left": 0,
              }),
              0 < e.indexOf("color") ||
              0 < e.indexOf("bottom") ||
              0 < e.indexOf("timer") ||
              0 < e.indexOf("shift")
                ? (a % 3 != 0 &&
                    css(f2[a], {
                      float: "left",
                    }),
                  css(f2[a], {
                    width: "33.3%",
                  }),
                  0 < e.indexOf("color")
                    ? ((f2title[a].innerHTML =
                        "<div style='" +
                        ("000000" == i[a - 1]
                          ? "border:1px solid #999;height:18px;width:18px;"
                          : "height:20px;width:20px;") +
                        ";background-color:#" +
                        i[a - 1] +
                        ";border-radius:20px;'></div>"),
                      css(f2[a], {
                        "line-height": 1,
                      }))
                    : (f2title[a].innerHTML = i[a - 1]))
                : 0 < e.indexOf("weight")
                ? (f2title[a].innerHTML = i[a - 1])
                : (a % 2 != 0 &&
                    css(f2[a], {
                      float: "left",
                    }),
                  css(f2[a], {
                    width: "50%",
                  }),
                  (f2title[a].innerHTML = s
                    ? Lang(i[a - 1] + "val")
                    : i[a - 1])),
              (f2action[a] = e + "=" + i[a - 1]),
              ((i[a - 1] == v[e] && " " != String(v[e])) ||
                v[e] == "#" + i[a - 1]) &&
                ((f2value[a].innerHTML = _activeIcon),
                css(f2title[a], {
                  color: style.valuecolor,
                })),
              f2[a].addEventListener(evntovr, onOver),
              f2[a].addEventListener(evntout, onOut),
              0 < e.indexOf("timer")
                ? f2[a].addEventListener(evntclk, onClickTimer2)
                : f2[a].addEventListener(evntclk, onClickSubtitle2),
              f2[a].addEventListener("mouseup", onMouseUp);
          Resize();
        } else {
          var n = open_action + "_reset";
          if (v[n]) {
            for (var a in v[n])
              v[n].hasOwnProperty(a) && StyleSubtitle(a, v[n][a]);
            SubtitleSettingsMenu();
          }
        }
      }
      function UpdateVars0(e) {
        exist(o.playlist_dic[e].poster) &&
          ((v.poster = o.playlist_dic[e].poster),
          exist(v.poster) && o.media.Poster(v.poster)),
          exist(o.playlist_dic[e].title) &&
            (o.titlestore = o.playlist_dic[e].title);
      }
      function UpdateVars(e) {
        exist(o.playlist_dic[e].title) &&
          1 == v.showtitleplaylist &&
          (o.actions.TitleTemplate(o.playlist_dic[e]) ||
            (v.title =
              (1 == v.addtitleplaylist && exist(o.maintitle)
                ? o.maintitle + (1 == v.addtitleplaylistbr ? "<br>" : " ")
                : "") + o.playlist_dic[e].title),
          o.actions.Title("title")),
          1 == v.pointed &&
            (exist(o.playlist_dic[e].points)
              ? (v.points = o.playlist_dic[e].points)
              : (v.points = []),
            o.controls.RenewPoints()),
          (v.remove = void 0);
        for (
          var t = [
              "url",
              "url2",
              "url3",
              "vars",
              "embed",
              "end",
              "remove",
              "delete",
              "heartbeat",
              "download",
              "label",
              "title2",
              "thumbnails",
            ],
            i = 0;
          i < t.length;
          i++
        )
          exist(o.playlist_dic[e][t[i]]) && (v[t[i]] = o.playlist_dic[e][t[i]]);
        (v.start = 0),
          UpdateStart(e),
          exist(o.playlist_dic[e].sub) &&
            (o.playlist_dic[e].subtitle = o.playlist_dic[e].sub),
          exist(o.playlist_dic[e].subtitle) &&
            o.actions.Subtitle(o.playlist_dic[e].subtitle),
          exist(o.playlist_dic[e].design) &&
            apiProcessor("design", o.playlist_dic[e].design);
      }
      function UpdateStart(e) {
        e = o.playlist_dic[e].start;
        exist(e) &&
          ("continue" == e
            ? 0 < o.media.time() && (v.start = o.seekto = o.media.time())
            : (v.start = o.seekto = e));
      }
      function ActionPlaylist(e) {
        var t;
        0 != plx || o.start
          ? ((o.plopenid = e),
            -1 < plx && HistoryPlaylist(plx),
            "" != plid &&
              ((o.plhistory[plid] = !0),
              (shuffle = removebykey(shuffle, plid))))
          : (css(ftitle[plx], {
              color: style.color,
            }),
            css(fbg[plx], {
              backgroundColor: style.bgcolor,
            }),
            (fvalue[plx].innerHTML = "")),
          faction[e] &&
            ((t = faction[e].substr(8)),
            (fvalue[e].innerHTML = _activeIcon),
            css(ftitle[e], {
              color: style.valuecolor,
              "text-decoration": "none",
              opacity: style.a,
            }),
            1 == style.playbgcolored &&
              exist(style.playbgcolor) &&
              css(fbg[e], {
                backgroundColor: style.playbgcolor,
              }),
            (plx = e),
            (plid = t),
            (o.plid = plid),
            (v.plstart = plid),
            (o.playlist_title = ftitle[e].innerHTML),
            (o.plopenid = plid),
            (plfolder = o.playlist_dic[t].pjs_parent),
            o.controls && o.controls.PlaylistControls());
      }
      function UpdatePlaylist(e) {
        var t = 0 == e ? o.playlist : o.playlist_dic[e];
        o.plopenid = e;
        for (var i, s = 0; s < f.length; s++)
          (1 == style.floatleft ? control : control2).removeChild(f[s]),
            (f[s] = null);
        (f = []),
          (plx = -1),
          exist(t.folder) &&
            (CreateItem("f", (n = Object.keys(t.folder).length)),
            (faction[n] = "playlistfolder"),
            StyleItem(f[n], fbg[n], ftitle[n], fvalue[n]),
            1 == style.floatleft &&
              css(f[n], {
                width: 1 == style.floatlimitwidth ? style.floatwidth : "auto",
                height: style.floatheight,
              }),
            1 == style.borderbottom &&
              (1 == style.floatleft
                ? css(f[n], {
                    borderRight: "1px solid #" + style.headbordercolor,
                  })
                : css(f[n], {
                    borderBottom: "1px solid #" + style.headbordercolor,
                  })),
            (e = t.title),
            1 != style.noprevicon && (e = _prevIcon + e),
            (ftitle[n].innerHTML = e),
            css(ftitle[n], {
              "font-size": style.headfontsize,
            }),
            (i = t.pjs_parent),
            f[n].addEventListener(evntovr, onOver),
            f[n].addEventListener(evntout, onOut),
            f[n].addEventListener(evntclk, function () {
              PlaylistBack(i);
            }),
            (t = t.folder));
        var n = Object.keys(t).length;
        (shuffle = []), (shuffle_ = []);
        for (var a, s = 0; s < n; s++)
          CreateItem("f", s),
            (faction[s] = "playlist" + t[s].id),
            exist(o.plhistory[t[s].id]) ||
              exist(t[s].folder) ||
              ((shuffle[t[s].id] = s), (shuffle_[t[s].id] = s)),
            StyleItem(f[s], fbg[s], ftitle[s], fvalue[s]),
            1 == style.floatleft &&
              (0 == style.activeiconsize &&
                (css(ftitle[s], {
                  width:
                    style.floatwidth - style.paddingleft - style.paddingright,
                }),
                hide2(fvalue[s])),
              css(f[s], {
                width: 1 == style.floatlimitwidth ? style.floatwidth : "auto",
                height: style.floatheight,
              })),
            1 == style.borderbottom &&
              s < n - 1 &&
              ((a = createElement("div")),
              f[s].appendChild(a),
              1 == style.floatleft
                ? css(a, {
                    position: "absolute",
                    top: 0,
                    right: 0,
                    width: 1,
                    height: "100%",
                    background: "#" + style.bordercolor,
                    pointerEvents: "none",
                  })
                : css(a, {
                    position: "absolute",
                    bottom: 0,
                    left: 0,
                    width: "100%",
                    height: 1,
                    background: "#" + style.bordercolor,
                    pointerEvents: "none",
                  })),
            (ftitle[s].innerHTML = t[s].title || "&nbsp;"),
            1 == v.timestore &&
              1 == v.playedstore &&
              t[s].id &&
              o.playedstored &&
              -1 < o.playedstored.indexOf(t[s].id) &&
              (t[s].played = 1),
            exist(t[s].played) &&
              1 == t[s].played &&
              ((o.plhistory[t[s].id] = !0), HistoryPlaylist(s)),
            exist(t[s].folder) &&
              ((fvalue[s].innerHTML = _nextIcon),
              css(fvalue[s], {
                color: style.color,
              })),
            f[s].addEventListener(evntovr, onOver),
            f[s].addEventListener(evntout, onOut),
            f[s].addEventListener(evntclk, onClick),
            f[s].addEventListener("mouseup", onMouseUp),
            exist(o.plhistory[t[s].id]) && HistoryPlaylist(s),
            plid == t[s].id && ActionPlaylist(s),
            plfolder == t[s].id &&
              (css(ftitle[s], {
                color: style.valuecolor,
              }),
              css(fvalue[s], {
                color: style.valuecolor,
              }));
        Resize(), (empty = !1), o.controls && o.controls.refresh();
      }
      function StyleArrow(e, t, i, s, n, a, r, l, c, d, u) {
        var p = 1 == style.floatleft ? "40px" : "100%",
          v = 1 == style.floatleft ? "100%" : "40px";
        css(e, {
          position: "absolute",
          display: "inline-block",
          width: p,
          height: v,
          "text-align": "center",
        }),
          1 == style.scrollarrowgradient &&
            css(e, {
              background: "linear-gradient(" + t + ")",
            }),
          1 == style.floatleft || o.system.mobile
            ? css(e, {
                cursor: "pointer",
              })
            : css(e, {
                "pointer-events": "none",
              }),
          1 == style.limitwidth &&
            css(e, {
              "max-width": style.limitmaxwidth + "px!important",
            }),
          "top" == i &&
            css(e, {
              top: -1,
              left: 0,
            }),
          "bottom" == i &&
            css(e, {
              bottom: -1,
              left: 0,
            }),
          "left" == i &&
            css(e, {
              top: 0,
              left: 0,
            }),
          "right" == i &&
            css(e, {
              top: 0,
              right: 0,
            }),
          ("right" != i && "left" != i) ||
            css(e, {
              "text-align": "left",
              "padding-top": container.offsetHeight / 2 - 10,
            }),
          (e.innerHTML =
            "<center><div " +
            (1 == style.scrollarrowbgover
              ? "onMouseOver='this.style.backgroundColor=\"#" +
                style.scrollarrowbgovercolor +
                "\"' onMouseOut='" +
                (1 == style.scrollarrowbg
                  ? 'this.style.backgroundColor="#' + style.scrollarrowbgcolor
                  : 'this.style.background="none') +
                "\"'"
              : "") +
            " style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;" +
            (1 == style.scrollarrowbg
              ? "background-color:#" + style.scrollarrowbgcolor + ";"
              : "") +
            ("top" == i ? "margin-top:10px;" : "") +
            ("bottom" == i ? "margin-top:10px;" : "") +
            ("right" == i ? "margin-left:0px;" : "") +
            ("left" == i ? "margin-right:0px;" : "") +
            "'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='" +
            s +
            "' y1='" +
            n +
            "' x2='" +
            a +
            "' y2='" +
            r +
            "' stroke='#" +
            style.scrollarrowcolor +
            "' stroke-width='" +
            style.scrollarrowsize +
            "' stroke-linecap='round'/><line x1='" +
            l +
            "' y1='" +
            c +
            "' x2='" +
            d +
            "' y2='" +
            u +
            "' stroke='#" +
            style.scrollarrowcolor +
            "' stroke-width='" +
            style.scrollarrowsize +
            "' stroke-linecap='round'/></g></svg></div></center>");
      }
      function ArrowsInterval() {
        is_visible && Arrows();
      }
      function Arrows(e) {
        var t, o, i;
        1 != style.scrollarrows ||
          removed ||
          ((i =
            1 == style.floatleft
              ? ((t = control.scrollWidth),
                (o =
                  container.offsetWidth +
                  style.bgpaddingleft +
                  style.bgpaddingright),
                control.scrollLeft)
              : ((t = control.scrollHeight),
                (o = container.offsetHeight),
                control.scrollTop)),
          o < t
            ? (0 < i
                ? isVisible(arr_up) ||
                  (show(arr_up),
                  new Motion({
                    mc: arr_up,
                    type: "alpha_div",
                    to: 1,
                    time: 0.3,
                    me: "arr_up",
                  }))
                : (isVisible(arr_up) &&
                    new Motion({
                      mc: arr_up,
                      type: "alpha_div",
                      to: 0,
                      time: 0.3,
                      me: "arr_up",
                      hide: !0,
                    }),
                  e && e.deltaY < 0 && e.preventDefault()),
              i < t - o - 10
                ? isVisible(arr_down) ||
                  (show(arr_down),
                  new Motion({
                    mc: arr_down,
                    type: "alpha_div",
                    to: 1,
                    time: 0.3,
                    me: "arr_down",
                  }))
                : (isVisible(arr_down) &&
                    new Motion({
                      mc: arr_down,
                      type: "alpha_div",
                      to: 0,
                      time: 0.3,
                      me: "arr_down",
                      hide: !0,
                    }),
                  e && 0 < e.deltaY && e.preventDefault()))
            : (hide(arr_up), hide(arr_down)));
      }
      function ScrollDown() {
        var e = control.scrollTop + container.offsetHeight - 60;
        new Motion({
          mc: control,
          type: "scroll",
          to: e,
          time: 0.3,
          me: "scroll_down",
          ease: "cubic",
        });
        setTimeout(Arrows, 1e3);
      }
      function ScrollUp() {
        var e = control.scrollTop - container.offsetHeight + 60;
        new Motion({
          mc: control,
          type: "scroll",
          to: e,
          time: 0.3,
          me: "scroll_up",
          ease: "cubic",
        });
        setTimeout(Arrows, 1e3);
      }
      function ScrollOverOut(e) {
        clearTimeout(o.settingsovertimer), e.stopPropagation();
      }
      function ScrollRight() {
        var e =
          control.scrollLeft +
          (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) -
          60;
        new Motion({
          mc: control,
          type: "scrollleft",
          to: e,
          time: 0.3,
          me: "scroll_right",
          ease: "cubic",
        });
        setTimeout(Arrows, 1e3);
      }
      function ScrollLeft() {
        var e =
          control.scrollLeft -
          (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) +
          60;
        new Motion({
          mc: control,
          type: "scrollleft",
          to: e,
          time: 0.3,
          me: "scroll_left",
          ease: "cubic",
        });
        setTimeout(Arrows, 1e3);
      }
      function PlaylistBack(e) {
        "" == e
          ? UpdatePlaylist(0)
          : exist(o.playlist_dic[e]) && UpdatePlaylist(e),
          (open_action = "");
      }
      function HistoryPlaylist(e) {
        (fvalue[e].innerHTML = ""),
          css(ftitle[e], {
            color: style.historycolor,
          }),
          1 == style.historytitlestrike &&
            css(ftitle[e], {
              "text-decoration": "line-through",
            }),
          -1 < style.historytitlea &&
            css(ftitle[e], {
              opacity: style.historytitlea,
            }),
          css(fbg[e], {
            backgroundColor: style.historybgcolor,
          }),
          -1 < style.historybga &&
            css(fbg[e], {
              opacity: style.historybga,
            });
      }
      function Action2(e) {
        exist(f2action[e]) &&
          (Retimer(),
          0 == f2action[e].indexOf("quality") &&
            o.actions.SetQuality(f2action[e].substr(7)),
          0 == f2action[e].indexOf("audiotrack") &&
            o.actions.SetAudioTrack(f2action[e].substr(10)),
          0 == f2action[e].indexOf("subtitle") &&
            (o.sbt || (o.sbt = new PluginSub()),
            o.sbt.SetSubtitle(f2action[e].substr(8))),
          0 == f2action[e].indexOf("channel") &&
            1 == v.channels &&
            o.channels.SetChannel(f2action[e].substr(7)),
          0 == f2action[e].indexOf("scale") &&
            ("scale0" == f2action[e] && o.media.scale(style.scale / 100),
            "scale1" == f2action[e] && o.media.scale("-" + style.scale / 100),
            "scale2" == f2action[e] && o.media.normalscale()),
          0 < f2action[e].indexOf("timer") &&
            0 < f2action[e].indexOf("timer2") &&
            (SettingsTimers(open_action + "0"),
            Value(o[open_action + "_i"]),
            "offsettimer" == open_action && SettingsTimers("offsetwrite"),
            Home()),
          0 == f2action[e].indexOf("speed") &&
            (o.actions.SetSpeed(f2action[e].substr(5)),
            UpdateSpeed(),
            setTimeout(HideControl, 200)));
      }
      function UpdateSpeed() {
        for (var e = 0; e < faction.length; e++)
          "speed" == faction[e] &&
            (Value(e), "speed" == open_action && (Remove2(), Action(e, 0)));
      }
      function CreateItem(x, i, toend) {
        exist(eval(x)) &&
          ((eval(x)[i] = createElement("div")),
          i < 2 || "f" == x || "quality" != open_action || 1 == toend
            ? (1 == style.floatleft ? control : control2).appendChild(
                eval(x)[i]
              )
            : 1 == style.floatleft
            ? control.insertBefore(eval(x)[i], eval(x)[i - 1])
            : control2.insertBefore(
                eval(x)[i],
                eval(x)[2 == toend ? i - 2 : i - 1]
              ),
          "f" == x &&
            attr(eval(x)[i], {
              fid: i,
            }),
          "f2" == x &&
            attr(eval(x)[i], {
              f2id: i,
            }),
          (eval(x + "bg")[i] = createElement("div")),
          eval(x)[i].appendChild(eval(x + "bg")[i]),
          (eval(x + "img")[i] = createElement("div")),
          eval(x)[i].appendChild(eval(x + "img")[i]),
          css(eval(x + "img")[i], {
            position: "absolute",
            right: 0,
            top: 0,
            width: "100%",
            height: "100%",
            pointerEvents: "none",
          }),
          (eval(x + "title")[i] = createElement("div")),
          eval(x)[i].appendChild(eval(x + "title")[i]),
          (eval(x + "value")[i] = createElement("div")),
          eval(x)[i].appendChild(eval(x + "value")[i]),
          "f2" == x &&
            "settings" == is &&
            0 == style.activeicon &&
            hide2(eval(x + "value")[i]));
      }
      function StyleItem(e, t, o, i, s) {
        css(e, {
          position: "relative",
          right: 0,
          top: 0,
          cursor: "pointer",
          height: "auto",
          width: "100%",
          overflow: "hidden",
          display: "block",
          "line-height": "1.5em",
        }),
          style.floatmarginright &&
            1 == style.floatleft &&
            css(e, {
              marginRight: style.floatmarginright,
            }),
          1 == style.floatleft &&
            css(e, {
              display: "inline-block",
              "vertical-align": "top",
              "white-space": "normal",
            }),
          css(t, {
            position: "absolute",
            right: 0,
            top: 0,
            width: "100%",
            height: "100%",
            backgroundColor: style.bgcolor,
            opacity: style.bga,
            pointerEvents: "none",
            transition: "opacity 0.2s linear,background .2s linear",
          }),
          css(o, {
            position: "relative",
            right: 0,
            top: 0,
            float: style.align || "left",
            color: style.color,
            "padding-top": style.paddingtop,
            "padding-right": style.paddingright,
            "padding-bottom": style.paddingbottom,
            "padding-left": style.paddingleft,
            pointerEvents: "none",
            opacity: style.a,
            transition: "opacity 0.2s linear,color 0.2s linear",
          }),
          css(i, {
            position: "relative",
            right: 0,
            top: 0,
            float: style.valuealign || "right",
            "padding-top":
              style.paddingtop +
              (style.valuefontsize < style.fontsize
                ? (style.fontsize - style.valuefontsize) / 2
                : 0),
            "padding-right": style.paddingright,
            "padding-left": style.paddingleft,
            pointerEvents: "none",
            "font-size": style.valuefontsize,
            opacity: style.a,
            color: style.valuecolor,
            transition: "opacity 0.2s linear,color 0.2s linear",
          }),
          1 == style.limitwidth
            ? (css(e, {
                "max-width": style.limitmaxwidth + "px!important",
              }),
              css(o, {
                "max-width": style.limitmaxwidth - 70 + "px!important",
              }))
            : 1 == style.floatleft
            ? 1 == style.floatlimitwidth &&
              (css(e, {
                width: style.floatwidth,
              }),
              css(o, {
                width: style.floatwidth - 70,
              }))
            : (css(o, {
                "white-space": "nowrap",
              }),
              css(i, {
                "white-space": "nowrap",
              }));
      }
      function Home() {
        for (var e = 1; e < f.length; e++)
          exist(f[e]) &&
            (1 == style.floatleft
              ? (f[e].style.display = "inline-block")
              : (f[e].style.display = "block"));
        Retimer(),
          Remove2(),
          Resize(),
          (open_action = ""),
          (open_settings = -1);
      }
      function Remove2() {
        for (var e = 0; e < f2.length; e++)
          f2[e] &&
            ((1 == style.floatleft ? control : control2).removeChild(f2[e]),
            (f2[e] = null));
        (f2 = []), (open_action = "");
      }
      function Width() {
        return control.offsetWidth;
      }
      function ResizePlaylist() {
        var e;
        "playlist" == is &&
          ((1 != style.floatleft && 1 != style.width100) ||
            ((e = o.screen_w - style.marginright - style.marginleft),
            css(container, {
              width: e,
            }),
            css(control, {
              width: e,
            }),
            control2 &&
              css(control2, {
                width: e,
              })));
      }
      function Resize() {
        var e;
        removed ||
          ("settings" == is &&
            (o.controls && o.controls.resizeSettings(),
            (e = 1 == style.nohead && 1 < f.length ? f[1] : f[0])),
          "playlist" == is &&
            (ResizePlaylist(),
            o.controls && o.controls.resizePlaylist(),
            (e = f[0]),
            1 == v.change2playlist && MainUpdateSize()),
          1 < f.length && !e && f[1] && (e = f[1]),
          2 < f.length && !e && f[2] && (e = f[2]),
          e && 0 == e.offsetWidth && 0 < f2.length && (e = f2[0]),
          0 < control.offsetWidth - control.clientWidth &&
          e &&
          1 != style.floatleft
            ? (exist(arr_up) &&
                css(arr_up, {
                  width: control2.offsetWidth,
                }),
              exist(arr_down) &&
                css(arr_down, {
                  width: control2.offsetWidth,
                }),
              (style.scrollwidth =
                control.offsetWidth -
                e.offsetWidth -
                (control.clientWidth - e.clientWidth)))
            : (style.scrollwidth = 0));
      }
      function VisibleItems() {
        for (var e = 0, t = 0, o = "", i = 1; i < f.length; i++)
          exist(f[i]) &&
            "visible" == f[i].style.visibility &&
            (e++, (o = faction[(t = i)]));
        return [e, t, o];
      }
      function SubtitleSettings(e) {
        (sub_settings_on = !sub_settings_on), SubtitleSettingsMenu(e);
      }
      function SubtitleSettingsMenu() {
        Home();
        for (var e = 0; e < faction.length; e++)
          "subtitle" == faction[e] && Action(e, _cstm);
      }
      function Retimer() {
        clearTimeout(settimer),
          (settimer = setTimeout(function () {
            o.setaction = !1;
          }, 2e3));
      }
      function SubtitleTimerMenu() {
        var e = open_action;
        Home();
        for (var t = 0; t < faction.length; t++)
          faction[t] == e && Action(t, 0);
      }
      function HideControl(e) {
        ("settings" == is && 1 == v.settings.always) ||
          ("playlist" == is &&
          1 == v.playlist.droplist &&
          1 != v.playlist.dropnohide
            ? (o.droplist && o.droplist.Hide(), (is_visible = !1))
            : (1 == e && (1 != style.hidesmoothly || 1 != style.always)) ||
              o.system.tv
            ? (css(container, {
                visibility: "hidden",
                opacity: 0,
                top: -2e3,
              }),
              (is_visible = !1))
            : (new Motion({
                mc: container,
                type: "alpha_div",
                to: 0,
                time: 0.1,
                me: is,
                ease: "elastic",
              }),
              (hidetimeout = setTimeout(function () {
                css(container, {
                  visibility: "hidden",
                  opacity: 0,
                  top: -2e3,
                }),
                  (is_visible = !1);
              }, 200))),
          "playlist" == is &&
            1 == v.playlist.hidecontrol &&
            o.controls &&
            o.controls.toggleControl("action", "playlist", !0),
          clearInterval(wheelinterval));
      }
      function ShowTimeout() {
        clearInterval(showinterval), (justshow = !1);
      }
      function showById(e) {
        exist(o.playlist_dic[e]) &&
          ((plfolder = ""),
          UpdatePlaylist(0),
          FindPlStart(o.playlist_dic[e]),
          UpdateVars0(e),
          Action(o.playlist_dic[e].pjs_i, 0),
          UpdateVars(e));
      }
      function ScrollTo(e) {
        var t;
        f[e] &&
          !removed &&
          (1 == style.floatleft
            ? ((t = f[e].offsetLeft - 20),
              new Motion({
                mc: control,
                type: "scrollleft",
                to: t,
                time: 0.3,
                me: "scroll_left",
                ease: "cubic",
              }))
            : ((t = f[e].offsetTop - container.offsetHeight / 2 + 20),
              new Motion({
                mc: control,
                type: "scroll",
                to: t,
                time: 0.3,
                me: "scroll_down",
                ease: "cubic",
              })),
          setTimeout(Arrows, 1e3));
      }
      function Shuffle(e) {
        for (
          var t, o = Object.keys(e), i = 0;
          i < o.length && !(t = e[o[(o.length * Math.random()) << 0]]);
          i++
        );
        return t;
      }
      function Scale() {
        -1 < scale_i &&
          (Value(scale_i),
          "scale" == open_action &&
            (f2value[0].innerHTML = Math.round(100 * o.mediascale.x) + "%"));
      }
      function FindPlStart(e) {
        -1 != e.pjs_parent_i
          ? (FindPlStart(o.playlist_dic[e.pjs_parent]),
            UpdatePlaylist(e.pjs_parent))
          : UpdatePlaylist(0);
      }
      (this.UpdateTimer = function (e) {
        Value(o[e + "_i"]);
      }),
        (this.Arrows = function () {
          1 == style.scrollarrows && Arrows();
        }),
        (this.UpdateSpeed = function () {
          UpdateSpeed();
        }),
        (this.Exist = function (e) {
          for (var t = 0; t < faction.length; t++)
            if (faction[t] == e) return !0;
          return !1;
        }),
        (this.resizePlaylist = function () {
          ResizePlaylist();
        }),
        (this.SubOpt = function () {
          (sub_settings_on = !0),
            this.show(),
            (_cstm = 2),
            SubtitleSettingsMenu();
        }),
        (this.c = function () {
          return container;
        }),
        (this.co = function () {
          if (container.contains(control)) return control;
        }),
        (this.s = function (e) {
          return style[e];
        }),
        (this.ss = function (e) {
          return style;
        }),
        (this.show = function () {
          var e;
          Home(),
            clearTimeout(hidetimeout),
            (is_visible = !0),
            "playlist" == is && 1 == v.playlist.droplist
              ? o.droplist && o.droplist.Show()
              : (css(container, {
                  visibility: "visible",
                  opacity: 1,
                  transition: "opacity 0.2s linear",
                }),
                1 == (e = VisibleItems())[0] &&
                  ("quality" == e[2] ||
                    "audiotrack" == e[2] ||
                    "subtitle" == e[2] ||
                    "speed" == e[2] ||
                    "scale" == e[2] ||
                    0 < e[2].indexOf("timer")) &&
                  Action(e[1], 0)),
            o.controls &&
              ("settings" == is && o.controls.resizeSettings(),
              "playlist" == is &&
                (o.controls.resizePlaylist(),
                1 == v.playlist.hidecontrol &&
                  o.controls.toggleControl("action", "playlist", !1))),
            o.system.safari &&
              (css(control, {
                "min-width": "auto",
              }),
              1 != style.floatleft &&
                css(control2, {
                  "min-width": "auto",
                })),
            (justshow = !0),
            clearInterval(showinterval),
            (showinterval = setInterval(ShowTimeout, 100));
        }),
        (this.open = function (e) {
          Action(e, 1);
        }),
        (this.hide = function (e) {
          HideControl(e);
        }),
        (this.SetQuality = function () {
          for (var e = 0; e < faction.length; e++)
            "quality" == faction[e] &&
              (Value(e),
              1 < o.files_quality.length && show(f[e]),
              "quality" == open_action && (Remove2(), Action(e, _cstm)));
        }),
        (this.Airplay = function () {
          for (var e = 0; e < faction.length; e++)
            "airplay" == faction[e] && Value(e);
        }),
        (this.SetSetting = function (e) {
          for (var t = 0; t < faction.length; t++)
            faction[t] == e &&
              (Value(t),
              o["files_" + e] && 1 < o["files_" + e].length && show(f[t]),
              open_action == e && (Remove2(), Action(t, _cstm)));
        }),
        (this.SetSubtitle = function () {
          for (var e = 0; e < faction.length; e++)
            if ("subtitle" == faction[e]) {
              if ((Value(e), o.files_subtitle && 0 < o.files_subtitle.length)) {
                var t = !1;
                if (o.subs) {
                  for (var i = 0; i < o.subs.length; i++)
                    if ("" != o.subs[i]) {
                      t = !0;
                      break;
                    }
                } else t = !0;
                t && show(f[e]);
              }
              "subtitle" == open_action && (Remove2(), Action(e, 0));
            }
        }),
        (this.updatePlaylist = function (e) {
          if (((o.playlist = e), UpdatePlaylist(0), exist(v.plstart))) {
            if (0 != v.plstart.indexOf("x-"))
              for (var t in o.playlist_dic)
                o.playlist_dic.hasOwnProperty(t) &&
                  o.playlist_dic[t].pjs_id == v.plstart &&
                  (v.plstart = t);
            exist(o.playlist_dic[v.plstart])
              ? (FindPlStart(o.playlist_dic[v.plstart]),
                ActionPlaylist((t = o.playlist_dic[v.plstart].pjs_i)),
                1 == v.playlist.openplaylistroot && 1 != style.droplist
                  ? (UpdatePlaylist(0),
                    setTimeout(function () {
                      Resize();
                    }, 500))
                  : setTimeout(function () {
                      ScrollTo(t), Resize();
                    }, 500),
                (v.plstart = void 0))
              : ActionPlaylist(0);
          } else ActionPlaylist(0);
          1 == style.droplist &&
            (exist(o.droplist) || (o.droplist = new PluginDroplist()));
        }),
        (this.playById = function (e) {
          exist(o.playlist_dic[e]) &&
            (FindPlStart(o.playlist_dic[e]),
            Action(o.playlist_dic[e].pjs_i, 0),
            ScrollTo(o.playlist_dic[e].pjs_i));
        }),
        (this.openById = function (e) {
          exist(o.playlist_dic[e]) &&
            (FindPlStart(o.playlist_dic[e]),
            o.playlist_dic[e].file
              ? (ActionPlaylist(o.playlist_dic[e].pjs_i),
                UpdateVars0(e),
                o.actions.NewFile(o.playlist_dic[e].file, 1),
                UpdateVars(e),
                ScrollTo(o.playlist_dic[e].pjs_i),
                o.droplist && o.droplist.Update())
              : o.playlist_dic[e].folder && UpdatePlaylist(e));
        }),
        (this.PlaylistNext = function () {
          var e, t;
          if (
            ((autonextopenfolder = !0),
            (i = parseInt(plx) + 1),
            "" != plid &&
              ((o.plhistory[plid] = !0),
              (shuffle = removebykey(shuffle, plid))),
            1 == v.shuffle)
          ) {
            if (null == (i = Shuffle(shuffle)))
              if (1 == v.shuffle8 || 1 == v.playlist.autoplaylist) {
                for (var i in (shuffle_.sort(function (e, t) {
                  return Math.random() - 0.5;
                }),
                shuffle_))
                  shuffle_.hasOwnProperty(i) && (shuffle[i] = shuffle_[i]);
                i = Shuffle(shuffle);
              } else o.actions.ShuffleEnd();
          } else
            ("playlistfolder" != faction[i] && -1 != plx) ||
              "" == plid ||
              ((e = Object.keys(o.playlist_dic).indexOf(plid)) <
                Object.keys(o.playlist_dic).length &&
                (t = o.playlist_dic[Object.keys(o.playlist_dic)[e + 1]]) &&
                (exist(t.folder) &&
                  (t = o.playlist_dic[Object.keys(o.playlist_dic)[e + 2]]),
                this.openById(t.id),
                (i = -1),
                o.actions.Play()));
          -1 < i && (Action(i, 0), ScrollTo(i));
        }),
        (this.Scale = function () {
          Scale();
        }),
        (this.PlaylistNextExist = function () {
          if (1 == v.shuffle) return 0 < Object.keys(shuffle).length;
          var e = !1;
          return (
            o.playlist_dic &&
              (e =
                Object.keys(o.playlist_dic).indexOf(plid) <
                Object.keys(o.playlist_dic).length - 1),
            e
          );
        }),
        (this.PlaylistRewind = function () {
          exist(o.pl_first_id) && showById(o.pl_first_id);
        }),
        (this.PlaylistPrevExist = function () {
          var e,
            t,
            i = 0 < plx;
          return (
            o.playlist_dic &&
              ((i = 0 < (t = (e = Object.keys(o.playlist_dic)).indexOf(plid))),
              1 == t && exist(o.playlist_dic[e[0]].folder) && (i = !1)),
            i
          );
        }),
        (this.PlaylistExist = function () {
          return exist(o.playlist_dic);
        }),
        (this.PlaylistPrev = function () {
          var e, t, i;
          (autoprevopenfolder = !0),
            this.PlaylistPrevExist() &&
              ((e = parseInt(plx) - 1) < 0
                ? 0 < (t = Object.keys(o.playlist_dic).indexOf(plid)) &&
                  (i = o.playlist_dic[Object.keys(o.playlist_dic)[t - 1]]) &&
                  (exist(i.folder) &&
                    (i = o.playlist_dic[Object.keys(o.playlist_dic)[t - 2]]),
                  i && (this.openById(i.id), o.actions.Play()))
                : (Action(e, 0), ScrollTo(e)));
        }),
        (this.PlaylistHere = function () {
          0 < plx && ScrollTo(plx);
        }),
        (this.g = function (e) {
          switch (e) {
            case "width":
              return Width();
            case "height":
              return container.offsetHeight;
            case "top":
              return container.offsetTop;
            case "scroll_height":
              return control.scrollHeight;
            case "margin_bottom":
              return style.marginbottom;
            case "x":
              return int(container.style.left);
            case "y":
              return int(container.style.top);
            case "opacity":
              return container.style.opacity;
            case "show":
              return is_visible;
            case "open":
              return open_settings;
            case "key":
              return key;
            case "motion_id":
              return key + motion_id;
            case "empty":
              return empty;
            case "playlist":
              return "playlist" == is;
            case "activeicon":
              return _activeIcon;
            case "butplstart":
              return o.playlist_dic[o.butplstart]
                ? o.playlist_dic[o.butplstart].title
                : "";
            case "title2":
              return v.title2 || "";
          }
        }),
        (this.empty = function () {
          if ("settings" != is) return "playlist" == is ? 0 == f.length : empty;
          for (var e = 0, t = 1; t < 11; t++) {
            if ("quality" == faction[t]) {
              var i = o.files_quality.length;
              if (exist(v.forbidden_quality))
                for (
                  var s = v.forbidden_quality.split(","), n = 0;
                  n < s.length;
                  n++
                )
                  -1 < o.files_quality.indexOf(s[n]) && i--;
              0 < i &&
                (1 < i ||
                  (1 == i && 1 != o.files_quality && 1 == style.show1value)) &&
                e++;
            }
            if (
              ("airplay" == faction[t] && o.airplay && e++,
              "download" == faction[t] &&
                (("native" != o.file_type && !v.download) || e++),
              "audiotrack" == faction[t] &&
                0 < o.files_audiotrack.length &&
                e++,
              "channel" == faction[t] &&
                1 == v.channels &&
                0 < o.files_channel.length &&
                e++,
              "subtitle" == faction[t])
            ) {
              if (exist(o.subs))
                for (var a = 0; a < o.subs.length; a++)
                  if ("" != o.subs[a]) {
                    e++;
                    break;
                  }
              1 == e && 1 == o.subload && (e = 0);
            }
            "speed" == faction[t] && "vimeo" != o.file_type && e++,
              "scale" == faction[t] && e++,
              faction[t] && 0 < faction[t].indexOf("timer") && e++,
              1 == v.settings[is + t + "hide"] && e--;
          }
          return 0 == e;
        }),
        (this.Remove = function () {
          container.parentNode == o.frame &&
            (container.removeChild(control),
            o.frame.removeChild(container),
            o.droplist && o.droplist.Remove(),
            (removed = !(control = container = null)));
        });
    },
    TimeStore = function () {
      var e = "",
        t = 0,
        i = 0;
      function s(e) {
        e &&
          0 < e.indexOf("--") &&
          ((e = e.split("--")),
          (t = parseFloat(e[0])),
          1 == v.timestorejustbut
            ? (o.butseekto = t)
            : ((i = parseFloat(e[1])), (o.seekto = t)));
      }
      o.storage &&
        1 != v.timestoredontuse &&
        (null != localStorage.getItem("pljsplayfrom_" + v.id + o.href2) &&
          (e = localStorage.getItem("pljsplayfrom_" + v.id + o.href2)),
        1 == v.playedstore &&
          null != localStorage.getItem("pljsplayed_" + v.id + o.href2) &&
          (o.playedstore = localStorage.getItem(
            "pljsplayed_" + v.id + o.href2
          )),
        exist(v.cuid) &&
          (null != localStorage.getItem("pljsplayfrom_" + o.d + v.cuid) &&
            (e = localStorage.getItem("pljsplayfrom_" + o.d + v.cuid)),
          1 == v.playedstore &&
            null != localStorage.getItem("pljsplayed_" + o.d + v.cuid) &&
            (o.playedstore = localStorage.getItem(
              "pljsplayed_" + o.d + v.cuid
            ))),
        o.playedstore &&
          1 == v.playedstore &&
          (o.playedstored = o.playedstore.split(",")),
        0 == e.indexOf("{") &&
          (1 == v.timestorejustbut
            ? (o.butplstart = e.substr(1, e.indexOf("}") - 1))
            : (o.plcontinue = v.plstart = e.substr(1, e.indexOf("}") - 1)),
          (e = e.substr(e.indexOf("}") + 1)),
          1 == v.timestore0plroot && (v.playlist.openplaylistroot = 0)),
        s(e)),
        (this.updateCuid = function () {
          exist(v.cuid) &&
            (null != localStorage.getItem("pljsplayfrom_" + o.d + v.cuid)
              ? (s((e = localStorage.getItem("pljsplayfrom_" + o.d + v.cuid))),
                o.controls.Played(t, i),
                o.controls.Duration(t, i),
                (v.duration = i))
              : ((o.seekto = 0),
                o.controls.Played(0, 0),
                o.controls.Duration(0, 0),
                (v.duration = 0)));
        }),
        (this.write = function (e, t) {
          var i;
          (o.media.isLive() && 1 == v.timestorenolive) ||
            ((i = new Date().getTime()),
            localStorage.setItem(
              "pljsplayfrom_" + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2),
              (exist(o.plid) ? "{" + o.plid + "}" : "") +
                e +
                "--" +
                t +
                "--" +
                i
            ));
        }),
        (this.writePl = function (e) {
          (o.playedstore = (o.playedstore ? o.playedstore + "," : "") + e),
            localStorage.setItem(
              "pljsplayed_" + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2),
              o.playedstore
            );
        }),
        (this.flag = function () {
          return {
            t: t,
            d: i,
          };
        });
    },
    ChromeCast = function () {
      var n, a, r, l, c;
      function i() {
        o.controls.Review(), o.controls.resize();
      }
      function s(e) {
        cast &&
          cast.framework &&
          (m((n.isConnected ? "" : "dis") + "connected"),
          (n.isConnected ? t : d)());
      }
      function t(e) {
        var t = cast.framework.CastContext.getInstance().getCurrentSession();
        a.addEventListener(
          cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,
          u
        ),
          a.addEventListener(
            cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,
            p
          ),
          a.addEventListener(
            cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,
            f
          ),
          a.addEventListener(
            cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,
            h
          );
        var i = "videos/mp4";
        "hls" == o.file_type && (i = "application/x-mpegurl"),
          "dash" == o.file_type && (i = "application/dash+xml");
        var s = o.media.currentFile();
        exist(v.casturl) && (s = v.casturl);
        i = new chrome.cast.media.MediaInfo(s, i);
        (i.metadata = new chrome.cast.media.GenericMediaMetadata()),
          (i.metadata.metadataType = chrome.cast.media.MetadataType.GENERIC),
          (i.metadata.title = v.title),
          (i.metadata.images = [
            {
              url: v.poster,
            },
          ]);
        i = new chrome.cast.media.LoadRequest(i);
        (i.currentTime =
          0 < o.seekto ? o.seekto : o.casting ? 0 : o.media.time()),
          (i.autoplay = o.play || 1 == e),
          t.loadMedia(i).then(
            function () {
              m("connected to " + (r = t.getCastDevice().friendlyName)),
                0 == v.chromecast.message ||
                  o.casting ||
                  (l && o.frame.removeChild(l),
                  (l = createElement("div")),
                  css(l, {
                    position: "absolute",
                    top: "20px",
                    width: "100%",
                    left: 0,
                    opacity: 0.7,
                    color: "#fff",
                    "pointer-events": "none",
                  }),
                  (l.innerHTML =
                    "<center>" +
                    Lang("castdevice") +
                    " &laquo;" +
                    r +
                    "&raquo;</center>"),
                  o.frame.appendChild(l)),
                (n.volumeLevel = v.volume),
                a.setVolumeLevel(),
                o.muted && !n.isMuted && a.muteOrUnmute(),
                js("casted"),
                1 != e &&
                  (o.play
                    ? (o.media.Pause(),
                      setTimeout(function () {
                        o.controls.Play();
                      }, 300))
                    : n.isPaused || a.playOrPause()),
                hide(o.mediacontainer),
                (o.casting = !0);
            },
            function (e) {
              m(e), d(), o.alert.txt(Lang("casterror"));
            }
          );
      }
      function d() {
        l && o.frame.removeChild(l),
          (l = void 0),
          (o.casting = !1),
          show(o.mediacontainer),
          js("uncasted"),
          n.savedPlayerState &&
            (o.actions.Seek(n.savedPlayerState.currentTime),
            n.savedPlayerState.isPaused ? o.media.Pause() : o.media.Play());
      }
      function u() {
        n.isPaused
          ? (m("pause"), js("castpause"), o.controls.Pause())
          : (m("play"), js("castplay"), o.controls.Play());
      }
      function p() {
        o.actions.Volume(n.volumeLevel);
      }
      function f() {
        n.isMuted ? o.actions.Mute() : o.actions.Unmute();
      }
      function h() {
        n.isConnected &&
          null == n.playerState &&
          n.currentTime == n.duration &&
          (o.controls.Pause(), o.media.onEnded());
      }
      function m(e) {
        v.chromecast && 1 == v.log && log("chromecast", e);
      }
      (window.__onGCastApiAvailable = function (e, t) {
        e
          ? (m("available"),
            exist(chrome.cast) &&
              ((e = chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),
              1 == v.chromecast.receiver &&
                v.chromecast.receiverid &&
                (e = v.chromecast.receiverid),
              cast.framework.CastContext.getInstance().setOptions({
                receiverApplicationId: e,
                autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,
              }),
              (n = new cast.framework.RemotePlayer()),
              (a = new cast.framework.RemotePlayerController(
                n
              )).addEventListener(
                cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,
                s
              ),
              (o.cast_available = !0),
              setTimeout(i, 1e3)))
          : m("error: " + t);
      }),
        Script(
          "gstatic.com/cv",
          "https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"
        ),
        (this.button = function (e) {
          return (
            (c = e),
            "<button is='google-cast-button' id='pjs_cast_button_" +
              v.id +
              "' style='padding:0;width:20px;height:20px;--connected-color:" +
              e +
              ";--disconnected-color:" +
              e +
              ";border:0;background:transparent;pointer-events:auto;cursor:pointer'></button>"
          );
        }),
        (this.Color = function (e, t) {
          var o, i, s;
          c != t &&
            ((o = document.getElementById("pjs_cast_button_" + v.id)) &&
              ((s = o.getAttribute("style")),
              (i = new RegExp(c, "gi")),
              (s = s.replace(i, t)),
              o.setAttribute("style", s)),
            (c = t));
        }),
        (this.Volume = function (e) {
          n.isConnected && ((n.volumeLevel = e), a.setVolumeLevel());
        }),
        (this.Mute = function () {
          n.isConnected && (n.isMuted || a.muteOrUnmute());
        }),
        (this.Unmute = function () {
          n.isConnected && n.isMuted && a.muteOrUnmute();
        }),
        (this.Play = function (e) {
          n.isConnected && (n.isPaused ? a.playOrPause() : n.playerState);
        }),
        (this.Pause = function (e) {
          n.isConnected && !n.isPaused && a.playOrPause();
        }),
        (this.Time = function (e) {
          return n.isConnected && (e = n.currentTime), e;
        }),
        (this.Duration = function (e) {
          return n.isConnected && (e = n.duration), e;
        }),
        (this.Exit = function () {
          cast && cast.framework && d();
        }),
        (this.Go = function () {
          cast && cast.framework && n.isConnected && t(o.play);
        }),
        (this.Seek = function (e) {
          n.isConnected && ((n.currentTime = e), a.seek());
        });
    },
    PluginSub = function () {
      var a,
        f = [],
        s = [],
        n = !0,
        r = -1;
      function h(e) {
        if ("" != e) {
          var t = 0,
            i = !0,
            s = "";
          (o.subs = e.split(",")),
            (o.files_subtitle = []),
            (o.current_subtitle = -1),
            StorageSupport() && 1 == v.sub_store
              ? null != localStorage.getItem("pljssubtitle") &&
                (s = localStorage.getItem("pljssubtitle"))
              : o.remember_sub && (s = o.remember_sub);
          for (var n = 0; n < o.subs.length; n++)
            0 == o.subs[n].indexOf("#0") && (o.subs[n] = fd0(o.subs[n])),
              0 == o.subs[n].indexOf("#" + v.enc2) &&
                (o.subs[n] = o[o.fd[0]](o.subs[n])),
              0 == o.subs[n].indexOf("[") && 1 < o.subs[n].indexOf("]")
                ? ((o.files_subtitle[n] = o.subs[n].substr(
                    o.subs[n].indexOf("[") + 1,
                    o.subs[n].indexOf("]") - 1
                  )),
                  (o.subs[n] = o.subs[n].substr(o.subs[n].indexOf("]") + 1)),
                  (i = !1))
                : ((o.files_subtitle[n] = o.subs[n].substr(
                    o.subs[n].lastIndexOf("/") + 1
                  )),
                  (o.files_subtitle[n] = o.files_subtitle[n].substr(
                    0,
                    o.files_subtitle[n].lastIndexOf(".")
                  ))),
              0 == o.subs[n].indexOf("#0") && (o.subs[n] = fd0(o.subs[n])),
              0 == o.subs[n].indexOf("#" + v.enc2) &&
                (o.subs[n] = o[o.fd[0]](o.subs[n]));
          1 < o.files_subtitle.length &&
            1 == v.sub_all &&
            (o.files_subtitle.push(
              StringVar("sub_all_title", Lang("together"))
            ),
            o.subs.push("all")),
            0 < o.files_subtitle.length &&
              1 == v.sub_off &&
              (1 == v.sub_off0
                ? ((a = 0),
                  t++,
                  o.files_subtitle.unshift(
                    StringVar("sub_off_title", Lang("off"))
                  ),
                  o.subs.unshift(""))
                : (o.files_subtitle.push(
                    StringVar("sub_off_title", Lang("off"))
                  ),
                  o.subs.push(""),
                  (a = o.files_subtitle.length - 1)));
          for (n = 0; n < o.subs.length; n++)
            exist(v.default_subtitle) &&
              v.default_subtitle == o.files_subtitle[n] &&
              ((t = n), (o.current_subtitle = n), (v.subtitle_start = 1)),
              "" != s &&
                s == o.files_subtitle[n] &&
                ((t = n), (o.current_subtitle = n));
          1 == v.sub_off && 0 == v.subtitle_start && (o.current_subtitle = a),
            exist(o.controls) && o.controls.SubtitleChanged(),
            1 == v.subtitle_start
              ? ((o.current_subtitle = t),
                (1 == v.sub_all && "all" == o.subs[t] ? c : l)(
                  o.current_subtitle
                ))
              : (i && o.subs.length < 3 && l(0 == a ? 1 : 0),
                1 != v.sub_off && (o.current_subtitle = -1));
        } else y();
      }
      function l(e) {
        exist(o.subs[e]) &&
          (-1 < o.subs[e].indexOf(".")
            ? ((o.subsor = o.subs[e].split(" or ")),
              (o.sub_or = 0),
              (function t(e) {
                var i = trim(o.subsor[o.sub_or]);
                var s = XHR(i);
                r = e;
                o.subload = 1;
                s.onload = function () {
                  (o.subload = 0),
                    4 == this.readyState && 200 == this.status
                      ? ((o.subtitle_on = !0), d(i, this.responseText, e))
                      : o.sub_or + 1 < o.subsor.length
                      ? (o.sub_or++, t(r))
                      : m("loading_error");
                };
                s.onerror = function (e) {
                  (o.subload = 0),
                    o.sub_or + 1 < o.subsor.length
                      ? (o.sub_or++, t(r))
                      : m("loading_error");
                };
                s.send();
              })(e))
            : 0 == o.subs[e].indexOf("upld") &&
              s[o.subs[e].substr(4)] &&
              d(o.files_subtitle[e], s[o.subs[e].substr(4)]));
      }
      function c(e) {
        (f[e] = Object()), (f[e][0] = Array()), (f[e][1] = Array());
        for (var t = 0; t < o.subs.length; t++) setTimeout(l, 500 * t, t);
      }
      function m(e) {
        log("subtitle not found or access denied"),
          o.files_subtitle[o.current_subtitle] &&
            -1 ==
              o.files_subtitle[o.current_subtitle].indexOf(
                Lang("loading_error")
              ) &&
            (o.files_subtitle[o.current_subtitle] =
              o.files_subtitle[o.current_subtitle] + " (" + Lang(e) + ")"),
          1 == v.subtitle_errdel &&
            -1 < r &&
            ((o.subs[r] = ""), (o.files_subtitle[r] = "")),
          (o.current_subtitle = -1),
          (o.subtitle_on = !1),
          o.constrols
            ? (o.controls.SubtitleChanged(), o.controls.refresh())
            : setTimeout(function () {
                o.controls.SubtitleChanged(), o.controls.refresh();
              }, 100),
          exist(o.subtitle) &&
            (o.frame.removeChild(o.subtitle), (o.subtitle = null));
      }
      function d(e, t, s) {
        if (
          -1 < e.indexOf(".srt") ||
          -1 < e.indexOf(".ass") ||
          -1 < e.indexOf(".ssa") ||
          -1 < e.indexOf(".vtt")
        ) {
          var n = o.current_subtitle;
          (exist(f[n]) && "all" == o.subs[n]) ||
            ((f[n] = Object()), (f[n][0] = Array()), (f[n][1] = Array()));
          var a = Array(),
            a = t.split(/\r|\n/),
            r = 1,
            l = 0,
            c = 0,
            d = exist(v.subshift) ? v.subshift : 0;
          for (
            0 < e.indexOf("shift=") && (d = +e.substr(e.indexOf("shift=") + 6)),
              i = 0;
            i < a.length;
            i++
          ) {
            if (-1 < e.indexOf(".srt") || -1 < e.indexOf(".vtt"))
              if (-1 < a[i].indexOf("--\x3e") && -1 < a[i].indexOf(":")) {
                0 == (l = +g(a[i].substr(0, a[i].indexOf("--\x3e"))) + d) &&
                  (l = 1),
                  (c = +g(a[i].substr(a[i].indexOf("--\x3e") + 4, 12)) + d),
                  exist(f[n][0][l]) || (f[n][0][l] = "");
                for (var u = l; u < c; u++) f[n][1][u] = l;
                r++;
              } else
                (a[i] = trim(a[i])),
                  "" != a[i] &&
                    0 < a[i].length &&
                    a[i] != r &&
                    "WEBVTT" != a[i] &&
                    (f[n][0][l] =
                      (f[n][0][l] && "" != f[n][0][l]
                        ? f[n][0][l] + "<br>"
                        : "") +
                      ("all" == o.subs[n] && 0 < s ? "[sub2]" : "") +
                      a[i] +
                      ("all" == o.subs[n] && 0 < s ? "[/sub2]" : ""));
            if (
              (-1 < e.indexOf(".ass") || -1 < e.indexOf(".ssa")) &&
              -1 < a[i].indexOf("Dialogue:")
            ) {
              (l =
                +g(
                  a[i].substr(
                    -1 < e.indexOf(".ssa") ? a[i].indexOf("=0") + 3 : 12,
                    12
                  )
                ) + d),
                (c =
                  +g(
                    a[i].substr(
                      -1 < e.indexOf(".ssa") ? a[i].indexOf("=0") + 14 : 23,
                      10
                    )
                  ) + d);
              var p = "";
              0 < a[i].indexOf("0,,")
                ? (p = a[i].substr(a[i].indexOf("0,,") + 3))
                : 0 < a[i].indexOf("ffect,") &&
                  (p = a[i].substr(a[i].indexOf("ffect,") + 6)),
                null != f[n][0][l]
                  ? (f[n][0][l] +=
                      "\n" +
                      ("all" == o.subs[n] && 0 < s ? "[sub2]" : "") +
                      p +
                      ("all" == o.subs[n] && 0 < s ? "[/sub2]" : ""))
                  : (f[n][0][l] = p),
                (f[n][0][l] = f[n][0][l].replace(/{.*?}/, "")),
                (f[n][0][l] = f[n][0][l].replace(/\\\\N/, "<br>")),
                (f[n][0][l] = f[n][0][l].replace(/\\N/, "<br>"));
              for (u = l; u < c; u++) f[n][1][u] = l;
            }
          }
          o.controls.SubtitleChanged(),
            o.actions.RenewSubtitle(),
            o.controls.refresh();
        } else
          "" != t
            ? 0 == t.indexOf("[")
              ? h(t)
              : m("error")
            : (y(), o.controls.refresh());
      }
      function g(e) {
        var t = e.split(":"),
          e = 0;
        return (
          2 == t.length && t.unshift("00"),
          "00" != t[0] && (e += 3600 * t[0]),
          "00" != t[1] && (e += 60 * t[1]),
          (e = 10 * (e += +t[2].substr(0, 2)) + +t[2].substr(3, 1))
        );
      }
      function u(e) {
        exist(o.subs[e]) &&
          (log("Subtitle", e),
          (o.current_subtitle = e),
          exist(o.files_subtitle[e]) &&
            (o.storage && 1 == v.sub_store
              ? localStorage.setItem("pljssubtitle", o.files_subtitle[e])
              : (o.remember_sub = o.files_subtitle[e])),
          "hls" == o.file_type && 1 == o.hls_subs
            ? o.media.hlsDashSub(e, "hls")
            : "dash" == o.file_type && 1 == o.dash_subs
            ? o.media.hlsDashSub(e, "dash")
            : ("all" == o.subs[e] ? c : l)(o.current_subtitle));
      }
      function t() {
        js("subtitle", "off"),
          (o.current_subtitle = 1 == v.sub_off ? a : -1),
          (v.subtitle_start = 0),
          (o.subtitle_on = !1),
          o.controls.SubtitleChanged(),
          (o.hls_subs || o.dash_subs) && u(o.current_subtitle),
          exist(o.subtitle) && o.frame.removeChild(o.subtitle),
          (o.subtitle = null);
      }
      function p() {
        o.subtitle &&
          (css(o.subtitle, {
            position: "absolute",
            width: "100%",
            "padding-left": "10%",
            "padding-right": "10%",
            left: 0,
            color: v.sub_color,
            "text-align": "center",
            "box-sizing": "border-box",
          }),
          1 == v.sub_fonted &&
            exist(v.sub_font) &&
            "" != v.sub_font &&
            css(o.subtitle, {
              "font-family": v.sub_font,
            }),
          1 == v.sub_shadow
            ? css(o.subtitle, {
                "text-shadow": "1px 1px 2px black",
              })
            : css(o.subtitle, {
                "text-shadow": "none",
              }),
          1 == v.sub_drag
            ? PluginMovable(o.subtitle, "o.subdrag")
            : css(o.subtitle, {
                "pointer-events": "none",
              }));
      }
      function y() {
        (o.current_subtitle = -1),
          (o.subtitle_on = !1),
          (o.thumbs_on = !1),
          (v.subtitle = null),
          (v.thumbnails = null),
          (o.sub = null),
          (o.subs = null),
          exist(o.controls) && o.controls.SubtitleChanged(),
          (o.files_subtitle = null),
          exist(o.subtitle) &&
            (o.frame.removeChild(o.subtitle), (o.subtitle = null)),
          (o.current_subtitle = null),
          (o.subtitle_on = !1);
      }
      (this.start = function (e) {
        h(e);
      }),
        (this.SubUpload = function () {
          var t, e;
          o.subupld &&
            ((t = o.subupld.files)[0]
              ? (((e = new FileReader()).onload = function (e) {
                  e = e.target.result;
                  s.push(e),
                    o.subs.unshift("upld" + (s.length - 1)),
                    o.files_subtitle.unshift(t[0].name + ""),
                    u(0),
                    1 != v.sub_off0 && a++,
                    (o.subupld.value = "");
                }),
                e.readAsText(t[0]))
              : o.subupld.click());
        }),
        (this.SetSubtitle = function (e) {
          exist(o.current_subtitle) &&
            (o.current_subtitle != e
              ? -1 == e || (1 == v.sub_off && e == a)
                ? t()
                : ((v.sub_shift = 0),
                  (o.current_subtitle = e),
                  (o.subtitle_on = !0),
                  (v.subtitle_start = 1),
                  u(e),
                  js("subtitle", o.files_subtitle[e]),
                  o.controls.SubtitleChanged())
              : 1 != v.sub_off && t());
        }),
        (this.ioff = function () {
          return a;
        }),
        (this.show = function (e) {
          var t, i;
          (t = e),
            v.sub_shift && (t -= +v.sub_shift),
            o.subtitle_on &&
              exist(o.subs) &&
              f &&
              ((i = o.current_subtitle),
              exist(f[i]) &&
                exist(f[i][1]) &&
                ((e = parseInt(10 * t)),
                exist(f[i][1][e])
                  ? ((t = ""),
                    (t = f[i][0][f[i][1][e]]),
                    exist(o.subtitle) ||
                      ((o.subtitle = createElement("div")),
                      o.frame.appendChild(o.subtitle),
                      p()),
                    n && show2(o.subtitle),
                    o.subdrag ||
                      (o.controls.ToolbarHidden() || v.sub_bottom > v.toolbar.h
                        ? css(o.subtitle, {
                            position: "absolute",
                            top: "auto",
                            left: 0,
                            bottom: +v.sub_bottom,
                          })
                        : css(o.subtitle, {
                            position: "absolute",
                            top: "auto",
                            left: 0,
                            bottom: +v.sub_bottom + +v.toolbar.h,
                          })),
                    1 == v.sub_split2words && (t = PluginSubword(t)),
                    1 == v.sub_all &&
                      (t = (t = t.replace(
                        /\[sub2\]/gm,
                        '<span style="color:' +
                          (-1 == v.sub_color2.indexOf("#") ? "#" : "") +
                          v.sub_color2 +
                          '">'
                      )).replace(/\[\/sub2\]/gm, "</span>")),
                    (o.subtitle.innerHTML =
                      '<span style="' +
                      (1 == v.sub_bg
                        ? "background-color:" +
                          hexToRGBA(v.sub_bgcolor, v.sub_bga) +
                          ";"
                        : "") +
                      "-webkit-box-decoration-break: clone;color:" +
                      (-1 == v.sub_color.indexOf("#") ? "#" : "") +
                      v.sub_color +
                      ";padding:" +
                      v.sub_bgpadding +
                      "px " +
                      2 * v.sub_bgpadding +
                      "px;border-radius:" +
                      v.sub_bgo +
                      "px;margin:0 0;line-height:" +
                      (v.sub_lineheight || 1.8) +
                      ";font-weight:" +
                      v.sub_weight +
                      '">' +
                      trim(t) +
                      "</span>"),
                    1 == v.sub_big_fullscreen &&
                      (o.fullscreen
                        ? css(o.subtitle, {
                            "font-size":
                              v.sub_size_fullscreen +
                              ((parseInt(v.sub_sizeproc) - 100) *
                                v.sub_size_fullscreen) /
                                100 +
                              "px",
                          })
                        : css(o.subtitle, {
                            "font-size":
                              v.sub_size +
                              ((parseInt(v.sub_sizeproc) - 100) * v.sub_size) /
                                100 +
                              "px",
                          })),
                    (n = !1))
                  : !n &&
                    exist(o.subtitle) &&
                    ((o.subtitle.innerHTML = ""),
                    (n = !0),
                    hide2(o.subtitle))));
        }),
        (this.style = function () {
          p();
        }),
        (this.remove = function () {
          y();
        });
    },
    PluginHdIcon = function (e, r, l) {
      var c,
        d = createElement("div");
      e.appendChild(d),
        css(d, {
          position: "absolute",
          top: -r.offsetHeight / 2 - 1,
          "background-color": "#f00",
          "border-radius_": 1,
          display: "none",
          pointerEvents: "none",
        }),
        1 == l.hdicon2 && l.hdiconlist
          ? ((c = l.hdiconlist.split(",")),
            css(d, {
              "font-size": 8,
              color: "#fff",
              padding: "2px 2px 0 2px",
              "line-height": "1",
            }))
          : ((l.hdicon2 = 0),
            css(d, {
              height: 9,
              width: 13,
              "background-image":
                "url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwJSIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTMgOSIgd2lkdGg9IjEwMCUiPjxwYXRoIGQ9Ik01LDcgTDYsNyBMNiw4IEw1LDggTDUsNyBaIE0xMCwzIEwxMCw0IEw4LDQgTDgsMyBMMTAsMyBaIE0zLDYgTDMsNSBMNSw1IEw1LDYgTDMsNiBaIE0yLDcgTDMsNyBMMyw4IEwyLDggTDIsNyBaIE03LDcgTDEwLDcgTDEwLDggTDcsOCBMNyw3IFogTTEwLDYgTDExLDYgTDExLDcgTDEwLDcgTDEwLDYgWiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIwLjY0NzEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48cGF0aCBkPSJNNSw3IEw1LDYgTDUsNSBMMyw1IEwzLDYgTDMsNyBMMiw3IEwyLDIgTDMsMiBMMyw0IEw1LDQgTDUsMiBMNiwyIEw2LDcgTDUsNyBaIE0xMSw2IEwxMCw2IEwxMCw3IEw3LDcgTDcsMiBMMTAsMiBMMTAsMyBMMTEsMyBMMTEsNiBaIE0xMCw0IEwxMCwzIEw4LDMgTDgsNCBMOCw2IEwxMCw2IEwxMCw0IFoiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48L3N2Zz4=)",
            })),
        (this.toggle = function () {
          var e = 0,
            t = o.media.getQuality();
          (t = t.replace(Lang("auto") + " ", "")) &&
            (("HD" == t ||
              0 < t.indexOf(" HD") ||
              0 == t.indexOf("hd") ||
              0 == t.indexOf("Hd")) &&
              (t = "720"),
            0 < t.indexOf(" ") && (t = t.substr(0, t.indexOf(" "))),
            (e = parseInt(t)));
          var i,
            s = "-1";
          if (1 == l.hdicon2) {
            s = "";
            for (var n = 0; n < c.length; n++) {
              var a = c[n].split(":");
              2 == a.length && trim(a[0]) == e && (s = trim(a[1]));
            }
            "" == s
              ? 700 < e && ((i = !0), (d.innerHTML = "HD"))
              : ((i = !0), (d.innerHTML = s));
          } else 700 < e && (i = !0);
          i
            ? (show2(d),
              0 < r.offsetWidth - d.offsetWidth &&
                css(d, {
                  left: (r.offsetWidth - d.offsetWidth) / 2 - 2,
                }))
            : hide2(d);
        });
    };
  o.lang_ru = {
    auto: "Авто",
    play: "Пуск",
    pause: "Пауза",
    stop: "Стоп",
    fullscreen: "Во весь экран",
    normalscreen: "Выйти из полноэкранного режима",
    settings: "Настройки",
    options: "Параметры",
    volume: "Громкость",
    mute: "Выключить звук",
    unmute: "Включить звук",
    live: "В ЭФИРЕ",
    playlist: "Плейлист",
    quality: "Качество",
    download: "Скачать",
    subtitle: "Субтитры",
    speed: "Скорость",
    normal: "Обычная",
    error: "ошибка",
    unmute_video: "Включите звук",
    audiotrack: "Аудио",
    loading_error: "ошибка загрузки",
    "160p": "Очень низкое",
    "240p": "Низкое",
    "360p": "Среднее",
    "480p": "Высокое",
    "540p": "Высокое",
    next: "Следующий",
    prev: "Предыдущий",
    share: "Поделиться",
    copied: "Скопировано в буфер обмена",
    ads: "Реклама",
    skip: "Пропустить",
    skip_after_: "Пропустить через ",
    adsinvitation: "Перейти на сайт рекламодателя",
    sub_sizeproc: "Размер текста",
    sub_shift: "Сдвиг по времени",
    sub_color: "Цвет текста",
    sub_color2: "Цвет текста 2",
    sub_bgcolor: "Цвет фона",
    sub_bga: "Прозрачность фона",
    sub_shadow: "Тень",
    sub_weight: "Толщина текста",
    sub_bottom: "Отступ снизу",
    sub_reset: "Сбросить",
    upload: "Загрузить",
    sleeptimer: "Сон",
    offsettimer: "Пропуск",
    hour: "Час",
    minute: "Минута",
    second: "Секунда",
    "1val": "Да",
    "0val": "Нет",
    of: "из",
    pass: "Пароль",
    casterror: "Ошибка воспроизведения на устройстве",
    castdevice: "Играет на устройстве",
    channel: "Канал",
    scale: "Масштаб",
    on: "Вкл.",
    off: "Выкл.",
    together: "Все сразу",
    kbps: "кбит/с",
  };
  var PluginVastTimeMsg = function () {
      var e,
        t,
        i,
        s = !1;
      function n() {
        t++, (e.innerHTML = v.vast_longtimemsg + " " + Time(t));
      }
      (i = setTimeout(function () {
        (e = createElement("div")),
          o.frame.appendChild(e),
          css(e, {
            position: "absolute",
            top: 20,
            left: 10,
          }),
          (e.style.zIndex = 1e5),
          (t = 0),
          n(),
          clearInterval(o.longtoInterval),
          (o.longtoInterval = setInterval(n, 1e3));
      }, 500)),
        (this.remove = function () {
          !s &&
            e &&
            ((s = !0), clearInterval(o.longtoInterval), o.frame.removeChild(e)),
            clearTimeout(i);
        });
    },
    Motion = function (i) {
      var s,
        n,
        a,
        r,
        l,
        c,
        d,
        u = 0,
        p = !1;
      if (null != i.me && null != i.mc && null != i.type && null != i.to) {
        null == i.time &&
          (-1 < i.type.indexOf("alpha")
            ? 0 == i.to
              ? (i.time = 0.5)
              : (i.time = 0.2)
            : (i.time = 0.15)),
          (s = (function (e) {
            switch (e) {
              case "elastic":
                return [
                  0, 0.432, 0.857, 1.275, 1.372, 1.296, 1.102, 0.957, 0.883,
                  0.87, 0.914, 0.992, 1.029, 1.041, 1.036, 1.019, 0.996, 0.984,
                  0.981, 0.988, 1.001, 1.006, 1.007, 1.006, 1.003, 0.999, 0.998,
                  0.998, 0.998, 0.998, 1,
                ];
              case "cubic":
                return [
                  0, 0.096, 0.185, 0.267, 0.344, 0.416, 0.483, 0.547, 0.606,
                  0.659, 0.705, 0.747, 0.785, 0.818, 0.848, 0.874, 0.897, 0.918,
                  0.935, 0.95, 0.962, 0.971, 0.979, 0.985, 0.99, 0.994, 0.997,
                  0.999, 1,
                ];
              case "back":
                return [
                  0, 0.146, 0.28, 0.403, 0.513, 0.613, 0.702, 0.78, 0.848,
                  0.907, 0.956, 0.997, 1.029, 1.055, 1.072, 1.084, 1.092, 1.095,
                  1.095, 1.093, 1.088, 1.081, 1.072, 1.06, 1.046, 1.033, 1.023,
                  1.014, 1.007, 1.003,
                ];
              default:
                return [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];
            }
          })(i.ease)),
          -1 == i.type.indexOf("scale") &&
            exist(o.motions[i.me]) &&
            o.motions[i.me].TheEnd(),
          -1 == i.type.indexOf("scale") && (o.motions[i.me] = this),
          1 == i.show && i.mc.set("display", !0),
          (n = i.type.split("|")),
          (r = String(i.to).split("|")),
          (a = new Array());
        for (var e = 0; e < n.length; e++)
          r[e] || (r[e] = r[0]),
            "alpha" == n[e] && (a[e] = i.mc.g("opacity")),
            "alpha_div" == n[e] && (a[e] = i.mc.style.opacity),
            "y" == n[e] && (a[e] = i.mc.g("y")),
            "x" == n[e] && (a[e] = i.mc.g("x")),
            "left" == n[e] && (a[e] = parseInt(i.mc.style.left)),
            "scale" == n[e] && (a[e] = i.mc.g("scaleX")),
            "scroll" == n[e] && (a[e] = i.mc.scrollTop),
            "scrollleft" == n[e] && (a[e] = i.mc.scrollLeft),
            "scaleY" == n[e] && (a[e] = i.mc.g("scaleY")),
            "scaleX" == n[e] && (a[e] = i.mc.g("scaleX")),
            "width" == n[e] && (a[e] = i.mc.g("width")),
            "width_div" == n[e] &&
              ((a[e] = i.mc.offsetWidth),
              (r[e] = Math.floor(r[e])),
              "line_play" == i.me &&
                log("width", i.me, a[e], r[e], i.mc.offsetWidth)),
            "height" == n[e] && (a[e] = i.mc.g("height")),
            "height_div" == n[e] && (a[e] = i.mc.offsetHeight),
            (r[e] = Number(r[e])),
            (a[e] = Number(a[e]));
        (c = (1e3 * i.time) / s.length),
          (l = s.length),
          1 == n.length && a[0] == r[0] ? f() : setTimeout(v, Math.round(c));
      }
      function v() {
        for (var e = 0; e < n.length; e++) {
          var t = a[e] + (r[e] - a[e]) * (s[u] || 0);
          "alpha" == n[e] && i.mc.set("opacity", t),
            "alpha_div" == n[e] && (i.mc.style.opacity = t),
            "y" == n[e] && i.mc.set("top", t),
            "x" == n[e] && i.mc.set("left", t),
            "left" == n[e] && (i.mc.style.left = t + "px"),
            "scale" == n[e] && i.mc.set("scale", t),
            "scaleY" == n[e] && i.mc.set("scaleY", t),
            "scaleX" == n[e] && i.mc.set("scaleX", t),
            "scroll" == n[e] && (i.mc.scrollTop = t),
            "scrollleft" == n[e] && (i.mc.scrollLeft = t),
            "width" == n[e] && i.mc.set("width", t),
            "width_div" == n[e] &&
              css(i.mc, {
                width: t,
              }),
            "height" == n[e] && i.mc.set("height", t),
            "height_div" == n[e] &&
              css(i.mc, {
                height: t,
              });
        }
        u++, p || (u == l ? f() : (d = setTimeout(v, Math.round(c))));
      }
      function f() {
        (p = !0),
          i.hide &&
            ("alpha_div" == n[0] || "left" == n[0]
              ? hide(i.mc)
              : i.mc.set("display", !1)),
          -1 == i.type.indexOf("scale") &&
            ((o.motions[i.me] = null), delete o.motions[i.me]);
      }
      (this.TheEnd = function () {
        clearTimeout(d), f();
      }),
        (this.TheEnd2 = function () {
          clearTimeout(d), (u = l - 1), v(), f();
        });
    },
    System = function () {
      var e = navigator.appName,
        t = navigator.userAgent,
        i = t.match(
          /(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i
        );
      (i = t.match(
        /(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i
      )) &&
        null != (s = t.match(/version\/([\.\d]+)/i)) &&
        (i[2] = s[1]);
      var s = navigator.maxTouchPoints;
      (this.browser = i ? i[1] : e),
        (this.version = i ? i[2] : navigator.appVersion),
        (this.opera = "Opera" == this.browser),
        (this.ie9 = "MSIE 9.0" == this.browser),
        (this.ie =
          "MSIE" == this.browser ||
          "Trident" == this.browser ||
          "Edge" == this.browser),
        (this.edge = -1 < t.search(/(edge)\/?\s*/i)),
        (this.firefox = "Firefox" == this.browser),
        (this.safari = "Safari" == this.browser),
        (this.chrome = window.chrome),
        (this.win = -1 < t.search("Windows NT")),
        (this.ios =
          -1 < t.search(/(iphone|ipad|ipod)\/?\s*/i) ||
          ("MacIntel" === navigator.platform && 1 < s)),
        (this.tv =
          1 != v.notv &&
          -1 <
            t.search(
              /(Tizen|MiTV|LG Browser|SmartTV|Philips|TV Build)\/?\s*/i
            )),
        (this.lg = 1 != v.notv && -1 < t.search(/(LG Browser)\/?\s*/i)),
        (this.iphone = -1 < t.search(/(iphone)\/?\s*/i)),
        (this.ipad = this.ios && !this.iphone),
        (this.webkit = "WebkitAppearance" in document.documentElement.style),
        -1 < t.search(/(android)\/?\s*/i) &&
          (0 < s ? (this.android = !0) : (this.tv = !0)),
        (this.mobile =
          (this.ios ||
            this.android ||
            -1 < t.search(/(blackberry|iemobile|opera mini)\/?\s*/i)) &&
          !this.tv),
        (this.mutedautoplay = this.safari || this.chrome),
        (this.desktop = !this.mobile),
        (this.mobiletv = this.mobile || this.tv),
        (this.fullscreen = !1),
        this.ios &&
          ((this.iosv = parseFloat(
            t.substr(t.indexOf("OS ") + 3, 4).replace("_", ".")
          )),
          this.ipad &&
            !1 in window &&
            ((this.mobile = this.ios = !1), (this.tv = !0))),
        (o.frame.requestFullScreen ||
          o.frame.requestFullscreen ||
          o.frame.mozRequestFullScreen ||
          o.frame.webkitRequestFullScreen ||
          o.frame.msRequestFullscreen) &&
          (this.fullscreen = !0);
    };
  function UpdateObject(e, t) {
    for (var o in t)
      if ("object" == typeof t[o])
        if ("events" == o || "file" == o) e[o] = t[o];
        else
          for (var i in t[o])
            if (
              ("object" != typeof e[o] && (e[o] = {}),
              "object" == typeof t[o][i])
            )
              for (var s in t[o][i])
                if (
                  ("object" != typeof e[o][i] && (e[o][i] = {}),
                  "object" == typeof t[o][i][s])
                )
                  for (var n in t[o][i][s])
                    "object" != typeof e[o][i][s] && (e[o][i][s] = {}),
                      (e[o][i][s][n] = t[o][i][s][n]),
                      ("padding" != s && "margin" != s) ||
                        (e[o][i][s][n] = parseInt(e[o][i][s][n]));
                else
                  (e[o][i][s] = t[o][i][s]),
                    ("padding" != i && "margin" != i) ||
                      (e[o][i][s] = parseInt(e[o][i][s]));
            else
              (e[o][i] = t[o][i]),
                ("padding" != o && "margin" != o) ||
                  (e[o][i] = parseInt(e[o][i]));
      else
        (0 < o.indexOf("roll") && "" === trim(t[o])) ||
          (e[o] = SettingsParser(o, t[o]));
    return e;
  }
  var SettingsParser = function (e, t) {
    return (
      "string" == typeof t &&
        ((t = trim(t)),
        -1 < e.indexOf("color") && -1 != t && (t = CheckColor(t))),
      t
    );
  };
  function hexToRGBA(t, e) {
    return (
      "rgba(" +
      (t = t.replace("#", ""))
        .match(new RegExp("(.{" + t.length / 3 + "})", "g"))
        .map(function (e) {
          return parseInt(t.length % 2 ? e + e : e, 16);
        })
        .concat(e || 1)
        .join(",") +
      ")"
    );
  }
  function StorageSupport() {
    try {
      var e = window.localStorage,
        t = "__storage_test__";
      return e.setItem(t, t), e.removeItem(t), !0;
    } catch (e) {
      return !1;
    }
  }
  function killMotion(e) {
    e && o.motions[e] && o.motions[e].TheEnd();
  }
  var Lang = function (e) {
      var t = e;
      t &&
        -1 < (t = e.charAt(0).toUpperCase() + e.slice(1)).indexOf("_") &&
        (t = t.replace(/_/gi, " "));
      var i = {
        of: "of",
        kbps: "kbps",
        castdevice: "Playback on device",
        casterror: "Playback error on device",
        together: "All at once",
        pass: "Password",
        "0val": "No",
        sleeptimer: "Sleep",
        offsettimer: "Skip",
        "1val": "Yes",
        sub_bottom: "Bottom margin",
        sub_weight: "Font weight",
        sub_shadow: "Shadow",
        sub_bga: "Background opacity",
        sub_bgcolor: "Background color",
        sub_sizeproc: "Text size",
        sub_color: "Text color",
        sub_color2: "Text color 2",
        sub_shift: "Time shift",
        sub_reset: "Reset",
        prev: "Previous",
        copied: "Copied to clipboard",
        "160p": "Tiny",
        "240p": "Small",
        "360p": "Medium",
        "480p": "High",
        "540p": "High",
        "720p": "HD",
        "1080p": "Full HD",
        "1296p": "Super HD",
        "1440p": "Quad HD",
        "2160p": "Ultra HD 4K",
        ads: "Ad",
        adsinvitation: "Go to the advertiser's website",
        audiotrack: "Audio",
        live: "LIVE",
        fullscreen: "Enter fullscreen",
        normalscreen: "Exit fullscreen",
      };
      return (
        exist(i[e]) && (t = i[e]),
        exist(o["lang_" + v.lang]) &&
          exist(o["lang_" + v.lang][e]) &&
          (t = o["lang_" + v.lang][e]),
        v.rename && v.rename[e] && (t = v.rename[e]),
        t
      );
    },
    gaTracker = function (e, t, i) {
      var s;
      exist(o.gatracked[t]) ||
        1 == v.playerjscom ||
        ((s = o.titlestore || v.title || ""),
        exist(v.label) && (s = v.label),
        1 == v.yamtr_event[e] &&
          1 == v.yamtr &&
          exist(v.yamtrid) &&
          ("init" == e && setInterval(yaHit, 3e5),
          exist(window["yaCounter" + v.yamtrid])
            ? (window["yaCounter" + v.yamtrid].reachGoal("playerjs_" + e, {
                title: s,
              }),
              log("Yandex", "playerjs_" + e))
            : log("Yandex Metric error")),
        1 == v.ga_event[e] &&
          1 == v.ga &&
          (1 == v.ga4
            ? window.gtag &&
              gtag("event", "playerjs_" + e, {
                label: s,
              })
            : window.ga &&
              ((e = {
                eventCategory: "Player",
                eventAction: t,
              }),
              "" != s && (e.eventLabel = s),
              ga("user.send", "event", e)))),
        i && (o.gatracked[t] = !0);
    };
  function yaHit() {
    exist(window["yaCounter" + v.yamtrid]) &&
      window["yaCounter" + v.yamtrid].reachGoal("playerjs_hit");
  }
  var YoutubeID = function (e) {
      var t,
        o,
        i = "";
      return (
        -1 < (e = e.replace("v=", "{=")).indexOf("youtu.be/")
          ? (i = e.substr(e.indexOf(".be/") + 4)).replace("/", "")
          : (i = e.split(
              /(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/
            )[3]),
        "" != i &&
          0 < i.indexOf("?t=") &&
          ((v.start = i.substr(i.indexOf("?t=") + 3)),
          (e = o = t = 0) < v.start.indexOf("h") &&
            ((t = v.start.substr(0, v.start.indexOf("h"))),
            (v.start = v.start.substr(v.start.indexOf("h") + 1))),
          0 < v.start.indexOf("m") &&
            ((o = v.start.substr(0, v.start.indexOf("m"))),
            (v.start = v.start.substr(v.start.indexOf("m") + 1))),
          0 < v.start.indexOf("s") &&
            ((e = v.start.substr(0, v.start.indexOf("s"))),
            (v.start = v.start.substr(v.start.indexOf("s") + 1))),
          (0 < t || 0 < o || 0 < e) && (v.start = 3600 * t + 60 * o + +e),
          (i = i.substr(0, i.indexOf("?t=")))),
        i
      );
    },
    js = function (x, y, li, ev) {
      if (("init" == x && (o.init = !0), 1 == ev))
        for (var yi in y)
          y.hasOwnProperty(yi) && "object" == typeof y[yi] && (y[yi] = "");
      if (1 == v.eventstracker && o.init)
        if (1 == v.eventlisteners || 1 == li) JsEvent(x, y);
        else {
          if (null != y && "object" == typeof y)
            try {
              y = JSON.stringify(y);
            } catch (e) {}
          if ("string" == typeof v.events && 0 == v.events.indexOf("{"))
            try {
              (v.events = v.events.replace(/\'/gi, '"')),
                (v.events = JSON.parse(v.events));
            } catch (e) {
              console.log(e);
            }
          if ("object" == typeof v.events) {
            if (exist(v.events[x]) || exist(v.events.other)) {
              var z = x;
              !exist(v.events[x]) && exist(v.events.other) && (z = "other"),
                0 == x.indexOf("vast_") && exist(v.events.vast) && (z = "vast");
              try {
                void 0 !== y
                  ? eval(
                      v.events[z] + "('" + x + "','" + v.id + "','" + y + "')"
                    )
                  : eval(v.events[z] + "('" + x + "','" + v.id + "')");
              } catch (e) {
                log("events", e, x);
              }
            }
          } else {
            "" == v.events && (v.events = "PlayerjsEvents");
            try {
              void 0 !== y
                ? eval(v.events + "('" + x + "','" + v.id + "','" + y + "')")
                : eval(v.events + "('" + x + "','" + v.id + "')");
            } catch (e) {
              log("events", e, x, y);
            }
          }
        }
      var zv, z;
      1 == v.postmessage &&
        1 !== li &&
        ((zv = {
          event: x,
          time: o.media ? ("seek" == x ? o.seeked_time : o.media.time()) : 0,
        }),
        null != y && (zv.data = y),
        ("duration" != x && "time" != x) || (zv.duration = o.media.duration()),
        ("volume" != x && "unmute" != x) || (zv.volume = v.volume),
        "new" == x && (zv.id = apiProcessor("playlist_id")),
        window.parent.postMessage(zv, "*"),
        (z =
          "vast_Impression" == x
            ? "adShown"
            : "seek" == x
            ? "rewound"
            : "unmute" == x
            ? "unmuted"
            : "mute" == x
            ? "muted"
            : "pause" == x
            ? "paused"
            : "play" == x
            ? "resumed"
            : "init" != x && "start" != x && "end" != x
            ? x
            : x + "ed"),
        (zv.event = z),
        "" != z &&
          z != x &&
          ((zv = JSON.parse(JSON.stringify(zv))),
          window.parent.postMessage(zv, "*")));
    },
    JsEvent = function (e, t) {
      var i = document.createEvent("Events");
      void 0 !== t && (i.info = t),
        i.initEvent(e, !0, !0),
        o.container.dispatchEvent(i);
    };
  this.event = function (e, t) {
    o.events[e] = t;
  };
  var api = function (e, t, o) {
    return apiProcessor(e, t, o);
  };
  function apiProcessor(e, t, i) {
    if (!exist(o.actions)) return !1;
    if (1 != o.destroyed) {
      if (
        (i &&
          "string" == typeof i &&
          0 == i.indexOf("id:") &&
          (i = o.controls.butByS(i.substr(3), "dom")) &&
          "button" == e &&
          "toogle" == t &&
          i.Click(),
        "play" == e)
      )
        if (exist(t)) {
          if ("string" == typeof t) {
            var s = -1;
            if (
              -1 < (t = t.replace(/(\r\n|\n|\r)/gm, "")).indexOf("[seek:") &&
              t.indexOf("]") == t.length - 1
            ) {
              if (
                ((s = t.substr(t.indexOf("[seek:") + 6, t.length - 1)),
                (s = parseInt(s.substr(0, s.length - 1))),
                "" == (t = t.substr(0, t.indexOf("[seek:"))))
              )
                return o.actions.Seek(s), void o.actions.Play();
              o.seekto = s;
            }
            if (
              (0 == t.indexOf("#" + v.enc2) && (t = o[o.fd[0]](t)),
              0 == t.indexOf("#" + v.enc3) &&
                0 < t.indexOf(v.file3_separator) &&
                (t = o[o.fd[1]](t)),
              0 == t.indexOf("#0") && (t = fd0(t)),
              1 == v.fplace && (t = fplace(t)),
              t.indexOf(".txt") == t.length - 4)
            )
              return (
                ((p = XHR(t)).onload = function () {
                  if (4 == this.readyState && 200 == this.status)
                    try {
                      apiProcessor("play", JSON.parse(this.responseText));
                    } catch (e) {}
                }),
                void p.send()
              );
            if (0 == t.indexOf("id:") && exist(o.playlist_dic)) {
              var n = FindIdPl(t);
              return (
                !!exist(o.playlist_dic[n]) &&
                (o.controls.PlaylistPlayId(n), -1 < s && (o.seekto = s), !0)
              );
            }
            if (0 == t.indexOf("youtubeid:")) {
              n = t.substr(10);
              if ("youtube" == o.file_type)
                return o.media.playByYoutubeId(n), !0;
              t = "//youtu.be/" + n;
            }
          }
          o.actions.NewFile(t);
        } else o.actions.Play();
      if ("file" == e && exist(t)) {
        if (
          ((o.newfile = !0), 0 == t.indexOf("id:") && exist(o.playlist_dic))
        ) {
          n = FindIdPl(t);
          return (
            !!exist(o.playlist_dic[n]) &&
            (o.controls.PlaylistOpenId(n), -1 < s && (o.seekto = s), !0)
          );
        }
        o.actions.NewFile(t, 1), o.controls.Duration(0, 0);
      } else "function" == typeof Papi41 && Papi41();
      if (
        ("preload" == e &&
          exist(t) &&
          ((o.newfile = !0), o.actions.NewFile(t, 1, 1)),
        "pause" == e &&
          o.play &&
          (o.actions.Pause(), o.actions.RenewSubtitle()),
        "channel" == e &&
          exist(t) &&
          o.start &&
          o.channels &&
          o.channels.SetChannel(t),
        0 == e.indexOf("vpaid_") && o.vast && o.vast.VpaidSet(e.substr(6), t),
        "preload" == e && o.media.Preload(),
        "alert" == e &&
          (o.alert.close(),
          (o.alert = new Alert()),
          1 == v.alert404
            ? o.alert.txt(v.alert404text)
            : o.alert.txt("Test message"),
          1 == v.alert404v &&
            exist(v.alert404video) &&
            (o.err404v = new PluginErrorVideo())),
        "waiting" == e &&
          (o.controls.Waiting(), o.controls.HideElement("control_start")),
        "toggle" == e && (o.play ? o.actions.Pause() : o.actions.Play()),
        "stop" == e &&
          ((v.preload = 0),
          (v.autoplay = 0),
          o.media.Recover(),
          o.actions.Stop()),
        "reload" == e && ((o.time = o.media.time()), o.actions.Reload()),
        "download" == e &&
          v.apiprm &&
          1 == v.apiprm.on &&
          1 == v.apiprm.dwn &&
          o.actions.Download(),
        "effect" == e && exist(t) && o.effects && o.effects.api(t),
        "share" == e && o.controls.showShare(),
        "startvast" == e && exist(t) && 1 == v.vast && "" != o.p)
      ) {
        var a = JSON.parse(decode(o.p));
        for (r in a)
          a.hasOwnProperty(r) &&
            exist(a[r].id) &&
            t == a[r].id &&
            ((v.midroll =
              "prt" +
              (exist(a[r].cpm) ? "cpm" + a[r].cpm : "") +
              t +
              "_" +
              a[r].preroll),
            (v.midrolls = !0),
            o.actions.advertising("midroll"));
      }
      if (
        ("vastbreak" == e && "function" == typeof VastBreak && VastBreak(),
        "cuid" == e &&
          t &&
          ((v.cuid = t), o.continue && o.continue.updateCuid()),
        "mute" == e && o.actions.Mute(),
        "speed" == e)
      ) {
        if (!exist(t)) return o.files_speed[o.current_speed];
        o.actions.SetSpeed(t);
      }
      if ("speeds" == e) return o.files_speed;
      if (
        ("unmute" == e && o.actions.Unmute(),
        "thumbnails" == e && exist(t) && ((v[e] = t), o.actions.Thumbs()),
        "qualities" == e)
      )
        return o.files_quality;
      if ("adblock" == e) return !!o.ab;
      if ("live" == e) return !!o.media && o.media.isLive();
      if ("subtitles" == e)
        return 1 == v.sub_off
          ? o.files_subtitle.slice(0, -1)
          : o.files_subtitle;
      if ("audiotracks" == e) return o.files_audiotrack;
      if ("volume" == e || "setVolume" == e)
        return (
          exist(t) && 0 <= t && t <= 1 && o.actions.Volume(t),
          o.muted ? 0 : v.volume
        );
      if ("muted" == e) return !!exist(o.muted) && o.muted;
      if (
        ("moveplaylist" == e && o.controls && o.controls.PlaylistMove(t),
        "design" == e && (t < 2 && (t = ""), "" != o["u" + t]))
      ) {
        var r,
          l = JSON.parse(decode(o["u" + t])),
          c = [];
        for (r in v)
          v.hasOwnProperty(r) && 0 == r.indexOf("control_") && (v[r] = null);
        if ("object" == typeof l)
          for (var d in l)
            l.hasOwnProperty(d) &&
              (0 == d.indexOf("control_") && (v[d] = l[d]),
              "toolbar" == d && (c[d] = l[d]));
        v = UpdateObject(v, c);
        s = !1;
        o.controls.SettingsVisible() && (o.controls.Settings(), (s = !0));
        var u = !1;
        o.controls.PlaylistVisible() && (o.controls.Playlist(), (u = !0)),
          o.controls.Remove(),
          (o.controls = null),
          (o.controls = new Controls()),
          "playing" == o.media.status() && o.controls.Play(),
          o.controls.Volume(v.volume),
          exist(v.title) && Title(v.title),
          s && o.controls.Settings(),
          u && o.controls.Playlist(),
          o.fullscreen && o.controls.Fullscreen(),
          "control_duration" != key &&
            o.controls.Duration(o.media.time(), o.media.duration()),
          MainResize();
      }
      if ("vars" == e) return v.vars;
      var p;
      if (
        ("resize" == e && o.controls.resize(!0),
        "seek" == e &&
          exist(t) &&
          ("string" == typeof t &&
            (-1 < t.indexOf("%")
              ? ((t = parseInt(t.substr(0, t.indexOf("%")))),
                (t = (o.media.duration() * t) / 100))
              : ((u = o.media.time()),
                o.continue &&
                  !o.start &&
                  (o.continue.seeked ||
                    ((m = o.continue.flag()).t &&
                      m.d &&
                      ((u = m.t), (o.continue.seeked = !0)))),
                0 == t.indexOf("+")
                  ? (t = u + parseInt(t.substr(1)))
                  : 0 == t.indexOf("-") && (t = u - parseInt(t.substr(1))))),
          (t = +t) < 0 && (t = 0),
          0 < o.media.duration() && t > o.media.duration() && (t = 0),
          !exist(o.vast) && !exist(o.vastloader) && 0 < o.media.duration()
            ? ((o.seekto = void 0), o.actions.Seek(t, !0), o.actions.Playing())
            : (o.seekto = t)),
        "fullscreen" == e && (o.fullscreen || o.actions.Fullscreen()),
        "exitfullscreen" == e && o.fullscreen && o.actions.Normalscreen(),
        "isfullscreen" == e)
      )
        return o.fullscreen;
      if ("size" == e) return o.screen_w + "/" + o.screen_h;
      if (
        ("fix" == e && exist(o.minify) && o.minify.Do(),
        ("unfixing" != e && "unfix" != e) || (exist(o.minify) && o.minify.Un()),
        "time" == e)
      ) {
        var f = o.media ? o.media.time() : 0;
        return (
          o.continue &&
            1 == v.timestore &&
            !o.start &&
            0 == f &&
            (m = o.continue.flag()).t &&
            (f = m.t),
          f
        );
      }
      if (
        ("timeplay" == e &&
          (o.butplstart && apiProcessor("play", "id:" + o.butplstart),
          o.butseekto &&
            (apiProcessor("seek", o.butseekto), apiProcessor("play"))),
        "duration" == e)
      )
        return o.media ? o.media.duration() : 0;
      if (
        ("points" == e && t && ((v.points = t), o.controls.RenewPoints()),
        "quality" == e)
      ) {
        if (!exist(t)) return o.media ? o.media.getQuality() : 0;
        i
          ? ((v.hd = Switcher(v.hd, t, i)),
            2 == o.files_quality.length && o.actions.SetQuality(v.hd))
          : o.actions.SetQuality(t);
      }
      if ("audiotrack" == e) {
        if (!exist(t)) return o.media ? o.media.getAudioTrack() : 0;
        i
          ? ((v.ahd = Switcher(v.ahd, t, i)),
            2 == o.files_audiotrack.length && o.actions.SetAudioTrack(v.ahd))
          : o.actions.SetAudioTrack(t);
      }
      if ("isyoutube" == e) return "youtube" == o.file_type;
      if (
        ("restart" == e &&
          (0 < o.current_audiotrack && (o.restart_audio = o.current_audiotrack),
          o.actions.NewFile(v.file)),
        "playing" == e)
      )
        return o.play;
      if ("started" == e) return o.start;
      if ("system" == e) return o.system[t];
      if (
        ("youtubeready" == e && 1 != o.destroyed && o.media.onYoutubeReady(),
        "id" == e)
      )
        return v.id;
      if (
        ("log" == e && (v.log = t),
        "eventstracker" == e && (v.eventstracker = t),
        "pip" == e && o.media.PipToggle(),
        "switchpip" == e &&
          (o.media.PipSwitch(), i && (o.piped = Switcher(o.piped, t, i))),
        "airplay" == e && o.media.Airplay(),
        "pipwebkit" == e && o.media.PipWebkit(),
        "options" == e && 1 != v.playerjscom && console.log(options),
        "subtitle" == e &&
          ((v.subtitle = t),
          exist(t) &&
            (t.toString().length < 3 && o.sbt
              ? o.sbt.SetSubtitle(+t)
              : o.actions.Subtitle(t))),
        "quiz" == e && exist(o.quiz))
      ) {
        if (!exist(t)) return o.quiz.Active();
        o.quiz.api(t);
      }
      if ("geo" == e) return o.geobj || !1;
      if (
        ("box" == e &&
          (((g = createElement("div")).id = t),
          (g.style.zIndex = 1e4),
          o.frame.appendChild(g)),
        "screenshot" == e)
      ) {
        if (o.tagvideo) {
          var h = createElement("canvas");
          o.container.appendChild(h);
          var m = h.getContext("2d"),
            f = o.media.size();
          (h.width = 0 < f.width ? f.width : o.normal_w),
            (h.height = 0 < f.height ? f.height : o.normal_h),
            m.drawImage(o.media.tag(), 0, 0, h.width, h.height),
            (quality = 2);
          var g = document.createElement("canvas");
          (g.width = h.width * quality), (g.height = h.height * quality);
          var y,
            f = g.getContext("2d");
          f.drawImage(
            o.media.tag(),
            0,
            0,
            h.width * quality,
            h.height * quality
          ),
            1 == v.sscopyright &&
              exist(v.sstext) &&
              (exist(v.ssfontsize) || (v.ssfontsize = 20),
              exist(v.ssfontcolor) || (v.ssfontcolor = "ffffff"),
              (f.font = v.ssfontsize + "px Courier, Arial"),
              (f.fillStyle = CheckColor(v.ssfontcolor)),
              f.fillText(
                "domain" == v.sstext ? o.domain : v.sstext,
                v.ssfontsize,
                h.height * quality - v.ssfontsize - 5
              )),
            m.drawImage(g, 0, 0, h.width, h.height);
          try {
            y = h.toDataURL("image/jpeg");
          } catch (e) {
            return console.log(e.message), !1;
          }
          return y;
        }
        return !1;
      }
      if ("dash" == e) return o.file_type == e ? o.media.getDASH() : void 0;
      if ("hls" == e) return o.file_type == e ? o.media.getHLS() : void 0;
      if ("poster" == e) return !o.play && (o.media.Poster(t), !0);
      if ("scale" == e) {
        if (!t)
          return [
            o.mediascale.x,
            o.mediascale.y,
            o.mediacontainer.style.left,
            o.mediacontainer.style.top,
          ];
        o.media.scale(t);
      }
      if ("title" == e)
        return exist(t)
          ? (exist(t) && (v.title = t), o.actions.Title("title"), !0)
          : v.title;
      if (
        ("invert" == e && o.actions.InvertPlaylist(),
        "push" == e &&
          t &&
          (o.playlist_source || (o.playlist_source = []),
          "object" == typeof t &&
            ((t = o.playlist_source.concat(t)), (e = "playlist"))),
        "playlist" == e)
      )
        if (t)
          if ("object" == typeof t)
            try {
              return o.actions.UpdatePlaylist(t), !0;
            } catch (e) {
              return !1;
            }
          else if (t.indexOf(".txt") == t.length - 4 || 0 < t.indexOf(".txt?"))
            return (
              ((p = XHR(t)).onload = function () {
                if (4 == this.readyState && 200 == this.status)
                  try {
                    apiProcessor("playlist", JSON.parse(this.responseText));
                  } catch (e) {}
              }),
              p.send(),
              !0
            );
      if (
        ("next" == e && o.controls.PlaylistNext(),
        "prev" == e && o.controls.PlaylistPrev(),
        "find" == e && exist(t) && exist(o.playlist_dic))
      ) {
        for (var b in (o.play || (v.autoplay = 0), o.playlist_dic))
          o.playlist_dic.hasOwnProperty(b) &&
            o.playlist_dic[b].pjs_id == t &&
            (t = b);
        return !!exist(o.playlist_dic[t]) && (o.controls.PlaylistOpenId(t), !0);
      }
      if ("playlist_folders" == e) {
        var _ = [];
        if (exist(o.playlist_dic))
          for (var b in o.playlist_dic)
            o.playlist_dic[b].folder &&
              -1 == o.playlist_dic[b].pjs_parent_i &&
              _.push({
                title: o.playlist_dic[b].title,
                id: o.playlist_dic[b].id,
              });
        return _;
      }
      if ("playlist_id" == e && o.plid)
        return o.playlist_dic[o.plid].pjs_id || o.plid;
      if ("playlist_length" == e)
        return o.playlist_dic ? Object.keys(o.playlist_dic).length : -1;
      if ("playlist_title" == e && exist(o.playlist_title))
        return o.playlist_title;
      if (("showplaylist" == e && o.controls.PlaylistShow(), "vastnow" == e))
        return !!o.vast;
      if ("vastinfo" == e) return !!o.vast && VastInfo();
      if ("vastpause" == e) return !!o.vast && o.vast.pause();
      if ("vastresume" == e) return !!o.vast && o.vast.resume();
      if ("vaststart" == e) {
        if (!o.vast) return !1;
        o.vast.startAd();
      }
      if ("vastmute" == e) {
        if (!o.vast) return !1;
        o.vast.mute();
      }
      if (
        ("captions" == e &&
          ((v.captions = Switcher(v.captions, t, i)), o.media.captions()),
        "loop" == e)
      )
        if (exist(i)) v.loop = Switcher(v.loop, t, i);
        else {
          if (!exist(t)) return v.loop;
          "0/1" == t && (t = 1 - v.loop), (v.loop = t);
        }
      if ("shuffle" == e)
        if (exist(i)) v.shuffle = Switcher(v.shuffle, t, i);
        else {
          if (!exist(t)) return v.shuffle;
          v.shuffle = t;
        }
      if ("autonext" == e || "playlistloop" == e) {
        n = "playlistloop" == e ? "playlistrewind" : "autoplaylist";
        return (
          exist(i)
            ? (v.playlist[n] = Switcher(v.playlist[n], t, i))
            : exist(t) &&
              ("0/1" == t && (t = 1 - v.playlist[n]), (v.playlist[n] = t)),
          v.playlist[n]
        );
      }
      if (
        ("hd" == e &&
          2 == o.files_quality.length &&
          ((v.hd = o.files_quality[o.current_quality]),
          (v.hd = Switcher(v.hd, t, i)),
          o.files_quality[0] == v.hd
            ? o.actions.SetQuality(0)
            : o.actions.SetQuality(1)),
        "v" == e && t)
      )
        return 0 == t.indexOf("file") || 0 == t.indexOf("bk") ? void 0 : v[t];
      if (0 != e.indexOf("update:"))
        return "currentfile" == e
          ? o.media
            ? o.media.currentFile()
            : ""
          : "vrsn" == e
          ? o.version + " " + o.playerid
          : "playerid" == e
          ? o.playerid
          : "hlserror" == e
          ? o.hlserror
          : "dasherror" == e
          ? o.dasherror
          : "visibility" == e
          ? o.visibility
          : "vastids" == e
          ? o.vast
            ? o.vast_adid
            : void 0
          : void (
              "destroy" == e &&
              (o.actions.StopMedia(),
              (o.destroyed = 1),
              (v.hotkey.on = 0),
              (o.container.innerHTML = ""))
            );
      var x = e.substr(7);
      if ("object" == typeof t && "object" == typeof v[x])
        for (var w in t) t.hasOwnProperty(w) && (v[x][w] = t[w]);
      else -1 == e.indexOf("rc_") && (v[x] = t);
      return !0;
    }
  }
  function Switcher(e, t, o) {
    var i = trim(t) + "";
    return (
      0 < t.indexOf("/") &&
        2 == (t = t.split("/")).length &&
        (e == trim(t[0])
          ? ((i = trim(t[1])), o && o.CustomSwitch(1))
          : ((i = trim(t[0])), o && o.CustomSwitch(0))),
      i
    );
  }
  function XHR(e) {
    var t = new XMLHttpRequest();
    return t.open("GET", e, !0), t;
  }
  function FindIdPl(e) {
    var t = e.substr(3);
    if (o.playlist_dic)
      for (var i in o.playlist_dic)
        o.playlist_dic.hasOwnProperty(i) &&
          o.playlist_dic[i].pjs_id == t &&
          (t = i);
    return t;
  }
  function VastInfo() {
    if (
      (o.vast && o.vast.active() && (e = o.vast),
      !e && o.vastloader && (e = o.vastloader),
      e)
    ) {
      var e = {
        is: o.vasttype,
        system: e.info("adsystem"),
        version: e.info("version"),
        vpaid: e.info("isVpaid"),
        url:
          o.current_vast_url +
          (e.info("wrapper") ? e.info("wrapper0") + e.info("wrapper") : ""),
        type: e.info("filetype"),
        file: e.info("file"),
        time: o.media.time(),
        volume: e.getVolume(),
        id: o.vast_adid,
      };
      return "midroll" == o.vasttype && (e.midroll_time = o.midrollcrtm), e;
    }
  }
  this.api = function (e, t, o) {
    return apiProcessor(e, t, o);
  };
  var createElement = function (e) {
      var t = e;
      ("div" != e && "div2" != e) || (t = "pjsdiv");
      t = document.createElement(t);
      return (
        "div2" == e &&
          css(t, {
            cursor: "pointer",
            display: "block",
          }),
        t
      );
    },
    log = function (e, t, o, i, s, n, a) {
      (1 != v.log && 1 != v.logout) ||
        ((a =
          e +
          (null != t ? " " + t : "") +
          (null != o ? " " + o : "") +
          (null != i ? " " + i : "") +
          (null != s ? " " + s : "") +
          (null != n ? " " + n : "") +
          (null != a ? " " + a : "")),
        console.log("Playerjs" + (1 == v.pjsframed ? "2" : "") + ": " + a),
        1 == v.logout &&
          exist(document.getElementById("pjslog")) &&
          (document.getElementById("pjslog").innerHTML += a + "<br/>"));
    },
    CustomFonts = function () {
      var e;
      1 == v.fonts &&
        exist(v.fontnames) &&
        "" != v.fontnames &&
        (((e = document.createElement("link")).rel = "stylesheet"),
        (e.href =
          "https://fonts.googleapis.com/css?family=" +
          v.fontnames.replace(/,/gi, "|").replace(/ /gi, "+")),
        document.head.appendChild(e));
    },
    SvgColor = function (e, t) {
      for (
        var o = ["path", "polygon", "polyline", "rect", "ellipse"], i = 0;
        i < o.length;
        i++
      ) {
        var s = e.querySelectorAll("svg " + o[i]);
        if (0 < s.length)
          for (var n = 0; n < s.length; n++) s[n].style.fill = t;
      }
    },
    Time = function (e) {
      e < 0 && (e = 0);
      var t = 600 <= o.media.duration,
        i = 3600 <= o.media.duration,
        s = Math.floor(e / 60),
        n = Math.floor(e - 60 * s),
        a = Math.floor(s / 60),
        r = Math.floor(a / 24);
      if (
        ((s -= 60 * a),
        0 < r && (a -= 24 * r),
        1 == v.dvrtime && o.media.isLive())
      ) {
        var l = new Date();
        return String(new Date(l.getTime() + 1e3 * e).toLocaleTimeString());
      }
      return String(
        (0 < r ? r + ":" : "") +
          (0 < a || i ? a + ":" : "") +
          ((0 < a || t) && s < 10 ? "0" : "") +
          s +
          ":" +
          (n < 10 ? "0" : "") +
          n
      );
    },
    timeFormat = function (e) {
      var t = Math.floor(e),
        i = Math.floor(t / 60),
        s = Math.floor(i / 60),
        i = Math.floor(i % 60);
      0 < s && i < 10 && (i = "0" + i);
      i =
        (0 < s ? s + ":" : "") +
        (0 <= i ? i : "0") +
        ":" +
        (t = 0 <= (t = Math.floor(t % 60)) ? (10 <= t ? t : "0" + t) : "00");
      if (1 == v.dvrtime && o.media.isLive()) {
        t = new Date();
        return String(new Date(t.getTime() + 1e3 * e).toLocaleTimeString());
      }
      return i;
    },
    Href = function () {
      return encodeURIComponent(
        window.location != window.parent.location
          ? document.referrer
          : document.location.href
      );
    },
    Script = function (e, t, o) {
      var i;
      return (
        !Scripted(e) &&
          t &&
          ("same" == t && (t = e),
          ((i = document.createElement("script")).src =
            -1 == t.indexOf("//") ? "//" + t : t),
          (i.async = 1),
          o && (i.name = o),
          (o =
            document.getElementsByTagName("script")[0]).parentNode.insertBefore(
            i,
            o
          )),
        i
      );
    },
    Scripted = function (e) {
      for (
        var t = !1, o = document.getElementsByTagName("script"), i = 0;
        i < o.length;
        i++
      )
        -1 < o[i].src.indexOf(e) && (t = !0);
      return t;
    },
    hex2rgb = function (e, t) {
      e = e.replace("#", "");
      var o = parseInt(
          3 == e.length ? e.slice(0, 1).repeat(2) : e.slice(0, 2),
          16
        ),
        i = parseInt(
          3 == e.length ? e.slice(1, 2).repeat(2) : e.slice(2, 4),
          16
        ),
        e = parseInt(
          3 == e.length ? e.slice(2, 3).repeat(2) : e.slice(4, 6),
          16
        );
      return t
        ? "rgba(" + o + ", " + i + ", " + e + ", " + t + ")"
        : "rgb(" + o + ", " + i + ", " + e + ")";
    },
    css = function (e, t) {
      if (exist(e))
        for (var o in t)
          t.hasOwnProperty(o) &&
            "NaNpx" != t[o] &&
            null != t[o] &&
            ("number" == typeof t[o] &&
              "opacity" != o &&
              "zIndex" != o &&
              (t[o] += "px"),
            (-1 < o.indexOf("color") || -1 < o.indexOf("Color")) &&
              -1 == t[o].indexOf("#") &&
              -1 == t[o].indexOf("rgba") &&
              (t[o] = "#" + t[o]),
            "transform" == o &&
              ((e.style["-ms-" + o] = t[o]),
              (e.style["-moz-" + o] = t[o]),
              (e.style["-webkit-" + o] = t[o]),
              (e.style["-o-" + o] = t[o])),
            "fontFamily" == o &&
              -1 < t[o].indexOf(" ") &&
              (t[o] = '"' + t[o] + '"'),
            "box-sizing" == o
              ? e.style.setProperty(o, t[o], "important")
              : (e.style[o] = t[o]));
    },
    Bglines = function (e, t, o, i) {
      (o = +existv(o, 1)), (i = +existv(i, 1));
      css(e, {
        background:
          "repeating-linear-gradient(-45deg," +
          t +
          "," +
          t +
          " " +
          o +
          "px,rgba(0,0,0,0)," +
          o +
          "px,rgba(0,0,0,0) " +
          (o + i) +
          "px)",
      });
    },
    CheckColor = function (e) {
      return "#" != e.substr(0, 1) ? (e = "#" + e) : e;
    },
    controlCSS = function (e, t, i) {
      t = CheckColor((t = t || "#fff"));
      var s = random(1e5, 1e6),
        s = (e = (e = e.replace(/\(rand\)/g, s)).replace(
          /\(color\)/g,
          t
        )).substr(0, e.indexOf("|||")),
        t = e.substr(e.indexOf("|||") + 3),
        e = "";
      o.system.webkit &&
        (e = (e = (e = (e = t.replace(
          /animation:/g,
          "-webkit-animation:"
        )).replace(/animation-/g, "-webkit-animation-")).replace(
          /@keyframes/g,
          "@-webkit-keyframes"
        )).replace(/transform/g, "-webkit-transform")),
        (i.innerHTML = s),
        pushCSS(e + t);
    },
    pushCSS = function (e) {
      o.css &&
        (o.css.styleSheet
          ? (o.css.styleSheet.cssText = e)
          : o.css.appendChild(document.createTextNode(e)));
    },
    xhr = function (e, t) {
      var o = new XMLHttpRequest();
      o.open("GET", e, !0), (o.onload = t), o.send();
    },
    FindPjsDiv = function (e) {
      if (e)
        for (var t = 0; t < 5 && "PJSDIV" != e.nodeName; t++)
          e.parentElement && (e = e.parentElement);
      return e;
    },
    gif = function (e) {
      var t = document.createElement("img");
      -1 < o.gifed.indexOf(e)
        ? (o.gifed.push(e),
          (e =
            0 < e.indexOf("?")
              ? e + "&" + Math.random()
              : e + "?" + Math.random()))
        : o.gifed.push(e),
        t.setAttribute("src", e),
        t.setAttribute("height", "1px"),
        t.setAttribute("width", "1px");
    },
    attr = function (e, t) {
      for (var o in t) t.hasOwnProperty(o) && e.setAttribute(o, t[o]);
    },
    destroy = function (e) {
      if (e)
        try {
          e.parentNode.removeChild(e), (e = null);
        } catch (e) {}
    },
    random = function (e, t) {
      return Math.floor(
        1 < arguments.length
          ? (t - e + 1) * Math.random() + e
          : (e + 1) * Math.random()
      );
    },
    randomstr = function () {
      return Math.random().toString(36).substring(2, 12);
    },
    removebykey = function (o, i) {
      return (o = Object.keys(o).reduce(function (e, t) {
        return t != i && (e[t] = o[t]), e;
      }, {}));
    },
    trim = function (e) {
      return "string" == typeof e ? e.replace(/^\s+|\s+$/gm, "") : e;
    },
    encode = function (e, t) {
      return 0 == t
        ? "#0" + salt.e(e)
        : -1 == t
        ? salt.e(e)
        : 1 == t
        ? "#1" + pepper(salt.e(e), 1)
        : void 0;
    },
    str2obj = function (x) {
      if ("" != v[x])
        if ("string" != typeof v[x]) o[x + "o"] = v[x];
        else if (0 == v[x].indexOf("[{"))
          try {
            (v[x] = v[x].replace(/pjs'qt/gi, '"')), (o[x + "o"] = eval(v[x]));
          } catch (e) {}
    },
    dechar = function (e) {
      return String.fromCharCode(e);
    },
    decode = function (e) {
      return "#1" == e.substr(0, 2)
        ? salt.d(pepper(e.substr(2), -1))
        : "#0" == e.substr(0, 2)
        ? salt.d(e.substr(2))
        : e;
    },
    checkBase64 = function (e) {
      return (
        e &&
          -1 == e.indexOf("http") &&
          -1 == e.indexOf(".") &&
          100 < e.length &&
          (e = "data:image/png;base64," + e),
        e
      );
    },
    hide = function (e) {
      e.style.visibility = "hidden";
    },
    show = function (e) {
      e.style.visibility = "visible";
    },
    hide2 = function (e) {
      e && (e.style.display = "none");
    },
    show2 = function (e) {
      e && (e.style.display = "block");
    },
    isVisible = function (e) {
      return !!e && "hidden" != e.style.visibility && "none" != e.style.display;
    },
    int = function (e) {
      return (
        "string" == typeof e &&
          0 < e.indexOf("px") &&
          (e = e.substr(0, e.indexOf("px"))),
        parseInt(e)
      );
    },
    hidden = function (e) {
      return "none" == e.style.display;
    },
    hexToRgb = function (e) {
      e = parseInt(e, 16);
      return ((e >> 16) & 255) + "," + ((e >> 8) & 255) + "," + (255 & e);
    },
    MarginPadding = function (e, t, o) {
      return (
        (e[t + "top"] = 0),
        (e[t + "right"] = 0),
        (e[t + "bottom"] = 0),
        (e[t + "left"] = 0),
        !exist(e[o]) ||
          (4 == (o = e[o].split(" ")).length &&
            ((e[t + "top"] = o[0] ? parseFloat(o[0]) : 0),
            (e[t + "right"] = o[1] ? parseFloat(o[1]) : 0),
            (e[t + "bottom"] = o[2] ? parseFloat(o[2]) : 0),
            (e[t + "left"] = o[3] ? parseFloat(o[3]) : 0))),
        e
      );
    },
    MarPad = function (e) {
      return (e = e && e.replace(/ /gi, "px ")) + "px";
    },
    StringVar = function (e, t) {
      return v[e] && "" != v[e] ? v[e] : t;
    },
    abc = String.fromCharCode(
      65,
      66,
      67,
      68,
      69,
      70,
      71,
      72,
      73,
      74,
      75,
      76,
      77,
      97,
      98,
      99,
      100,
      101,
      102,
      103,
      104,
      105,
      106,
      107,
      108,
      109,
      78,
      79,
      80,
      81,
      82,
      83,
      84,
      85,
      86,
      87,
      88,
      89,
      90,
      110,
      111,
      112,
      113,
      114,
      115,
      116,
      117,
      118,
      119,
      120,
      121,
      122
    ),
    salt = {
      _keyStr: abc + "0123456789+/=",
      e: function (e) {
        var t,
          o,
          i,
          s,
          n,
          a,
          r = "",
          l = 0;
        for (e = salt._ue(e); l < e.length; )
          (i = (a = e.charCodeAt(l++)) >> 2),
            (s = ((3 & a) << 4) | ((t = e.charCodeAt(l++)) >> 4)),
            (n = ((15 & t) << 2) | ((o = e.charCodeAt(l++)) >> 6)),
            (a = 63 & o),
            isNaN(t) ? (n = a = 64) : isNaN(o) && (a = 64),
            (r =
              r +
              this._keyStr.charAt(i) +
              this._keyStr.charAt(s) +
              this._keyStr.charAt(n) +
              this._keyStr.charAt(a));
        return r;
      },
      d: function (e) {
        var t,
          o,
          i,
          s,
          n,
          a,
          r = "",
          l = 0;
        for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length; )
          (i = this._keyStr.indexOf(e.charAt(l++))),
            (t =
              ((15 & (s = this._keyStr.indexOf(e.charAt(l++)))) << 4) |
              ((n = this._keyStr.indexOf(e.charAt(l++))) >> 2)),
            (o = ((3 & n) << 6) | (a = this._keyStr.indexOf(e.charAt(l++)))),
            (r += dechar((i << 2) | (s >> 4))),
            64 != n && (r += dechar(t)),
            64 != a && (r += dechar(o));
        return (r = salt._ud(r));
      },
      _ue: function (e) {
        e = e.replace(/\r\n/g, "\n");
        for (var t = "", o = 0; o < e.length; o++) {
          var i = e.charCodeAt(o);
          i < 128
            ? (t += dechar(i))
            : (127 < i && i < 2048
                ? (t += dechar((i >> 6) | 192))
                : ((t += dechar((i >> 12) | 224)),
                  (t += dechar(((i >> 6) & 63) | 128))),
              (t += dechar((63 & i) | 128)));
        }
        return t;
      },
      _ud: function (e) {
        for (var t, o = "", i = 0, s = 0; i < e.length; )
          (t = e.charCodeAt(i)) < 128
            ? ((o += dechar(t)), i++)
            : 191 < t && t < 224
            ? ((s = e.charCodeAt(i + 1)),
              (o += dechar(((31 & t) << 6) | (63 & s))),
              (i += 2))
            : ((s = e.charCodeAt(i + 1)),
              (c3 = e.charCodeAt(i + 2)),
              (o += dechar(((15 & t) << 12) | ((63 & s) << 6) | (63 & c3))),
              (i += 3));
        return o;
      },
    },
    pepper = function (e, t) {
      e = (e = e.replace(/\+/g, "#")).replace(/#/g, "+");
      var i = sugar(o.y) * t;
      t < 0 && (i += abc.length / 2);
      var s = abc.substr(2 * i) + abc.substr(0, 2 * i);
      return e.replace(/[A-Za-z]/g, function (e) {
        return s.charAt(abc.indexOf(e));
      });
    },
    sugar = function (e) {
      e = e.split(dechar(61));
      var t,
        o,
        i = "",
        s = dechar(120);
      for (o in e)
        if (e.hasOwnProperty(o)) {
          var n,
            a = "";
          for (n in e[o])
            e[o].hasOwnProperty(n) &&
              (a += e[o][n] == s ? dechar(49) : dechar(48));
          (t = parseInt(a, 2)), (i += dechar(t.toString(10)));
        }
      return i.substr(0, i.length - 1);
    },
    exist = function (e) {
      return null != e && void 0 !== e && "undefined" != e;
    },
    existv = function (e, t) {
      return exist(e) ? e : t;
    },
    exist2 = function (e) {
      return exist(e) && -1 != e && "" != e;
    },
    copyObject = function (e) {
      return "object" == typeof e && (e = JSON.parse(JSON.stringify(e))), e;
    },
    findLeft = function (e) {
      return (
        e.getBoundingClientRect().left + (window.scrollX || window.pageXOffset)
      );
    },
    findTop = function (e) {
      return e.getBoundingClientRect().top + window.scrollY;
    },
    redirect = function (e) {
      "" != e &&
        (1 == v.redirectblank ? window.open(e) : (window.location.href = e),
        (e = ""));
    },
    reRightMenu = function () {
      1 == v.rightmenu &&
        (o.rightmenu && o.frame.removeChild(o.rightmenu), (o.rightmenu = null));
    },
    Actions = function () {
      var _fullscreen_end = !1,
        volumewheelin;
      function Prefile(e) {
        return (
          exist(v.prefile) && -1 == e.indexOf("//") && (e = v.prefile + e), e
        );
      }
      function Thumbs() {
        1 == v.thumbs &&
          "undefined" != typeof PluginThumbs &&
          (o.th = new PluginThumbs());
      }
      function onPlay(e) {
        (o.onplay = !0),
          o.controls && o.controls.SettingsVisible() && o.controls.Settings(),
          o.droplist && o.droplist.Close(),
          e || o.media.Play(),
          o.checknative ||
            setTimeout(function () {
              o.media.NativeControls();
            }, 500),
          o.play || o.controls.Play(),
          1 == v.effects && o.effects.api("play"),
          1 == v.vast && o.actions.VastRecover("pauseroll"),
          o.system.mobile && o.controls.HideInterval(),
          exist(o.share) && o.share.isOpen() && o.share.Hide(),
          1 == v.heartbeats &&
            exist(v.heartbeat) &&
            o.dt &&
            ("" == v.heartbeat ||
              exist(o.heartbeatInterval) ||
              ((o.heartbeatInterval = setInterval(
                Heartbeat,
                1e3 * v.heartbeatinterval
              )),
              Heartbeat()));
      }
      function StartTimeout() {
        (o.starttimeout = !1), o.controls.refresh();
      }
      function Quartile(e) {
        (o.quartile[e] = !0),
          1 == v.timestore &&
            1 == v.playedstore &&
            v.playedquartile == e &&
            o.storage &&
            o.plid &&
            o.continue &&
            o.continue.writePl(o.plid);
      }
      function gaTrackPlay(e, t, i, s) {
        exist(o.gatracked[t]) || (s < i && gaTracker(e, t, 1));
      }
      function NativeEnterFs() {
        var e = o.media.tag();
        e &&
          ((o.nativefull = !0),
          o.media.nativeSubtitle(),
          e.webkitEnterFullScreen(),
          e.addEventListener("webkitendfullscreen", iosExitFullscreen));
      }
      function NativeExitFs() {
        var e = o.media.tag();
        e && e.webkitExitFullscreen();
      }
      function PostFullscreen() {
        1 != o.fs_error &&
          (o.ispipkit && o.media.PipWebkit(),
          1 == v.hotkey.volumewheelfull &&
            (VolumeWheelX(!0), (o.volumewheel = !0)),
          1 == v.effects && o.effects.api("full"),
          js("fullscreen"),
          gaTracker("full", "Fullscreen", 1));
      }
      o.system.tv && log("tv"),
        (this.Title = function (e) {
          o.controls && o.controls.title(e);
        }),
        (this.File = function (t) {
          if (!t) return t;
          if (
            "string" == typeof t &&
            0 == (t = t.replace(/(\r\n|\n|\r)/gm, "")).indexOf("[{")
          )
            try {
              (t = t.replace(/pjs'qt/gi, '"')), (t = JSON.parse(t));
            } catch (e) {
              t = "incorrect JSON";
            }
          if ("object" == typeof t) {
            var e;
            (o.playlist_dic = []),
              (o.playlist_source = copyObject(t)),
              (o.playlist = IndexPlaylist(t)),
              1 != v.playlist.openlast ||
                v.plstart ||
                ((e = Object.keys(o.playlist_dic).slice(-1)[0]) &&
                  (v.plstart = e));
            var i = FindFileInPlaylist();
            if (i) {
              (t = i.file),
                (o.titlestore = i.title),
                o.controls && o.controls.titlepl(i.title),
                exist(i.poster) &&
                  (o.media ? o.media.Poster(i.poster) : (v.poster = i.poster)),
                exist(i.sub) && (i.subtitle = i.sub),
                exist(i.start) && (v.start = o.seekto = i.start),
                SettingsTimers("offset"),
                exist(i.id) && (o.plid = i.id);
              var s = [
                "subtitle",
                "vars",
                "embed",
                "url",
                "url2",
                "url3",
                "heartbeat",
                "thumbnails",
                "label",
                "download",
                "points",
                "remove",
                "end",
                "delete",
                "title2",
              ];
              exist(v.control_title) &&
                1 == v.control_title.showfrom1file &&
                1 == v.control_title.showtitleplaylist &&
                (s.push("title"),
                s.push("t1"),
                s.push("t2"),
                s.push("t3"),
                s.push("t4"),
                s.push("t5"));
              for (var n = 0; n < s.length; n++)
                exist(i[s[n]]) && (v[s[n]] = i[s[n]]);
              0 < s.indexOf("title") &&
                (1 == v.control_title.templated &&
                  ((o.title_template = v.control_title.template),
                  o.actions.TitleTemplate(i)),
                o.actions.Title("title")),
                o.controls && o.controls.UpdatePlaylist(o.playlist),
                o.droplist && o.droplist.Update();
            }
          }
          if ("string" == typeof t) {
            var a;
            if (
              (0 == (t = fjs(t)).indexOf("#" + v.enc2) && (t = o[o.fd[0]](t)),
              0 == t.indexOf("#" + v.enc3) &&
                0 < t.indexOf(v.file3_separator) &&
                (t = o[o.fd[1]](t)),
              0 == t.indexOf("#0") && (t = fd0(t)),
              (t = fjs(t)),
              1 == v.fplace && (t = fplace(t)),
              "" == t &&
                (log("empty file"), (o.media_error = !0), js("error", "empty")),
              (o.files_quality = []),
              (o.files_quality_ag = []),
              (o.files_audiotrack = []),
              (o.current_file = 0),
              (o.current_quality = 0),
              (o.current_audiotrack = 0),
              "" == v.file_separator && (v.file_separator = ","),
              (-1 < t.indexOf("]") && -1 < t.indexOf("[")) || exist(v.qualities)
                ? (o.files = t.split(v.file_separator))
                : (o.files = [t]),
              (o.audiotracks = []),
              exist(v.qualities) && (a = v.qualities.split(v.file_separator)),
              0 < o.files.length)
            )
              for (var r, l = -1, n = 0; n < o.files.length; n++)
                (o.files[n] = trim(o.files[n])),
                  "" != o.files[n] &&
                    (0 == o.files[n].indexOf("[") && 1 < o.files[n].indexOf("]")
                      ? ((o.files_quality[n] = o.files[n].substr(
                          o.files[n].indexOf("[") + 1,
                          o.files[n].indexOf("]") - 1
                        )),
                        (o.files[n] = o.files[n].substr(
                          o.files[n].indexOf("]") + 1
                        )))
                      : exist(v.qualities)
                      ? (o.files_quality[n] = exist(a[n]) ? a[n] : "")
                      : (o.files_quality[n] = n + 1),
                    (r = 0),
                    exist(v.default_quality) &&
                      -1 == l &&
                      (0 == String(v.default_quality).indexOf("num:") &&
                        +v.default_quality.substr(4) == n &&
                        (r = 1),
                      v.default_quality == o.files_quality[n] && (r = 1),
                      "max" == v.default_quality &&
                        n == o.files.length - 1 &&
                        (r = 1)),
                    exist(o.default_quality) &&
                      o.default_quality == o.files_quality[n] &&
                      ((r = 1), (l = n)),
                    1 == r && ((o.current_file = n), (o.current_quality = n)),
                    (o.files[n] = Prefile(o.files[n])));
            else o.files[0] = Prefile(o.files[0]);
            return o.files[o.current_file];
          }
        }),
        (this.InvertPlaylist = function () {
          if (o.playlist) {
            for (var e = o.playlist.reverse(), t = 0; t < e.length; t++)
              e[t].pjs_i = t;
            (o.playlist = e), o.controls.UpdatePlaylist(o.playlist);
          }
        }),
        (this.UpdatePlaylist = function (e) {
          "object" == typeof e &&
            ((o.playlist_dic = []),
            (o.playlist_source = copyObject(e)),
            (o.playlist = IndexPlaylist(e)),
            o.controls && o.controls.UpdatePlaylist(o.playlist));
        }),
        (this.NewFile = function (e, t, i) {
          if (
            (exist(t) || (v.autoplay = 1),
            exist(i) || (v.preload = 0),
            (v.duration = void 0),
            (v.end = void 0),
            (v.delete = void 0),
            2 != o.media_error && (o.media_error = !1),
            (o.metadata = !1),
            (o.pipwebkit = !1),
            (o.reloadTimer = 0),
            (o.gatracked = []),
            (o.checknative = !1),
            (o.gained = !1),
            (o.dvr = !1),
            (o.quartile = [!1, !1, !1]),
            (o.sess = randomstr()),
            (o.sesstime = 0),
            "pjs" != o.file_type && o.sbt && o.sbt.remove(),
            1 < v.vast_midroll_limit && exist(o.midrollo) && 1 == v.midrolls)
          ) {
            for (var s in o.midrollo) o.midrollo[s].worked = void 0;
            v.vast_midroll_limit--;
          }
          o.err404v && o.err404v.remove(),
            "playing" == o.media.status() && this.Stop(),
            exist(o.share) && o.share.Remove(),
            exist(o.reloadErrorTimeout) && clearTimeout(o.reloadErrorTimeout),
            js("new"),
            o.actions.VastRecover(),
            (e = this.File(e)),
            1 == t && (o.file_type = ""),
            o.media.File(e),
            (!o.system.mobile && !o.system.safari) ||
              exist(t) ||
              o.actions.Play(),
            exist(o.custom_aspect) &&
              ((o.mediascale = {
                x: 1,
                y: 1,
                x0: 1,
                y0: 1,
              }),
              o.media.normalscale()),
            gaTracker("play", "Play"),
            o.media.NativeControls(),
            o.controls.QualityChangedNoHand(),
            o.controls.AudioTrackChangedNoHand(),
            o.controls.refresh();
        }),
        (this.TitleTemplate = function (e) {
          var t = !1;
          if (e && o.title_template) {
            v.title = o.title_template;
            for (var i = 1; i < 6; i++)
              exist(e["t" + i]) &&
                ((v.title = v.title.replace("{" + i + "}", e["t" + i])),
                (t = !0));
          }
          return t;
        }),
        (this.MediaReady = function () {
          1 == v.autoplay &&
            (1 == v.observer
              ? setTimeout(function () {
                  o.actions.Play();
                }, 500)
              : this.Play(),
            (v.autoplayed = 1)),
            Thumbs();
        }),
        (this.Thumbs = function () {
          Thumbs();
        }),
        (this.NativeControls = function () {
          var e = !1;
          return (
            o.system.mobile &&
              ((e = !0),
              1 == v.nativenotiphone && o.system.iphone && (e = !1),
              1 == v.nativenotipad && o.system.ipad && (e = !1),
              1 == v.nativenotios && o.system.ios && (e = !1),
              1 == v.nativenotandroid && o.system.android && (e = !1)),
            1 == v.nativeontv && o.system.tv && (e = !0),
            e
          );
        }),
        (this.Metadata = function () {
          o.media.Volume(v.volume),
            o.muted && o.media.Mute(),
            (o.metadata = !0),
            o.controls.refresh(),
            o.play || o.start || (1 == v.effects && o.effects.api("pause")),
            o.casting && o.tagvideo && o.chromecast.Go();
        }),
        (this.onPlayTag = function () {
          o.onplay || onPlay(!0);
        }),
        (this.Play = function (e) {
          if (o.play) o.media && o.media.Play();
          else {
            var t = !1;
            if (
              ("youtube" == o.file_type &&
                (o.media.YoutubeReady() ||
                  1 == v.autoplay ||
                  1 != v.preload ||
                  ((t = !0),
                  window.YT && ((v.autoplay = 1), o.media.onYoutubeReady()))),
              1 == v.pass &&
                0 == v.passontime &&
                (o.actions.Password(), (t = !0)),
              o.media_error || t)
            )
              o.media_error && Advertising("preroll") && datetime(2);
            else {
              if (
                ((o.newfile = !1),
                StopOtherPlayer(!o.start),
                o.alert.close(),
                o.start)
              )
                gaTracker("resume", "Resume");
              else {
                js("start"),
                  (o.start = !0),
                  1 == v.toolbar.hideuntilstarted &&
                    setTimeout(function () {
                      o.controls.resizetext();
                    }, 100),
                  0 < v.toolbar.hideleavetimeout &&
                    1 == v.autoplay &&
                    ((o.starttimeout = !0),
                    setTimeout(StartTimeout, 1e3 * v.toolbar.hideleavetimeout)),
                  1 == v.water && v.wid && PluginWater();
                for (var i = 0; i < o.vsts.length; i++)
                  1 == v["vast_nofirst" + o.vsts[i]] &&
                    localStorage.setItem("pljsfirst" + o.vsts[i], Date.now());
                1 == v.pjsstat && v.pjsstatid && PluginStat("start"),
                  js("new"),
                  o.controls.refresh(),
                  gaTracker("play", "Play"),
                  o.ab && gaTracker("adblock", "AdBlock", 1);
              }
              1 != v.fullonplay ||
                o.fullscreen ||
                (new Date().getTime() - o.clicktime < 300 &&
                  (1 != v.fullonplaymobile || o.system.mobile) &&
                  this.Fullscreen()),
                o.err404v && o.err404v.remove(),
                (1 != e && Advertising("preroll")) || Advertising("intro")
                  ? datetime(2)
                  : (1 == v.redirect &&
                      exist(v.redirectonplay) &&
                      !exist(options.redirect) &&
                      (redirect(v.redirectonplay), (t = !0)),
                    t ||
                      (log("Play"),
                      "pdf" != o.file_type &&
                        0 < o.media.duration() &&
                        o.controls.Duration(o.media.time(), o.media.duration()),
                      o.start2 ||
                        ((o.start2 = !0),
                        0 < v.toolbar.hideleavetimeout &&
                          1 == v.autoplay &&
                          ((o.starttimeout = !0),
                          setTimeout(
                            StartTimeout,
                            1e3 * v.toolbar.hideleavetimeout
                          ))),
                      (t = !1),
                      1 < o.media.time() &&
                        1 == v.pauserollonplay &&
                        1 != e &&
                        !isVastBgLoad() &&
                        !exist(o.vast) &&
                        !exist(o.vastloader) &&
                        (t = Advertising("pauseroll")),
                      (t && !isVastBgLoad()) || onPlay(!1)));
            }
          }
        }),
        (this.Pause = function () {
          o.play &&
            (log("Pause"),
            o.media.Pause(),
            o.controls.Pause(),
            js("pause"),
            v.posteronpause && ShowPoster(),
            1 == v.posterhidepause && HidePoster2(),
            1 == v.effects && o.effects.api("pause"),
            exist(o.vast) ||
              exist(o.vastloader) ||
              0 != v.pauserollonplay ||
              Advertising("pauseroll"),
            (o.onplay = !1));
        }),
        (this.Mute = function () {
          o.media.Mute(), o.controls.Mute(), (o.muted = !0), js("mute");
        }),
        (this.Unmute = function () {
          o.media.Unmute(), (o.muted = !1), o.controls.Unmute(), js("unmute");
        }),
        (this.Volume = function (e, t) {
          e < 0.01 && (e = 0),
            1 < e && (e = 1),
            e <= 0
              ? (this.Mute(), (e = v.volume = 0))
              : (o.muted && this.Unmute(), (v.volume = e)),
            js("volume", e),
            o.controls.Volume(e, t),
            o.media.Volume(e);
        }),
        (this.Waiting = function () {
          o.controls.Waiting();
        }),
        (this.StopWaiting = function () {
          o.controls && o.controls.StopWaiting();
        }),
        (this.Progress = function () {
          this.StopWaiting();
        }),
        (this.Seeked = function () {
          o.actions.UpdatePlay(), this.StopWaiting();
        }),
        (this.Duration = function (e, t) {
          var i;
          !o.continue ||
            o.start ||
            ((i = o.continue.flag()).t && i.d && (e = i.t)),
            o.controls.Duration(e, t);
        }),
        (this.LoadedData = function (e, t) {
          exist(o.seekto) &&
            "youtube" != o.file_type &&
            !o.media.isLive() &&
            (o.actions.Seek(o.seekto, !1), (o.seekto = void 0));
        }),
        (this.ScreenClick = function () {
          var e = new Date();
          o.clicktime = e.getTime();
          e = !1;
          o.controls.SettingsVisible() &&
            1 != v.settings.always &&
            (o.controls.Settings(), (e = !0)),
            o.droplist &&
              o.droplist.Visible() &&
              (o.droplist.Close(), (e = !0)),
            0 == v.playlist.always &&
              o.controls.PlaylistVisible() &&
              1 == v.playlist.autohide &&
              (o.controls.Playlist(), (e = !0)),
            1 == v.redirect &&
              exist(v.redirectonclick) &&
              !exist(options.redirect) &&
              (redirect(v.redirectonclick), (e = !0)),
            e ||
              (1 == v.hotkey.on &&
                1 == v.hotkey.icons &&
                1 == v.hotkey.playiconbut &&
                PluginHotIcon("play", o.play ? 0 : 1),
              this.Toggle());
        }),
        (this.ControlsBgClick = function () {
          o.controls.SettingsVisible() && o.controls.Settings();
        }),
        (this.Toggle = function () {
          "playing" == o.media.status() ? this.Pause() : this.Play(), Sub();
        }),
        (this.Seek = function (e, t) {
          e < o.media.duration() &&
            ((1 == v.control_line.dontseekforward && e > o.media.time()) ||
              (0 < v.delete && e < v.delete && (e = v.delete),
              (o.seeked_time = e),
              o.media.Seek(e),
              t && o.controls.Seek(e, o.media.duration()),
              (o.seeking = !0),
              (o.seeking_time = o.media.time()),
              Sub(o.seeking_time)));
        }),
        (this.Open = function (e, t, i) {
          "playing" == o.media.status() &&
            "audio" != o.mode &&
            (Pause(), o.fullscreen && i && o.controls.Normalscreen()),
            window.open(e, t);
        }),
        (this.Download = function () {
          var e = o.media.currentFile();
          exist(v.download) && (e = v.download),
            "" != e &&
              (js("download"),
              window.open(e, 1 == v.downself ? "_self" : "_blank").focus());
        }),
        (this.UpdatePlay = function () {
          var e = o.media.time(),
            t = o.media.duration();
          o.controls.Played(e, t);
        }),
        (this.Playing = function () {
          var e = o.media.time(),
            t = o.media.duration(),
            i = 0 < t ? e / t : 0;
          o.seeking
            ? e != o.seeking_time && (o.seeking = !1)
            : o.controls && o.controls.Played(0 < o.seekto ? o.seekto : e, t),
            (1 == v.ga || 1 == v.yamtr) &&
              0 < t &&
              (gaTrackPlay("play25", "Play 25%", i, 0.25),
              gaTrackPlay("play50", "Play 50%", i, 0.5),
              gaTrackPlay("play75", "Play 75%", i, 0.75));
          for (var s, n, a, r = 0; r < 3; r++)
            o.quartile[r] || (0.25 * r + 0.25 <= i && Quartile(r));
          if (
            (1 == v.reloadlog && log(1, e, t),
            1 == v.reload &&
              o.play &&
              ((n = s = !1),
              1 == v.reloadlive && (o.media.isLive() || (s = !0)),
              0 < e
                ? (e != o.time || s ? (o.reloadTimer = 0) : (n = !0),
                  (o.time = e))
                : 1 == v.reloadstart &&
                  ((a = o.media.loaded()),
                  1 == v.reloadlog && log(2, a, o.timeld),
                  s || (a == o.timeld ? (n = !0) : (o.reloadTimer = 0)),
                  (o.timeld = a)),
              n &&
                (o.reloadTimer++,
                1 == v.reloadlog && log(3, o.reloadTimer),
                o.reloadTimer == v.reloadtimeout * (1e3 / o.timerTime) &&
                  o.actions.Reload())),
            1 == v.vast &&
              (1 != v.nomidroll &&
                1 == v.midrolls &&
                MidrollOverlay("midroll", e, t),
              1 != v.nooverlay &&
                1 == v.overlays &&
                MidrollOverlay("overlay", e, t)),
            1 == v.intros &&
              0 < v.introstart &&
              e >= v.introstart &&
              (exist(o.vast) ||
                (Advertising("intro") && (o.media.Pause(), o.controls.Pause()),
                (v.introstart = 0))),
            SettingsTimers("play"),
            1 == v.pass && -1 < v.passontime && PasswordTime(e, t),
            o.subtitle_on && Sub(e),
            o.storage &&
              1 == v.timestore &&
              o.continue &&
              o.continue.write(e, t),
            exist(v.end) &&
              0 < v.end &&
              e > v.end &&
              ("youtube" == o.file_type
                ? (o.media.Pause(), o.media.Seek(0 < v.start ? v.start : 0))
                : (o.media.Recover(), o.actions.Stop()),
              0 < v.start && (o.seekto = v.start),
              o.actions.Ended()),
            exist(v.remove))
          )
            for (var l = v.remove.split(","), r = 0; r < l.length; r++) {
              var c = l[r].split("-");
              2 == c.length && e > c[0] && e < c[1] && o.media.Seek(c[1]);
            }
        }),
        (this.Reload = function () {
          var e;
          (o.reloadTimer = 0),
            1 == v.reloadjustevent
              ? js("reload")
              : (0 < o.seekto ||
                  o.media.isLive() ||
                  (o.seekto = o.media.time()),
                (e = o.controls.PlaylistVisible()),
                js("reload"),
                o.media.reload(),
                e && 1 == v.playlist.autohide && o.controls.PlaylistShow());
        }),
        (this.Stopped = function () {
          o.controls.Played(0, 0),
            o.controls.Loaded(0, 0),
            o.actions.Duration(0, 0),
            o.controls.StopWaiting();
        }),
        (this.Loading = function () {
          var e = o.media.loaded();
          1 == v.pjsiframed && js("loaded", e);
          var t = o.media.duration();
          o.controls && o.controls.Loaded(e, t);
        }),
        (this.Ended = function () {
          js("fileend"),
            1 == v.loop
              ? ("youtube" == o.file_type && this.Stop(),
                1 == v.vast && o.actions.VastRecover("preroll"),
                0 < v.start && o.actions.Seek(v.start),
                this.Play())
              : (o.media.isLive() || "youtube" == o.file_type
                  ? this.Stop()
                  : 1 == v.finishrewind &&
                    (o.actions.Seek(0 < v.start ? v.start : 0, !0),
                    o.system.ie && o.media.Pause()),
                o.controls.onEnded(),
                1 == v.intros && (v.outros = 1),
                Advertising("postroll") || Advertising("outro") || End());
        }),
        (this.Fullscreen = function () {
          var e,
            t,
            i,
            s = !1,
            n = !1;
          for (e in ((o.fs_error = !1),
          (o.fullscreen_process = !0),
          setTimeout(function () {
            o.fullscreen_process = !1;
          }, 3e3),
          o.motions))
            if (o.motions.hasOwnProperty(e) && exist(o.motions[e]))
              try {
                o.motions[e].TheEnd2();
              } catch (e) {}
          try {
            (o.fullscreen_start = !0),
              ((o.system.ios && 1 == v.nativefullios) ||
                (o.system.android && 1 == v.nativefulldroid)) &&
                o.tagvideo &&
                !o.nativecontrols &&
                (e = o.media.tag()) &&
                e.webkitSupportsFullscreen &&
                (NativeEnterFs(), (s = !0)),
              s ||
                ((i = o.frame).requestFullscreen
                  ? ((o.realfullscreen = !0),
                    void 0 !==
                      (t = i.requestFullscreen({
                        navigationUI: "hide",
                      })) && t.then(function () {}).catch(function (e) {}))
                  : i.requestFullScreen
                  ? (i.requestFullScreen({
                      navigationUI: "hide",
                    }),
                    (o.realfullscreen = !0))
                  : o.frame.mozRequestFullScreen
                  ? (i.mozRequestFullScreen({
                      navigationUI: "hide",
                    }),
                    (o.realfullscreen = !0))
                  : i.webkitRequestFullScreen
                  ? (i.webkitRequestFullScreen({
                      navigationUI: "hide",
                    }),
                    (o.realfullscreen = !0))
                  : i.msRequestFullscreen &&
                    (i.msRequestFullscreen(), (o.realfullscreen = !0)));
          } catch (e) {
            (n = !0), log(e);
          }
          o.realfullscreen ||
            s ||
            (o.system.webkit && o.iniframe
              ? NativeEnterFs()
              : this.FullscreenUI()),
            n || setTimeout(PostFullscreen, 200);
        }),
        (this.NativeExitFs = function () {
          NativeExitFs();
        });
      var lastwheel = {
          x: 0,
          y: 0,
        },
        vast_and,
        vast_or,
        vast_type,
        vasturl;
      function VolumeWheel(e) {
        (o.droplist && o.droplist.OpenScroll()) ||
          ((o.hidden_volume_over = !0),
          clearInterval(volumewheelin),
          (volumewheelin = setInterval(function () {
            (o.hidden_volume_over = !1),
              o.controls.resize(),
              (lastwheel = {
                x: 0,
                y: 0,
              }),
              clearInterval(volumewheelin);
          }, 2e3)),
          o.controls.resize(),
          e.preventDefault(),
          0 != e.deltaX ? lastwheel.x++ : lastwheel.x--,
          0 != e.deltaY ? lastwheel.y++ : lastwheel.y--,
          0 != e.wheelDelta &&
            (lastwheel.x > lastwheel.y
              ? 0 < e.deltaX
                ? o.actions.Volume(
                    parseFloat(v.volume) - v.hotkey.wheelstep / 10,
                    "no"
                  )
                : o.actions.Volume(
                    parseFloat(v.volume) + v.hotkey.wheelstep / 10,
                    "no"
                  )
              : 0 < e.deltaY
              ? o.actions.Volume(
                  parseFloat(v.volume) +
                    (o.system.win
                      ? -v.hotkey.wheelstep / 10
                      : v.hotkey.wheelstep / 10),
                  "no"
                )
              : o.actions.Volume(
                  parseFloat(v.volume) -
                    (o.system.win
                      ? -v.hotkey.wheelstep / 10
                      : v.hotkey.wheelstep / 10),
                  "no"
                ),
            o.controls.volumescroll()));
      }
      function iosExitFullscreen() {
        o.system.ios && (o.media.removeNativeSubtitle(), js("exitfullscreen")),
          (o.nativefull = !1);
      }
      function NewAspect(e, t) {
        if (exist(o.vast) && !t) o.resizeonplay = e;
        else {
          var t = !1,
            i = o.container_w / e;
          if (exist(o.parentIframe) && 1 != v.notframe)
            try {
              css(o.parentIframe, {
                height: i,
              });
            } catch (e) {
              (t = !0), log("iframe crossdomain issue");
            }
          t ||
            ((o.aspect = e),
            (o.container_h = i),
            0 < o.aspect &&
              css(o.container, {
                height: i,
              }),
            js("height", i)),
            o.vast && !o.fullscreen && ((o.screen_h = i), o.vast.Resize());
        }
      }
      function VolumeWheelX(e) {
        (lastwheel = {
          x: 0,
          y: 0,
        }),
          e
            ? window.addEventListener("wheel", VolumeWheel)
            : (clearInterval(volumewheelin),
              window.removeEventListener("wheel", VolumeWheel));
      }
      function Sub(e) {
        o.sbt && o.sbt.show(exist(e) ? e : o.media.time());
      }
      function Advertising(e) {
        if (0 < v["vast_" + e + "timebreak"] && o.storage) {
          var t = localStorage.getItem("pljs" + e + "_" + o.d);
          if (t) {
            var i = new Date();
            if (
              ((o.clicktime = i.getTime()),
              (i.getTime() - t) / 36e5 < v["vast_" + e + "timebreak"])
            )
              return !1;
          }
        }
        if (
          0 < v["vast_" + e + "timelimit"] &&
          0 < o.media.duration() &&
          o.media.duration() < 60 * v["vast_" + e + "timelimit"]
        ) {
          if (!(0 < v["vast_" + e + "timelimited"])) return !1;
          v.vast_preroll_andlimit = v["vast_" + e + "timelimited"];
        }
        if (
          -1 == o.compilations.indexOf("VAST") ||
          1 != v.vast ||
          o.noads ||
          1 != v[e + "s"]
        )
          return !1;
        if (void 0 === VastVideo) return !1;
        if (("intro" == e || "outro" == e) && "undefined" != typeof PluginIntro)
          return (vasturl = []), PluginIntro(e);
        if (exist(o.vast) || exist(o.vastloader))
          return !!isVisible(o.vastcontainer);
        if (exist(v[e])) {
          if (
            -1 < v[e].toString().indexOf(".") ||
            -1 < v[e].toString().indexOf(":") ||
            -1 < v[e].toString().indexOf("[yandex]")
          ) {
            js("vast_init", e),
              isVastBgLoad(e) ||
                "overlay" == e ||
                (setTimeout(function () {
                  o.play || o.actions.Waiting();
                }, 10),
                Curtain()),
              (vast_or = vast_and = 0),
              (vasturl = v[(vast_type = e)].split(" and ")),
              (o.vast_loaders = []),
              (o.adsinchain = vasturl.length),
              (o.adscounter = 1),
              (o.adsfirst = !0);
            for (var s = 0; s < vasturl.length; s++)
              vasturl[s] = vasturl[s].split(" or ");
            (v[e.concat("_", "recover")] = v[e]),
              (v[e] = null),
              "overlay" != (o.vasttype = e) && (o.vast = new VastVideo()),
              (o.vastloader = new VastLoader());
            for (s = 0; s < vasturl.length; s++)
              for (var n, a = 0; a < vasturl[s].length; a++)
                0 < (l = trim(vasturl[s][a])).indexOf("[50%]") &&
                  ((n = random(1, 2)),
                  (vasturl[s][a] = vasturl[s][a].replace("[50%]", "")),
                  2 == n && (vasturl[s][a] = ""));
            if (1 == v.vast_preload)
              for (s = 0; s < vasturl.length; s++) {
                var r = 0 == s ? 1 : 0;
                if (vasturl[s].length > r)
                  for (a = r; a < vasturl[s].length; a++) {
                    var l = trim(vasturl[s][a]);
                    o.system.ie9
                      ? VastAddPreload(l)
                      : setTimeout(VastAddPreload, 100 * s, l);
                  }
              }
            return (
              "" == vasturl[0][0]
                ? VastNext()
                : o.vastloader.Load(trim(vasturl[0][0]), e),
              !0
            );
          }
          return !1;
        }
        return !1;
      }
      function MidrollOverlay(e, t, i) {
        if (exist(o[e + "o"]) && 1 == v[e + "s"])
          for (var s in o[e + "o"])
            if (
              o[e + "o"].hasOwnProperty(s) &&
              !exist(o[e + "o"][s].worked) &&
              exist(o[e + "o"][s].time) &&
              exist(o[e + "o"][s].vast)
            ) {
              var n = o[e + "o"][s].time.toString();
              if (
                n &&
                ((n =
                  0 < n.indexOf("%")
                    ? 0 < i
                      ? (parseInt(n.substr(0, n.indexOf("%"))) * i) / 100
                      : -1
                    : parseInt(n)),
                n <= t &&
                  (0 < v["vast_" + e + "rest"] &&
                    -1 < n &&
                    t - n >= v["vast_" + e + "rest"] &&
                    (n = -1),
                  -1 < n &&
                    (o[e + "o"][s].vast,
                    (v[e] = o[e + "o"][s].vast),
                    (o[e + "crtm"] = o[e + "o"][s].time),
                    (o[e + "skipimprsd"] = o[e + "o"][s].skipimpessed),
                    Advertising(e))))
              ) {
                o[e + "o"][s].worked = !0;
                break;
              }
            }
      }
      function isVastBgLoad(e) {
        for (var t = !1, i = ["midroll", "pauseroll"], s = 0; s < i.length; s++)
          (o.vasttype != i[s] && e != i[s]) ||
            (1 == v["vast_" + i[s] + "bgload"] && (t = !0));
        return t;
      }
      function VastGo(e) {
        o.vast.Go(e);
      }
      function VastLongTimeout() {
        exist(o.vast) &&
          o.vast.active() &&
          0 == o.vast_impressions &&
          (o.vast.RemoveForNextAd(),
          log("VAST timeout " + v.vast_longtimeout),
          (vasturl = []),
          VastRemoveAndPlay());
      }
      function VastNext() {
        var e, t;
        0 < vasturl.length &&
        vasturl[vast_and] &&
        vast_or < vasturl[vast_and].length - 1
          ? (o.vast && o.vast.RemoveForNextAd(),
            vast_or++,
            "skip" ==
              (t = VastPreloaded((e = trim(vasturl[vast_and][vast_or])))) &&
              ((o.vastloader = new VastLoader()),
              o.vastloader.Load(e, o.vasttype)),
            "error" == t && VastNext())
          : VastRemoveAndPlay();
      }
      function VastPreloaded(e) {
        var t = "skip";
        if (1 == v.vast_preload && o.vast_loaders)
          for (var i, s = !1, n = 0, a = 0; a < o.vast_loaders.length; a++)
            if (0 == o.vast_loaders[a].done)
              if (
                (o.vast_loaders[a].ldr.preloaded(e) &&
                  ((o.vast_loaders[a].done = 1),
                  "ready" == (i = o.vast_loaders[a].ldr.Status())
                    ? ((o.vastloader = o.vast_loaders[a].ldr),
                      log("VAST preloaded"),
                      o.vast_loaders[a].ldr.Ready(),
                      (t = i))
                    : ("" == i &&
                        ((t = "ok"),
                        log("VAST preloading"),
                        (o.vastloader = o.vast_loaders[a].ldr),
                        o.vast_loaders[a].ldr.disablePreload()),
                      "error" == i && (t = "error")),
                  (s = !0)),
                s && 0 == o.vast_loaders[a].load)
              ) {
                if (!(++n < 6)) break;
                VastPreloadLoad(o.vast_loaders[a]);
              }
        return t;
      }
      function VastAddPreload(e) {
        if (1 == v.vast_preload && o.vast_loaders) {
          for (var t = 0, t = 0; t < vasturl.length; t++)
            if (vasturl[t] == e && t <= vast_and) return;
          if (!(1 == vasturl.length && 1 < vasturl[0].length)) {
            var i = 0;
            for (t = 0; t < o.vast_loaders.length; t++)
              0 == o.vast_loaders[t].done && i++;
            o.vast_loaders.push({
              load: 0,
              done: 0,
              x: trim(e),
              t: o.vasttype,
              ldr: new VastLoader(!0),
            }),
              i < 5 &&
                VastPreloadLoad(o.vast_loaders[o.vast_loaders.length - 1]);
          }
        }
      }
      function VastPreloadLoad(e) {
        e && ((e.load = 1), e.ldr.Load(e.x, e.t));
      }
      function VastRemoveAndPlay(e) {
        var t,
          i = !1,
          s = !1;
        "preroll" == o.vasttype &&
          (0 < v.vast_preroll_and2limit &&
            0 < o.vast_starts &&
            ((s = !0),
            o.vast_impressions >= v.vast_preroll_and2limit && (i = !0)),
          0 < v.vast_preroll_andlimit &&
            !s &&
            ((1 == v.vast_preroll_2andlimit && 0 == o.vast_starts) ||
              (o.vast_impressions >= v.vast_preroll_andlimit && (i = !0)))),
          0 < vasturl.length &&
            vast_and == vasturl.length - 1 &&
            0 == vasturl[0][0].indexOf("js:") &&
            ((vast_and = -1), (vasturl = [[vasturl[0][0]]])),
          2 == o.vast_stop && (i = !0),
          vasturl.length > vast_and + 1 && !i
            ? (o.vast.RemoveForNextAd(),
              vast_and++,
              o.adscounter++,
              (vast_or = 0),
              "skip" == (i = VastPreloaded((s = trim(vasturl[vast_and][0])))) &&
                ((o.vastloader = new VastLoader()),
                o.vastloader.Load(s, vast_type)),
              "error" == i && VastRemoveAndPlay(e))
            : (RemoveCurtain(),
              o.controls.StopWaiting(),
              exist(o.vast) && (o.vast.Remove(), (o.vast = null)),
              (o.vastloader = null),
              (vasturl = []),
              (vast_and = vast_or = 0),
              1 != o.shwvstfnsh && js("vast_finish", o.vasttype),
              (o.shwvstfnsh = 0),
              1 == v.vast_ima && o.ima && (o.ima.Destroy(), (o.ima = void 0)),
              (vast_type = ""),
              (o.vast_impressions = 0),
              clearTimeout(o.vast_longtimeout),
              o.vast_longtomsg && o.vast_longtomsg.remove(),
              o.vast_starts++,
              ("preroll" == o.vasttype ||
                ("pauseroll" == o.vasttype && 1 == v.pauserollonplay) ||
                "midroll" == o.vasttype) &&
                "?" != v.file &&
                (o.media.AfterVast(),
                "youtube" == o.file_type &&
                  !o.vastclick &&
                  o.system.ios &&
                  ((t = !0), "preroll" == o.vasttype && o.media.reYT()),
                t ||
                  "dontplay" == e ||
                  1 == v.vast_dontplay ||
                  o.actions.Play(1)),
              0 < o.resizeonplay &&
                (NewAspect(o.resizeonplay), (o.resizeonplay = 0)),
              "postroll" == o.vasttype && End(),
              (o.vastclick = !1),
              (o.vasttype = null));
      }
      function Curtain() {
        o.curtain ||
          ((o.curtain = createElement("div")),
          o.frame.appendChild(o.curtain),
          css(o.curtain, {
            width: "100%",
            height: "100%",
            position: "absolute",
            top: 0,
            left: 0,
            background: "#000000",
            opacity: 0.1,
          }),
          (o.curtain.style.zIndex = 1001));
      }
      function RemoveCurtain() {
        o.curtain && (o.frame.removeChild(o.curtain), (o.curtain = null));
      }
      function ShowPoster() {
        exist(o.poster) &&
          (v.poster != o.currentposter &&
            Poster(v.poster, o.poster, v.poster_scale),
          show(o.poster),
          css(o.poster, {
            opacity: v.poster_a,
          }),
          o.controls.refresh());
      }
      function HidePoster2() {
        clearTimeout(o.pstr_to),
          (1 == v.posteronpause && !o.play) ||
            (css(o.poster, {
              opacity: 0,
            }),
            setTimeout(HidePoster3, 500));
      }
      function HidePoster3() {
        (!o.play && 1 == v.posterhide) || hide(o.poster);
      }
      function StopOtherPlayer(e) {
        if (1 == v.stopotherplayers)
          for (var t = 0; t < pljssglobal.length; t++)
            pljssglobal[t].api("id") != v.id && pljssglobal[t].api("pause");
        pljssglobalid = v.id;
      }
      function IndexPlaylist(e) {
        var t = Object.keys(e).length;
        return 0 < t && (e = IndexPlaylistProcessor(e, t, "", -1)), e;
      }
      function IndexPlaylistProcessor(e, t, i, s) {
        var n,
          a = [];
        exist(e.playlist) && (t = (e = e.playlist).length);
        for (var r = 0, l = 0; l < t; l++) {
          if (
            ((n = !1),
            exist(e[l].id) && (e[l].pjs_id = e[l].id),
            (e[l].id =
              "x" + i + "-" + l + (exist(e[l].id) ? "-" + e[l].id : "")),
            -1 != s ||
              0 != l ||
              exist(e[l].folder) ||
              (o.pl_first_id = e[l].id),
            exist(o.pl_first_id) ||
              0 != s ||
              exist(e[l].folder) ||
              (o.pl_first_id = e[l].id),
            (e[l].pjs_parent = i),
            (e[l].pjs_parent_i = s),
            (e[l].pjs_i = r),
            exist(e[l].comment))
          ) {
            e[l].title = e[l].comment;
            var c = e[l].file ? e[l].file.indexOf("[") : 0,
              d = e[l].file ? e[l].file.indexOf("]") : 0;
            if (0 < c && 0 < d) {
              for (
                var u = e[l].file.substr(c + 1, d - c - 1),
                  p = u.split(","),
                  v = "",
                  f = 0;
                f < p.length;
                f++
              )
                v +=
                  "[" +
                  p[f] +
                  "]" +
                  e[l].file.replace("[" + u + "]", p[f]) +
                  (f < p.length - 1 ? "," : "");
              e[l].file = v;
            }
          }
          exist(e[l].playlist) && (e[l].folder = e[l].playlist),
            exist(e[l].folder) ||
              (exist(e[l].file) && ("" != e[l].file || exist(e[l].redirect))) ||
              (n = !0),
            n || ((o.playlist_dic[e[l].id] = e[l]), (r += 1)),
            !exist(e[l].folder) ||
              (0 < (c = Object.keys(e[l].folder).length) &&
                (e[l].folder = IndexPlaylistProcessor(
                  e[l].folder,
                  c,
                  e[l].id,
                  l
                ))),
            n || a.push(e[l]);
        }
        return a;
      }
      function FindFileInPlaylist() {
        var e = [];
        if (exist(v.plstart)) {
          if (0 != v.plstart.indexOf("x-"))
            for (var t in o.playlist_dic)
              o.playlist_dic.hasOwnProperty(t) &&
                o.playlist_dic[t].pjs_id == v.plstart &&
                (v.plstart = t);
          exist(o.playlist_dic[v.plstart])
            ? (1 == v.playlist.norootplstart &&
                (v.playlist.openplaylistroot = 0),
              (e = o.playlist_dic[v.plstart]))
            : ((e = o.playlist[0]),
              v.plstart == o.plcontinue && (o.seekto = void 0));
        } else e = o.playlist[0];
        if (e) {
          for (var i = 0; i < 10 && exist(e.folder); i++) e = e.folder[0];
          (v.plstart = e.id), v.plstart == o.plcontinue && (e.start = void 0);
        }
        return e;
      }
      function End() {
        gaTracker("end", "End", 1),
          o.actions.VastRecover(),
          o.storage &&
            1 == v.timestore &&
            o.continue.write(0, o.media.duration()),
          o.controls.PlaylistExist()
            ? 1 == v.playlist.autoplaylist && o.controls.PlaylistNextExist()
              ? (o.controls.PlaylistNext(),
                o.play && o.system.ios && o.file_type)
              : End2()
            : (ShowPoster(), js("finish"));
      }
      function End2() {
        1 != v.playlist.playlistrewind || o.controls.PlaylistNextExist()
          ? (1 == v.playlist.openplaylistafter &&
              (o.controls.PlaylistVisible() || o.controls.Playlist()),
            ShowPoster(),
            js("finish"))
          : o.controls.PlaylistRewind();
      }
      function fjs(x) {
        if (0 == x.indexOf("js:"))
          try {
            x = eval(x.substr(3));
          } catch (e) {
            console.log(e.message);
          }
        return x || "";
      }
      function Heartbeat() {
        var e = Math.floor(Date.now() / 1e3),
          t = (exist(v.livets) ? v.livets : 0) + parseInt(o.media.time()),
          i = 0;
        o.system.desktop && (i = 1),
          o.system.ios && (i = 2),
          o.system.android && (i = 3),
          o.system.winmob && (i = 4),
          o.system.tv && (i = 5);
        e = v.heartbeat.replace("[vts]", e);
        e = (e = e.replace("[fts]", t)).replace("[dvtp]", i);
        i = document.createElement("img");
        i.setAttribute("src", e),
          i.setAttribute("height", "1px"),
          i.setAttribute("width", "1px"),
          o.frame.appendChild(i);
      }
      (this.FullscreenUI = function () {
        if (o.fullscreen_start) {
          if (
            ((o.fullscreen = !0), o.controls.Fullscreen(), !o.realfullscreen)
          ) {
            if (exist(o.parentIframe))
              try {
                css(o.parentIframe, {
                  width: "100%",
                  height: "100%",
                  position: "fixed",
                  left: 0,
                  top: 0,
                  zIndex: "100000",
                });
              } catch (e) {}
            css(o.frame, {
              width: "100%",
              height: "100%",
              position: "fixed",
              left: 0,
              top: 0,
              zIndex: "100000",
            }),
              (o.screen_w = o.frame.offsetWidth),
              (o.screen_h = o.frame.offsetHeight);
            try {
              (document.body.style.overflow = "hidden"),
                exist(o.playlist) ||
                  (document.ontouchmove = function (e) {
                    e.preventDefault();
                  });
            } catch (e) {}
          }
          1 == v.fullblack &&
            css(o.frame, {
              backgroundColor: "#000000",
            }),
            o.droplist && o.droplist.Close(),
            Sub(),
            (o.fullscreen_start = !1);
        }
      }),
        (this.Normalscreen = function () {
          (_fullscreen_end = !0),
            document.cancelFullScreen
              ? document.cancelFullScreen()
              : document.exitFullscreen
              ? document.exitFullscreen()
              : document.cancelFullscreen
              ? document.cancelFullscreen()
              : document.mozCancelFullScreen
              ? document.mozCancelFullScreen()
              : document.webkitCancelFullScreen
              ? document.webkitCancelFullScreen()
              : document.msExitFullscreen && document.msExitFullscreen(),
            o.realfullscreen || this.NormalscreenUI(!1);
        }),
        (this.changeAspect = function (e, t) {
          NewAspect(e, t);
        }),
        (this.NormalscreenUI = function (e) {
          if (_fullscreen_end || e) {
            if (((o.fullscreen = !1), (o.nativefull = !1), !o.realfullscreen)) {
              if (exist(o.parentIframe))
                try {
                  css(o.parentIframe, {
                    position: "static",
                    left: 0,
                    top: 0,
                    zIndex: "unset",
                  }),
                    css(o.parentIframe, o.parentIframe_style),
                    css(o.parentIframe, {
                      width: o.normal_w,
                      height: o.normal_h,
                    });
                } catch (e) {}
              css(o.frame, {
                width: o.normal_w,
                height: o.normal_h,
                position: "absolute",
                left: 0,
                top: 0,
                zIndex: "unset",
              });
              try {
                (document.body.style.overflow = "auto"),
                  (document.ontouchmove = function (e) {
                    return !0;
                  });
              } catch (e) {}
            }
            o.controls.Normalscreen(),
              1 == v.fullblack &&
                (css(o.frame, {
                  backgroundColor: v.screencolor,
                }),
                1 == v.transparent
                  ? (o.frame.style.backgroundColor = "transparent")
                  : css(o.frame, {
                      backgroundColor: v.screencolor,
                    })),
              1 == v.hotkey.volumewheelfull &&
                (VolumeWheelX(!1), (o.volumewheel = !1)),
              o.droplist && o.droplist.Close(),
              Sub(),
              o.subdrag && (o.subdrag = !1),
              o.controls.PlaylistHere(),
              (_fullscreen_end = !1),
              js("exitfullscreen"),
              (o.realfullscreen = !1),
              (o.fullscreen_process = !1);
          }
        }),
        (this.volumewheel = function (e) {
          VolumeWheelX(e);
        }),
        (this.Stop = function () {
          (v.preload = 0),
            o.controls.Pause(),
            o.actions.Stopped(),
            o.media.Volume(v.volume),
            o.controls.SettingsVisible() && o.controls.Settings(),
            o.muted && this.Mute(),
            exist(o.heartbeatInterval) &&
              (clearInterval(o.heartbeatInterval),
              (o.heartbeatInterval = null)),
            Sub(0),
            log("stop"),
            js("stop");
        }),
        (this.StopMedia = function () {
          (v.preload = 0),
            (v.autoplay = 0),
            o.media.Recover(),
            o.actions.Stop();
        }),
        (this.SetQuality = function (e) {
          exist(o.current_quality) &&
            o.current_quality != e &&
            ((o.current_quality = e),
            1 == v.qualitystore &&
              ((o.default_quality = o.files_quality[e]),
              o.storage &&
                localStorage.setItem("pljsquality", o.default_quality)),
            o.media.SetQuality(e),
            js("quality", o.files_quality[e]),
            o.controls.QualityChanged(e));
        }),
        (this.AirplayChanged = function () {
          o.controls && o.controls.AirplayChanged();
        }),
        (this.SetAudioTrack = function (e) {
          exist(o.current_audiotrack) &&
            o.current_audiotrack != e &&
            ((o.current_audiotrack = e),
            1 == v.trackstore &&
              ((o.default_audio = v.default_audio = o.files_audiotrack[e]),
              o.storage && localStorage.setItem("pljstrack", o.default_audio)),
            o.media.SetAudioTrack(e),
            js("audiotrack", e),
            o.controls.SettingChanged("audiotrack"));
        }),
        (this.SetSpeed = function (e, t) {
          var i = e;
          if (
            (0 < String(i).indexOf(".") && (t = 1),
            t ||
              ((i = e == o.speed1 ? 1 : o.files_speed[e]),
              (o.current_speed = e)),
            o.line_speed)
          ) {
            if (e == o.custom_speed) return;
            o.custom_speed = i;
            for (var s = 0; s < o.files_speed.length; s++)
              if (i <= o.files_speed[s]) {
                o.current_speed = s;
                break;
              }
          }
          o.storage &&
            1 == v.speedstore &&
            localStorage.setItem("pljsspeed", i),
            js("speed", i),
            o.media.SetSpeed(i),
            o.controls.SettingChanged("speed");
        }),
        (this.RenewSubtitle = function () {
          o.sbt && (Sub(), o.sbt.style());
        }),
        (this.Subtitle = function (e) {
          "function" == typeof PluginSub &&
            (o.sbt || (o.sbt = new PluginSub()), o.sbt.start(e));
        }),
        (this.advertising = function (e) {
          Advertising(e);
        }),
        (this.isVastBgLoad = function (e) {
          return isVastBgLoad(e);
        }),
        (this.VastImpression = function () {
          isVastBgLoad() &&
            (o.play && (o.media.Pause(), o.controls.Pause()),
            css(o.vastcontainer, {
              opacity: 1,
              visibility: "visible",
              top: 0,
            }),
            (o.vastfrombg = 1)),
            "midroll" == o.vasttype && o.midrollimprsd.push(o.current_vast_url),
            o.nativefull && !o.realfullscreen && NativeExitFs();
        }),
        (this.VastReady = function (e) {
          var t;
          (o.vastloader = null),
            (o.vastfrombg = 0),
            log("VAST ready"),
            js("vast_ready", o.vasttype),
            "overlay" == e.type
              ? ((t = new VastOverlay(e)), o.overlays.push(t))
              : exist(o.vast)
              ? (0 == v.preload &&
                  1 == v.vastbgpreload &&
                  0 == o.media.time() &&
                  0 == o.media.duration() &&
                  ((v.preload = 1), o.media.Preload()),
                (!o.vast.tagLive() || e.isVpaid) &&
                  0 < o.vastgo &&
                  (log("VAST renew"),
                  o.vast.Remove(),
                  (o.vast = null),
                  (o.vast = new VastVideo())),
                isVastBgLoad()
                  ? 0 == o.vast_impressions &&
                    css(o.vastcontainer, {
                      opacity: 0,
                      visibility: "hidden",
                      top: 2e3,
                    })
                  : o.play && (o.media.Pause(), o.controls.Pause()),
                o.vastgo++,
                o.adsfirst &&
                  0 < v.vast_longtimeout &&
                  (clearTimeout(o.vast_longtimeout),
                  (o.vast_longtimeout = setTimeout(
                    VastLongTimeout,
                    1e3 * v.vast_longtimeout * 60
                  )),
                  exist(v.vast_longtimemsg) &&
                    "" != v.vast_longtimemsg &&
                    (o.vast_longtomsg && o.vast_longtomsg.remove(),
                    (o.vast_longtomsg = new PluginVastTimeMsg()))),
                (o.adsfirst = !1),
                0 < v.vast_prestarttimeout
                  ? (log("VAST startdelay"),
                    js("vast_startdelay"),
                    setTimeout(VastGo, 1e3 * v.vast_prestarttimeout, e))
                  : VastGo(e))
              : log("VAST alarm");
        }),
        (this.VastError = function () {
          js("vast_error", o.vasttype), log("VAST error"), VastNext();
        }),
        (this.VastNext = function () {
          var e = !1,
            t = !1;
          "preroll" == o.vasttype &&
            (0 < v.vast_preroll_and2limit &&
              0 < o.vast_starts &&
              ((t = !0),
              o.vast_impressions >= v.vast_preroll_and2limit && (e = !0)),
            0 < v.vast_preroll_andlimit &&
              !t &&
              ((1 == v.vast_preroll_2andlimit && 0 == o.vast_starts) ||
                (o.vast_impressions >= v.vast_preroll_andlimit && (e = !0)))),
            (e ? VastRemoveAndPlay : VastNext)();
        }),
        (this.VastRemoveUrl = function (e) {
          if (v[o.vasttype + "_recover"])
            for (var t = 0; t < 3; t++)
              v[o.vasttype + "_recover"] = v[o.vasttype + "_recover"].replace(
                e + (0 == t ? " and " : 1 == t ? " or " : ""),
                ""
              );
        }),
        (this.VastInsertAnd = function (e, t) {
          if ("" != e) {
            var i,
              s = vast_and,
              n = !1;
            if (t)
              for (var a = 0; a < vasturl.length; a++)
                vasturl[a] == t && (s = a);
            if (
              (1 == vasturl.length &&
                1 < vasturl[0].length &&
                vast_or < vasturl[0].length - 1 &&
                vasturl[vast_or] &&
                ((i = vasturl[vast_or].slice(1, 99)),
                vasturl[0].splice(vast_or + 1, 99),
                (n = !0)),
              "object" == typeof e)
            )
              for (var r = 0; r < e.length; r++)
                vasturl.splice(s + r + 1, 0, [e[r]]),
                  o.system.ie9
                    ? VastAddPreload(e[r])
                    : setTimeout(VastAddPreload, 100 * r, e[r]);
            else "string" == typeof e && (vasturl.push([e]), VastAddPreload(e));
            n &&
              (vasturl[vasturl.length - 1] =
                vasturl[vasturl.length - 1].concat(i));
          }
        }),
        (this.VastInsertOr = function (e, t) {
          if ("" != e) {
            var o = vast_and;
            if (t)
              for (var i = 0; i < vasturl.length; i++)
                vasturl[i] == t && (o = i);
            if (vasturl[o])
              if ("object" == typeof e)
                for (var s = 0; s < e.length; s++) vasturl[o].push(e[s]);
              else "string" == typeof e && vasturl[o].push(e);
          }
        }),
        (this.VastRemoveAndPlay = function (e) {
          VastRemoveAndPlay(e);
        }),
        (this.EmptyVastUrl = function () {
          vasturl = [[""]];
        }),
        (this.VastRecover = function (e) {
          for (
            var t,
              o = ["preroll", "pauseroll", "postroll", "intro", "outro"],
              i = 0;
            i < o.length;
            i++
          )
            (t = !1),
              e && e != o[i] && (t = !0),
              !t &&
                exist(v[o[i].concat("_", "recover")]) &&
                (v["vast_" + o[i].concat("_", "limit")]--,
                0 < v["vast_" + o[i].concat("_", "limit")] &&
                  ((v[o[i]] = v[o[i].concat("_", "recover")]),
                  (v[o[i].concat("_", "recover")] = null)));
        }),
        (this.Password = function () {
          Curtain(),
            exist(o.pass) && (o.pass.Remove(), (o.pass = null)),
            (o.pass = new Pass());
        }),
        (this.RemovePassword = function () {
          RemoveCurtain(), o.pass.Remove(), (o.pass = null);
        }),
        (this.Curtain = function () {
          Curtain();
        }),
        (this.RemoveCurtain = function () {
          RemoveCurtain();
        }),
        (this.HidePoster = function () {
          exist(o.poster) &&
            isVisible(o.poster) &&
            ((0 == o.media.time() && 1 == v.posterhidestart) ||
              (0 < v.posterhidetime
                ? (clearTimeout(o.pstr_to),
                  (o.pstr_to = setTimeout(HidePoster2, 1e3 * v.posterhidetime)))
                : HidePoster2()));
        }),
        (this.ShowPoster = function () {
          ShowPoster();
        }),
        (this.ShuffleEnd = function () {
          End2();
        });
    },
    Media = function (l) {
      var r,
        c,
        d,
        e,
        u,
        t,
        i,
        s,
        n = "",
        a = 0,
        p = !1,
        f = !1;
      o.mediascale = {
        x: 1,
        y: 1,
        x0: 1,
        y0: 1,
      };
      var h = 0,
        m = 0;
      if ("string" == typeof l) {
        if (0 == (l = trim(l)).indexOf("[{"))
          try {
            (l = l.replace(/pjs'qt/gi, '"')),
              (l = JSON.parse(l)),
              i && (l = o.actions.File(l));
          } catch (e) {
            console.log(e), (l = "incorrect JSON");
          }
        0 == l.indexOf("#" + v.enc2) && (l = o[o.fd[0]](l)),
          l &&
            0 == l.indexOf("#" + v.enc3) &&
            0 < l.indexOf(v.file3_separator) &&
            (l = o[o.fd[1]](l)),
          l &&
            0 == l.indexOf("#0") &&
            (l =
              0 < l.indexOf(o.pltxt)
                ? fd0(l.replace(o.pltxt, "")) + o.pltxt
                : fd0(l)),
          1 == v.fplace && (l = fplace(l)),
          "string" == typeof l &&
            (l.indexOf(".m3u") == l.length - 4 || 0 < l.indexOf(".txt")) &&
            ((s = l.split(" or ")), g());
      }
      function g() {
        0 < (l = s[h]).indexOf(o.pltxt) &&
          ((l = l.replace(o.pltxt, "")), (v.file = l));
        var e = XHR(l);
        (e.onload = function () {
          4 == this.readyState && 200 == this.status
            ? (function (e) {
                if (e.responseText) {
                  var t = e.responseText;
                  if (
                    (0 == t.indexOf("#" + v.enc2) && (t = o[o.fd[0]](t)),
                    0 == t.indexOf("#" + v.enc3) &&
                      0 < t.indexOf(v.file3_separator) &&
                      (t = o[o.fd[1]](t)),
                    l.indexOf(".m3u") == l.length - 4)
                  ) {
                    var i = t.split(/(\r\n\t|\n|\r\t)/gm);
                    l = [];
                    for (var s, n = 1, a = "", r = 0; r < i.length; r++)
                      -1 < i[r].indexOf("#EXTINF") &&
                        -1 < i[r].indexOf(" - ") &&
                        ((s = i[r].split(" - ")), (a = s[s.length - 1])),
                        -1 < i[r].indexOf("http") &&
                          (l.push({
                            title: "" + ("" != a ? a : n),
                            file: i[r],
                          }),
                          n++,
                          (a = ""));
                  } else {
                    t = t.replace(/(\r\n\t|\n|\r\t)/gm, "");
                    try {
                      l = JSON.parse(t);
                    } catch (e) {
                      y(2);
                    }
                  }
                  exist(l.items) && (l = YoutubePlaylist(l)),
                    o.controls &&
                      1 == v.playlist.openplaylistbefore &&
                      (o.controls.PlaylistVisible() ||
                        o.controls.PlaylistShow()),
                    b(),
                    MainResize(),
                    setTimeout(function () {
                      js("playlist");
                    }, 1);
                }
              })(this)
            : y(1);
        }),
          (e.onerror = function (e) {
            y(1);
          }),
          e.send(),
          (i = !0);
      }
      function y(e) {
        h + 1 < s.length && (h++, g(), (e = 0)),
          1 == e && _("playlist not found or access denied"),
          2 == e && _("playlists JSON");
      }
      function b() {
        (l = o.actions.File(l)) && "?" != l && A(l);
      }
      function _(e) {
        log("Error: " + e);
        var t = !0,
          i = !0;
        js("loaderror", e),
          r &&
            0 < r.length &&
            ((t = ++d > r.length - 1) &&
              1 == v.tryotherquality &&
              1 < o.files.length &&
              0 < o.current_quality &&
              (-1 ==
                o.files_quality[o.current_quality].indexOf(
                  Lang("loading_error")
                ) &&
                (o.files_quality[o.current_quality] =
                  o.files_quality[o.current_quality] +
                  " (" +
                  Lang("loading_error") +
                  ")"),
              (i = !1),
              o.actions.SetQuality(o.current_quality - 1)),
            t
              ? 1 == v.reload && i && ((t = !1), w())
              : (0 < o.seekto || !o.start || u.isLive() || (o.seekto = S()),
                (o.file_type == I(r[d]) && "native" == o.file_type) ||
                  (o.play && o.actions.Stop()),
                log("Alternative source", o.seekto),
                A("or"),
                o.start && !o.vast && u.Play())),
          t && i && x(e, !0);
      }
      function x(e, t) {
        gaTracker("error", "Error", !0),
          v.alerts &&
            !o.media_error &&
            (1 == v.alert404 && "not found" == e
              ? o.alert.txt(v.alert404text)
              : o.alert.txt(e),
            1 == v.alert404v &&
              exist(v.alert404video) &&
              (o.err404v = new PluginErrorVideo())),
          t && (o.media_error = !0),
          o.play && (o.actions.StopWaiting(), o.controls.Pause()),
          exist(o.poster) && o.actions.ShowPoster(),
          js("error", e);
      }
      function w() {
        log("Error Reload Timeout " + ++m),
          exist(o.reloadErrorTimeout) && clearTimeout(o.reloadErrorTimeout),
          (o.reloadErrorTimeout = setTimeout(k, 1e3 * v.reloadtimeout));
      }
      function k() {
        var e = existv(v.reloadtimes, 10);
        o.play &&
          (m < e ? o.actions.Reload() : x("Reload Error " + u.errorMessage()));
      }
      function S() {
        return u.time();
      }
      function T() {
        return u.duration();
      }
      function L() {
        var e = !1;
        return (
          u &&
            ("youtube" == o.file_type && (e = u.auto()),
            "hls" == o.file_type &&
              1 == v.hlsquality &&
              1 < C() &&
              1 == v.hlsautoquality &&
              (e = u.auto()),
            "dash" == o.file_type &&
              1 == v.dashquality &&
              1 < O() &&
              (e = u.auto())),
          e
        );
      }
      function C() {
        return "hls" == o.file_type ? u.HlsLevelsLength() : 0;
      }
      function O() {
        return "dash" == o.file_type ? u.DashLevelsLength() : 0;
      }
      function P() {
        ("playing" != (n = u ? u.status() : "") && !o.casting) ||
          o.actions.Playing(),
          "" != n && o.actions.Loading();
      }
      function E() {
        o.poster && o.frame.removeChild(o.poster),
          (o.poster = createElement("div")),
          css(o.poster, {
            "pointer-events": "none",
            opacity: v.poster_a,
            transition: "opacity 0.5s",
          }),
          1 == v.poster_float
            ? PluginFloatPoster()
            : css(o.poster, {
                position: "absolute",
                left: 0,
                top: 0,
                width: "100%",
                height: "100%",
              }),
          o.frame.appendChild(o.poster);
      }
      function A(t, e, i) {
        if (
          ("" == v.file2_separator && (v.file2_separator = ";"),
          -1 < t.indexOf("{") &&
            -1 < t.indexOf("}") &&
            -1 < t.indexOf(v.file2_separator))
        ) {
          var s = t.split(v.file2_separator);
          o.audiotracks = [];
          for (var n = 0; n < s.length; n++)
            (o.files_audiotrack[n] = s[n].substr(
              s[n].indexOf("{") + 1,
              s[n].indexOf("}") - 1
            )),
              (o.audiotracks[n] = s[n].substr(s[n].indexOf("}") + 1)),
              exist(v.default_audio) &&
                v.default_audio == o.files_audiotrack[n] &&
                (o.current_audiotrack = n);
          t = o.audiotracks[o.current_audiotrack];
        }
        exist(r) || (r = []),
          t &&
            "or" != t &&
            "x" != t &&
            (function () {
              r = t.split(" or ");
              for (var e = 0; e < r.length; e++)
                -1 < r[e].indexOf(" and ") &&
                  ((c = r[e].split(" and ")),
                  (r[e] = c[random(0, c.length - 1)]));
              d = 0;
            })();
        var a = o.file_type;
        0 < r.length &&
          ((o.file_type = I(r[d])),
          (i = !!i),
          (l = (l = r[d]) && l.replace(/\(random\)/g, Math.random())),
          !i &&
          "x" != t &&
          u &&
          o.file_type == a &&
          ("native" == a ||
            "vimeo" == a ||
            ("youtube" == a && o.start && !f) ||
            "hls" == a)
            ? (u.src(l), log("src"))
            : (log("New"),
              j(),
              (function (e) {
                (o.file_type = I(e)),
                  o.tagvideo && (u = new MediaVideo(e, o.mediacontainer, !1)),
                  "youtube" == o.file_type &&
                    (u = new MediaYoutube(e, o.mediacontainer)),
                  1 == v.vimeo &&
                    "vimeo" == o.file_type &&
                    (u = new MediaVimeo(e, o.mediacontainer)),
                  "pjs" == o.file_type && (u = new MediaPjs(e)),
                  o.controls && o.controls.UpdateSettings();
                var t = 0;
                exist(v.duration) &&
                  (o.continue &&
                    1 == v.timestore &&
                    !o.start &&
                    (t = o.continue.flag().t),
                  setTimeout(function () {
                    o.actions.Duration(t, v.duration);
                  }, 100));
              })(l)),
          o.speed1 &&
            (o.line_speed
              ? u.setSpeed(o.custom_speed)
              : o.current_speed != o.speed1 &&
                u.setSpeed(o.files_speed[o.current_speed]))),
          e ||
            (clearInterval(o.timerInterval),
            (o.timerInterval = setInterval(P, o.timerTime)),
            exist(v.subtitle) &&
              "" != v.subtitle &&
              o.actions.Subtitle(v.subtitle),
            1 == v.hidevideo &&
              ((1 == v.nativecontrolsmobile && o.system.mobile) ||
                ("youtube" == o.file_type
                  ? css(o.mediacontainer, {
                      top: -3e3,
                      left: -3e3,
                    })
                  : hide2(o.mediacontainer),
                (v.toolbar.hide = 0))));
      }
      function I(e) {
        var t,
          i,
          s,
          n,
          a = "native";
        return (
          e &&
            (0 < e.indexOf(".m3u8")
              ? (a = "hls")
              : 0 < e.indexOf(".mpd")
              ? (a = "dash")
              : 0 == e.indexOf("ws://")
              ? (a = o.ws)
              : -1 < e.indexOf("youtube.com/") || -1 < e.indexOf("youtu.be/")
              ? "function" == typeof MediaYoutube
                ? ((a = "youtube"),
                  1 == v.youtubeposter &&
                    ((t = "https://img.youtube.com/vi/" + YoutubeID(e) + "/"),
                    (i = t + "maxresdefault.jpg"),
                    (s = function (e) {
                      (v.poster =
                        100 < e
                          ? t + "maxresdefault.jpg"
                          : t + "hqdefault.jpg"),
                        o.playlist_dic &&
                          (o.playlist_dic[o.plid].poster = v.poster),
                        1 == v.autoplay ||
                          o.start ||
                          Poster(v.poster, o.poster, v.poster_scale);
                    }),
                    ((n = new Image()).onload = function () {
                      s(this.height);
                    }),
                    (n.src = i)))
                : log("No YouTube")
              : 1 == v.vimeo && -1 < e.indexOf("vimeo.com/")
              ? (a = "vimeo")
              : 1 == v.pjsframe && PjsFramed(e) && (a = "pjs")),
          (o.tagvideo =
            "native" == a || "hls" == a || "dash" == a || a == o.ws),
          a
        );
      }
      function j() {
        u && (u.Remove(), (u = null), (n = "ended")),
          t &&
            (t.Remove(),
            (t = null),
            (t = void 0),
            o.mediapip.remove(),
            (o.media2 = null),
            (o.mediapip = null));
      }
      function M() {
        var e = XHR(v.tagsurl + "?url=" + r[d]);
        (e.onload = function () {
          4 == this.readyState &&
            200 == this.status &&
            this.responseText &&
            ((v.title = this.responseText), o.actions.Title("title"));
        }),
          e.send();
      }
      (o.mediacontainer = createElement("div")),
        css(o.mediacontainer, {
          position: "absolute",
          top: 0,
          left: 0,
          width: "100%",
          height: "100%",
          transition: "transform 0.2s linear",
          "text-align": "center",
        }),
        o.frame.appendChild(o.mediacontainer),
        i || b(),
        (this.onError = function () {
          _(u.errorMessage());
        }),
        (this.onEnded = function (e) {
          log("Ended");
          var t = !(p = !0);
          !(0 < T()) ||
            o.casting ||
            e ||
            ((e = o.current_time) + 10 < T() &&
              (log("Break (recovery)"),
              js("recovery"),
              u.Play(),
              u.Seek(e),
              (t = !0))),
            t || (o.actions.Ended(), js("end"));
        }),
        (this.onPlay = function () {
          1 == v.posterhidepause && exist(o.poster) && o.actions.ShowPoster(),
            1 == v.posterhide && o.actions.HidePoster(),
            o.controls.Play(),
            o.actions.onPlayTag(),
            1 == v.tags &&
              exist(v.tagsurl) &&
              5 < v.tagsurl.length &&
              (M(),
              clearInterval(e),
              (e = setInterval(M, 1e3 * v.tagsinterval))),
            1 == v.reload && 0 < m && 0 == o.media.duration() && ((m = 0), w()),
            js("play");
        }),
        (this.NativeControls = function () {
          1 == v.nativecontrolsmobile &&
            o.tagvideo &&
            o.actions.NativeControls() &&
            ((o.nativecontrols = u.nativeControls()), o.controls.refresh()),
            (o.checknative = !0);
        }),
        (this.onPause = function () {
          o.actions.Pause();
        }),
        (this.onSeeking = function () {
          log("Seeking");
        }),
        (this.onSeeked = function () {
          log("Seeked"),
            o.actions.Seeked(),
            o.seeking_time && js("seek", o.seeking_time);
        }),
        (this.onMeta = function () {
          log("Metadata"), (m = 0), o.actions.Metadata();
        }),
        (this.onDuration = function () {
          u &&
            (log("Duration", T()),
            o.actions.Duration(S(), T()),
            js("duration", T()),
            (m = 0),
            exist(o.restart_audio) &&
              (o.actions.SetAudioTrack(o.restart_audio),
              (o.restart_audio = null)));
        }),
        (this.onVolume = function () {}),
        (this.onWaiting = function () {
          log("Waiting"), o.actions.Waiting(), js("waiting");
        }),
        (this.onTimeupdate = function () {
          a != S() &&
            (o.actions.StopWaiting(),
            0 == a &&
              1 == v.posterhide &&
              1 == v.posterhidestart &&
              o.actions.HidePoster()),
            (a = S()),
            js("time", a),
            1 == v.pip.on &&
              "function" == typeof PluginPip &&
              !t &&
              1 != v.pip.custom &&
              v.file2 &&
              "" != v.file2 &&
              0 < a &&
              ((o.mediapip = new PluginPip()), (t = o.mediapip.create()));
        }),
        (this.onYoutubeReady = function () {
          "youtube" == o.file_type && u && u.YoutubeReady();
        }),
        (this.playByYoutubeId = function (e) {
          o.actions.Stop(), u.playId(e);
        }),
        (this.YoutubeReady = function () {
          return "youtube" != o.file_type || !u || u.ready();
        }),
        (this.getHLS = function () {
          return u.getHLS();
        }),
        (this.getDASH = function () {
          return u.getDASH();
        }),
        (this.SetQuality = function (e) {
          var t;
          log("Quality", e),
            ("native" == o.file_type ||
              o.file_type == o.ws ||
              ("hls" == o.file_type && (0 == v.hlsquality || C() < 2)) ||
              ("dash" == o.file_type && (0 == v.dashquality || O() < 2))) &&
              exist(o.files[e]) &&
              ((t = this.time()),
              0 < o.seekto || (o.seekto = t),
              o.actions.Seek(t, !1),
              A(o.files[e], !0),
              o.actions.Play()),
            "hls" == o.file_type && 1 == v.hlsquality && 1 < C()
              ? u.setHlsQuality(e)
              : "dash" == o.file_type && 1 == v.dashquality && 1 < O()
              ? u.setDashQuality(e)
              : "youtube" == o.file_type && u.setQuality(e);
        }),
        (this.SetSpeed = function (e) {
          log("Speed", e),
            u && u.setSpeed(e),
            1 == v.pip.on && t && t.setSpeed(e);
        }),
        (this.nativeSubtitle = function () {
          !(function () {
            if (o.tagvideo && o.subs) {
              u.removeTracks();
              for (var e = 0; e < o.subs.length; e++)
                u.addTrack(
                  o.subs[e],
                  o.files_subtitle[e],
                  e == o.current_subtitle
                );
            }
          })();
        }),
        (this.removeNativeSubtitle = function () {
          u.removeTracks();
        }),
        (this.SetAudioTrack = function (e) {
          var t;
          log("Audiotrack", e),
            0 < o.audiotracks.length
              ? o.audiotracks[e] &&
                ((t = this.time()),
                0 < o.seekto || (o.seekto = t),
                o.actions.Seek(t, !1),
                A(o.audiotracks[e], !0),
                o.actions.Play())
              : "hls" == o.file_type && 1 == v.hlsaudio
              ? u.setHlsAudioTrack(e)
              : "dash" == o.file_type &&
                1 == v.dashaudio &&
                u.setDashAudioTrack(e);
        }),
        (this.getQuality = function () {
          var e = o.files_quality[o.current_quality];
          return (
            null == e && (e = ""),
            (L() &&
            1 == v.hlsautoquality &&
            1 == v.hlsquality &&
            e != Lang("auto")
              ? Lang("auto") + " "
              : "") + e
          );
        }),
        (this.getAudioTrack = function () {
          var e = o.files_audiotrack[o.current_audiotrack];
          return null == e && (e = ""), e;
        }),
        (this.autoQuality = L),
        (this.resize = function (e) {
          u &&
            ("youtube" == o.file_type ||
              "vimeo" == o.file_type ||
              exist(v.ratio)) &&
            u.resize(),
            0 < v.screenmarginbottom &&
              css(o.mediacontainer, {
                height: o.fullscreen
                  ? "100%"
                  : o.normal_h - v.screenmarginbottom,
              }),
            o.media2 && 1 == v.pip.movable && o.mediapip.resize();
        }),
        (this.size = function () {
          return u.size();
        }),
        (this.reload = function () {
          log("reload"),
            (o.reloadTimer = 0),
            o.start && (v.autoplay = 1),
            o.actions.Waiting(),
            l &&
              -1 == l.indexOf("(random)") &&
              (l = l + (-1 == l.indexOf("?") ? "?" : "&") + "rand=(random)"),
            "hls" == o.file_type || "native" == o.file_type ? u.src(l) : A(l);
        }),
        exist(o.poster) || E(),
        exist(v.poster) &&
          ("" != v.poster
            ? (Poster(v.poster, o.poster, v.poster_scale),
              1 != v.posterhidepause || o.start || hide(o.poster))
            : (v.poster = null)),
        (this.Remove = function () {
          j();
        }),
        (this.RemoveAll = function () {
          (r = []), j();
        }),
        (this.File = function (e, t, o) {
          A(e, t, o);
        }),
        (this.Poster = function (e) {
          Poster(e, o.poster, v.poster_scale);
        }),
        (this.Play = function () {
          u
            ? ((f = p = !1),
              o.casting
                ? o.chromecast.Play()
                : (u.Play(), 1 == v.posterhide && o.actions.HidePoster()),
              exist(t) && t.Play(),
              o.channels &&
                (o.tagvideo
                  ? 0 < o.clicktime &&
                    !o.channels.Created() &&
                    o.channels.Update()
                  : ((o.files_channel = []),
                    o.controls.SettingChanged("channel"))),
              o.tagvideo &&
                -1 < v.volumegain &&
                !o.gained &&
                !o.system.ios &&
                0 < o.clicktime &&
                u.Gain())
            : setTimeout(this.Play, 500);
        }),
        (this.PipSwitch = function (e) {
          o.media2 &&
            ((1 == v.pip.movable && 2 < o.moving[o.media2]) ||
              (e &&
                (e.stopPropagation(),
                window.event && (window.event.cancelBubble = !0)),
              (e = u).ChangePip(!0, o.media2),
              t.ChangePip(!1, o.mediacontainer),
              (u = t),
              (t = e),
              u.Play(),
              t.Play(),
              js("pip")));
        }),
        (this.reYT = function () {
          u.src(l);
        }),
        (this.ToolbarHide = function () {
          1 == v.effects && o.effects.api("hide"), (o.toolbarhidden = !0);
        }),
        (this.ToolbarShow = function () {
          v.toolbar.resizeme &&
            ((v.toolbar.resizeme = !1),
            o.controls &&
              (o.controls.resizeFromText(1), o.controls.resizetext())),
            (o.toolbarhidden = !1);
        }),
        (this.PipToggle = function () {
          o.media2 && o.mediapip && o.mediapip.toggle();
        }),
        (this.Airplay = function () {
          o.tagvideo && o.airplay && ((o.airplayed = !0), u.airplay());
        }),
        (this.PipWebkit = function () {
          o.tagvideo && o.pipwebkit && u.pipwebkit();
        }),
        (this.BeforeVast = function () {
          1 == v.vast_poster &&
            exist(v.vast_posterurl) &&
            (exist(o.vast_poster) ||
              ((o.vast_poster = createElement("div")),
              css(o.vast_poster, {
                position: "absolute",
                left: 0,
                top: 0,
                width: "100%",
                height: "100%",
                "pointer-events": "none",
                zIndex: 1e4,
              }),
              o.frame.appendChild(o.vast_poster)),
            show2(o.vast_poster),
            Poster(v.vast_posterurl, o.vast_poster, "fill")),
            u && (datetime(0), u.BeforeVast());
        }),
        (this.AfterVast = function () {
          o.vast_poster && hide2(o.vast_poster), u && u.AfterVast();
        }),
        (this.Pause = function () {
          o.casting ? o.chromecast.Pause() : u ? u.Pause() : log("nomedia"),
            exist(o.media2) && t.Pause();
        }),
        (this.Recover = function () {
          (f = !0),
            o.actions.Seek(0, !1),
            exist(o.poster) && o.actions.ShowPoster(),
            A("x");
        }),
        (this.Toggle = function () {
          u && u.Toggle();
        }),
        (this.Seek = function (e) {
          u &&
            (o.casting
              ? o.chromecast.Seek(e)
              : (u.Seek(e), 1 == v.pip.on && t && t.Seek(e)));
        }),
        (this.Mute = function () {
          u && (u.Mute(), o.casting && o.chromecast.Mute()),
            1 == v.pip.on && 1 == v.pip.nomute && t && t.Mute();
        }),
        (this.Unmute = function () {
          u && (u.Unmute(), o.casting && o.chromecast.Unmute()),
            1 == v.pip.on && 1 == v.pip.nomute && t && t.Unmute();
        }),
        (this.Volume = function (e) {
          u && u.Volume(e),
            1 == v.pip.on && 1 == v.pip.nomute && t && t.Volume(e),
            o.casting && o.chromecast.Volume(e);
        }),
        (this.isPlaying = function () {
          return !!u && u.isPlaying();
        }),
        (this.isLive = function () {
          return !!u && u.isLive();
        }),
        (this.status = function () {
          return n;
        }),
        (this.ended = function () {
          return p;
        }),
        (this.time = function () {
          var e = 0;
          if (u) {
            var t,
              e = S();
            return (
              o.casting
                ? (t = o.chromecast.Time()) && (e = t)
                : 0 < T() && e != T() && (o.current_time = e + 1e-4),
              e
            );
          }
          return 0;
        }),
        (this.duration = function () {
          var e,
            t = 0;
          return (
            u &&
              (0 == (t = T()) && exist(v.duration) && (t = +v.duration),
              !o.casting || ((e = o.chromecast.Duration()) && (t = e))),
            t
          );
        }),
        (this.loaded = function () {
          return u ? u.loaded() : 0;
        }),
        (this.createposter = function () {
          E();
        }),
        (this.Preload = function () {
          o.tagvideo && u.preload();
        }),
        (this.scale = function (e) {
          var t, i, s;
          0 < String(e).indexOf(":")
            ? ((i = e.split(":")),
              (s = o.screen_w / o.screen_h),
              0 < (t = o.media.size()).width && (s = t.width / t.height),
              s != (s = i[0] / i[1]) &&
                (o.tagvideo && u.ObjectFit(),
                (i = (o.screen_h * s) / o.screen_w),
                (s = o.screen_w / s / o.screen_h),
                i < 1
                  ? ((o.mediascale.x0 = o.mediascale.x = parseFloat(i)),
                    (o.mediascale.y = 1))
                  : ((o.mediascale.x = 1),
                    (o.mediascale.y0 = o.mediascale.y = parseFloat(s))),
                css(o.mediacontainer, {
                  transform:
                    "scaleX(" +
                    o.mediascale.x +
                    ") scaleY(" +
                    o.mediascale.y +
                    ")",
                }),
                (o.custom_aspect = e)))
            : ((o.mediascale.x += parseFloat(e)),
              (o.mediascale.y += parseFloat(e)),
              css(o.mediacontainer, {
                transform:
                  "scaleX(" +
                  o.mediascale.x +
                  ") scaleY(" +
                  o.mediascale.y +
                  ")",
              })),
            1 == v.hotkey.scaledrag &&
              (o.mediadrag
                ? 1 == o.mediascale.x &&
                  1 == o.mediascale.y &&
                  css(o.mediacontainer, {
                    top: 0,
                    left: 0,
                  })
                : (0 < o.mediascale.x || 1 < o.mediascale.y) &&
                  (PluginMovable(o.mediacontainer, "o.dragging"),
                  (o.mediadrag = !0))),
            o.controls.SettingsScale();
        }),
        (this.normalscale = function () {
          o.tagvideo && u.ObjectFit(),
            (o.mediascale.x = o.mediascale.x0),
            (o.mediascale.y = o.mediascale.y0),
            css(o.mediacontainer, {
              transform:
                "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")",
            }),
            o.controls.SettingsScale(),
            (o.custom_aspect = null);
        }),
        (this.hlsDashSub = function (e, t) {
          u.hlsDashSub(e, t);
        }),
        (this.currentSubtitle = function () {
          var e = void 0;
          return (
            !exist(o.subs) ||
              (exist(o.subs[o.current_subtitle]) &&
                (e = o.subs[o.current_subtitle])),
            e
          );
        }),
        (this.currentFile = function () {
          return (0 < r.length && r[d]) || "";
        }),
        (this.tag = function () {
          return !!u && u.tag();
        }),
        (this.captions = function () {
          o.tagvideo && u.captions();
        });
    },
    MediaVideo = function (url, container, pip) {
      var pjstg = createElement("video"),
        hls_config,
        pipto = 0,
        tagframe,
        framei,
        hls;
      1 == v.taginframe
        ? ((tagframe = createElement("iframe")),
          attr(tagframe, {
            scrolling: "no",
            allowfullscreen: "true",
            allowtransparency: "true",
            src: "",
          }),
          css(tagframe, {
            position: "absolute",
            width: "100%",
            height: "100%",
            border: 0,
          }),
          container.appendChild(tagframe),
          (framei = window.setInterval(function () {
            "complete" === tagframe.contentWindow.document.readyState &&
              (window.clearInterval(framei),
              css(tagframe.contentDocument.body, {
                padding: 0,
                margin: 0,
              }),
              tagframe.contentDocument.body.appendChild(pjstg));
          }, 100)))
        : container.appendChild(pjstg);
      var is_hls = !1,
        is_hls2 = !1,
        hls_started = !1,
        hls_created = !1,
        hls_force = -1,
        dash,
        dash_created = !1,
        dash_init = !1,
        dash_play = !1,
        ws,
        ws_created = !1,
        is_dash = !1,
        is_live = !1,
        is_sleep = 0,
        is_ws = !1,
        error,
        error_time,
        unmuteplease = !1,
        pip_quality = -1,
        pause_before_vast = -1,
        sleep_timeout,
        _hlssubtracks,
        _dashsubtracks,
        _seekaftervast,
        urlmse,
        mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';
      if (
        (css(pjstg, {
          position: "absolute",
          top: 0,
          left: 0,
          width: "100%",
          height: "100%",
          "object-fit": "contain",
          transition: "filter 0.2s linear",
          "min-height": "auto",
          "max-height": "none",
          "min-width": "auto",
          "max-width": "none",
        }),
        ObjectFit(),
        1 == v.playsinlineonmobile &&
          o.system.mobile &&
          attr(pjstg, {
            playsinline: "1",
          }),
        1 == v.tagcors &&
          attr(pjstg, {
            crossorigin: "anonymous",
            crossOrigin: "anonymous",
          }),
        attr(pjstg, {
          src: url,
          "x-webkit-airplay": "allow",
        }),
        1 == v.ynxnopip &&
          attr(pjstg, {
            pip: "false",
          }),
        pip &&
          ((pjstg.autoplay = !0),
          (1 == v.pip.nomute && 1 != v.autoplay) || (pjstg.muted = !0)),
        1 == v.nativenodownload &&
          attr(pjstg, {
            controlsList: "nodownload",
          }),
        o.system.tv ||
          attr(pjstg, {
            preload: 1 == v.preload && 0 == v.autoplay ? "metadata" : "none",
          }),
        tagSrc(),
        exist(url) || (url = ""),
        0 < url.indexOf(".mpd"))
      ) {
        var scrpt,
          is_dash = !0;
        exist(window.dashjs)
          ? Dashed()
          : ((scrpt = Script(
              "cdn.dashjs.org",
              "cdn.dashjs.org/latest/dash.all.min.js",
              "dash_all"
            )),
            scrpt &&
              ((o.dashInterval = setInterval(WaitDash, 100)),
              (scrpt.onerror = function (e) {
                clearInterval(o.dashInterval),
                  o.actions.MediaReady(),
                  (error = "DASH SDK not found"),
                  o.media.onError();
              })));
      } else if (
        ((1 == options.hls && 1 != v.playerjscom) ||
          0 < url.indexOf(".m3u8")) &&
        (-1 != o.compilation.indexOf("HLS") || exist(window.Hls))
      ) {
        (is_hls = !0), (is_hls2 = !0);
        try {
          exist(Hls)
            ? !Hls.isSupported() ||
              (o.system.safari && 1 == v.nativehlsinsafari && !o.system.ios) ||
              (o.system.safari && o.system.ios && 1 == v.nativehlsios) ||
              (o.system.edge && 1 == v.nativehlsinedge)
              ? (log("HLS support ", Hls.isSupported()), (is_hls = !1))
              : (1 != v.preload &&
                  1 != v.autoplay &&
                  1 != v.preloadhls &&
                  !pip) ||
                CreateHLS(!1)
            : (is_hls = !1);
        } catch (error) {
          is_hls = !1;
        }
      } else
        0 == url.indexOf("ws://") &&
          1 == v.flussonic &&
          ((is_ws = !0), CreateWS());
      function WaitDash() {
        exist(window.dashjs) && (clearInterval(o.dashInterval), Dashed());
      }
      function Dashed() {
        (is_dash = !0),
          MseIsSupported()
            ? (1 != v.preload && 1 != v.autoplay && 1 != v.preloaddash) ||
              CreateDASH(!1)
            : ((is_dash = !1), log("DASH not supported"));
      }
      function CreateDASH(e) {
        log("DASH"), (v.preloaddash = 1);
        var i = {
          bufferLength: 60,
        };
        if (
          (1 < o.files.length
            ? ((v.dashquality = 0), (v.dashquality_off = !0))
            : v.dashquality_off && (v.dashquality = 1),
          1 < o.audiotracks.length
            ? ((v.dashaudio = 0), (v.dashaudio_off = !0))
            : v.dashaudio_off && (v.dashaudio = 1),
          exist(v.dashconfig) &&
            (exist(v.dashconfig.bufferLength) &&
              600 < v.dashconfig.bufferLength &&
              (v.dashconfig.bufferLength = 600),
            "object" == typeof v.dashconfig))
        )
          for (var t in v.dashconfig) i[t] = v.dashconfig[t];
        (dash = dashjs.MediaPlayer().create()),
          js("dash", dash, 1),
          1 != v.dashdebug ||
            pip ||
            dash.updateSettings({
              debug: {
                logLevel: dashjs.Debug.LOG_LEVEL_DEBUG,
              },
            });
        var s = 1 == v.autoplay || pip || e;
        if ((dash.initialize(pjstg, url, s), 1 == v.dashdrm)) {
          var n = v.dashdrmjson;
          if (n) {
            if ("string" == typeof n)
              try {
                (n = n.replace(/pjs'qt/gi, '"')), (n = JSON.parse(n));
              } catch (e) {
                log("incorrect DASH DRM JSON");
              }
            "object" == typeof n && dash.setProtectionData(n);
          }
        }
        dash.updateSettings({
          streaming: {
            setFastSwitchEnabled: !0,
            stableBufferTime: 1 != i.buffer0 || s ? i.bufferLength : 0,
          },
        }),
          dash.updateSettings({
            streaming: {
              bufferTimeAtTopQualityLongForm: i.bufferLength,
            },
          }),
          dash.updateSettings({
            streaming: {
              "lastBitrateCachingInfo.enabled": !1,
            },
          }),
          dash.updateSettings({
            streaming: {
              "lastMediaSettingsCachingInfo.enabled": !1,
            },
          }),
          1 == v.dashcookies && dash.setXHRWithCredentialsForType(void 0, !0),
          1 == v.dashlowquality &&
            dash.updateSettings({
              streaming: {
                abr: {
                  autoSwitchBitrate: {
                    audio: !1,
                    video: !1,
                  },
                },
              },
            }),
          dash.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED, function (e) {
            var t;
            dash_init ||
              (log("DASH attached"),
              (t = DashQualityLevels()),
              DashAudioTracks(),
              (o.dash_subs = !1),
              1 == v.dashsubtracks &&
                (_dashsubtracks = new PluginDashSubtitles(dash, pip)),
              (is_live = dash.isDynamic()) && log("Live"),
              1 == v.dashquality &&
                (1 == v.dashlowquality || 0 < t
                  ? ((o.current_quality = t),
                    dash.updateSettings({
                      streaming: {
                        abr: {
                          autoSwitchBitrate: {
                            audio: !1,
                            video: !1,
                          },
                        },
                      },
                    }))
                  : (o.current_quality =
                      dash.getBitrateInfoListFor("video").length - 1),
                o.controls.QualityChangedNoHand(o.current_quality),
                dash.setQualityFor("video", o.current_quality),
                dash.setQualityFor("audio", o.current_quality)),
              o.actions.MediaReady(),
              (dash_init = !0));
          }),
          dash.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING, function (e) {
            var t;
            1 != i.buffer0 ||
              s ||
              dash.updateSettings({
                streaming: {
                  stableBufferTime: i.bufferLength,
                },
              }),
              dash_play ||
                (0 < (t = parseInt(o.current_audiotrack)) &&
                  1 == v.dashaudio &&
                  dash.setCurrentTrack(dash.getTracksFor("audio")[t]),
                (dash_play = !0));
          }),
          dash.on(
            dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,
            function (e) {
              is_live && o.actions.Duration(dash.time(), dash.duration());
            }
          ),
          dash.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED, function (e) {
            dash.setTextTrack(-1);
          }),
          dash.on(
            dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,
            function (e) {
              "video" == e.mediaType &&
                e.oldQuality != e.newQuality &&
                1 == v.dashquality &&
                ((o.current_quality = e.newQuality),
                o.controls.QualityChangedNoHand(o.current_quality),
                log("DASH Level " + o.current_quality));
            }
          ),
          dash.on(
            dashjs.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED,
            function (e) {
              exist(e.request) &&
                "MediaSegment" == e.request.type &&
                js("fragment", e.request.url);
            }
          ),
          dash.on(dashjs.MediaPlayer.events.ERROR, function (e) {
            "manifestError" == (o.dasherror = e).error
              ? ((error =
                  "DASH " +
                  e.error +
                  ": " +
                  e.event.message +
                  ", " +
                  e.event.event),
                log(error),
                o.media.onError())
              : "capability" == e.error ||
                "mediasource" == e.error ||
                "key_session" == e.error ||
                "key_message" == e.error
              ? ((error = "DASH " + e.error + " error: " + e.event),
                log(error),
                o.media.onError())
              : "download" == e.error &&
                (log((error = "DASH fatal network error encountered")),
                o.media.onError());
          }),
          (dash_created = !0);
      }
      function CreateHLS(e) {
        log("HLS"),
          1 < o.files.length
            ? ((v.hlsquality = 0), (v.hlsquality_off = !0))
            : v.hlsquality_off && (v.hlsquality = 1),
          1 < o.audiotracks.length
            ? ((v.hlsaudio = 0), (v.hlsaudio_off = !0))
            : v.hlsaudio_off && (v.hlsaudio = 1),
          (o.hls_subs = !1);
        var t = !(hls_force = -1);
        if (
          (v.preroll && 1 == v.hlsvastwait && ((t = !0), (v.hlsvastwait = 0)),
          (hls_config = {
            debug: 1 == v.hlsdebug && !pip,
            autoStartLoad:
              (1 == v.preload || 1 == v.autoplay || pip || e) && !t,
            maxBufferLength: 60,
            maxMaxBufferLength: 60,
            manifestLoadingTimeOut: 0 < v.hlsmto ? 1e3 * v.hlsmto : 4e4,
            fragLoadingTimeOut: 0 < v.hlsfto ? 1e3 * v.hlsfto : 4e4,
            enableWorker: !1,
          }),
          1 == v.hlscookies &&
            (hls_config.xhrSetup = function (e, t) {
              e.withCredentials = !0;
            }),
          exist(v.hlsconfig) &&
            (exist(v.hlsconfig.maxBufferLength) &&
              (600 < v.hlsconfig.maxBufferLength &&
                (v.hlsconfig.maxBufferLength = 600),
              (v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength)),
            exist(v.hlsconfig.customBuffer) &&
              (v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength =
                v.hlsconfig.customBuffer),
            "object" == typeof v.hlsconfig))
        )
          for (var i in v.hlsconfig) hls_config[i] = v.hlsconfig[i];
        (hls = new Hls(hls_config)),
          js("hls", hls, 1),
          hls.loadSource(url),
          hls.attachMedia(pjstg),
          hls.on(Hls.Events.MEDIA_ATTACHED, function () {
            log("HLS attached");
          }),
          hls.on(Hls.Events.MANIFEST_LOADED, function (e, t) {
            pip || o.actions.MediaReady();
          }),
          hls.on(Hls.Events.MANIFEST_PARSED, function (e, t) {
            !pip &&
              1 == v.hlsquality &&
              1 < HlsLevelsLength() &&
              (HlsQualityLevels(),
              o.controls && o.controls.QualityChangedNoHand(o.current_quality));
          }),
          hls.on(Hls.Events.LEVEL_SWITCH, function (e, t) {
            HlsLevel();
          }),
          hls.on(Hls.Events.LEVEL_SWITCHED, function (e, t) {
            HlsLevel();
          }),
          hls.on(Hls.Events.LEVEL_LOADED, function (e, t) {
            pip ||
              (t.details.live != is_live &&
                ((is_live = t.details.live), o.controls.refresh()),
              (is_live = t.details.live) &&
                (log("Live"),
                (o.dvr = -1 < url.indexOf("?DVR")),
                0 < pjstg.duration &&
                  0 < pjstg.currentTime &&
                  pjstg.duration - pjstg.currentTime < 10 &&
                  (0 < o.hls_stuck_time
                    ? o.hls_stuck_time == pjstg.currentTime &&
                      o.hls_stuck_duration == pjstg.duration
                      ? (o.stuck++,
                        2 < o.stuck &&
                          ((o.stuck = 0),
                          (o.hls_stuck_time = -1),
                          hls.destroy(),
                          CreateHLS(!0),
                          onEnded()))
                      : (o.hls_stuck_time = -1)
                    : ((o.hls_stuck_time = pjstg.currentTime),
                      (o.hls_stuck_duration = pjstg.duration))))),
              1 == v.hlsquality &&
                ((o.current_quality = hls.loadLevel),
                o.controls &&
                  o.controls.QualityChangedNoHand(o.current_quality)),
              HlsUpdateAudio();
          }),
          hls.on(Hls.Events.FRAG_CHANGED, function (e, t) {
            exist(t.frag) && !pip && js("fragment", t.frag.relurl),
              -1 < hls_force &&
                ((hls.nextAutoLevel = hls_force), (hls_force = -1)),
              (hls_started = !0),
              hlsTextTracks();
          }),
          hls.on(Hls.Events.FRAG_PARSING_METADATA, function (e, t) {
            js("fragdata", t, 1);
          }),
          hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function (e, t) {
            pip || 1 != v.hlsaudio || HlsAudioTracks();
          }),
          hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, function (e, t) {
            pip || 1 != v.hlsaudio || HlsAudioTrack();
          }),
          1 == v.hlssubtracks
            ? (_hlssubtracks = new PluginHlsSubtitles(hls, pip))
            : (hls.subtitleDisplay = !1),
          hls.on(Hls.Events.ERROR, function (e, t) {
            if (
              (1 == v.log && console.log(t),
              js(t.type + "Hls", t, 0, !0),
              (o.hlserror = t).fatal)
            )
              switch (t.type) {
                case Hls.ErrorTypes.NETWORK_ERROR:
                  1 == v.livewakeup
                    ? HlsSleep0()
                    : ((error = t.details + " (" + t.type + ")"),
                      0 < o.seekto ||
                        pip ||
                        1 == v.live ||
                        is_ws ||
                        (o.seekto = Time()),
                      hls.destroy(),
                      pip || o.media.onError());
                  break;
                case Hls.ErrorTypes.MEDIA_ERROR:
                  HlsRecoverMediaError();
                  break;
                default:
                  (error = "HLS fatal error, destroy"),
                    hls.destroy(),
                    pip || o.media.onError();
              }
            else
              log("HLS ", t.type, t.details, t.response ? t.response.code : ""),
                js("hls_error", t.response ? t.response.code : ""),
                0 < is_sleep && ((is_sleep = 2), HlsSleep());
          }),
          (hls_created = !0);
      }
      function HlsLevel() {
        !pip &&
          1 == v.hlsquality &&
          1 < HlsLevelsLength() &&
          o.current_quality != hls.loadLevel &&
          ((o.current_quality = hls.loadLevel),
          o.controls && o.controls.QualityChangedNoHand(o.current_quality),
          log("HLS Level " + o.current_quality));
      }
      function CreateWS() {
        exist(window.FlussonicMsePlayer) &&
          (MseIsSupported()
            ? (exist(o.ws) || (o.ws = new PluginWS()),
              (ws = new FlussonicMsePlayer(pjstg, url, {
                debug: !0,
              })),
              (ws_created = !0))
            : ((is_ws = !1), log("not supported")));
      }
      function hlsTextTracks() {
        Captions();
      }
      function Captions() {
        v.hlscaptions &&
          (0 < pjstg.textTracks.length
            ? (1 == v.captions
                ? (pjstg.textTracks[pjstg.textTracks.length - 1].mode =
                    "showing")
                : (pjstg.textTracks[pjstg.textTracks.length - 1].mode =
                    "hidden"),
              o.captions || ((o.captions = !0), o.controls.refresh()))
            : o.captions && ((o.captions = !1), o.controls.refresh()));
      }
      function HlsSleep0() {
        log("sleep"),
          !pip && o.play && o.actions.Pause(),
          o.actions.ShowPoster(),
          (is_sleep = 1),
          HlsSleep(o.play);
      }
      function HlsSleep(e) {
        0 < is_sleep &&
          (clearTimeout(sleep_timeout),
          (sleep_timeout = setTimeout(HlsLiveWaiting, 1e3 * v.livewakeuptime)));
      }
      function HlsLiveWaiting() {
        0 < is_sleep &&
          (log("watching"),
          is_hls
            ? (1 == is_sleep && hls.loadSource(url),
              2 == is_sleep && (hls.destroy(), CreateHLS(!0), pjstg.play()))
            : attr(pjstg, {
                src: url,
              }));
      }
      !o.system.tv ||
        1 != v.autoplay ||
        is_hls ||
        is_dash ||
        is_ws ||
        setTimeout(function () {
          o.actions.MediaReady();
        }, 100),
        1 == v.channels &&
          (exist(o.channels) && o.channels.Close(),
          (o.channels = new PlugMediaChannels())),
        (this.captions = function () {
          Captions();
        });
      var recover_decoding_error_date = 0,
        recover_swap_audio_codec_date = 0;
      function HlsRecoverMediaError() {
        var e = performance.now();
        !recover_decoding_error_date || 3e3 < e - recover_decoding_error_date
          ? ((recover_decoding_error_date = performance.now()),
            log("HLS fatal media error, try to recover"),
            hls.recoverMediaError(),
            hls.startLoad(),
            o.play && TagPlay())
          : !recover_swap_audio_codec_date ||
            3e3 < e - recover_swap_audio_codec_date
          ? ((recover_swap_audio_codec_date = performance.now()),
            log("HLS fatal media error, try to recover"),
            hls.swapAudioCodec(),
            hls.recoverMediaError())
          : log("HLS fatal media error, recovery failed");
      }
      function onLoadStart() {
        is_hls || is_dash || pip || o.actions.MediaReady();
      }
      function onTagError() {
        var e;
        is_hls ||
          is_dash ||
          (pjstg.error &&
            (log(pjstg.error, pjstg.error.code, pjstg.error.message),
            (e = pjstg.error.code),
            (error = 1 == e ? "aborted" : void 0),
            2 == e && (error = "network"),
            3 == e && (error = "decode"),
            4 == e && (error = "not found"),
            log("Video Error: ", error)),
          is_hls2 && 1 == v.livewakeup && ((error = void 0), HlsSleep0()),
          null != error && onError());
      }
      function onError() {
        pip || o.media.onError();
      }
      function onEnded() {
        pip || o.media.onEnded();
      }
      function onPlay() {
        if (!o.start && v.preroll)
          return log("wrong play"), pause(), void o.actions.Play();
        var e, t;
        (is_hls && 0 < is_sleep) ||
          pip ||
          (!(e = o.actions.isVastBgLoad() && 1 != o.vastfrombg) &&
            -1 != pause_before_vast) ||
          ((t = !1),
          is_hls &&
            (exist(o.vast) || exist(o.vastloader)) &&
            (e || (pause(), (t = !0))),
          t || o.media.onPlay());
      }
      function onPause() {
        pip || o.nopause || o.media.onPause();
      }
      function onTimeupdate() {
        pip || o.media.onTimeupdate(),
          -1 < pause_before_vast &&
            Time() > pause_before_vast &&
            (pause(), (pause_before_vast = -1));
      }
      function onSeeking() {
        pip || o.media.onSeeking();
      }
      function onSeeked() {
        pip || o.media.onSeeked();
      }
      function onMeta() {
        pip
          ? PipSize()
          : (o.media.onMeta(),
            PlayerSize(),
            is_hls &&
              0 < is_sleep &&
              ((is_sleep = 0),
              log("wake up"),
              hls.startLoad(),
              TagPlay(),
              o.controls.Play()),
            exist(v.ratio) && Resize());
      }
      function PipSize() {
        0 < pjstg.videoHeight
          ? css(container, {
              height:
                container.offsetWidth / (pjstg.videoWidth / pjstg.videoHeight) -
                parseInt(v.pip.border),
            })
          : pipto < 20 && (setTimeout(PipSize, 100), pipto++);
      }
      function PlayerSize() {
        1 == v.changeheight &&
          (clearInterval(o.heightInterval),
          (o.heightInterval = setInterval(WaitSize, 100)),
          WaitSize());
      }
      function WaitSize() {
        pjstg &&
          0 < pjstg.videoHeight &&
          (o.actions.changeAspect(pjstg.videoWidth / pjstg.videoHeight),
          clearInterval(o.heightInterval));
      }
      function onDuration() {
        pip || is_ws || o.media.onDuration();
      }
      function onVolume() {
        pip || o.media.onVolume();
      }
      function onWaiting() {
        (is_hls && 0 < is_sleep) || pip || o.media.onWaiting();
      }
      function onLoadedData() {
        o.actions.LoadedData();
      }
      function MseIsSupported() {
        var e = (window.MediaSource =
            window.MediaSource || window.WebKitMediaSource),
          t = (window.SourceBuffer =
            window.SourceBuffer || window.WebKitSourceBuffer),
          e =
            e &&
            "function" == typeof e.isTypeSupported &&
            e.isTypeSupported(mimeCodec),
          t =
            !t ||
            (t.prototype &&
              "function" == typeof t.prototype.appendBuffer &&
              "function" == typeof t.prototype.remove);
        return e && t;
      }
      function DashQualityLevels() {
        var e = 0;
        if (!pip && 1 == v.dashquality) {
          o.files_quality = [];
          var t = dash.getBitrateInfoListFor("video");
          if (1 < t.length) {
            for (var i = "", s = 0; s < t.length; s++)
              (o.files_quality[s] = exist(t[s].height)
                ? MseRenameQualities(t[s], v.nameofdashquality)
                : s),
                o.files_quality[s] == i || 1 == v.dashaddbitrate
                  ? ((i = o.files_quality[s]),
                    exist(t[s].bitrate) &&
                      ((o.files_quality[s] +=
                        " " +
                        span05 +
                        " &nbsp;" +
                        parseInt(t[s].bitrate / 1e3) +
                        " " +
                        Lang("kbps") +
                        "</span>"),
                      1 != v.dashaddbitrate &&
                        (o.files_quality[s - 1] +=
                          " " +
                          span05 +
                          " &nbsp;" +
                          parseInt(t[s - 1].bitrate / 1e3) +
                          " " +
                          Lang("kbps") +
                          "</span>"),
                      (i = "")))
                  : (i = o.files_quality[s]),
                exist(v.default_quality) &&
                  0 == e &&
                  v.default_quality == o.files_quality[s] &&
                  (e = s),
                exist(o.default_quality) &&
                  o.default_quality == o.files_quality[s] &&
                  (e = s);
            o.files_quality[t.length] = Lang("auto");
          }
        }
        return e;
      }
      function DashAudioTracks() {
        if (!pip && 1 == v.dashaudio) {
          o.current_audiotrack = 0;
          var e = dash.getTracksFor("audio");
          if (1 < e.length)
            for (var t = 0; t < e.length; t++)
              (o.files_audiotrack[t] = t),
                exist(e[t].lang)
                  ? (o.files_audiotrack[t] = RenameTracks(e[t].lang))
                  : exist(e[t].index) &&
                    (o.files_audiotrack[t] =
                      Lang("audiotrack") + " " + e[t].index),
                exist(o.default_audio) &&
                  o.default_audio == o.files_audiotrack[t] &&
                  (o.current_audiotrack = t);
          log("DASH AudioTrack ", o.current_audiotrack),
            o.controls.AudioTrackChangedNoHand(o.current_audiotrack);
        }
      }
      pjstg.addEventListener("loadstart", onLoadStart),
        pjstg.addEventListener("error", onTagError),
        pjstg.addEventListener("ended", onEnded),
        pjstg.addEventListener("play", onPlay),
        pjstg.addEventListener("pause", onPause),
        pjstg.addEventListener("timeupdate", onTimeupdate),
        pjstg.addEventListener("seeking", onSeeking),
        pjstg.addEventListener("seeked", onSeeked),
        pjstg.addEventListener("loadedmetadata", onMeta),
        pjstg.addEventListener("volumechange", onVolume),
        pjstg.addEventListener("waiting", onWaiting),
        pjstg.addEventListener("durationchange", onDuration),
        pjstg.addEventListener("loadeddata", onLoadedData),
        pjstg.addEventListener("enterpictureinpicture", onPipEnter),
        pjstg.addEventListener("leavepictureinpicture", onPipLeave),
        (this.ratio = function () {
          return pjstg.videoWidth / pjstg.videoHeight;
        });
      var span05 = "<span style='opacity:0.5'>",
        playtry;
      function HlsQualityLevels() {
        if (!pip && 1 == v.hlsquality) {
          var e = hls.levels,
            t = 0;
          if (((o.files_quality = []), 1 < e.length)) {
            for (var i, s, n = 0; n < e.length; n++)
              exist(e[n].height)
                ? ((i = MseRenameQualities(e[n], v.nameofhlsquality)),
                  -1 < o.files_quality.indexOf(i) || 1 == v.hlsaddbitrate
                    ? exist(e[n].bitrate) &&
                      (-1 < (s = o.files_quality.indexOf(i)) &&
                        (o.files_quality[s] +=
                          " " +
                          span05 +
                          " &nbsp;" +
                          parseInt(e[s].bitrate / 1e3) +
                          " " +
                          Lang("kbps") +
                          "</span>"),
                      (o.files_quality[n] =
                        i +
                        " " +
                        span05 +
                        " &nbsp;" +
                        parseInt(e[n].bitrate / 1e3) +
                        " " +
                        Lang("kbps") +
                        "</span>"))
                    : (o.files_quality[n] = i),
                  exist(e[n].audioGroupIds) &&
                    (o.files_quality_ag[n] = e[n].audioGroupIds[0]))
                : exist(e[n].name)
                ? (o.files_quality[n] = e[n].name)
                : (o.files_quality[n] = n),
                exist(v.default_quality) &&
                  0 == t &&
                  v.default_quality == o.files_quality[n] &&
                  (t = n),
                exist(o.default_quality) &&
                  o.default_quality == o.files_quality[n] &&
                  (t = n);
            1 == v.hlsautoquality
              ? (o.files_quality[e.length] = Lang("auto"))
              : ((hls.autoLevelEnabled = 0), (hls.autoLevelCapping = 0)),
              1 == v.hlslowquality || 0 < t
                ? ((hls.autoLevelCapping = 0),
                  "next" == v.hlschangequality || (!o.start && 0 == v.preload)
                    ? (hls.nextLevel = t)
                    : "current" == v.hlschangequality && (hls.currentLevel = t))
                : 1 == v.hlsautoquality
                ? (o.current_quality = hls.levels.length - 1)
                : (o.current_quality = hls.firstLevel),
              HlsUpdateAudio();
          }
          o.controls && o.controls.refresh();
        }
      }
      function HlsUpdateAudio() {
        0 < o.files_quality_ag.length &&
          1 == v.hlsaudio &&
          (HlsAudioTracks(), HlsAudioTrack());
      }
      function HlsAudioTracks() {
        if (!pip && 1 == v.hlsaudio) {
          var e,
            t = hls.audioTracks;
          if (((o.files_audiotrack = []), 1 < t.length))
            for (var i = 0; i < t.length; i++) {
              if (
                ((e = !1),
                exist(t[i].groupId) &&
                  0 < o.files_quality_ag.length &&
                  t[i].groupId != o.files_quality_ag[o.current_quality])
              )
                for (var s = 0; s < o.files_quality_ag.length; s++)
                  o.files_quality_ag[s] == t[i].groupId && (e = !0);
              e ||
                ((o.files_audiotrack[i] = exist(t[i].name)
                  ? RenameTracks(t[i].name)
                  : i),
                exist(v.default_audio) &&
                  v.default_audio == o.files_audiotrack[i] &&
                  ((o.current_audiotrack = i), (hls.audioTrack = i)));
            }
        }
      }
      function HlsAudioTrack() {
        if (!pip) {
          var e = hls.audioTracks,
            t = hls.audioTrack;
          if (
            e[t].groupId &&
            0 < o.files_quality_ag.length &&
            o.files_quality_ag[o.current_quality] != e[t].groupId
          )
            for (var i = 0; i < e.length; i++)
              if (
                e[i].name == e[t].name &&
                e[i].groupId == o.files_quality_ag[o.current_quality]
              ) {
                t = hls.audioTrack = i;
                break;
              }
          (o.current_audiotrack = t),
            log("HLS AudioTrack ", o.current_audiotrack),
            o.controls.AudioTrackChangedNoHand(o.current_audiotrack);
        }
      }
      function RenameTracks(e) {
        var t = e.toLowerCase();
        return (
          "eng" == t || "en" == t
            ? (e = "English")
            : ("rus" != t && "ru" != t) || (e = "Русский"),
          "object" == typeof v.rename_audio &&
            (e = existv(v.rename_audio[e], e)),
          e
        );
      }
      function MseRenameQualities(e, t) {
        var o = e.height + "p";
        return (
          e.height < 200
            ? (o = "160p")
            : 200 <= e.height && e.height <= 300
            ? (o = "240p")
            : 300 < e.height && e.height <= 400
            ? (o = "360p")
            : 400 < e.height && e.height <= 500
            ? (o = "480p")
            : 500 < e.height && e.height <= 600
            ? (o = "540p")
            : 600 < e.height && e.height <= 900
            ? (o = "720p")
            : 900 < e.height && e.height <= 1200
            ? (o = "1080p")
            : 1200 < e.height && e.height <= 1800
            ? (o = "1440p")
            : 1800 < e.height && (o = "2160p"),
          426 == e.width && e.height <= 240
            ? (o = "240p")
            : 640 == e.width && e.height <= 360
            ? (o = "360p")
            : 854 == e.width && e.height <= 480
            ? (o = "480p")
            : 1280 == e.width && e.height <= 720
            ? (o = "720p")
            : 1920 == e.width && e.height <= 1080
            ? (o = "1080p")
            : 2560 == e.width && e.height <= 1440
            ? (o = "1440p")
            : 3840 == e.width && e.height <= 2160 && (o = "2160p"),
          1 == v.settings.customqualities && exist(v.settings["name" + o])
            ? (o = v.settings["name" + o])
            : (1 == t && (o = Lang(o)),
              2 == t &&
                exist(e.bitrate) &&
                (o = parseInt(e.bitrate / 1e3) + " " + Lang("kbps"))),
          o
        );
      }
      function Time() {
        return is_dash ? (dash_created ? dash.time() : 0) : pjstg.currentTime;
      }
      function TagPlay() {
        var e;
        "none" == url ||
          (void 0 !== (e = pjstg.play()) &&
            e
              .then(function () {})
              .catch(function (e) {
                log("playError", e.message),
                  -1 == e.message.indexOf("source") &&
                    -1 == e.message.indexOf("interrupted by") &&
                    (o.system.mobiletv &&
                    -1 != e.message.indexOf("user denied permission")
                      ? (o.system.tv && (is_hls || is_dash)) ||
                        (o.controls.Pause(),
                        o.actions.ShowPoster(),
                        js("autoplay_denied"))
                      : 1 != v.autoplaymute || o.muted
                      ? (o.controls.Pause(), o.actions.ShowPoster())
                      : (o.actions.Mute(), pjstg.play()));
              }));
      }
      function pause() {
        (is_ws ? ws : pjstg).pause();
      }
      function isAuto() {
        var e = !1;
        return (
          is_hls
            ? hls_created && (e = hls.autoLevelEnabled)
            : is_dash &&
              dash_created &&
              (e = dash.getSettings().streaming.abr.autoSwitchBitrate.video),
          e
        );
      }
      function tagSrc() {
        if (o.system.safari) {
          var e = pjstg.textTracks;
          if (e) for (var t = 0; t < e.length; t++) e[t].mode = "disabled";
          if ((e = pjstg.audioTracks))
            for (t = 0; t < e.length; t++) e[t].enabled = 0 == t ? 1 : 0;
          window.WebKitPlaybackTargetAvailabilityEvent &&
            pjstg.addEventListener(
              "webkitplaybacktargetavailabilitychanged",
              function (e) {
                (o.airplay = "available" == e.availability),
                  pip || o.actions.AirplayChanged();
              }
            );
        }
        CheckPip();
      }
      function CheckPip() {
        o.system.webkit &&
          (exist(pjstg.webkitSupportsPresentationMode) &&
            !o.system.iphone &&
            (o.pipwebkit = !0),
          document.pictureInPictureEnabled &&
            !pjstg.disablePictureInPicture &&
            (o.pipwebkit = !0));
      }
      function PipWebkit() {
        o.system.safari
          ? "picture-in-picture" === pjstg.webkitPresentationMode
            ? (pjstg.webkitSetPresentationMode("inline"), (o.ispipkit = !1))
            : (pjstg.webkitSetPresentationMode("picture-in-picture"),
              (o.ispipkit = !0))
          : document.pictureInPictureElement
          ? eval(
              "document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});"
            )
          : eval(
              "pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});"
            );
      }
      function onPipEnter() {
        o.ispipkit = !0;
      }
      function onPipLeave() {
        o.ispipkit = !1;
      }
      function HlsLevelsLength() {
        var e = 0;
        return hls_created && hls.levels && (e = hls.levels.length), e;
      }
      function ObjectFit() {
        pjstg &&
          (1 == v.covervideo || 1 == v.fill
            ? 1 == v.fillvideo || 1 == v.fill
              ? css(pjstg, {
                  "object-fit": "fill",
                })
              : css(pjstg, {
                  "object-fit": "cover",
                })
            : css(pjstg, {
                "object-fit": "contain",
              }));
      }
      function Resize() {
        v.ratio && api("scale", String(v.ratio).replace("/", ":"));
      }
      function DashLevelsLength() {
        var e = 0;
        return (
          dash_created && (e = dash.getBitrateInfoListFor("video").length), e
        );
      }
      function iOSTrackLoaded(e) {
        if (e.target.label && o.sbt)
          for (var t = 0; t < o.files_subtitle.length; t++)
            o.files_subtitle[t] == e.target.label && o.sbt.SetSubtitle(t);
      }
      (this.Play = function () {
        var e = !0;
        is_hls &&
          !hls_started &&
          (hls_created || CreateHLS(!0), hls.startLoad()),
          is_dash && !dash_created && (CreateDASH(!0), (e = !1)),
          is_ws && (ws_created || CreateWS(), ws.play(), (e = !1)),
          "-2000px" == pjstg.style.top && this.AfterVast(),
          e && TagPlay();
      }),
        (this.BeforeVast = function () {
          (o.vastloader || o.vast) &&
            (o.ispipkit && PipWebkit(),
            !o.airplayed &&
              o.system.mobile &&
              o.system.webkit &&
              (pjstg.muted || ((pjstg.muted = !0), (unmuteplease = !0)),
              css(pjstg, {
                position: "absolute",
                left: -2e3,
                top: -2e3,
              }),
              (pause_before_vast = Time()),
              is_ws || pjstg.play(),
              0 == pause_before_vast &&
                0 < o.seekto &&
                (_seekaftervast = o.seekto)));
        }),
        (this.AfterVast = function () {
          o.airplayed ||
            (!o.system.mobile && !o.system.webkit) ||
            (css(pjstg, {
              position: "static",
              left: 0,
              top: 0,
            }),
            exist(v.ratio) && Resize(),
            unmuteplease &&
              (o.muted || (pjstg.muted = !1), (unmuteplease = !1)),
            0 < _seekaftervast &&
              ((o.seekto = _seekaftervast), (_seekaftervast = 0)),
            (pause_before_vast = -1));
        }),
        (this.Pause = function () {
          pause();
        }),
        (this.Toggle = function () {
          (pjstg.paused ? TagPlay : Pause)();
        }),
        (this.Seek = function (e) {
          is_dash && dash_created
            ? dash.seek(e)
            : (is_hls &&
                1 == v.hlsforce &&
                0 < e &&
                isAuto() &&
                ((hls_force = hls.currentLevel), (hls.nextAutoLevel = 0)),
              (pjstg.currentTime = e));
        }),
        (this.Mute = function () {
          pjstg.muted = !0;
        }),
        (this.Unmute = function () {
          pjstg.muted = !1;
        }),
        (this.Volume = function (e) {
          pjstg.volume = e;
        }),
        (this.Gain = function () {
          var e, t, i;
          o.gainedsource != pjstg &&
            (o.audiosrc[pjstg]
              ? ((e = o.audiosrc[pjstg]), (t = o.audioctx[pjstg]))
              : ((window.AudioContext =
                  window.AudioContext || window.webkitAudioContext),
                (e = (t = new AudioContext()).createMediaElementSource(pjstg)),
                (o.audiosrc[pjstg] = e),
                (o.audioctx[pjstg] = t)),
            ((i = t.createGain()).gain.value = v.volumegain),
            e.connect(i),
            i.connect(t.destination),
            (o.gained = !0),
            (o.gainedsource = pjstg));
        }),
        (this.isPlaying = function () {
          return !pjstg.paused;
        }),
        (this.isLive = function () {
          return !(1 != v.live && !is_ws) || is_live;
        }),
        (this.tag = function () {
          return pjstg;
        }),
        (this.nativeControls = function () {
          return (
            attr(pjstg, {
              controls: "1",
            }),
            !0
          );
        }),
        (this.preload = function () {
          attr(pjstg, {
            preload: "metadata",
          }),
            is_hls && !hls_created && CreateHLS(!1),
            is_dash && !dash_created && CreateDASH(!1);
        }),
        (this.status = function () {
          var e = "playing";
          return (
            pjstg.paused && (e = "paused"), pjstg.ended && (e = "ended"), e
          );
        }),
        (this.ChangePip = function (e, t) {
          (pip = e),
            t.appendChild(pjstg),
            (container = t),
            e
              ? (1 != v.pip.nomute
                  ? (pjstg.muted = !0)
                  : o.muted || (pjstg.muted = !1),
                PipSize(),
                0 < o.files_quality.length &&
                  is_hls &&
                  ((pip_quality = o.current_quality),
                  (hls.autoLevelCapping = 0),
                  (hls.currentLevel = 0)))
              : (o.muted || 1 == v.pip.nomute || (pjstg.muted = !1),
                (pjstg.volume = v.volume),
                PlayerSize(),
                0 < o.files_quality.length &&
                  is_hls &&
                  (hls.autoLevelCapping = -1) < pip_quality &&
                  pip_quality < hls.levels.length &&
                  (hls.nextLevel = pip_quality));
        }),
        (this.time = function () {
          return Time();
        }),
        (this.duration = function () {
          var e = pjstg.duration;
          return (
            is_dash && dash_created && (e = dash.duration()),
            exist(v.end) && (e = v.end),
            e == 1 / 0 || isNaN(e) ? 0 : e
          );
        }),
        (this.loaded = function () {
          var e = 0;
          if (pjstg.buffered && 0 < pjstg.buffered.length) {
            for (var t = Time(), o = 0; o < pjstg.buffered.length; o++)
              (t >= pjstg.buffered.start(o) ||
                t >= pjstg.buffered.start(o) - 100) &&
                t <= pjstg.buffered.end(o) &&
                (e = pjstg.buffered.end(o));
            0 == e && (e = pjstg.buffered.end(pjstg.buffered.length - 1));
          }
          return exist(v.end) && e > v.end && (e = v.end), e;
        }),
        (this.auto = function () {
          return isAuto();
        }),
        (this.size = function () {
          return {
            width: pjstg.videoWidth,
            height: pjstg.videoHeight,
          };
        }),
        (this.src = function (e) {
          (url = e),
            2 != o.media_error && (o.media_error = !1),
            is_hls
              ? (is_hls && hls && hls.destroy(), CreateHLS(!0), CheckPip())
              : (attr(pjstg, {
                  src: e,
                  autoplay: 0,
                }),
                tagSrc(),
                pause());
        }),
        (this.airplay = function () {
          pjstg.webkitShowPlaybackTargetPicker();
        }),
        (this.pipwebkit = function () {
          PipWebkit();
        }),
        (this.setDashQuality = function (e) {
          dash_created &&
            ((e = parseInt(e)) == dash.getBitrateInfoListFor("video").length
              ? (o.current_quality = dash.getQualityFor("video"))
              : (dash.updateSettings({
                  streaming: {
                    abr: {
                      autoSwitchBitrate: {
                        audio: !1,
                        video: !1,
                      },
                    },
                  },
                }),
                dash.setQualityFor("video", e),
                dash.setQualityFor("audio", e)));
        }),
        (this.setWsQuality = function (e) {
          o.ws && o.ws.setTracks(ws, e, -1);
        }),
        (this.setWsAudioTrack = function (e) {
          o.ws && o.ws.setTracks(ws, -1, e);
        }),
        (this.setDashAudioTrack = function (e) {
          dash_created &&
            0 < pjstg.buffered.length &&
            dash.setCurrentTrack(dash.getTracksFor("audio")[parseInt(e)]);
        }),
        (this.setHlsQuality = function (e) {
          var t;
          hls_created &&
            ((t = parseInt(e)),
            e == hls.levels.length && ((t = -1), (hls.autoLevelCapping = -1)),
            "current" == v.hlschangequality &&
              (setTimeout(onWaiting, 500), (hls.currentLevel = t)),
            "next" == v.hlschangequality &&
              (log("HLS next level " + t), (hls.nextLevel = t)),
            -1 == t && (o.current_quality = hls.loadLevel),
            HlsUpdateAudio());
        }),
        (this.getHLS = function () {
          return hls;
        }),
        (this.getDASH = function () {
          return dash;
        }),
        (this.HlsLevelsLength = function () {
          return HlsLevelsLength();
        }),
        (this.DashLevelsLength = function () {
          return DashLevelsLength();
        }),
        (this.ObjectFit = function () {
          ObjectFit();
        }),
        (this.resize = function () {
          Resize();
        }),
        (this.setHlsAudioTrack = function (e) {
          hls_created && (hls.audioTrack = parseInt(e));
        }),
        (this.hlsDashSub = function (e, t) {
          "hls" == t &&
            hls_created &&
            _hlssubtracks &&
            _hlssubtracks.HlsSubTrack(e),
            "dash" == t &&
              dash_created &&
              _dashsubtracks &&
              _dashsubtracks.DashSubTrack(e);
        }),
        (this.setSpeed = function (e) {
          e && (pjstg.playbackRate = e);
        }),
        (this.removeTracks = function () {
          for (var e = pjstg.childNodes, t = [], o = 0; o < e.length; o++)
            "track" == e[o].tagName.toLowerCase() &&
              (e[o].removeEventListener("load", iOSTrackLoaded), t.push(e[o]));
          for (o = 0; o < t.length; o++) pjstg.removeChild(t[o]);
        }),
        (this.addTrack = function (e, t, o) {
          var i;
          "" != e &&
            (0 < e.indexOf(" or ") && (e = e.split(" or ")[0]),
            (i = document.createElement("track")).setAttribute("src", e),
            i.setAttribute("label", t),
            i.setAttribute("kind", "subtitles"),
            i.setAttribute("mode", "showing"),
            o && i.setAttribute("default", ""),
            pjstg.appendChild(i),
            i.addEventListener("load", iOSTrackLoaded));
        }),
        (this.errorMessage = function () {
          return error || "";
        }),
        (this.Remove = function () {
          clearInterval(o.dashInterval),
            is_hls && hls && hls.destroy(),
            is_dash && dash && dash.reset(),
            is_ws && ws && ws.stop(),
            pjstg.removeEventListener("error", onTagError),
            pjstg.removeEventListener("ended", onEnded),
            pjstg.removeEventListener("play", onPlay),
            pjstg.removeEventListener("pause", onPause),
            pjstg.removeEventListener("timeupdate", onTimeupdate),
            pjstg.removeEventListener("seeking", onSeeking),
            pjstg.removeEventListener("seeked", onSeeked),
            pjstg.removeEventListener("loadedmetadata", onMeta),
            pjstg.removeEventListener("volumechange", onVolume),
            pjstg.removeEventListener("waiting", onWaiting),
            pjstg.removeEventListener("durationchange", onDuration),
            pjstg.removeEventListener("enterpictureinpicture", onPipEnter),
            pjstg.removeEventListener("leavepictureinpicture", onPipLeave),
            (pjstg.src = ""),
            ("IFRAME" == container.tagName
              ? container.contentDocument.body
              : container
            ).removeChild(pjstg),
            (pjstg = null);
        });
    },
    Controls = function () {
      var b = [],
        butNames = [],
        butPosition = [],
        waiting = !1,
        wait_to,
        toolbarHidden = !1,
        settings,
        playlist,
        _lastactbut;
      o.settings2 && (o.settings2.hide(), (o.settings2 = null)),
        (o.files_speed = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2]),
        1 == v.settings.customspeeds &&
          exist(v.settings.speeds) &&
          ((v.settings.speeds = v.settings.speeds.replace(/\n/gi, "")),
          (o.files_speed = v.settings.speeds.split(","))),
        (o.speed1 =
          -1 < o.files_speed.indexOf("1")
            ? o.files_speed.indexOf("1")
            : o.files_speed.indexOf(1)),
        3 == o.current_speed && (o.current_speed = o.speed1),
        exist(v.settings.scale) || (v.settings.scale = 5),
        (o.files_scale = [
          "+ " + v.settings.scale + "%",
          "&ndash; " + v.settings.scale + "%",
          "100%",
        ]);
      var resizeonwidth = !1,
        stretch_width = 0,
        stretch_width_last = 0,
        stretch_with_volume = !1,
        firstly = !0,
        bg = new ControlsBg(),
        settings,
        order = [],
        _rights = !1,
        _move_rights = !1,
        _max_order = 0,
        _rb = [],
        y;
      for (y in ("controls-right" == v.control_line.position &&
        (v.control_line.position = "controls"),
      v))
        v.hasOwnProperty(y) &&
          0 == y.indexOf("control_") &&
          v[y] &&
          (exist(v[y].order0)
            ? (v[y].order = v[y].order0)
            : (v[y].order0 = v[y].order),
          (order[v[y].order] = y),
          "controls" != v.control_line.position &&
            ("controls-right" == v[y].position
              ? (_rb.push([y, v[y].order]), (_rights = !0))
              : ("controls" != v[y].position && null != v[y].position) ||
                (_rights && (_move_rights = !0))),
          _max_order < v[y].order && (_max_order = v[y].order));
      if (_move_rights) {
        _rb.sort(function (e, t) {
          return e[1] - t[1];
        });
        for (var i = 0; i < _rb.length; i++)
          (order[v[_rb[i][0]].order] = null),
            (v[_rb[i][0]].order = _max_order + 1),
            _max_order++,
            (order[v[_rb[i][0]].order] = _rb[i][0]);
      }
      1 == v.toolbar.hide &&
        1 == v.toolbar.hidedown &&
        ((o.toolbar = createElement("div")),
        o.frame.appendChild(o.toolbar),
        css(o.toolbar, {
          position: "absolute",
          left: 0,
          top: 0,
          width: "100%",
          height: "100%",
          transition: "top 0.3s ease-out",
          "pointer-events": "none",
        }));
      var bg2 = createElement("div");
      (1 == v.toolbar.hide && 1 == v.toolbar.hidedown
        ? o.toolbar
        : o.frame
      ).appendChild(bg2),
        css(bg2, {
          position: "absolute",
          left: 0,
          bottom: 0,
          width: "100%",
          height: v.toolbar.h,
        }),
        (bg2.onclick = function () {
          o.system.mobile || o.actions.ControlsBgClick();
        }),
        o.hidecontrols && (hide2(bg.c()), hide2(bg2));
      for (var i = 1, y, action, lu, z; i < order.length; i++) {
        order[i] &&
          ((y = order[i]),
          y &&
            (o.system.mobile &&
              ("volume" == v[y].action &&
              1 == v.showvolmobile &&
              o.system.android
                ? (v[y].hideoutmute = 0)
                : ("volume" == v[y].action ||
                    ("fullscreen" == v[y].action && v.nativemobile)) &&
                  (v[y].on = 0)),
            o.hidecontrols && (v[y].on = 0),
            1 == v[y].on &&
              ((action = v[y].action),
              "line" == action || "volume" == action
                ? ((b[y] = new ControlLine(y, action)),
                  b[y].Resize(b[y].s("w")))
                : (b[y] = new Control(y)),
              butNames.push(y),
              "title" == b[y].g("action") &&
                "" == b[y].s("text") &&
                (("" != b[y].s("var") && exist(v[b[y].s("var")])) ||
                  b[y].set("display", !1)),
              "custom" == b[y].g("action") &&
                ((lu = b[y].s("linkurl")),
                lu &&
                  0 == lu.indexOf("api:") &&
                  0 < lu.indexOf(",0/1") &&
                  ((z = lu.split(",")),
                  0 == api(z[0].substr(4)) && b[y].CustomSwitch(0))),
              b[y].set("scale", b[y].s("scale")))));
      }
      function ControlX(e) {
        var t,
          i = 0;
        if (e)
          if ("line" == e.g("action"))
            (i = butPosition.left + e.s("marginleft")),
              null != butPosition.rightbs || (butPosition.rightbs = []);
          else if (null != butPosition.rightbs) {
            var s = e.g("width") + e.s("marginright") + e.s("marginleft");
            HideProof(e) && (s = 0),
              1 != e.s("hidden") || e.g("show") || (s = 0),
              0 < e.s("vertical") && (s = 0),
              (i =
                bg.g("w") -
                +v.toolbar.leftandrightpadding -
                s +
                e.g("width") / 2 +
                e.s("marginleft"));
            var n = 0;
            for (
              butPosition.right -= s, n = 0;
              n < butPosition.rightbs.length;
              n++
            ) {
              var a = b[butPosition.rightbs[n]];
              0 < a.s("vertical")
                ? css(a.c(), {
                    left: a.g("x0") - s,
                  })
                : css(a.c(), {
                    left: a.g("x") - s,
                  }),
                a.set("x0", a.g("x"));
            }
            butPosition.rightbs.push(e.g("key")), e.set("rightside", 1);
          } else
            1 != e.s("hidden") || e.g("show")
              ? 0 < e.s("vertical")
                ? (i =
                    butPosition.left + e.s("marginleft") + e.s("marginright"))
                : ((t = !1),
                  "volume" == e.g("action") &&
                    1 == e.s("hide") &&
                    1 == e.s("hideoutmute") &&
                    (o.hidden_volume_over_process || o.hidden_volume_over
                      ? stretch_with_volume ||
                        ((stretch_width -=
                          e.g("width") +
                          e.s("marginleft") +
                          e.s("marginright")),
                        (stretch_with_volume = !0))
                      : (stretch_with_volume = !(t = !0))),
                  HideProof(e) && (t = !0),
                  t
                    ? (i = butPosition.left)
                    : ((butPosition.left +=
                        e.g("width") / 2 + e.s("marginleft")),
                      (i = butPosition.left),
                      (butPosition.left +=
                        e.g("width") / 2 + e.s("marginright"))))
              : "volume" == e.g("action") &&
                1 == e.s("hide") &&
                1 == e.s("hideoutmute") &&
                stretch_with_volume &&
                ((stretch_width +=
                  e.g("width") + e.s("marginleft") + e.s("marginright")),
                (stretch_with_volume = !1));
        return i;
      }
      function ControlCoordinate(e) {
        var t =
            o.fullscreen && 0 == v.toolbar.stretchonfullscreen
              ? o.normal_w
              : o.screen_w,
          i = o.screen_h,
          s = 0;
        e != bg && (s = t / 2 + e.s("marginleft") - e.s("marginright"));
        var n = i / 2,
          a = e.g("width"),
          r = e.g("height"),
          t = e.s("position");
        return (
          -1 < t.indexOf("center") &&
            (s = o.screen_w / 2 + e.s("marginleft") - e.s("marginright")),
          0 == t.indexOf("top") &&
            (n = r / 2 + (e.s("marginproctop") * o.screen_h) / 100),
          0 == t.indexOf("bottom") &&
            (n =
              o.screen_h -
              (e == bg ? r : r / 2) -
              (e.s("marginprocbottom") * o.screen_h) / 100),
          -1 < t.indexOf("right") &&
            (s =
              o.screen_w -
              a / 2 +
              e.s("marginleft") -
              e.s("marginright") -
              (e.s("marginprocright") * o.screen_w) / 100),
          -1 < t.indexOf("left") &&
            (s =
              a / 2 +
              e.s("marginleft") -
              e.s("marginright") +
              (e.s("marginprocleft") * o.screen_w) / 100),
          "timeline" == t &&
            ((s =
              -o.timeline_w / 2 +
              (e.s("marginprocleft") * o.timeline_w) / 100 +
              e.s("marginleft") -
              e.s("marginright")),
            (n =
              -o.timeline_h / 2 -
              (e.s("marginprocbottom") * o.timeline_h) / 100 +
              (e.s("marginproctop") * o.timeline_h) / 100)),
          -1 < t.indexOf("controls") &&
            ((a = ControlX(e)),
            (s = (bg && bg.c() ? int(bg.c().offsetLeft) : 0) + a),
            "controls-right" == t && (s += stretch_width),
            (n =
              "top" == v.toolbar.position
                ? v.toolbar.h / 2 -
                  (v.toolbar_margintop < 0 ? v.toolbar_margintop : 0)
                : i - v.toolbar.h / 2)),
          {
            x: s,
            y: n + e.s("margintop") - e.s("marginbottom"),
          }
        );
      }
      function Resize(e) {
        var t =
          o.fullscreen && 0 == v.toolbar.stretchonfullscreen
            ? o.normal_w
            : o.screen_w;
        o.screen_h;
        css(bg.c(), {
          top:
            ("top" == v.toolbar.position ? 0 : o.screen_h - v.toolbar.h) -
            v.toolbar_margintop,
        }),
          bg.set("y0", o.screen_h - v.toolbar.h - v.toolbar_margintop),
          0 == v.toolbar.stretchonfullscreen &&
            bg &&
            (css(bg.c(), {
              width: t,
              left: 0,
              "margin-left": 0,
            }),
            bg.set("w", t),
            o.fullscreen &&
              css(bg.c(), {
                left: "50%",
                "margin-left": -t / 2,
              }));
        t = !(butPosition = {
          left: +v.toolbar.leftandrightpadding,
          right: bg.g("w") - +v.toolbar.leftandrightpadding,
        });
        bg.g("show") || (bg.set("display", !0), (t = !0));
        for (var i, s = 0; s < butNames.length; s++) {
          var n,
            a = butNames[s];
          !b[a] ||
            ((n = ControlCoordinate(b[a])) &&
              ("position" == b[a].s("animation") &&
                ((b[a].g("x0") == n.x && b[a].g("y0") == n.y) || killMotion(a)),
              b[a].set("x0", n.x),
              b[a].set("y0", n.y),
              1 != b[a].s("hidden") || b[a].g("show") || e
                ? css(b[a].c(), {
                    position: "absolute",
                    left: b[a].g("x0"),
                    top: b[a].g("y0"),
                  })
                : HidePositionControl(b[a])));
        }
        for (a in (t && bg.set("display", !1), (stretch_width = 0), b))
          b.hasOwnProperty(a) &&
            ("controls-right" == b[a].s("position") &&
              "line" != b[a].g("action") &&
              -1 < stretch_width &&
              (stretch_width = butPosition.right - butPosition.left),
            "line" == b[a].g("action") &&
              bg &&
              (1 == b[a].s("customwidth")
                ? (i = b[a].s("w"))
                : -1 < b[a].s("position").indexOf("controls")
                ? ((i =
                    butPosition.right -
                    butPosition.left -
                    b[a].s("marginleft") -
                    b[a].s("marginright")),
                  css(b[a].c(), {
                    left:
                      int(bg.c().offsetLeft) +
                      butPosition.left +
                      b[a].s("marginleft") +
                      i / 2,
                  }),
                  (stretch_width = -1))
                : ((i =
                    bg.g("w") - b[a].s("marginleft") - b[a].s("marginright")),
                  css(b[a].c(), {
                    left: int(bg.c().offsetLeft) + b[a].s("marginleft") + i / 2,
                  })),
              b[a].set("x0", b[a].g("x")),
              b[a].Resize(i)));
        settings && ResizeSettings(settings),
          playlist && ResizeSettings(playlist),
          (resizeonwidth ||
            o.fullscreen ||
            stretch_width_last != stretch_width) &&
            ShowOrHide();
      }
      function HidePositionControl(e) {
        var t = 0,
          i = 0;
        -1 < e.s("position").indexOf("right") &&
          -1 == e.s("position").indexOf("controls") &&
          (t = o.screen_w + e.g("width") + 10),
          -1 < e.s("position").indexOf("left") && (t = -e.g("width") - 10),
          -1 < e.s("position").indexOf("top") && (i = 2 * -e.g("height")),
          (-1 < e.s("position").indexOf("bottom") ||
            -1 < e.s("position").indexOf("controls")) &&
            (i = o.screen_h + e.g("height") + e.g("width") + 10),
          0 < t &&
            css(e.c(), {
              left: t,
            }),
          0 < i &&
            css(e.c(), {
              top: i,
            });
      }
      function ResizeSettings(e) {
        var t = -2e3;
        e.resizePlaylist();
        var i =
          o.screen_h -
          v.toolbar.h * (-1 < e.s("position").indexOf("top") ? 1 : 2) -
          (o.fullscreen && !o.system.mobile
            ? +e.s("hmaxk") + 100
            : e.s("hmaxk"));
        i < 100 && (i = 100),
          css(e.c(), {
            "max-height": i,
          }),
          e.co() &&
            css(e.co(), {
              "max-height": i,
            }),
          e.g("show") &&
            ((t =
              o.screen_h / 2 -
              e.g("height") / 2 +
              e.s("margintop") -
              e.s("marginbottom")),
            -1 < e.s("position").indexOf("top") &&
              (t = e.s("margintop") - e.s("marginbottom")),
            -1 < e.s("position").indexOf("bottom") &&
              (t =
                o.screen_h -
                v.toolbar.h -
                e.g("height") +
                e.s("margintop") -
                e.s("marginbottom")),
            t < 0 && (t = 0)),
          -1 < e.s("position").indexOf("right")
            ? css(e.c(), {
                position: "absolute",
                right: e.s("marginright") - e.s("scrollwidth"),
                top: t,
              })
            : -1 < e.s("position").indexOf("left")
            ? css(e.c(), {
                position: "absolute",
                left: e.s("marginleft"),
                top: t,
              })
            : "playlist" == e.g("key") && 1 == e.s("floatleft")
            ? css(e.c(), {
                position: "absolute",
                left:
                  o.screen_w / 2 -
                  e.g("width") / 2 +
                  e.s("marginleft") / 2 -
                  e.s("marginright") / 2,
                top: t,
              })
            : ((i =
                o.screen_w / 2 -
                e.g("width") / 2 +
                e.s("marginleft") -
                e.s("marginright")),
              css(e.c(), {
                position: "absolute",
                left: 0 < i ? i : 0,
                top: t,
              })),
          e.Arrows();
      }
      function Action(but, type) {
        (o.acted = !0), (_lastactbut = but);
        var a = but.g("action"),
          x;
        if (
          ("play" == a
            ? (o.actions.Play(),
              1 == v.hotkey.on &&
                1 == v.hotkey.icons &&
                1 == v.hotkey.playiconbut &&
                PluginHotIcon("play", 1))
            : ("pause" == a &&
                (o.actions.Pause(),
                1 == v.hotkey.on &&
                  1 == v.hotkey.icons &&
                  1 == v.hotkey.playiconbut &&
                  PluginHotIcon("play", 0)),
              "stop" == a && o.actions.StopMedia()),
          "back" == a && o.actions.Seek(0, !1),
          "fullscreen" == a
            ? o.casting || o.actions.Fullscreen()
            : "normalscreen" == a && o.actions.Normalscreen(),
          "line" == a)
        ) {
          var ld = o.media.duration(),
            lt = but.g("click") * ld;
          if (
            (0 < v.delete &&
              ((ld -= v.delete), (lt = but.g("click") * ld + v.delete)),
            0 < v.seekwindow && v.seekwindow / ld <= 1 - but.g("click"))
          )
            return;
          o.actions.Seek(lt, !0),
            o.continue &&
              (o.continue.write(lt, ld), 0 < o.seekto && (o.seekto = void 0));
        }
        if (
          ("volume" == a &&
            ((x = but.g("click")),
            x < 0.02 && (x = 0),
            1 < x && (x = 1),
            "speed" == but.s("customline")
              ? ((x = parseFloat(x * o.files_speed.slice(-1)[0]).toFixed(1)),
                o.actions.SetSpeed(x, 1))
              : (o.storage &&
                  1 == v.volumestore &&
                  (localStorage.setItem("pljsvolume", x),
                  0 < but.g("click") || o.system.iphone || 0 == v.mutestore
                    ? localStorage.removeItem("pljsmute")
                    : localStorage.setItem("pljsmute", 1)),
                o.actions.Volume(x))),
          "mute" == a
            ? (o.storage &&
                !o.system.iphone &&
                1 == v.mutestore &&
                localStorage.setItem("pljsmute", 1),
              o.actions.Mute(),
              1 == v.hotkey.icons &&
                1 == v.hotkey.muteiconbut &&
                PluginHotIcon("mute", 0))
            : "unmute" == a &&
              (o.storage && localStorage.removeItem("pljsmute"),
              o.actions.Unmute(),
              1 == v.hotkey.icons &&
                1 == v.hotkey.muteiconbut &&
                PluginHotIcon("mute", 1)),
          0 == a.indexOf("time") && (but.isOn() ? but.Off() : but.On()),
          "rotate" == a && o.media.Rotate(),
          "scale+" == a && o.media.Scale(0.1),
          "scale-" == a && o.media.Scale(-0.1),
          "scale" == a && o.media.Scale(0),
          "live" == a &&
            (api("restart"), but.set("iconopacity", 1), but.set("saturate", 1)),
          "share" == a && (js("share"), ShowShare()),
          "settings" == a &&
            settings &&
            (settings.g("show") ? settings.hide() : settings.show()),
          "playlist" == a)
        ) {
          if (o.overopentimeout == a) return;
          exist(v.playlist) &&
            (playlist.g("show")
              ? playlist.hide()
              : setTimeout(function () {
                  playlist.show();
                }, 100));
        }
        if (
          ("next" == a && o.controls.PlaylistNext(),
          "prev" == a && o.controls.PlaylistPrev(),
          "custom" == a && 1 == but.s("link") && "" != but.s("linkurl"))
        ) {
          var x = trim(but.s("linkurl"));
          if (o.overopentimeout != a + x) {
            -1 < x.indexOf("{time}") &&
              (x = x.replace(
                "{time}",
                exist(o.continue) ? o.continue.flag().t : o.media.time()
              )),
              -1 < x.indexOf("{file}") &&
                (x = x.replace("{file}", o.media.currentFile())),
              -1 < x.indexOf("{title}") &&
                (x = x.replace("{title}", v.title.replace(/,/gi, " "))),
              "airplay" == x && o.media.Airplay(),
              "seektome" == x &&
                (o.actions.Seek(
                  (but.s("marginprocleft") * o.media.duration()) / 100
                ),
                o.play || o.actions.Play()),
              1 == but.s("linkpause") && o.actions.Pause();
            var y = x.split(","),
              bl;
            if (0 == x.indexOf("api:"))
              for (var z = x.substr(4).split(";"), i = 0; i < z.length; i++) {
                var ss,
                  img,
                  y = z[i].split(",");
                1 < y.length
                  ? ("seek" == y[0] &&
                      1 == v.hotkey.icons &&
                      1 == v.hotkey.seekiconbut &&
                      PluginHotIcon("seek", 0 < y[1] ? 1 : 0),
                    api(y[0], y[1], but),
                    "0/1" == y[1] && reRightMenu())
                  : "screenshot" == y[0] && 1 == v.ssfly
                  ? ((ss = api(y[0])),
                    ss
                      ? -1 < ss.indexOf("data") &&
                        ((img = document.createElement("img")),
                        img.setAttribute("src", ss),
                        css(img, {
                          position: "fixed",
                          right: exist(v.ssflyp) ? v.ssflyp : 20,
                          bottom: exist(v.ssflyp) ? v.ssflyp : 20,
                          width: 0,
                          transition:
                            "width 0.5s cubic-bezier(.75,-0.5,0,1.75)",
                        }),
                        (img.style.zIndex = 1001),
                        document.body.appendChild(img),
                        setTimeout(function () {
                          css(img, {
                            width: exist(v.ssflyw) ? v.ssflyw : 200,
                          });
                        }, 1),
                        (img.onclick = function () {
                          this.parentNode.removeChild(this);
                        }))
                      : log(y[0] + " error"))
                  : api(y[0]);
              }
            else
              0 == x.indexOf("js:") &&
                (0 < x.indexOf("(") && 0 < x.indexOf(")")
                  ? eval(x.substr(3))
                  : eval(
                      y[0].substr(3) +
                        "(" +
                        (exist(y[1]) ? '"' + y[1] + '"' : "") +
                        (exist(y[2]) ? ',"' + y[2] + '"' : "") +
                        ")"
                    )),
                0 == x.indexOf("event:") &&
                  JsEvent(x.substr(6), o.media.time()),
                0 == x.indexOf("share:") && o.share && o.share.api(x.substr(6)),
                0 == x.indexOf("effect:") &&
                  o.effects &&
                  api("effect", x.substr(7)),
                (0 != x.indexOf("http") &&
                  0 != x.indexOf("/") &&
                  0 != x.indexOf("?") &&
                  0 != x.indexOf("url:")) ||
                  (0 == x.indexOf("url:") && (x = x.substr(4)),
                  window.open(x, but.s("linktarget"))),
                0 == x.indexOf("download") && o.actions.Download(),
                "api:pipwebkit" == x && o.media.PipWebkit();
            if (-1 < x.indexOf("settings#") && settings) {
              var si = x.substr(9).split(",");
              if (settings.g("show") && settings.g("open") == si[0])
                settings.hide();
              else
                for (var i = 0; i < si.length; i++)
                  0 == i && settings.show(), settings.open(si[i]);
            }
            -1 < x.indexOf("settings:") &&
              1 == v.settings.combined &&
              (o.settings2 || (o.settings2 = new PluginSettings2()),
              "over" == type ? o.settings2.show(x) : o.settings2.toggle(x)),
              "unblock" == x &&
                (o.actions.RemoveCurtain(),
                (o.stopkeys = 0),
                but.set("hide2"),
                (bl = FindBut("linkurl", "block")),
                bl && bl.set("hide2")),
              "block" == x &&
                (but.UpdateText("OK"),
                but.s("linkurl2") &&
                  (window.location.href = trim(but.s("linkurl2"))));
          }
        }
      }
      function TitlePl() {
        for (var e in b)
          b.hasOwnProperty(e) &&
            "custom" == b[e].g("action") &&
            "text" == b[e].s("type") &&
            b[e].RenewFromTitle(!0);
      }
      function ShowShare() {
        exist(o.share) && o.share.Show();
      }
      function CustomTextButs() {
        if (v.customtext && "object" == typeof v.customtext)
          for (var e in v.customtext)
            v.customtext.hasOwnProperty(e) && CustomText(e, v.customtext[e]);
      }
      function CustomText(e, t) {
        for (var o in b)
          b.hasOwnProperty(o) &&
            "custom" == b[o].g("action") &&
            "text" == b[o].s("type") &&
            b[o].s("dom") == e &&
            ((b[o].g("show") && 1 != b[o].s("hidden")) ||
              (b[o].set("unhidden"), b[o].set("display", !0)),
            b[o].UpdateText(t));
      }
      function ShowOrHide() {
        for (var e in b)
          b.hasOwnProperty(e) &&
            "buffer" != b[e].g("action") &&
            ShowOrHideProcessor(b[e]);
        ShowOrHideProcessor(bg),
          stretch_width_last != stretch_width &&
            ((stretch_width_last = stretch_width), Resize()),
          1 == v.toolbar.hide &&
            1 == v.toolbar.hidedown &&
            ToolbarDown(
              !o.starttimeout &&
                !o.mouseHere &&
                !o.fullscreen &&
                o.play &&
                1 != v.toolbar.hidejustfull &&
                !o.casting
            );
      }
      function ShowForce() {
        var e = toolbarHidden && 1 == v.toolbar.hidewithoutmoving;
        if (
          (o.play ||
            1 != v.toolbar.hide ||
            1 != v.toolbar.hideonpause ||
            (e = !1),
          e)
        ) {
          for (var t in b)
            b.hasOwnProperty(t) &&
              "buffer" != b[t].g("action") &&
              ShowOrHideProcessor(b[t], !1);
          css(o.frame, {
            cursor: "default",
          }),
            (o.fcdef = !0),
            ShowOrHideProcessor(bg, !1),
            bg.g("show") && ToolbarShow(),
            ToolbarDown(!1);
        }
      }
      function HideForce() {
        var e =
          o.play &&
          1 == v.toolbar.hidewithoutmoving &&
          !o.mouseDown &&
          !o.controlover;
        if (
          (o.play ||
            1 != v.toolbar.hide ||
            1 != v.toolbar.hideonpause ||
            (e = !0),
          settings && settings.g("show") && o.setaction && (e = !1),
          e)
        ) {
          for (var t in b)
            b.hasOwnProperty(t) &&
              "buffer" != b[t].g("action") &&
              ShowOrHideProcessor(b[t], !0);
          ShowOrHideProcessor(bg, !0),
            bg.g("show") ||
              ((toolbarHidden = !0),
              o.media.ToolbarHide(),
              o.play &&
                (css(o.frame, {
                  cursor: "none",
                }),
                (o.fcdef = !1))),
            ToolbarDown(!0);
        }
      }
      function HideInterval() {
        1 == v.toolbar.hidewithoutmoving &&
          (1 != v.toolbar.hidejustfull ||
            o.fullscreen ||
            o.fullscreen_process) &&
          (clearInterval(o.toolbarInterval),
          (o.toolbarInterval = setInterval(
            HideForce,
            1e3 *
              (0 < v.toolbar.hideleavetimeout
                ? v.toolbar.hideleavetimeout
                : v.toolbar.hidetimeout)
          )));
      }
      function ShowOrHideProcessor(e, t) {
        var i = !1,
          s = !1,
          n = !1;
        1 == v.toolbar.hide
          ? (o.starttimeout ||
            o.mouseHere ||
            o.fullscreen ||
            !o.play ||
            1 == v.toolbar.hidejustfull ||
            o.casting
              ? (s = !(i = !1))
              : (n = !(s = !(i = !0))),
            exist(t) && !o.casting && (s = !(i = t)),
            1 != v.toolbar.hide ||
              1 != v.toolbar.hidedown ||
              (0 != e.s("position").indexOf("controls") &&
                "line" != e.s("action")) ||
              (s = !(i = !1)),
            1 != v.toolbar.hideonpause || o.play || (n = s = !(i = !0)))
          : 1 != e.s("hide") && (s = !0),
          s &&
            !o.fcdef &&
            (css(o.frame, {
              cursor: "default",
            }),
            (o.fcdef = !0));
        var a = e.g("action");
        "custom" == a &&
          -1 == e.s("position").indexOf("controls") &&
          (s = !(i = !1)),
          o.casting &&
            "line" == a &&
            -1 == o.media.duration() &&
            (s = !(i = !0));
        var r = !1,
          l = HideProof(e);
        1 == e.s("hide") &&
          (1 == e.s("hideonleaveandplay") &&
            (n || t || (o.play && !o.mouseHere)) &&
            (n || t) &&
            (l = !0),
          1 == e.s("hidelap") && o.play && !o.mouseHere && (l = !0),
          (1 != e.s("hideonwidth") &&
            1 != e.s("hideoverwidth") &&
            1 != e.s("hideonfullscreen")) ||
            (resizeonwidth = !0)),
          l ? (s = !(i = !0)) : i || (s = !0),
          "volume" == e.s("action") &&
            1 == e.s("hide") &&
            1 == e.s("hideoutmute") &&
            ((s = !(i = !0)),
            n ||
            (!o.hidden_volume_over && !o.hidden_volume_over_process) ||
            t ||
            1 == e.s("hiddenwidth")
              ? (r = !0)
              : (s = !(i = !1))),
          (o.nativecontrols ||
            (!o.start &&
              1 == v.toolbar.hide &&
              1 == v.toolbar.hideuntilstarted) ||
            (!o.metadata &&
              1 == v.toolbar.hide &&
              1 == v.toolbar.hideuntilmeta)) &&
            ((-1 < e.s("position").indexOf("controls") ||
              -1 < e.s("position").indexOf("bottom")) &&
              (s = !(i = !0)),
            1 != v.toolbar.hidejustfull || o.fullscreen || (s = !(i = !1))),
          settings &&
            settings.g("show") &&
            1 != v.settings.always &&
            (t = n = !1),
          "share" == a &&
            exist(o.share) &&
            o.share.empty() &&
            ((s = !(i = !0)), e.set("animation", "none")),
          ("playlist" != a &&
            "next" != a &&
            "prev" != a &&
            1 != e.s("hidewithoutplaylist")) ||
            (playlist
              ? playlist.empty() &&
                0 != e.s("hidewithoutplaylist") &&
                ((s = !(i = !0)), e.set("animation", "none"))
              : (s = !(i = !0))),
          1 == o.hideall && (s = !(i = !0)),
          !r ||
            ((r = ControlCoordinate(e)) &&
              (0 < r.y && e.set("y0", r.y),
              css(e.c(), {
                position: "absolute",
                top: e.g("y0"),
              }))),
          i && HideControl(e, !!firstly),
          s && ShowControl(e),
          e == bg &&
            (!i && s && (ToolbarShow(), show2(bg2), (toolbarHidden = !1)),
            i &&
              !s &&
              (o.media.ToolbarHide(),
              SettingsClose(),
              hide2(bg2),
              (toolbarHidden = !0)),
            playlist &&
              (1 != v.playlist.always ||
                playlist.empty() ||
                (s || o.nativecontrols
                  ? (1 == v.playlist.alwaysnotfullscreen && o.fullscreen) ||
                    playlist.g("show") ||
                    (1 == v.playlist.alwaysjustpause && o.play) ||
                    playlist.show()
                  : i && playlist.g("show") && playlist.hide())));
      }
      function HideProof(e) {
        var t,
          i = !1,
          s = e.g("action");
        return (
          1 == e.s("hide") &&
            (1 == e.s("hideonplay") && o.play && (i = !0),
            1 == e.s("hideonpause") && (o.play || (i = !0)),
            1 == e.s("hideondesktop") && o.system.desktop && (i = !0),
            1 == e.s("hideonmobile") && o.system.mobile && (i = !0),
            1 == e.s("hideoverwidth") &&
              (o.screen_w > e.s("hideoverwidthlimit")
                ? (e.set("hiddenwidth", 1), (i = !0))
                : e.set("hiddenwidth", 0)),
            1 == e.s("hideonwidth") &&
              (o.screen_w <= e.s("hideonwidthlimit")
                ? (e.set("hiddenwidth", 1), (i = !0))
                : e.set("hiddenwidth", 0)),
            1 == e.s("hideafterstart") && o.start && (i = !0),
            1 == e.s("hide0timestore") &&
              ((!o.start && o.continue && !o.media.isLive()) || (i = !0),
              o.continue && 0 == o.continue.flag().t && (i = !0)),
            1 == e.s("hideuntilstarted") && (o.start || (i = !0)),
            0 < e.s("hideuntilto") && (i = !0),
            1 == e.s("hideonvar") &&
              exist(e.s("hidevar")) &&
              options[e.s("hidevar")] &&
              (i = !0),
            1 == e.s("hideuntilstartedios") &&
              o.system.ios &&
              ((o.start && !o.newfile) || (i = !0)),
            1 == e.s("hideuntilended") && (o.media.ended() || (i = !0)),
            1 == e.s("hideonvod") && (o.media.isLive() || (i = !0)),
            1 == e.s("hideonleave") && (o.mouseHere || (i = !0)),
            1 == e.s("hidenormscreen") && (o.fullscreen || (i = !0)),
            1 == e.s("hideonfullscreen") && o.fullscreen && (i = !0),
            1 == e.s("hideonunmute") && (o.muted || (i = !0)),
            1 == e.s("hideonlive") &&
              o.media.isLive() &&
              -1 == o.media.currentFile().indexOf("?DVR") &&
              (i = !0),
            1 == e.s("hidewithposter") && isVisible(o.poster) && (i = !0),
            1 == e.s("hideuntilmeta") && (o.metadata || (i = !0)),
            1 == e.s("hideonmeta") && o.metadata && (i = !0),
            1 == e.s("hidemini") && o.mini && (i = !0),
            1 == e.s("hidenomini") && (o.mini || (i = !0)),
            1 == e.s("hideafterclick") && e.g("clicked") && (i = !0),
            1 == e.s("hidenoab") && (o.ab || (i = !0)),
            1 == e.s("hideab") && o.ab && (i = !0),
            1 == e.s("hideonyoutube") &&
              1 == v.preload &&
              1 == v.screenclick &&
              ("youtube" != o.file_type ||
                exist(v.poster) ||
                0 != v.youtubeposter ||
                (o.start && "ended" != o.media.status()) ||
                "" == v.poster ||
                (i = !0))),
          "custom" == s &&
            e.s("linkurl") &&
            (("api:airplay" != e.s("linkurl") && "airplay" != e.s("linkurl")) ||
              o.airplay ||
              o.airplayed ||
              (i = !0),
            "api:pipwebkit" == e.s("linkurl") &&
              ((o.pipwebkit && (o.start || 0 != v.preload)) || (i = !0)),
            "api:unfixing" == e.s("linkurl") && (o.mini || (i = !0)),
            -1 < e.s("linkurl").indexOf("captions") &&
              (o.captions || (i = !0))),
          ("playlist" != s && "next" != s && "prev" != s) ||
            (playlist && !playlist.empty()) ||
            (i = !0),
          "settings" == s &&
            (settings
              ? settings.empty() && ((i = !0), e.set("animation", "none"))
              : (i = !0)),
          "text" == e.g("type") && 0 == e.g("length") && (i = !0),
          e.g("settings#") && (e.g("set#visible") || (i = !0)),
          1 == e.s("chromecast") &&
            ((t = document.getElementById("pjs_cast_button_" + v.id)),
            ((0 != o.media.duration() || 0 != o.media.time()) &&
              o.tagvideo &&
              isVisible(t) &&
              o.cast_available) ||
              (i = !0)),
          1 == e.s("hidetime") && (i || e.set("hidetime", 1)),
          "duration" == s && o.media.isLive() && (i = !0),
          "control_start" == e.g("key") &&
            o.system.mobile &&
            o.nativecontrols &&
            o.system.android &&
            (i = !0),
          i
        );
      }
      function HideControl(e, t) {
        e.g("show") &&
          (o.fullscreen_process || "none" == e.s("animation") || t
            ? e.set("display", !1)
            : HideAnimate(e),
          e.set("show", !1));
      }
      function ShowControl(e) {
        e.g("show") ||
          ("none" == e.s("animation") || o.fullscreen_process
            ? (e.set("display", !0),
              o.fullscreen_process && e.set("opacity", 1),
              "volume" == e.g("action") &&
                o.hidden_volume &&
                HidePositionControl(e))
            : ShowAnimate(e),
          "volume" == e.s("action") &&
            o.controls.Volume(o.muted ? 0 : v.volume),
          "line" == e.s("action") && o.actions.Loading(),
          e.set("show", !0));
      }
      function HideAnimate(e) {
        killMotion(e.g("key"));
        var t = "alpha|",
          i = "0|",
          s = e.s("animation"),
          n = e.s("position");
        "scale" == s && ((t += "scale|"), (i += "0|")),
          "position" == s &&
            (-1 < n.indexOf("right") &&
              -1 == n.indexOf("controls") &&
              ((t += "x|"), (i += int(o.screen_w + e.g("width")) + "|")),
            -1 < n.indexOf("left") &&
              ((t += "x|"), (i += int(-e.g("width")) + "|")),
            -1 < n.indexOf("top") &&
              ((t += "y|"), (i += "0|" + -e.g("height") + "|")),
            (-1 < n.indexOf("bottom") ||
              -1 < n.indexOf("controls") ||
              "timeline" == n) &&
              ((t += "y|"),
              "line" == e.g("action") || "volume" == e.g("action")
                ? (i +=
                    int(
                      o.screen_h +
                        e.s("h") +
                        (e.s("h") < 20 ? 20 - e.s("h") : 0)
                    ) + "|")
                : (i += int(o.screen_h + e.g("height")) + "|")),
            "center" == n && ((t += "scale|"), (i += "0|")));
        new Motion({
          mc: e,
          me: e.g("key"),
          type: t.substr(0, t.length - 1),
          to: i.substr(0, i.length - 1),
          hide: 1,
        });
      }
      function ShowAnimate(e) {
        killMotion(e.g("key"));
        var t = "",
          o = "",
          i = e.s("animation"),
          s = e.s("position");
        1 != e.g("opacity") &&
          ((t = "alpha|"),
          (o = ("bg" == e.g("key") ? v.toolbar.a : "1") + "|")),
          "scale" == i &&
            e.g("scaleX") != e.s("scale") &&
            (e.set("scale", 0), (t += "scale|"), (o += e.s("scale") + "|")),
          "position" == i &&
            ("center" == s
              ? e.g("scaleX") != e.s("scale") &&
                ((t += "scale|"), (o += e.s("scale") + "|"))
              : -1 < s.indexOf("controls")
              ? e.g("y") != e.g("y0") && ((t += "y|"), (o += e.g("y0") + "|"))
              : ((t += "x|y|"), (o += e.g("x0") + "|" + e.g("y0") + "|"))),
          "" != t && "" != o
            ? new Motion({
                mc: e,
                me: e.g("key"),
                type: t.substr(0, t.length - 1),
                to: o.substr(0, o.length - 1),
                show: 1,
              })
            : e.set("display", !0);
      }
      function ToolbarDown(e) {
        1 == v.toolbar.hide &&
          (e && SettingsClose(),
          1 == v.toolbar.hidedown &&
            (o.play || 1 != v.toolbar.hideonpause || (e = !0),
            e &&
              !o.toolbarisdown &&
              css(o.toolbar, {
                top: bg.h(),
              }),
            !e &&
              o.toolbarisdown &&
              css(o.toolbar, {
                top: 0,
              }),
            (o.toolbarisdown = e)));
      }
      function ToolbarShow() {
        (toolbarHidden = !1),
          o.media.ToolbarShow(),
          o.resizeonmouse &&
            ((o.resizeonmouse = !1), Resize(), setTimeout(Resize, 300));
      }
      function UpdateTime(e, t, o) {
        0 < v.delete && ((t -= v.delete), (o -= v.delete));
        var i = Time(t);
        "1" == e.s("inversetime") && (i = Time(o - t)),
          "1" == e.s("showduration") &&
            ("1" == e.s("showboth")
              ? (i += 0 < o ? " " + Lang(e.s("separator")) + " " + Time(o) : "")
              : 0 == t && (i = Time(o))),
          e.UpdateText(i);
      }
      function Waiting() {
        var e;
        waiting ||
          (js("buffering"),
          (e = FindBut("action", "buffer")) && (e.Buffer(), (waiting = !0)));
      }
      function Volumescrolled() {
        var e = FindBut("linkurl", "volume scroll");
        e && (e.UpdateText(""), e.set("hide2"), clearTimeout(o.volumescroll));
      }
      function SettingsClose(e) {
        settings && settings.g("show") && settings.hide(e),
          o.settings2 && o.settings2.hide();
      }
      function PlaylistControls() {
        for (var e in b)
          b.hasOwnProperty(e) &&
            ("next" == b[e].g("action") &&
              css(b[e].c(), {
                opacity: playlist.PlaylistNextExist() ? 1 : 0.5,
              }),
            "prev" == b[e].g("action") &&
              css(b[e].c(), {
                opacity: playlist.PlaylistPrevExist() ? 1 : 0.5,
              }));
      }
      function SpeedChanged() {
        if (o.line_speed) {
          var e,
            t = o.files_speed.slice(-1)[0];
          for (e in b)
            b.hasOwnProperty(e) &&
              ("speed" == b[e].s("customline") &&
                o.custom_speed &&
                b[e].UpdatePlay(o.custom_speed, t),
              "api:speed,1.0" == b[e].s("linkurl") &&
                b[e].UpdateVolume(
                  parseFloat(o.custom_speed / t, 1).toFixed(1)
                ));
        }
      }
      function FindBut(e, t) {
        for (var o in b) if (b.hasOwnProperty(o) && b[o].s(e) == t) return b[o];
      }
      function KeyPlusUp(e) {
        "next" == e && (o.playlist ? o.controls.PlaylistNext() : (e = "seek")),
          "seek" == e &&
            0 < o.media.duration() &&
            o.media.time() + parseFloat(v.hotkey.seek) < o.media.duration() &&
            o.actions.Seek(o.media.time() + parseFloat(v.hotkey.seek), !0),
          "volume" == e &&
            (o.actions.Volume(parseFloat(v.volume) + parseFloat(v.hotkey.vol)),
            event.preventDefault()),
          "scale" == e &&
            (o.media.scale(v.hotkey.scale / 100), event.preventDefault()),
          1 == v.hotkey.icons && PluginHotIcon(e, 1);
      }
      function KeyPlusDown(e) {
        "next" == e && (o.playlist ? o.controls.PlaylistPrev() : (e = "seek")),
          "seek" == e &&
            0 < o.media.duration() &&
            o.start &&
            o.actions.Seek(
              0 <= o.media.time() - v.hotkey.seek
                ? o.media.time() - v.hotkey.seek
                : 0,
              !0
            ),
          "volume" == e &&
            (o.actions.Volume(parseFloat(v.volume) - parseFloat(v.hotkey.vol)),
            event.preventDefault()),
          "scale" == e &&
            (o.media.scale(-v.hotkey.scale / 100), event.preventDefault()),
          1 == v.hotkey.icons && PluginHotIcon(e, 0);
      }
      exist(v.settings) &&
        ("function" == typeof Settings
          ? ((settings = new Settings("settings")),
            1 == v.settings.always ? settings.show() : settings.hide())
          : (o.noset = !0)),
        exist(v.playlist) &&
          "function" == typeof Settings &&
          ((playlist = new Settings("playlist")),
          exist(o.playlist)
            ? (playlist.updatePlaylist(o.playlist),
              0 != v.playlist.openplaylistbefore &&
              exist(v.playlist.openplaylistbefore)
                ? playlist.show()
                : 0 == v.playlist.always && playlist.hide())
            : playlist.hide(1),
          PlaylistControls()),
        o.shareme && (o.share = new Share()),
        CustomTextButs(),
        Resize(!0),
        ShowOrHide(),
        SpeedChanged(),
        (firstly = !1),
        (this.ControlClick = function (e) {
          var t = b[e],
            i = t.g("action");
          i &&
            ((e = new Date()),
            (o.clicktime = e.getTime()),
            i && "" != i && Action(t));
        }),
        (this.toggleControl = function (e, t, o) {
          for (var i in b)
            b.hasOwnProperty(i) &&
              b[i].s(e) == t &&
              b[i].set(o ? "show2" : "hide2");
        }),
        (this.butByS = function (e, t) {
          return FindBut(t, e);
        }),
        (this.title = function (e) {
          for (var t in b)
            b.hasOwnProperty(t) &&
              "title" == b[t].g("action") &&
              ((b[t].s("var") != e && "title" != e) ||
                ("" != v[e] || "" != b[t].s("icon")
                  ? b[t].set("display", !0)
                  : b[t].set("display", !1),
                b[t].UpdateText(v[e])));
          TitlePl();
        }),
        (this.titlepl = function () {
          TitlePl();
        }),
        (this.resizetext = function () {
          for (var e in b)
            b.hasOwnProperty(e) &&
              "custom" == b[e].g("action") &&
              "text" == b[e].s("type") &&
              b[e].ResizeText();
        }),
        (this.showShare = function () {
          ShowShare();
        }),
        (this.updateTitle = function () {
          if ("" != v.title)
            for (var e in b) {
              var t;
              b.hasOwnProperty(e) &&
                "title" == b[e].g("action") &&
                ((t = !1),
                b[e].g("show") || ((t = !0), b[e].set("display", !0)),
                b[e].UpdateText(v.title),
                t && b[e].set("display", !1));
            }
        }),
        (this.customTextPl = function () {
          CustomTextButs();
        }),
        (this.customText = function (e, t) {
          CustomText(e, t);
        }),
        (this.resize = function () {
          Resize();
        }),
        (this.resize2 = function () {
          Resize(!0);
        }),
        (this.resizeSettings = function () {
          ResizeSettings(settings);
        }),
        (this.resizePlaylist = function () {
          ResizeSettings(playlist);
        }),
        (this.Play = function () {
          for (var e in b)
            b.hasOwnProperty(e) && "play" == b[e].g("action") && b[e].On();
          this.PlaylistVisible() && 1 == v.playlist.autohide && this.Playlist(),
            (o.play = !0),
            ShowOrHide();
        }),
        (this.Pause = function () {
          for (var e in b)
            b.hasOwnProperty(e) &&
              (("pause" != b[e].g("action") && "stop" != b[e].g("action")) ||
                b[e].Off());
          playlist &&
            (1 != v.playlist.openplaylistpause ||
              playlist.empty() ||
              playlist.show()),
            (o.play = !1),
            this.StopWaiting(),
            ShowOrHide(),
            1 == v.toolbar.hide && 1 == v.toolbar.hideonpause && HideForce(!0);
        }),
        (this.Mute = function () {
          for (var e in b)
            b.hasOwnProperty(e) &&
              ("mute" == b[e].g("action") && b[e].On(), this.Volume(0));
          ShowOrHide();
        }),
        (this.Unmute = function () {
          for (var e in b)
            b.hasOwnProperty(e) && "unmute" == b[e].g("action") && b[e].Off();
          v.volume < 0.1
            ? ((v.volume = 0.5), o.actions.Volume(v.volume))
            : this.Volume(v.volume),
            ShowOrHide();
        }),
        (this.Volume = function (e, t) {
          for (var o in b)
            b.hasOwnProperty(o) &&
              ("volume" == b[o].g("action") &&
                "speed" != b[o].s("customline") &&
                b[o].UpdatePlay(e, 1, "no" != t || t),
              "mute" == b[o].g("action") && b[o].UpdateVolume(e));
          ShowOrHide();
        }),
        (this.Fullscreen = function () {
          var e = FindBut("action", "fullscreen");
          e && (e.On(), e.set("scale", e.s("scale"))),
            ShowOrHide(),
            resizeonwidth && setTimeout(ShowOrHide, 500),
            HideInterval();
        }),
        (this.Normalscreen = function () {
          var e = FindBut("action", "fullscreen");
          e && e.Off(),
            Resize(),
            clearInterval(o.toolbarInterval),
            ShowOrHide();
        }),
        (this.onEnded = function () {
          for (var e in b)
            b.hasOwnProperty(e) &&
              "play" == b[e].g("action") &&
              b[e].ReplayIcon();
        }),
        (this.Review = function () {
          ShowOrHide();
        }),
        (this.Mouse = function (e, t, i) {
          var s = !1,
            n = b[e],
            a = n.g("action"),
            r = n.s("linkurl");
          "over" == t &&
            (o.hidden_volume &&
              (("volume" != a && "mute" != a && "unmute" != a) ||
                ((o.hidden_volume_over = !0),
                (s = o.hidden_volume_over_process = !0),
                ShowOrHide(),
                1 != v.control_line.hideonvolume ||
                  ((e = FindBut("action", "line")) && hide2(e.c())))),
            !settings ||
              ((1 != v.settings.showovercontrol ||
                ("settings" != a && 0 != r.indexOf("setting"))) &&
                0 != r.indexOf("settings:")) ||
              (clearTimeout(o.settingsovertimer),
              (settings.g("show") && _lastactbut == n) ||
                (Action(n, t),
                (o.overopentimeout = a + r),
                setTimeout(function () {
                  o.overopentimeout = null;
                }, 500))),
            playlist &&
              1 == v.playlist.showovercontrol &&
              "playlist" == a &&
              (clearTimeout(o.playlistovertimer),
              (playlist.g("show") && _lastactbut == n) ||
                (Action(n, t),
                (o.overopentimeout = a),
                setTimeout(function () {
                  o.overopentimeout = null;
                }, 500)))),
            "out" == t &&
              (o.hidden_volume &&
                (("volume" != a && "mute" != a && "unmute" != a) ||
                  ((o.hidden_volume_over = !1),
                  (o.hidden_volume_over_process = !0),
                  setTimeout(function () {
                    if (!o.hidden_volume_over)
                      for (var e in ((o.hidden_volume_over_process = !1), b))
                        b.hasOwnProperty(e) &&
                          ("volume" == b[e].g("action") &&
                            (HideControl(b[e]), Resize()),
                          "line" == b[e].g("action") &&
                            1 == v.control_line.hideonvolume &&
                            show2(b[e].c()));
                  }, 500))),
              ((1 != v.settings.showovercontrol ||
                ("settings" != a && 0 != r.indexOf("setting"))) &&
                0 != r.indexOf("settings:")) ||
                (clearTimeout(o.settingsovertimer),
                (o.settingsovertimer = setTimeout(
                  function () {
                    o.mouseDown || SettingsClose(1);
                  },
                  0 < v.settings.showoverto ? 1e3 * v.settings.showoverto : 1e3
                ))),
              playlist &&
                1 == v.playlist.showovercontrol &&
                "playlist" == a &&
                (clearTimeout(o.playlistovertimer),
                (o.playlistovertimer = setTimeout(
                  function () {
                    o.mouseDown || (playlist.g("show") && playlist.hide(1));
                  },
                  0 < v.playlist.showoverto ? 1e3 * v.playlist.showoverto : 1e3
                )))),
            s && setTimeout(Resize, 10);
        }),
        (this.StageLeave = function () {
          o.volumewheel &&
            !o.fullscreen &&
            (o.actions.volumewheel(!1), (o.volumewheel = !1)),
            o.poster &&
              -1 < v.poster_aover &&
              isVisible(o.poster) &&
              css(o.poster, {
                opacity: v.poster_a,
              }),
            o.play &&
              1 == v.playonhover &&
              0 != v.pauseonhover &&
              o.actions.Pause(),
            0 < v.toolbar.hideleavetimeout
              ? (clearTimeout(o.leavetimeout),
                (o.leavetimeout = setTimeout(
                  ShowOrHide,
                  1e3 * v.toolbar.hideleavetimeout
                )))
              : ShowOrHide();
        }),
        (this.StageOver = function () {
          o.poster &&
            -1 < v.poster_aover &&
            isVisible(o.poster) &&
            css(o.poster, {
              opacity: v.poster_aover,
            }),
            o.play || 1 != v.playonhover || o.actions.Play(),
            ShowOrHide(),
            ToolbarDown(!1);
        }),
        (this.StageMove = function (e, t) {
          var o, i;
          for (i in b)
            b.hasOwnProperty(i) &&
              (("line" != (o = b[i].g("action")) && "volume" != o) ||
                b[i].StageMove(e, t));
        }),
        (this.StageMove2 = function () {
          1 == v.toolbar.hide &&
            ((1 == v.toolbar.hidejustfull && !o.fullscreen) ||
              (o.mouseHere ||
                "playing" != o.media.status() ||
                ((o.mouseHere = !0), ShowOrHide()),
              1 == v.toolbar.hidewithoutmoving && (ShowForce(), HideInterval()),
              ToolbarDown(!1)));
        }),
        (this.StageMouseUp = function (e, t) {
          for (var o in b)
            b.hasOwnProperty(o) &&
              (("line" != b[o].g("action") && "volume" != b[o].g("action")) ||
                b[o].StageMouseUp(e, t));
        }),
        (this.Played = function (e, t) {
          for (var o in b)
            b.hasOwnProperty(o) &&
              ("line" == b[o].g("action") && b[o].UpdatePlay(e, t),
              "time" == b[o].g("action") && UpdateTime(b[o], e, t),
              1 == b[o].s("rotateplaying") && b[o].Rotate());
        }),
        (this.Loaded = function (e, t) {
          var o = FindBut("action", "line");
          o && o.UpdateLoad(e, t);
        }),
        (this.Waiting = function () {
          waiting ||
            (1 == v.hidevideo
              ? (clearTimeout(wait_to), (wait_to = setTimeout(Waiting, 500)))
              : Waiting());
        }),
        (this.HideElement = function (e) {
          for (var t in b) t == e && b[t].set("hide2");
        }),
        (this.StopWaiting = function (e, t) {
          var o;
          clearTimeout(wait_to),
            waiting &&
              (js("buffered"),
              (o = FindBut("action", "buffer")) &&
                (o.BufferStop(), (waiting = !1)));
        }),
        (this.volumescroll = function () {
          var e = FindBut("linkurl", "volume scroll");
          e &&
            (e.set("show2"),
            e.UpdateText(
              Lang("volume") +
                " " +
                (o.muted ? 0 : Math.ceil(100 * v.volume)) +
                "%"
            ),
            clearTimeout(o.volumescroll),
            (o.volumescroll = setTimeout(Volumescrolled, 1e3)));
        }),
        (this.Seek = function (e, t) {
          for (var o in (0 < v.delete && ((e -= v.delete), (t -= v.delete)), b))
            b.hasOwnProperty(o) &&
              ("line" == b[o].g("action") &&
                (0 < t && b[o].set("click", e / t), b[o].UpdatePlaySeek()),
              "time" == b[o].g("action") && UpdateTime(b[o], e, t),
              "live" == b[o].g("action") &&
                (b[o].set("iconopacity", 0.5), b[o].set("saturate", 0)));
        }),
        (this.Duration = function (e, t) {
          for (var o in b)
            b.hasOwnProperty(o) &&
              ("duration" == b[o].g("action") &&
                (0 < v.delete && (t -= v.delete), b[o].UpdateText(Time(t))),
              "line" == b[o].g("action") &&
                (b[o].UpdatePlay(e, t), b[o].PlacePoints(t)),
              "time" == b[o].g("action") && UpdateTime(b[o], e, t));
        }),
        (this.Settings = function () {
          settings.g("show") ? settings.hide() : settings.show();
        }),
        (this.SettingsVisible = function () {
          return !!settings && !!settings.g("show");
        }),
        (this.SettingsScale = function () {
          settings && settings.Scale();
        }),
        (this.SettingsClose = function () {
          SettingsClose();
        }),
        (this.SettingsTimer = function (e) {
          settings && settings.UpdateTimer(e);
        }),
        (this.SettingsSpeed = function () {
          settings && settings.UpdateSpeed();
        }),
        (this.SettingsExist = function (e) {
          if (settings) return settings.Exist(e);
        }),
        (this.Playlist = function () {
          playlist && (playlist.g("show") ? playlist.hide(1) : playlist.show());
        }),
        (this.PlaylistShow = function () {
          playlist &&
            setTimeout(function () {
              playlist.show();
            }, 100);
        }),
        (this.PlaylistVisible = function () {
          return !!playlist && !!playlist.g("show");
        }),
        (this.PlaylistG = function (e) {
          return playlist ? playlist.g(e) : "";
        }),
        (this.UpdatePlaylist = function (e) {
          playlist && playlist.updatePlaylist(e);
        }),
        (this.PlaylistNext = function () {
          playlist && playlist.PlaylistNext();
        }),
        (this.PlaylistHere = function () {
          playlist && playlist.PlaylistHere();
        }),
        (this.PlaylistControls = function () {
          PlaylistControls();
        }),
        (this.PlaylistNextExist = function () {
          return !!playlist && playlist.PlaylistNextExist();
        }),
        (this.PlaylistExist = function () {
          return !!playlist && playlist.PlaylistExist();
        }),
        (this.PlaylistRewind = function () {
          playlist && playlist.PlaylistRewind();
        }),
        (this.PlaylistPrev = function () {
          playlist && playlist.PlaylistPrev();
        }),
        (this.PlaylistPlayId = function (e) {
          e && playlist && playlist.playById(e);
        }),
        (this.PlaylistOpenId = function (e) {
          e && playlist && playlist.openById(e);
        }),
        (this.PlaylistMove = function (e) {
          e &&
            playlist &&
            (css(playlist.co(), {
              maxHeight: "none",
              "padding-right": playlist.s("bgpaddingright"),
            }),
            document.getElementById(e).appendChild(playlist.co()),
            hide2(playlist.c()));
        }),
        (this.ShowSettingsBut = function () {}),
        (this.QualityChanged = function (e) {
          settings &&
            (settings.SetQuality(),
            settings.g("show") &&
              setTimeout(function () {
                settings.hide();
              }, 200));
        }),
        (this.QualityChangedNoHand = function (e) {
          settings && settings.SetQuality(),
            o.settings2 && o.settings2.update();
        }),
        (this.AirplayChanged = function (e) {
          settings && settings.Airplay(), Resize(), ShowOrHide();
        }),
        (this.SettingChanged = function (e) {
          settings &&
            (settings.SetSetting(e), settings.g("show") && settings.hide()),
            o.settings2 && o.settings2.update(),
            "speed" == e && SpeedChanged();
        }),
        (this.AudioTrackChangedNoHand = function (e) {
          settings && settings.SetSetting("audiotrack"),
            o.settings2 && o.settings2.update();
        }),
        (this.SubtitleChanged = function () {
          settings &&
            (settings.SetSubtitle(),
            settings.g("show") &&
              setTimeout(function () {
                settings.hide();
              }, 200)),
            o.settings2 && o.settings2.update();
        }),
        (this.SubOpt = function () {
          o.settings2 && o.settings2.hide(), settings && settings.SubOpt();
        }),
        (this.SettingsN = function (e, t, o) {
          for (var i in b) {
            var s;
            b.hasOwnProperty(i) &&
              ("settings" == b[i].g("action") &&
                1 == b[i].s("hdicon") &&
                b[i].HdIcon(),
              b[i].g("action_settings") == "settings#" + e &&
                (b[i].set("set#visible", t),
                "text" == b[i].g("type")
                  ? o &&
                    (-1 <
                      (s = (o = o.toString()).indexOf(
                        " <span style='opacity"
                      )) && (o = o.substr(0, s)),
                    b[i].UpdateText(o))
                  : ("subtitle" == v.settings["settings" + e + "action"] &&
                      (o == Lang("off")
                        ? b[i].CustomSwitch(0)
                        : b[i].CustomSwitch(1)),
                    Resize()),
                ShowOrHideProcessor(b[i])));
          }
        }),
        (this.UpdateSettings = function () {
          settings &&
            (settings.SetQuality(),
            settings.SetSetting("audiotrack"),
            settings.SetSetting("download"));
        }),
        (this.RenewPoints = function () {
          var e = FindBut("action", "line");
          e && e.RenewPoints();
        }),
        (this.resize = function () {
          Resize(), toolbarHidden && (o.resizeonmouse = !0);
        }),
        (this.resizeFromText = function (e) {
          toolbarHidden && 1 != e
            ? (v.toolbar.resizeme = !0)
            : (Resize(), ShowOrHide());
        }),
        (this.refresh = function () {
          ShowOrHide(),
            Resize(),
            ShowOrHide(),
            o.nativecontrols ? hide2(bg2) : toolbarHidden || show2(bg2);
        }),
        (this.KeyDown = function (e) {
          if (pljssglobalid == v.id && 1 == v.hotkey.on) {
            var t = e.which,
              i = !1;
            if (
              (null == t && (t = e.keyCode),
              exist(o.vast) || exist(o.pass) || 1 == o.stopkeys)
            )
              return !1;
            if (
              (o.play && 1 == v.hotkey.onplay && (i = !0),
              ((1 == v.hotkey.space && 32 == t) ||
                (1 == v.hotkey.enter && 13 == t)) &&
                (o.focus || o.mouseHere || i))
            )
              return (
                1 == v.hotkey.icons && PluginHotIcon("play", o.play ? 0 : 1),
                o.actions.Toggle(),
                e.preventDefault(),
                !1
              );
            if (
              (v.hotkey.vol || (v.hotkey.vol = 0.2),
              v.hotkey.scale || (v.hotkey.scale = 5),
              1 == v.hotkey.nums && (o.focus || i) && 0 < o.media.duration())
            )
              for (var s = 48; s < 58; s++)
                t == s &&
                  o.actions.Seek(
                    (o.media.duration() * (t - 48) * 10) / 100,
                    !0
                  );
            39 == t && (o.focus || i) && KeyPlusUp(v.hotkey.leftright),
              37 == t && (o.focus || i) && KeyPlusDown(v.hotkey.leftright),
              38 == t && (o.focus || i) && KeyPlusUp(v.hotkey.updown),
              40 == t && (o.focus || i) && KeyPlusDown(v.hotkey.updown),
              187 == t && (o.focus || i) && KeyPlusUp(v.hotkey.plusminus),
              189 == t && (o.focus || i) && KeyPlusDown(v.hotkey.plusminus);
          }
        }),
        (this.KeyUp = function (e) {
          if (pljssglobalid == v.id) {
            var t = e.which;
            if (
              (null == t && (t = e.keyCode),
              57 == t && v.log,
              o.fullscreen && 27 == t && o.actions.Normalscreen(),
              exist(o.vast) || exist(o.pass))
            )
              return !1;
            1 == v.hotkey.f &&
              70 == t &&
              1 != v.hidevideo &&
              (o.focus || o.mouseHere) &&
              (1 == v.hotkey.icons &&
                PluginHotIcon("fullscreen", o.fullscreen ? 0 : 1),
              o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()),
              1 == v.hotkey.m &&
                77 == t &&
                (o.focus || o.mouseHere) &&
                (1 == v.hotkey.icons && PluginHotIcon("mute", o.muted ? 1 : 0),
                o.muted ? o.actions.Unmute() : o.actions.Mute());
          }
        }),
        (this.Remove = function () {
          for (var e in (clearInterval(o.toolbarInterval), o))
            0 == e.indexOf("control") &&
              -1 < e.indexOf("Interval") &&
              clearInterval(o[e]);
          for (var t = 0; t < butNames.length; t++)
            (key = butNames[t]), b[key] && b[key].Remove();
          settings && settings.Remove(),
            playlist && playlist.Remove(),
            bg.Remove(),
            bg2.parentNode == o.frame
              ? o.frame.removeChild(bg2)
              : o.toolbar && o.toolbar.removeChild(bg2);
        }),
        (this.ShowForce = function () {
          ShowForce();
        }),
        (this.HideForce = function () {
          HideForce(), ShowOrHide();
        }),
        (this.HideInterval = function () {
          HideInterval();
        }),
        (this.ToolbarHidden = function () {
          return toolbarHidden;
        });
    },
    Control = function (n) {
      var i,
        s,
        a,
        r,
        l,
        e,
        c,
        t,
        d,
        u,
        p,
        f,
        h,
        m,
        g = 0,
        y = 0,
        b = !0,
        _ = !1,
        x = 1,
        w = 1,
        k = "",
        S = !1,
        T = !1,
        L = 0,
        C = 0,
        O = 0,
        P = !1,
        E = !1,
        A = !1,
        I = UpdateObject((I = []), default_style.but),
        j = [(I = UpdateObject(I, v[n])).action],
        M = j[0];
      exist(I.action2) && (j[1] = I.action2),
        exist(I.opposite) && (j[1] = I.opposite),
        exist(I.title) && (I.text = I.title),
        exist2(I.scalesmall) && o.small && (I.scale = I.scalesmall),
        "share" == M && (o.shareme = !0),
        exist(I.linkurl) &&
          ("text" == I.type &&
            "" != I.linkurl &&
            exist(v[I.linkurl + "text"]) &&
            (I.text = v[I.linkurl + "text"]),
          0 == I.linkurl.indexOf("settings#") &&
            ((k = I.linkurl),
            "" == I.tiptext &&
              -1 == k.indexOf(",") &&
              (I.tiptext = Lang(
                v.settings["settings" + k.substr(9) + "action"]
              ))),
          -1 < I.linkurl.indexOf("captions") && (v.hlscaptions = !0),
          -1 < I.linkurl.indexOf("share:") && (o.shareme = !0),
          "countdown" == I.linkurl && (I.counter = new PluginCountdown(I)));
      var V,
        H = I.tiptext ? I.tiptext.split("///") : [],
        z = 0,
        R = new Array(),
        D = new Array(),
        N = new Array(),
        F = (new Array(), 0);
      "text" == I.type
        ? (exist(I.text) &&
            ((R[0] = trim(I.text)),
            (I.lngth = I.text.length),
            -1 < (q = ["/", "|", "-"]).indexOf(I.text.substr(-1)) &&
              (I.postsmbl = I.text.substr(-1)),
            -1 < q.indexOf(I.text.substr(0, 1)) &&
              (I.presmbl = I.text.substr(0, 1)),
            ("time" != M && "duration" != M) ||
              (0 == I.text.indexOf("0:") && (I.timeshort = !0),
              3 == I.text.split(":").length
                ? (I.with_hours = !0)
                : -1 < I.text.indexOf("00:00") && (I.with_min = !0),
              1 == I.dvrtime && (v.dvrtime = 1)),
            1 == I.inversetime &&
              0 == I.text.indexOf("-") &&
              (I.minus4back = !0),
            0 < I.text.indexOf("///") &&
              "custom" == M &&
              ((I.texts = I.text.split("///")), (I.text = R[0] = I.texts[0]))),
          1 == v.fonts &&
            (setTimeout(he, 100), setTimeout(he, 500), setTimeout(he, 1e3)))
        : exist(I.icon) &&
          ((R[0] = I.icon),
          0 < R[0].indexOf("///") &&
            -1 == R[0].indexOf("base64") &&
            (R = I.icon.split("///")),
          exist(I.icon2) && (R[1] = I.icon2),
          1 == I.iconsreplay &&
            exist2(I.icon3) &&
            (R.push(I.icon3), (F = R.length - 1))),
        "custom" == M &&
          1 == I.link2 &&
          exist(I.linkurl2) &&
          (I.linkurl0 = I.linkurl);
      var U = createElement("div");
      ("timeline" == I.position
        ? o.timeline
        : -1 < I.position.indexOf("controls") &&
          1 == v.toolbar.hide &&
          1 == v.toolbar.hidedown
        ? o.toolbar
        : o.frame
      ).appendChild(U);
      var q,
        B,
        W,
        Y,
        Q = createElement("div");
      if (
        (U.appendChild(Q),
        css(U, {
          position: "absolute",
          left: 0,
          top: 0,
          opacity: 1,
          fontSize: "14px",
          lineHeight: "1em",
        }),
        exist2(I.dom) &&
          attr(U, {
            id: v.id + "_control_" + I.dom,
          }),
        1 == I.rotateplaying &&
          css(U, {
            transition: "transform 0.2s linear",
          }),
        0 < R.length)
      ) {
        for (J = 0; J < R.length; J++) {
          (D[J] = createElement("div")),
            css(D[J], {
              position: "absolute",
              top: 0,
              left: 0,
              pointerEvents: "none",
              opacity: I.a,
              transition: "opacity 0.1s linear,transform 0.1s linear",
            }),
            "pic" == I.type &&
              "" != I.src &&
              (exist2(I.dom) &&
                (attr(D[J], {
                  id: v.id + "_control_" + I.dom + "_icon",
                }),
                v[I.dom + "src"] && (I.src = v[I.dom + "src"])),
              (-1 < I.src.indexOf(".png") ||
                -1 < I.src.indexOf(".jpg") ||
                -1 < I.src.indexOf(".gif") ||
                -1 < I.src.indexOf("base64")) &&
                (-1 == I.src.indexOf("//") &&
                  -1 == I.src.indexOf("base64") &&
                  (I.src = "//" + I.src),
                (Z = createElement("img")),
                (I.loading = 1),
                Z.addEventListener("load", ce),
                (Z.src = I.src),
                D[J].appendChild(Z),
                (I.w = D[J].offsetWidth),
                (I.h = D[J].offsetHeight),
                0 < I.picheight &&
                  css(Z, {
                    height: I.picheight,
                  }))),
            "text" == I.type &&
              (css(D[J], {
                color: I.color,
                fontSize: I.fontsize,
                fontFamily: I.font,
                "letter-spacing": I.letterspacing + "px",
                padding: "0 3px 0 3px",
                "white-space": "nowrap",
              }),
              1 == I.click &&
                (-1 < I.text.indexOf("<a ") || "control_title" == n) &&
                css(D[J], {
                  pointerEvents: "auto",
                }),
              1 == I.bold &&
                css(D[J], {
                  "font-weight": "bold",
                }),
              "live" == R[J] && (R[J] = Lang("live")),
              (D[J].innerHTML = ye(R[J])),
              setTimeout(le, 100),
              (I.w = D[J].offsetWidth),
              (I.h = D[J].offsetHeight),
              exist2(I.dom) &&
                attr(D[J], {
                  id: v.id + "_control_" + I.dom + "_text",
                })),
            "css" == I.type && controlCSS(R[J], I.color, D[J]);
          var G = R[J].toString();
          0 == G.indexOf("var:") && (G = existv(window[G.substr(4)], ""));
          var Z = -1 < G.indexOf("<svg") || -1 < G.indexOf("<SVG");
          "svg" == I.type &&
            (-1 < G.indexOf("<g>") || Z) &&
            (("mute" != M && "custom" != M) ||
              (G = G.replace(/pjs_/g, "pjs_" + v.id + n)),
            -1 < G.indexOf("pointer") && ee(D[J]),
            (D[J].innerHTML =
              (Z
                ? ""
                : "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>") +
              G +
              (Z ? "" : "</svg>")),
            20 < D[J].offsetWidth && (I.w = D[J].offsetWidth),
            20 < D[J].offsetHeight && (I.h = D[J].offsetHeight),
            css(D[J], {
              width: I.w,
              height: I.h,
            }),
            -1 != I.iconscolor && be(D, I.iconscolor),
            exist2(I.dom) &&
              attr(D[J], {
                id: v.id + "_control_" + I.dom + "_icon" + J,
              })),
            U.appendChild(D[J]),
            0 < J && hide(D[J]);
        }
        te(),
          m && ce(),
          "chromecast" == I.linkurl
            ? ((I.chromecast = 1),
              (I.hide = 1),
              o.chromecast &&
                (D[0].innerHTML = o.chromecast.button(
                  -1 != I.iconscolor ? I.iconscolor : "#ffffff"
                )),
              (D[0].onmouseover = ie),
              (D[0].onmouseout = se),
              (D[0].onmousemove = de))
            : (a.offsetWidth * I.scale < 35 || a.offsetHeight * I.scale < 35) &&
              "text" != I.type
            ? ($(), ee(r))
            : ee(a),
          "custom" == M &&
            1 == I.link &&
            exist(I.linkurl) &&
            (0 == (X = I.linkurl).indexOf("api:") &&
              (2 != (K = X.substr(4).split(",")).length ||
                (2 == (q = K[1].split("/")).length &&
                  ("hd" == K[0] && (K[0] = "default_quality"),
                  v[K[0]] == q[1] &&
                    ((I.a = 1),
                    css(D[0], {
                      opacity: I.a,
                    }))))),
            ("unblock" != X && "block" != X) ||
              (o.actions.Curtain(), (U.style.zIndex = 2001), (o.stopkeys = 1))),
          "settings" == M && 1 == I.hdicon && (h = new PluginHdIcon(U, a, I)),
          0 == I.click &&
            css(U, {
              pointerEvents: "none",
            }),
          1 == I.loading && hide(a),
          1 == I.tip &&
            ((l = createElement("div")),
            css(l, {
              position: "absolute",
              left: 0,
              top: 0,
              height: "auto",
              opacity: 0,
              transition: "opacity 0.1s linear",
            }),
            (e = createElement("div")),
            (I = MarginPadding(I, "tippadding", "tippadding")),
            (I = MarginPadding(I, "tipmargin", "tipmargin")),
            css(e, {
              position: "absolute",
              left: 0,
              top: 0,
              width: "100%",
              height: 30,
              "background-color": I.tipbgcolor,
              opacity: I.tipbga,
              "border-radius": I.tipbgrounding,
            }),
            (c = createElement("div")),
            css(c, {
              position: "absolute",
              left: I.tippaddingleft,
              top: I.tippaddingtop,
              color: I.tipcolor,
              "font-family": I.tipfont,
              "font-size": I.tipfontsize,
              "letter-spacing": I.tipletterspacing + "px",
              opacity: I.tipa,
              "line-height": "1",
            }),
            !I.tiptext || (0 == I.tiptext.indexOf("var:") && (I.tipvar = !0)),
            I.tipvar ||
              css(c, {
                "white-space": "nowrap",
              }),
            1 == I.tippointer &&
              ((t = createElement("div")).innerHTML =
                '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#' +
                I.tipbgcolor.replace("#", "") +
                '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),
            1 == I.tipalways
              ? (css(l, {
                  opacity: 1,
                }),
                ee(l))
              : css(l, {
                  pointerEvents: "none",
                }),
            U.appendChild(l),
            (c.innerHTML = "" == I.tiptext ? Lang(M) : H[0]),
            l.appendChild(e),
            l.appendChild(c),
            1 == I.tippointer &&
              (l.appendChild(t),
              (B = o.doctype ? "-8px" : "-6px"),
              (W = I.tippointeralign),
              exist(W) || (W = ""),
              (Y = -1 < W.indexOf("top")) &&
                css(t, {
                  transform: "rotate(-180deg)",
                }),
              css(t, {
                position: "absolute",
                right: -1 < W.indexOf("right") ? 10 * I.scale : "auto",
                left:
                  -1 < W.indexOf("left")
                    ? 10 * I.scale
                    : "" == W || "top" == W
                    ? "50%"
                    : "auto",
                "margin-left": "" == W || "top" == W ? "-4px" : 0,
                bottom: Y ? "auto" : B,
                top: Y ? B : "auto",
                opacity: I.tipbga,
              })),
            pe()),
          -1 < I.position.indexOf("right") && (C = 1),
          I.position.indexOf("top"),
          (-1 < I.position.indexOf("bottom") ||
            -1 < I.position.indexOf("control")) &&
            (O = 1),
          oe();
        var X = "";
        0 != I.rotation && (X += "rotate(" + I.rotation + "deg)"),
          1 == I.flipx && (X += " scaleX(-1)"),
          1 == I.flipy && (X += " scaleY(-1)"),
          "" != X &&
            css(U, {
              transform: X,
            }),
          "buffer" == M && ge();
        var J,
          K = [];
        if ("playlist" == M)
          for (
            K = [
              "autoplaylist",
              "openplaylistafter",
              "openplaylistbefore",
              "openplaylistpause",
              "openplaylistroot",
              "playlistrewind",
            ],
              J = 0;
            J < K.length;
            J++
          )
            exist(I[K[J]]) &&
              !exist(v.playlist[K[J]]) &&
              (v.playlist[K[J]] = I[K[J]]);
        if ("title" == M)
          for (
            K = ["showtitleplaylist", "addtitleplaylist", "addtitleplaylistbr"],
              J = 0;
            J < K.length;
            J++
          )
            exist(I[K[J]]) && !exist(options[K[J]]) && (v[K[J]] = I[K[J]]);
        1 == I.tipalways && pe(),
          "custom" == M && 0 == I.on && hide2(U),
          1 == I.hide &&
            0 < I.hideuntilto &&
            setTimeout(function () {
              (I.hideuntilto = -1), o.controls.refresh();
            }, 1e3 * I.hideuntilto);
      }
      function $() {
        r && r.parentNode.removeChild(r),
          (r = createElement("div")),
          css(r, {
            position: "absolute",
            top: 0,
            left: 0,
            width:
              "pic" == I.type
                ? a.offsetWidth
                : (35 < a.offsetWidth ? a.offsetWidth : 35) * I.clickscalex,
            height:
              "pic" == I.type
                ? a.offsetHeight
                : (35 < a.offsetHeight ? a.offsetHeight : 35) * I.clickscaley,
          }),
          (I = MarginPadding(I, "clickmargin", "clickmargin")),
          U.appendChild(r);
      }
      function ee(e) {
        0 == M.indexOf("time") && 1 == j.length && (I.click = 0),
          "custom" == M && 0 == I.link && (I.click = 0),
          1 == I.click
            ? (1 == I.hand &&
                css(e, {
                  cursor: "pointer",
                }),
              css(e, {
                pointerEvents: "auto",
              }),
              o.system.mobile
                ? (e.addEventListener("touchmove", function (e) {
                    e.stopPropagation(), (T = !0);
                  }),
                  e.addEventListener("touchstart", function (e) {
                    e.stopPropagation();
                  }),
                  e.addEventListener("touchend", function (e) {
                    e.stopPropagation(),
                      e.preventDefault(),
                      T || ne(e),
                      (T = !1);
                  }))
                : (e.onclick = ne),
              (1 != v.toolbar.clickarea && 1 != I.clickarea) ||
                css(e, {
                  "background-color": "#ff0000",
                  opacity: 0.5,
                }))
            : css(e, {
                cursor: "default",
              }),
          o.system.mobile || ((e.onmouseover = ie), (e.onmouseout = se)),
          (1 != I.hidden && 1 != I.tip) || (e.onmousemove = de);
      }
      function te() {
        if (
          (a && a.parentNode.removeChild(a),
          (a = createElement("div")),
          css(a, {
            position: "absolute",
            top: 0,
            left: 0,
          }),
          exist2(I.dom) &&
            attr(a, {
              id: v.id + "_control_" + I.dom + "_bg",
            }),
          (i = I.w),
          (s = I.h),
          (I = MarginPadding(I, "margin", "margin")),
          (I = MarginPadding(I, "marginproc", "marginproc")),
          "text" == I.type &&
            ((i = D[z].offsetWidth),
            (s = D[z].offsetHeight),
            0 < I.minw && i < I.minw && (i = I.minw)),
          (I = MarginPadding(I, "bgpadding", "bgpadding")),
          (I = MarginPadding(I, "iconmargin", "iconmargin")),
          o.system.safari &&
            ((I.iconmarginleft /= I.scale),
            (I.iconmarginright /= I.scale),
            (I.iconmargintop /= I.scale),
            (I.iconmarginbottom /= I.scale)),
          exist2(I.dom) &&
            exist(v.custom) &&
            "custom" == I.action &&
            "object" == typeof v.custom)
        )
          for (var e, t = 0; t < Object.keys(v.custom).length; t++)
            v.custom[t][I.dom] &&
              ("off" == v.custom[t][I.dom]
                ? (I.on = 0)
                : "margin-left" == (e = v.custom[t][I.dom].split(":"))[0] &&
                  (0 < e[1].indexOf("%")
                    ? (I.marginprocleft = parseInt(e[1]))
                    : (I.marginleft = parseInt(e[1]))));
        (I.h = s),
          (I.w = i),
          1 == I.bg
            ? ((s = s + I.bgpaddingtop + I.bgpaddingbottom),
              (i = i + I.bgpaddingleft + I.bgpaddingright),
              (I.h = s),
              (I.w = i),
              "text" == I.type && (I.bgh = D[0].offsetHeight))
            : (I.bga = 0),
          css(a, {
            width: 1 == I.bgstretch ? 5e3 : i,
            height: s,
            borderRadius: (I.bgo * s) / 2,
            background: I.bgcolor,
            opacity: I.bga,
            transition:
              "opacity .1s linear, background .1s linear, transform .1s linear",
          }),
          "pic" == I.type &&
            css(a, {
              width: i,
              height: s,
              borderRadius: (I.bgo * s) / I.scale / 2,
            }),
          1 == I.bglines && Bglines(a, I.bgcolor, I.bgline1, I.bgline2),
          1 == I.bgborder &&
            css(a, {
              border: "1px solid " + I.bgbordercolor,
            }),
          Q.appendChild(a);
      }
      function oe() {
        var e, t;
        for (
          css(a, {
            top: -a.offsetHeight / 2,
            left: -a.offsetWidth / 2,
          }),
            r &&
              ((e = "pic" == I.type || 35 < a.offsetWidth ? a.offsetWidth : 35),
              (t =
                "pic" == I.type || 35 < a.offsetHeight ? a.offsetHeight : 35),
              css(r, {
                top: -t / 2 + I.clickmargintop - I.clickmarginbottom,
                left: -e / 2 + I.clickmarginleft - I.clickmarginright,
              })),
            J = 0;
          J < R.length;
          J++
        )
          "svg" == I.type
            ? css(D[J], {
                top: -Math.round(parseInt(D[J].style.height)) / 2,
                left: -parseInt(D[J].style.width) / 2,
              })
            : css(D[J], {
                top: -Math.round(D[J].offsetHeight) / 2,
                left: -D[J].offsetWidth / 2,
              }),
            a &&
              css(D[J], {
                top:
                  int(D[J].style.top) +
                  I.bgpaddingtop / 2 -
                  I.bgpaddingbottom / 2 +
                  I.iconmargintop / 2 +
                  I.iconmarginbottom / 2,
                left:
                  int(D[J].style.left) +
                  I.bgpaddingleft / 2 -
                  I.bgpaddingright / 2 +
                  I.iconmarginleft / 2 +
                  I.iconmarginright / 2,
              });
      }
      function ie() {
        var e, t;
        if (
          ((S = !0),
          1 == I.iconsover &&
            ((e = p && exist(I.icon2) ? 1 : 0),
            V && 2 < N.length && (e = 2),
            N[e] && (re(), show(D[N[e]]))),
          1 == I.bg &&
            (-1 != I.bgaover &&
              css(a, {
                opacity: I.bgaover,
              }),
            -1 != I.bgcolorover &&
              css(a, {
                background: I.bgcolorover,
              })),
          -1 < I.aover && !_)
        )
          for (e = 0; e < R.length; e++)
            "hidden" != D[e].style.visibility &&
              css(D[e], {
                opacity: I.aover,
              });
        -1 != I.iconscolorover && be(D, I.iconscolorover),
          1 == I.rotateonhover &&
            ((L += 45),
            css(D[0], {
              transform: "rotate(" + L + "deg)",
            })),
          I.scaleover > I.scale && -1 < I.scaleover && ue(I.scaleover),
          ("settings" == M && o.controls.SettingsVisible()) ||
            (1 == I.tip &&
              1 != I.tipalways &&
              ((t = 1 < H.length && !p ? H[1] : H[0]) &&
                0 == t.indexOf("var:") &&
                ((c.innerHTML = window[t.substr(4)]), pe()),
              show(l),
              css(l, {
                opacity: 1,
              }))),
          "mute" == M && (o.actions.volumewheel(!0), (o.volumewheel = !0)),
          (o.controlover = !0),
          o.controls.Mouse(n, "over");
      }
      function se() {
        var e;
        if (
          ((S = !1),
          1 == I.iconsover &&
            ((e = p && exist(I.icon2) ? 1 : 0),
            V && 2 < N.length && (e = 2),
            re(),
            show(D[e])),
          1 == I.bg &&
            (-1 != I.bgaover &&
              css(a, {
                opacity: I.bga,
              }),
            -1 != I.bgcolorover &&
              css(a, {
                background: I.bgcolor,
              })),
          -1 < I.aover)
        )
          for (e = 0; e < R.length; e++)
            "hidden" != D[e].style.visibility &&
              css(D[e], {
                opacity: I.a,
              });
        -1 < I.scaleover && ue(I.scale),
          -1 != I.iconscolorover &&
            be(D, -1 == I.iconscolor ? "#ffffff" : I.iconscolor),
          "mute" != M ||
            o.fullscreen ||
            (o.actions.volumewheel(!1), (o.volumewheel = !1)),
          1 == I.tip &&
            1 != I.tipalways &&
            (hide(l),
            css(l, {
              opacity: 0,
            })),
          (o.controlover = !1),
          o.controls && o.controls.Mouse(n, "out");
      }
      function ne(e) {
        e && (e.cancelBubble = !0),
          P ||
            (o.controls.ControlClick(n),
            "custom" == M && ae(),
            1 == I.tip &&
              1 != I.tipalways &&
              (hide(l),
              css(l, {
                opacity: 0,
              })),
            1 == I.rotateonclick &&
              ((L += 45),
              css(D[0], {
                transform: "rotate(" + L + "deg)",
              })),
            (E = !0),
            (1 == I.hideafterclick ||
              ("control_start" == n && 1 == I.hide && 1 == I.hideonplay)) &&
              o.controls.refresh());
      }
      function ae() {
        R &&
          (1 < R.length &&
            (1 == p ? (show(D[0]), hide(D[1])) : (show(D[1]), hide(D[0]))),
          1 == I.tip &&
            1 < H.length &&
            ((c.innerHTML = 1 == p ? H[0] : H[1]), pe())),
          exist(I.linkurl0) && (I.linkurl = 1 == p ? I.linkurl0 : I.linkurl2),
          exist(I.texts) &&
            1 < I.texts.length &&
            fe(1 == p ? I.texts[0] : I.texts[1]),
          (p = 1 != p),
          I.linkurl &&
            -1 < I.linkurl.indexOf(",0/1") &&
            js(I.linkurl, p ? 1 : 0),
          1 == I.bg &&
            exist(I.bgcolorlink2) &&
            -1 != I.bgcolorlink2 &&
            (p
              ? ((I.bgcolorlink0 = I.bgcolor), (I.bgcolor = I.bgcolorlink2))
              : (I.bgcolor = I.bgcolorlink0),
            te(),
            ee(a),
            oe(),
            "text" == I.type ? he() : ue(I.scale));
      }
      function re() {
        for (var e = 0; e < R.length; e++)
          "hidden" != D[e].style.visibility &&
            (css(D[e], {
              opacity: I.a,
            }),
            hide(D[e]));
      }
      function le(e) {
        D[0] &&
          D[0].offsetWidth >
            o.screen_w -
              I.marginleft -
              I.marginright -
              I.bgpaddingleft -
              I.bgpaddingright &&
          (1 == I.marquee
            ? ((e = e || D[0].innerHTML),
              (D[0].innerHTML = "<marquee>" + e + "</marquee>"))
            : css(D[0], {
                "white-space": "normal",
              }),
          css(D[0], {
            width:
              o.screen_w -
              I.marginleft -
              I.marginright -
              I.bgpaddingleft -
              I.bgpaddingright,
          }));
      }
      function ce() {
        a
          ? ((m = !1),
            (I.loading = 0),
            hide(a),
            D[0] &&
              ((I.w = D[0].offsetWidth * I.scale),
              (I.h = D[0].offsetHeight * I.scale),
              ue(I.scale)),
            (I.loaded = 0),
            te(),
            $(),
            ee(r),
            show(a),
            oe(),
            o.controls.resize(),
            isVisible(U) || hide2(U))
          : (m = !0);
      }
      function de() {
        o.system.mobile || o.controlover || ie(), pe();
      }
      function ue(e) {
        if (0 < e) {
          for (
            o.system.safari && 1 != I.tipalways
              ? css(a, {
                  zoom: e + "",
                })
              : css(a, {
                  transform: "scale(" + e + ")",
                }),
              J = 0;
            J < R.length;
            J++
          )
            o.system.safari && 1 != I.tipalways
              ? css(D[J], {
                  zoom: e + "",
                })
              : css(D[J], {
                  transform: "scale(" + e + ")",
                });
          w = x = e;
        }
      }
      function pe() {
        1 == I.tip &&
          (css(l, {
            top:
              (1 == O ? -s - l.offsetHeight + 3 : -l.offsetHeight / 2) +
              I.tipmargintop -
              I.tipmarginbottom,
            left:
              (1 == C ? -c.offsetWidth : 1 == O ? -i / 2 : +c.offsetWidth) -
              (1 == O ? 0 : c.offsetWidth / 2 + 5) +
              I.tipmarginleft -
              I.tipmarginright,
            height: I.tippaddingtop + c.offsetHeight + I.tippaddingbottom,
            width: I.tippaddingleft + c.offsetWidth + I.tippaddingright,
          }),
          css(e, {
            height: l.offsetHeight,
          }),
          (l.style.zIndex = "1000"));
      }
      function ve() {
        P = !1;
      }
      function fe(e) {
        var t, o;
        "text" == I.type &&
          (exist(e) &&
            (I.with_hours &&
              (4 == e.length && (e = (I.timeshort ? "0:0" : "00:0") + e),
              5 == e.length && (e = (I.timeshort ? "0:" : "00:") + e),
              7 == e.length && (e = (I.timeshort ? "" : "0") + e)),
            I.with_min && 4 == e.length && (e = "0" + e),
            (I.lngth = e.length)),
          (e =
            (I.presmbl ? I.presmbl + (I.minus4back ? "" : " ") : "") +
            e +
            (I.postsmbl ? " " + I.postsmbl : "")),
          (t =
            D[0].offsetWidth +
            (1 == I.bg ? I.bgpaddingtop + I.bgpaddingbottom : 0)),
          (o =
            D[0].offsetHeight +
            (1 == I.bg ? I.bgpaddingtop + I.bgpaddingbottom : 0)),
          (D[0].innerHTML = "custom" == M ? ye(e) : e),
          1 == I.triangle &&
            (D[0].innerHTML +=
              '<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid #fff;border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'),
          "title" == M &&
            (css(D[0], {
              width: "auto",
              "white-space": "nowrap",
            }),
            le(e)),
          (I.w =
            D[0].offsetWidth +
            (1 == I.bg ? I.bgpaddingtop + I.bgpaddingbottom : 0)),
          (I.h =
            D[0].offsetHeight +
            (1 == I.bg ? I.bgpaddingtop + I.bgpaddingbottom : 0)),
          (t != I.w || o != I.h || (0 < I.w && 0 == g)) && he(),
          0 < D[0].offsetWidth
            ? (g = I.w)
            : ("" != k && hide(D[0]), "" != e && setTimeout(he, 10)));
      }
      function he() {
        "text" == I.type &&
          D[0] &&
          0 < D[0].offsetWidth &&
          ("" != k && show(D[0]),
          (i = I.w = D[0].offsetWidth),
          (s = I.h = D[0].offsetHeight),
          te(),
          ee(a),
          oe(),
          o.controls && o.controls.resizeFromText());
      }
      function me(e) {
        return "" == I.tiptext ? Lang(j[e]) : 1 < H.length ? H[e] : H[0];
      }
      function ge() {
        hide2(U);
        for (var e = U.getElementsByTagName("*"), t = e.length; t--; )
          css(e[t], {
            "animation-play-state": "paused",
          });
        b = !1;
      }
      function ye(e) {
        var t,
          i = e + "";
        return (
          -1 < e.indexOf("{time}") &&
            exist(o.continue) &&
            (e = e.replace("{time}", timeFormat(o.continue.flag().t))),
          -1 < e.indexOf("{title") &&
            ((t = o.titlestore || v.title || ""),
            -1 < e.indexOf("{title2}") &&
              o.controls &&
              (e = e.replace("{title2}", o.controls.PlaylistG("title2"))),
            o.butplstart &&
              o.controls &&
              (t = o.controls.PlaylistG("butplstart")),
            (e = e.replace("{title}", t)),
            o.butplstart && !o.controls && setTimeout(fe, 100, i)),
          e
        );
      }
      function be(e, t) {
        for (var i = 0; i < e.length; i++) SvgColor(e[i], t);
        "chromecast" == I.linkurl &&
          o.chromecast &&
          o.chromecast.Color(e[0], t);
      }
      (this.Click = function () {
        ne();
      }),
        (this.c = function () {
          return U;
        }),
        (this.s = function (e) {
          return I[e];
        }),
        (this.ss = function (e, t) {
          return !!exist(I[e]) && I[e][t];
        }),
        (this.g = function (e) {
          switch (e) {
            case "width":
              return i;
            case "height":
              return s;
            case "x":
              return int(U.style.left);
            case "y":
              return int(U.style.top);
            case "opacity":
              return U.style.opacity || 1;
            case "show":
              return b;
            case "scaleX":
              return x;
            case "scaleY":
              return w;
            case "action":
              return M;
            case "action_settings":
              return k;
            case "clicked":
              return E;
            case "type":
              return I.type;
            case "length":
              return I.lngth || 0;
            case "key":
              return n;
            case "x0":
              return d;
            case "y0":
              return u;
            case "over":
              return S;
            case "settings#":
              return 0 == k.indexOf("settings#");
            case "settings:":
              return 0 == k.indexOf("settings:");
            case "set#visible":
              return A;
            default:
              return !1;
          }
        }),
        (this.set = function (e, t) {
          switch (e) {
            case "show":
              S && se(), (b = t);
              break;
            case "display":
              (i = t) && o.system.mobile && ((P = !0), setTimeout(ve, 300)),
                i ||
                  (1 == I.iconsreplay &&
                    V &&
                    (hide(D[F]), show(D[0]), (V = !1))),
                !void (1 == I.loading
                  ? (i ? show : hide)(U)
                  : ("control_time" == n || "control_duration" == n
                      ? (i ? show : hide)(U)
                      : css(U, {
                          display: i ? "block" : "none",
                        }),
                    (b = i) && show(U)));
              break;
            case "show2":
              show2(U);
              break;
            case "hide2":
              hide2(U);
              break;
            case "unhidden":
              I.hidden = 0;
              break;
            case "hidetime":
              0 < I.hidesec &&
                1 != I.hidden &&
                !f &&
                (clearTimeout(f),
                (f = setTimeout(function () {
                  hide2(U), (I.hidden = 1), (f = void 0);
                }, 1e3 * I.hidesec)));
              break;
            case "scale":
              ue(t);
              break;
            case "scaleX":
              css(U, {
                transform: "scaleX(" + t + ")",
              }),
                (x = t);
              break;
            case "scaleY":
              css(U, {
                transform: "scaleY(" + t + ")",
              }),
                (w = t);
              break;
            case "opacity":
              css(U, {
                opacity: t,
              });
              break;
            case "iconopacity":
              css(D[0], {
                opacity: t,
              });
              break;
            case "saturate":
              css(D[0], {
                filter: "saturate(" + t + ")",
              });
              break;
            case "left":
              css(U, {
                left: t,
              });
              break;
            case "top":
              css(U, {
                top: t,
              });
              break;
            case "width":
              css(U, {
                width: t,
              });
              break;
            case "height":
              css(U, {
                height: t,
              });
              break;
            case "over_final":
              I.over_final = t;
              break;
            case "rightside":
              C = t;
              break;
            case "set#visible":
              A = t;
              break;
            case "x":
              css(U, {
                left: t,
              });
              break;
            case "y":
              css(U, {
                top: t,
              });
              break;
            case "animation":
              I.animation = t;
              break;
            case "x0":
              d = t;
              break;
            case "y0":
              u = t;
              break;
            default:
              return !1;
          }
          var i;
        }),
        (this.UpdateText = function (e) {
          fe(e), (I.text33 = e);
        }),
        (this.Rotate = function () {
          css(U, {
            transform: "rotate(" + y + "deg)",
          }),
            (y += 20);
        }),
        (this.RenewFromTitle = function (e) {
          -1 < I.text.indexOf("{title") && fe(I.text);
        }),
        (this.CustomToogle = function () {
          ae();
        }),
        (this.ResizeText = function () {
          he();
        }),
        (this.UpdateVolume = function (e) {
          if (1 == I.displayvolume) {
            var t = 4;
            if ("control_mute" == n) {
              if (o.system.mobile) return;
            } else t = 8;
            for (var i = [], s = 1; s < t; s++)
              i[s] = document.getElementById(
                "pjs_".concat(v.id, n, "volume_element", s)
              );
            if (i[1]) {
              for (s = 1; s < t; s++) i[s] && hide(i[s]);
              if (4 == t)
                for (s = 1; s < t; s++) s / t < e && i[s] && show(i[s]);
              else
                for (s = t; 0 < s; s--)
                  if (s / t <= +e + 1 / t && i[s]) {
                    show(i[s]);
                    break;
                  }
            }
          }
        }),
        (this.On = function () {
          p ||
            (R && 1 < R.length && 1 < j.length && (hide(D[0]), show(D[1])),
            1 < j.length &&
              ((M = j[1]), 1 == I.tip && ((c.innerHTML = me(1)), pe())),
            1 == I.iconsreplay && V && (hide(D[F]), (V = !1)),
            (p = !0));
        }),
        (this.CustomSwitch = function (e) {
          var t;
          (t = e),
            (e = document.getElementById("pjs_".concat(v.id, n, "slider")))
              ? (css(e, {
                  transition: "transform 0.1s ease-out",
                }),
                (e.style.transform =
                  1 == t ? "translate(0, 0)" : "translate(-7px, 0)"))
              : (I.a = 1 == t ? 1 : 0.5),
            (p = 1 == t),
            1 == I.tip && 1 < H.length && (c.innerHTML = p ? H[0] : H[1]),
            css(D[0], {
              opacity: I.a,
            });
        }),
        (this.Off = function () {
          p &&
            (R && 1 < R.length && 1 < j.length && (show(D[0]), hide(D[1])),
            (M = j[0]),
            1 < j.length && 1 == I.tip && ((c.innerHTML = me(0)), pe()),
            (V = p = !1));
        }),
        (this.ReplayIcon = function () {
          1 == I.iconsreplay && (re(), show(D[F]), (V = !0));
        }),
        (this.Buffer = function () {
          var e = !1;
          if (
            (1 == I.hide &&
              1 == I.hidewithposter &&
              isVisible(o.poster) &&
              (e = !0),
            !e)
          ) {
            show2(U);
            for (var t = U.getElementsByTagName("*"), i = t.length; i--; )
              css(t[i], {
                "animation-play-state": "running",
              });
            b = !0;
          }
        }),
        (this.BufferStop = function () {
          ge();
        }),
        (this.Remove = function () {
          if (0 < R.length)
            for (J = 0; J < R.length; J++) U.removeChild(D[J]), (D[J] = null);
          a &&
            (a.removeAttribute("onclick"),
            a.removeAttribute("onmouseover"),
            a.removeAttribute("onmouseout"),
            a.parentNode.removeChild(a),
            (a = null)),
            "timeline" == I.position
              ? o.timeline.removeChild(U)
              : U.parentNode == o.frame
              ? o.frame.removeChild(U)
              : o.toolbar &&
                U.parentNode == o.toolbar &&
                o.toolbar.removeChild(U),
            l && U.removeChild(l),
            (U = null);
        }),
        (this.HdIcon = function () {
          h && h.toggle();
        });
    },
    ControlLine = function (key, action) {
      var i,
        style = [],
        w,
        h,
        bg,
        visible = !0,
        x0,
        y0,
        scaleX = 1,
        scaleY = 1,
        topBg = 0,
        leftBg = 0,
        alphas,
        mouseDown,
        mouseUp,
        click,
        handle,
        _duration_load,
        _duration_play,
        _time_load,
        _time_play,
        tip,
        tipbg,
        tiptext,
        tipcrn,
        points = [],
        lastTouch,
        over,
        onup_to;
      for (i in ((o.current_thumb = -1), default_style.but))
        style[i] = default_style.but[i];
      var action = v[key].action,
        type = v[key].type;
      for (i in default_style[action]) style[i] = default_style[action][i];
      for (i in v[key]) style[i] = v[key][i];
      (style.w = parseInt(style.w)),
        (style.h = parseInt(style.h)),
        (style = MarginPadding(style, "margin", "margin")),
        (style = MarginPadding(style, "marginproc", "marginproc"));
      var control = createElement("div");
      (1 == v.toolbar.hidedown && 1 == v.toolbar.hide
        ? o.toolbar
        : o.frame
      ).appendChild(control),
        "line" == action && (o.timeline = control);
      var _cul = !1;
      style.customline && "volume" != style.customline && (_cul = !0),
        css(control, {
          position: "absolute",
          top: 0,
          left: 0,
          opacity: 1,
          fontSize: "14px",
          lineHeight: "1em",
        }),
        1 == style.ontop && (control.style.zIndex = 5),
        Background();
      var lines = createElement("div");
      css(lines, {
        position: "absolute",
        bottom: Math.round(-style.h / 2),
        left: Math.round(-style.w / 2),
      }),
        1 == style.roundout &&
          css(lines, {
            "border-radius": (style.rounding * style.h) / 2,
            height: style.h,
            overflow: "hidden",
            "pointer-events": "none",
          }),
        exist2(style.dom) &&
          attr(control, {
            id: v.id + "_control_" + style.dom,
          }),
        control.appendChild(lines),
        "line" == action && 1 == v.thumbs && CreateThumb(),
        1 == style.tip && CreateTip();
      var line0 = createElement("div");
      if (
        (StyleLine(
          0,
          line0,
          0.3,
          1 == style.gradient
            ? "linear-gradient(#" +
                style.gradientcolorbg +
                ", #" +
                style.colorbg +
                ")"
            : style.colorbg,
          style.w,
          style.abg
        ),
        1 == style.customdesign && exist(style.customdesignsvg))
      ) {
        var svg0 = createElement("div");
        (svg0.innerHTML = style.customdesignsvg.replace(
          /\#FFFFFF/g,
          "#" + style.colorbg
        )),
          line0.appendChild(svg0),
          css(svg0, {
            position: "absolute",
            bottom: -Math.round(style.h / 2),
            left: 0,
            "pointer-events": "none",
          }),
          css(line0, {
            overflow: "hidden",
            background: "none",
          });
        for (
          var x = ["path", "polygon", "polyline", "rect", "ellipse"], y = 0;
          y < x.length;
          y++
        ) {
          var z = svg0.querySelectorAll("svg " + x[y]);
          if (0 < z.length)
            for (var y2 = 0; y2 < z.length; y2++)
              z[y2].style.fill = style.colorbg;
        }
      }
      lines.appendChild(line0);
      var lines1 = [],
        line1 = createElement("div"),
        line2;
      StyleLine(
        1,
        line1,
        style.linespeed1,
        1 == style.gradient
          ? "linear-gradient(#" +
              style.gradientcolorload +
              ", #" +
              style.colorload +
              ")"
          : style.colorload,
        0,
        style.aload
      ),
        lines.appendChild(line1),
        0 < style.aover &&
          ((line2 = createElement("div")),
          StyleLine(
            2,
            line2,
            style.linespeed2,
            style.colorover,
            0,
            style.aover
          ),
          lines.appendChild(line2));
      var line3 = createElement("div"),
        svg3,
        line3value,
        style,
        l3v_show,
        l3v_left,
        pointscontrol;
      if (
        (StyleLine(
          3,
          line3,
          style.linespeed3,
          1 == style.gradient
            ? "linear-gradient(#" +
                style.gradientcolor +
                ", #" +
                style.color +
                ")"
            : style.color,
          0,
          style.a
        ),
        1 == style.customdesign &&
          exist(style.customdesignsvg) &&
          ((svg3 = createElement("div")),
          (svg3.innerHTML = style.customdesignsvg.replace(
            /\#FFFFFF/g,
            "#" + style.color
          )),
          css(svg3, {
            position: "absolute",
            bottom: -Math.round(style.h / 2),
            left: 0,
            "pointer-events": "none",
          }),
          css(line3, {
            overflow: "hidden",
            background: "none",
          }),
          line3.appendChild(svg3)),
        1 == style.value &&
          ((line3value = createElement("div")),
          (style = MarginPadding(style, "valuepadding", "valuepadding")),
          (style = MarginPadding(style, "valuemargin", "valuemargin")),
          css(line3value, {
            position: "absolute",
            bottom: style.h / 2,
            right: 0,
            "pointer-events": "none",
            "font-size": style.valuesize + "px",
            color: style.valuecolor,
            "line-height": "100%",
            "padding-top": style.valuepaddingtop,
            "padding-bottom": style.valuepaddingbottom,
            "padding-left": style.valuepaddingleft,
            "padding-right": style.valuepaddingright,
            "margin-top": style.valuemargintop,
            "margin-bottom": style.valuemarginbottom,
            "margin-left": style.valuemarginleft,
            "margin-right": style.valuemarginright,
            "border-radius": style.valuerounding + "px",
            display: "none",
          }),
          1 == style.valuebg &&
            css(line3value, {
              background: "#" + style.valuebgcolor,
            }),
          line3.appendChild(line3value),
          (l3v_show = !1),
          (l3v_left = !1)),
        (o.timeline_h = style.h),
        lines.appendChild(line3),
        1 == style.pointed &&
          ((v.pointed = 1),
          (pointscontrol = createElement("div")),
          css(pointscontrol, {
            position: "absolute",
            top: 0,
            left: 0,
          }),
          control.appendChild(pointscontrol),
          exist(v.points) && UpdatePoints(v.points)),
        1 == style.handle)
      ) {
        if (
          (-1 == style.handleicon.toString().indexOf("<svg") &&
            "" == style.handleicon &&
            (style.handleicon =
              "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>"),
          (handle = createElement("div")),
          (handle.innerHTML = style.handleicon.toString()),
          (style = MarginPadding(style, "handlemargin", "handlemargin")),
          css(handle, {
            position: "absolute",
            top: -10 + style.handlemargintop - style.handlemarginbottom,
            left: -1e3,
            "pointer-events": "none",
            height: 20,
            width: style.handle_width,
            opacity: style.handlea,
            transition: "transform 0.1s linear, opacity 0.1s linear",
          }),
          1 == style.handlehide || 1 == style.handlehideinit
            ? css(handle, {
                transform: "scale(0)",
              })
            : 1 != style.handlescale &&
              css(handle, {
                transform: "scale(" + style.handlescale + ")",
              }),
          control.appendChild(handle),
          -1 != style.handlecolor)
        )
          for (var x = ["path", "rect", "ellipse"], y = 0; y < x.length; y++) {
            var z = handle.querySelectorAll("svg " + x[y]);
            if (0 < z.length)
              for (var y2 = 0; y2 < z.length; y2++)
                z[y2].style.fill = "#" + style.handlecolor;
          }
        style.handlewidth = handle.offsetWidth;
      }
      function StyleLine(e, t, o, i, s, n) {
        css(t, {
          position: "absolute",
          bottom: 0,
          left: 0,
          width: s,
          height: 0 < style["h" + e] ? style["h" + e] : style.h,
          background: i ? (-1 < i.indexOf("linear") ? i : "#" + i) : "",
          "border-radius":
            1 == style.roundout ? 1 : (style.rounding * style.h) / 2,
          opacity: n,
          "pointer-events": "none",
          transition: "transform 0.2s ease-in-out",
        });
      }
      function Background() {
        bg = createElement("div");
        var e =
            (style = MarginPadding(style, "bgpadding", "bgpadding")).h +
            style.bgpaddingtop +
            style.bgpaddingbottom,
          t = style.w + style.bgpaddingleft + style.bgpaddingright;
        1 == style.bg || (style.bga = 0),
          (style = MarginPadding(style, "clickmargin", "clickmargin")),
          (1 != v.toolbar.clickarea && 1 != style.clickarea) ||
            ((style.bgcolor = "#ff0000"), (style.bg = 1), (style.bga = 0.5)),
          css(bg, {
            position: "absolute",
            top: 0,
            left: 0,
            width: t,
            height: e * style.clickscaley,
            borderRadius: (style.bgo * e) / 2,
            backgroundColor: style.bgcolor,
            opacity: style.bga,
            pointerEvents: "auto",
            transition: "opacity .1s linear, background .1s linear",
          }),
          1 == style.bgborder &&
            css(bg, {
              border: "1px solid #" + style.bgbordercolor,
            }),
          1 == style.click
            ? (1 == style.hand &&
                css(bg, {
                  cursor: "pointer",
                }),
              o.system.mobile ||
                ((bg.onclick = onClick),
                (bg.onmouseup = onUp),
                (bg.onmousedown = onDown),
                (bg.onmousemove = onMove)))
            : css(bg, {
                cursor: "default",
              }),
          o.system.mobile ||
            ((bg.onmouseover = onOver),
            (bg.onmousemove = onMove),
            (bg.onmouseout = onOut)),
          o.system.mobile &&
            (bg.addEventListener("touchstart", function (e) {
              (e.cancelBubble = !0),
                !exist(e.clientX) &&
                  0 < e.touches.length &&
                  ((e.clientX = e.touches[0].pageX),
                  (e.clientY = e.touches[0].pageY)),
                onOver((lastTouch = e)),
                onDown(e);
            }),
            bg.addEventListener("touchend", function (e) {
              (e.cancelBubble = !0), onOut(e), onUp(lastTouch);
            }),
            bg.addEventListener("click", function (e) {
              e.cancelBubble = !0;
            }),
            bg.addEventListener("touchmove", function (e) {
              !exist(e.clientX) &&
                0 < e.touches.length &&
                ((e.clientX = e.touches[0].pageX),
                (e.clientY = e.touches[0].pageY)),
                onMove((lastTouch = e));
            })),
          css(bg, {
            left: Math.ceil(-style.w / 2 - style.bgpaddingleft),
          }),
          css(bg, {
            top: Math.ceil(
              -style.h / 2 -
                style.bgpaddingtop +
                style.clickmargintop -
                style.clickmarginbottom
            ),
          }),
          control.appendChild(bg);
      }
      function Resize(e) {
        var t;
        e != w &&
          ((w = e),
          (t = (o.timeline_w = w) / line0.offsetWidth),
          css(bg, {
            width: w + style.bgpaddingleft + style.bgpaddingright,
            left: -w / 2 - style.bgpaddingleft,
          }),
          css(lines, {
            left: -w / 2,
          }),
          css(line0, {
            width: w,
          }),
          css(lines, {
            width: w,
          }),
          (e = line1.offsetWidth * t) > line0.offsetWidth &&
            (e = line0.offsetWidth),
          css(line1, {
            width: e,
          }),
          (t = line3.offsetWidth * t),
          css(line3, {
            width: t,
          }),
          HandleWidth(t, !1),
          "line" == action && Continue(),
          1 == style.pointed && PlacePoints());
      }
      function HandleWidth(e, t) {
        1 == style.handle &&
          (e < style.handlewidth / 2 &&
            20 != style.handle_width &&
            (e = style.handlewidth / 2),
          e > w - style.handlewidth / 2 &&
            20 != style.handle_width &&
            (e = w - style.handlewidth / 2),
          (e =
            e -
            w / 2 -
            style.handlewidth / 2 +
            style.handlemarginleft -
            style.handlemarginright),
          css(handle, {
            left: e,
          }));
      }
      function ShowHandle() {
        css(handle, {
          transform: "scale(" + style.handlescale + ")",
        });
      }
      function onOver(e) {
        o.controls.Mouse(key, "over"),
          1 == style.bg &&
            (-1 != style.bgaover &&
              new Motion({
                mc: bg,
                type: "alpha_div",
                to: style.bgaover,
                time: 0.1,
                me: key + "bg",
              }),
            exist2(style.bgcolorover) &&
              css(bg, {
                "background-color": style.bgcolorover,
              })),
          exist2(style.coloroverplay) &&
            css(line3, {
              "background-color": style.coloroverplay,
            }),
          1 == style.handle &&
            (1 == style.handleiconsover &&
              exist(style.handleiconover) &&
              ((1 == style.handleiconspress && mouseDown) ||
                (handle.innerHTML =
                  "<svg width='" +
                  style.handle_width +
                  "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" +
                  style.handleiconover.toString() +
                  "</svg>")),
            1 == style.handlehide
              ? (1 == style.handlehideinit && !o.start) || ShowHandle()
              : -1 != style.handleaover &&
                new Motion({
                  mc: handle,
                  type: "alpha_div",
                  to: style.handleaover,
                  time: 0.1,
                  me: key + "handle",
                })),
          1 == style.tip &&
            (0 < o.media.duration() || "volume" == action || _cul) &&
            (show(tip),
            css(tip, {
              opacity: 1,
            })),
          0 < style.expand &&
            (css(bg, {
              transform: "scaleY(" + ((style.expand - 1) / 5 + 1) + ")",
            }),
            LineScale(style.expand)),
          "volume" == action &&
            (o.actions.volumewheel(!0), (o.volumewheel = !0)),
          (o.controlover = !0);
      }
      function LineScale(e) {
        css(line0, {
          transform: "scaleY(" + e + ")",
        }),
          css(line1, {
            transform: "scaleY(" + e + ")",
          }),
          line2 &&
            css(line2, {
              transform: "scaleY(" + e + ")",
            }),
          css(line3, {
            transform: "scaleY(" + e + ")",
          });
      }
      function onOut() {
        mouseUp ||
          (0 < style.aover &&
            css(line2, {
              width: 0,
            }),
          exist2(style.coloroverplay) &&
            css(line3, {
              "background-color": style.color,
            }),
          1 == style.bg &&
            (-1 != style.bgaover &&
              new Motion({
                mc: bg,
                type: "alpha_div",
                to: style.bga,
                time: 0.1,
                me: key + "bg",
              }),
            exist2(style.bgcolorover) &&
              css(bg, {
                "background-color": style.bgcolor,
              })),
          1 == style.handle &&
            (1 == style.handleiconsover &&
              exist(style.handleiconover) &&
              ((1 == style.handleiconspress && mouseDown) ||
                (handle.innerHTML =
                  "<svg width='" +
                  style.handle_width +
                  "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" +
                  style.handleicon.toString() +
                  "</svg>")),
            1 == style.handlehide
              ? css(handle, {
                  transform: "scale(0)",
                })
              : -1 != style.handleaover &&
                new Motion({
                  mc: handle,
                  type: "alpha_div",
                  to: style.handlea,
                  time: 0.1,
                  me: key + "handle",
                })),
          0 < style.expand &&
            (css(bg, {
              transform: "scaleY(1)",
            }),
            LineScale(1)),
          "volume" != action ||
            o.fullscreen ||
            (o.actions.volumewheel(!1), (o.volumewheel = !1)),
          o.controls.Mouse(key, "out")),
          1 == style.tip &&
            (0 < o.media.duration() || "volume" == action) &&
            (hide(tip),
            css(tip, {
              opacity: 0,
            })),
          o.thumbs_on &&
            "line" == action &&
            (o.th.hide(), (o.current_thumb = -1)),
          (o.controlover = !1);
      }
      function onClick(e) {
        e.cancelBubble = !0;
      }
      function CancelBubble(e) {
        e.cancelBubble = !0;
      }
      function onUp(e) {
        "volume" == action &&
          o.hidden_volume_over &&
          ((mouseUp = !0),
          clearTimeout(onup_to),
          (onup_to = setTimeout(function () {
            (mouseUp = !1), onOut();
          }, 1e3))),
          EndMove(),
          (o.mouseDown = !1),
          1 == style.handle &&
            1 == style.handleiconspress &&
            exist(style.handleiconpress) &&
            (handle.innerHTML =
              "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" +
              style.handleicon.toString() +
              "</svg>"),
          CalculateClick(e.clientX, e.clientY),
          o.controls.ControlClick(key),
          o.controls.StageMouseUp(e.clientX, e.clientY),
          (e.cancelBubble = !0);
      }
      function onDown(e) {
        (mouseDown = !0),
          1 == style.handle &&
            1 == style.handleiconspress &&
            exist(style.handleiconpress) &&
            (handle.innerHTML =
              "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" +
              style.handleiconpress.toString() +
              "</svg>"),
          (topBg = findTop(bg)),
          (leftBg = findLeft(bg)),
          CalculateClick(e.clientX, e.clientY),
          UpdatePlay(click, 1, "no");
      }
      function CalculateClick(e, t) {
        var i,
          s = Math.max(
            document.documentElement.scrollLeft,
            document.body.scrollLeft
          ),
          n = Math.max(
            document.documentElement.scrollTop,
            document.body.scrollTop
          );
        o.system.mobile || ((t += n), (e += s)),
          0 < style.vertical
            ? ((i = t - topBg - style.bgpaddingright),
              (click = i / w),
              270 == style.vertical &&
                ((i = t - topBg - style.bgpaddingleft),
                (click = -1 * ((click = i / w) - 1))))
            : ((i = e - leftBg - style.bgpaddingleft),
              (click = i / w),
              134 < style.rotation &&
                style.rotation < 235 &&
                ((i = e - leftBg - style.bgpaddingright),
                (click = -1 * ((click = i / w) - 1)))),
          1 < click && (click = 1),
          click < 0 && (click = 0);
      }
      function UpdatePoints() {
        if (points)
          for (var i = 0; i < points.length; i++)
            pointscontrol.removeChild(points[i]);
        if (((points = []), v.points)) {
          "string" == typeof v.points && (v.points = eval(v.points));
          for (var i = 0; i < Object.keys(v.points).length; i++)
            v.points[i].time &&
              ((points[i] = createElement("div")),
              css(points[i], {
                position: "absolute",
                left: 0,
                top: -style.h / 2,
                width: exist(v.points[i].width)
                  ? v.points[i].width
                  : style.pointw,
                height: style.h,
                opacity: exist(v.points[i].opacity)
                  ? v.points[i].opacity
                  : style.pointa,
                "pointer-events": "none",
                display: "none",
                "background-color": exist(v.points[i].color)
                  ? v.points[i].color
                  : style.pointcolor,
              }),
              (points[i].time = v.points[i].time),
              pointscontrol.appendChild(points[i]));
          PlacePoints();
        }
      }
      function PlacePoints() {
        for (var e = o.media.duration(), t = 0; t < points.length; t++)
          0 < e
            ? css(points[t], {
                left: w * (points[t].time / e) - w / 2,
                display: "block",
              })
            : hide2(points[t]);
      }
      function EndMove() {
        mouseDown = !1;
      }
      function onMove(e) {
        var t;
        (leftBg = findLeft(bg)),
          0 < style.aover &&
            ((!o.start && "line" == action) ||
              css(line2, {
                width: e.clientX - leftBg,
              })),
          1 == style.tip &&
            (0 < o.media.duration() || "volume" == action || _cul) &&
            (isVisible(tip) || show(tip),
            (topBg = findTop(bg)),
            CalculateClick(e.clientX, e.clientY),
            "line" == action &&
              (1 == v.hlsdvrtime
                ? o.media.isLive() && 0 < o.media.currentFile().indexOf("?DVR")
                  ? (tiptext.innerHTML =
                      "- " + timeFormat((1 - click) * o.media.duration(!0)))
                  : (tiptext.innerHTML = timeFormat(click * o.media.duration()))
                : ((t = o.media.duration()),
                  0 < v.delete && (t -= v.delete),
                  (tiptext.innerHTML = timeFormat(click * t)))),
            ("volume" != action && !_cul) ||
              ((tiptext.innerHTML = Math.round(100 * click)),
              _cul &&
                o.line_speed &&
                (tiptext.innerHTML =
                  (_cul && exist2(style.tiptext)
                    ? style.tiptext + "&nbsp;"
                    : "") +
                  parseFloat(click * o.files_speed.slice(-1)[0]).toFixed(1))),
            css(tip, {
              top:
                2 * -tiptext.offsetHeight -
                +style.linetipmarginbottom -
                (1 == style.toptip
                  ? (style.h / 2) * (0 < style.expand ? style.expand : 1)
                  : 0),
              left:
                -w / 2 +
                (e.clientX + document.documentElement.scrollLeft - leftBg) -
                tip.offsetWidth / 2,
              height:
                style.tippaddingtop +
                style.tipfontsize +
                style.tippaddingbottom,
              width:
                style.tippaddingleft +
                tiptext.offsetWidth +
                style.tippaddingright,
            }),
            css(tipbg, {
              height: tip.offsetHeight,
            }),
            (tip.style.zIndex = "1000")),
          o.thumbs_on &&
            "line" == action &&
            o.th &&
            0 < o.media.duration() &&
            (0 == style.tip &&
              ((topBg = findTop(bg)),
              (leftBg = findLeft(bg)),
              CalculateClick(e.clientX, e.clientY)),
            (t = -w / 2 + (e.clientX - leftBg) - v.thumb_width / 2) >
              w / 2 - v.thumb_width && (t = w / 2 - v.thumb_width),
            css(o.thumb, {
              top:
                -v.thumb_height -
                (0 < v.thumb_bottom ? +v.thumb_bottom : 5) -
                v.thumb_border,
              left: t < -w / 2 ? -w / 2 : t,
            }),
            o.th.time(click * o.media.duration(), e.clientX, leftBg, w)),
          o.system.mobile && onDown(e);
      }
      function UpdatePlay(e, t, o) {
        var i;
        e < 0 && (e = 0),
          0 < v.delete && 1 < t && ((t -= v.delete), (e -= v.delete)),
          1 == style.handle &&
            1 == style.handlehideinit &&
            1 != style.handlehide &&
            !style.handleinit &&
            0 < e &&
            (ShowHandle(), (style.handleinit = !0)),
          (mouseDown && 1 != t) ||
            (0 < t && 0 < e
              ? (t < e && (e = t),
                (i = w * (e / t)) == line3.offsetWidth && (i = -1))
              : (i = 0),
            0 <= i &&
              (css(line3, {
                width: i,
              }),
              HandleWidth(i, !0)),
            exist(line3value) &&
              (t < 2 && "line" == action
                ? l3v_show && (hide2(line3value), (l3v_show = !1))
                : (l3v_show || (show2(line3value), (l3v_show = !0)),
                  (line3value.innerHTML =
                    "line" == action
                      ? Time(0 == e ? t : e)
                      : Math.ceil(100 * e)),
                  i <
                  line3value.clientWidth +
                    style.valuemarginright +
                    style.valuemarginleft
                    ? l3v_left ||
                      (css(line3value, {
                        left: 0,
                        right: "auto",
                      }),
                      (l3v_left = !0))
                    : l3v_left &&
                      (css(line3value, {
                        right: 0,
                        left: "auto",
                      }),
                      (l3v_left = !1)))));
      }
      function CreateThumb() {
        (o.thumb = createElement("div")),
          css(o.thumb, {
            position: "absolute",
            left: 0,
            top: 0,
            width: v.thumb_width,
            height: v.thumb_height,
            overflow: "hidden",
            "pointer-events": "none",
            "background-color": "#000",
            "border-radius": v.thumb_radius + "px",
            display: "none",
          }),
          (o.thumb.id = "pjs_thumbnail_" + v.id),
          1 == v.thumb_border &&
            css(o.thumb, {
              border:
                v.thumb_borderwidth +
                "px solid " +
                SettingsParser("color", v.thumb_bordercolor),
            }),
          1 == v.thumb_shadow &&
            css(o.thumb, {
              "box-shadow": "0px 1px 5px rgba(0,0,0,0.5)",
            }),
          (o.thumb.style.zIndex = "999"),
          control.appendChild(o.thumb);
      }
      function CreateTip() {
        (tip = createElement("div")),
          css(tip, {
            position: "absolute",
            left: 0,
            top: 0,
            height: "auto",
            "pointer-events": "none",
            opacity: 0,
            transition: "opacity 0.1s linear",
          }),
          (tipbg = createElement("div")),
          (style = MarginPadding(style, "tippadding", "tippadding")),
          css(tipbg, {
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            height: 30,
            "background-color": style.tipbgcolor,
            opacity: style.tipbga,
            "border-radius": style.tipbgrounding,
          }),
          (tiptext = createElement("div")),
          css(tiptext, {
            position: "absolute",
            left: style.tippaddingleft,
            top: style.tippaddingtop,
            color: style.tipcolor,
            "font-family": style.tipfont,
            "font-size": style.tipfontsize,
            "letter-spacing": style.tipletterspacing + "px",
            "line-height": "1",
            opacity: style.tipa,
          }),
          style.linetippointer && (style.tippointer = style.linetippointer),
          1 == style.tippointer &&
            ((tipcrn = createElement("div")).innerHTML =
              '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="' +
              CheckColor(style.tipbgcolor) +
              '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),
          control.appendChild(tip),
          tip.appendChild(tipbg),
          tip.appendChild(tiptext),
          1 == style.tippointer &&
            (tip.appendChild(tipcrn),
            css(tipcrn, {
              position: "absolute",
              left: "50%",
              "margin-left": "-4px",
              bottom: o.doctype ? "-8px" : "-6px",
              opacity: style.tipbga,
            }));
      }
      function Continue() {
        var e;
        !o.continue ||
          1 != v.timestore ||
          o.start ||
          ((e = o.continue.flag()).t && e.d && UpdatePlay(e.t, e.d));
      }
      0 != style.rotation &&
        css(control, {
          transform: "rotate(" + style.rotation + "deg)",
        }),
        1 == style.hidden && (hide(control), (visible = !1)),
        "volume" == action &&
          (1 == style.hide && 1 == style.hideoutmute
            ? ((o.hidden_volume = !0), (style.hidden = !0))
            : (o.hidden_volume = !1)),
        (style.vertical = 0),
        0 != style.rotation &&
          ((style.rotation2 = Math.abs(style.rotation)),
          45 < style.rotation2 &&
            style.rotation2 < 135 &&
            (style.vertical = 90),
          225 < style.rotation2 &&
            style.rotation2 < 315 &&
            (style.vertical = 270)),
        _cul &&
          ((o.line_speed = "speed" == style.customline),
          (w = style.w),
          UpdatePlay(1, o.files_speed.slice(-1)[0], "no")),
        (this.PlacePoints = function () {
          PlacePoints();
        }),
        (this.RenewPoints = function () {
          UpdatePoints();
        }),
        (this.c = function () {
          return control;
        }),
        (this.s = function (e) {
          return style[e];
        }),
        (this.ss = function (e, t) {
          return style[e][t];
        }),
        (this.g = function (e) {
          switch (e) {
            case "width":
              return w;
            case "offsetwidth":
              return line0.offsetWidth;
            case "height":
              return style.h;
            case "x":
              return int(control.style.left);
            case "y":
              return int(control.style.top);
            case "opacity":
              return control.style.opacity || 1;
            case "show":
              return visible;
            case "scaleX":
              return scaleX;
            case "scaleY":
              return scaleY;
            case "action":
              return action;
            case "key":
              return key;
            case "x0":
              return x0;
            case "y0":
              return y0;
            case "click":
              return click;
            default:
              return !1;
          }
        }),
        (this.set = function (e, t) {
          switch (e) {
            case "show":
              visible = t;
              break;
            case "mouseDown":
              mouseDown = t;
              break;
            case "display":
              "line" == action || 1 == style.hide
                ? css(control, {
                    visibility: t ? "visible" : "hidden",
                  })
                : css(control, {
                    display: t ? "block" : "none",
                  }),
                (visible = t);
              break;
            case "scaleX":
              css(control, {
                transform: "scaleX(" + t + ")",
              }),
                (scaleX = t);
              break;
            case "scaleY":
              css(control, {
                transform: "scaleY(" + t + ")",
              }),
                (scaleY = t);
              break;
            case "opacity":
              css(control, {
                opacity: t,
              });
              break;
            case "left":
              css(control, {
                left: t,
              });
              break;
            case "top":
              css(control, {
                top: t,
              });
              break;
            case "click":
              click = t;
              break;
            case "hiddenwidth":
              style.hiddenwidth = t;
              break;
            case "width":
              css(control, {
                width: t,
              });
              break;
            case "height":
              css(control, {
                height: t,
              });
              break;
            case "over_final":
              style.roundingver_final = t;
              break;
            case "x":
              css(control, {
                left: t,
              });
              break;
            case "y":
              css(control, {
                top: t,
              });
              break;
            case "x0":
              x0 = t;
              break;
            case "y0":
              y0 = t;
          }
        }),
        (this.Resize = function (e) {
          Resize(e);
        }),
        (this.StageLeave = function (e) {}),
        (this.StageMove = function (e, t) {
          mouseDown &&
            (("volume" != action && !_cul) ||
              (CalculateClick(e, t), o.controls.ControlClick(key)),
            "volume" == action && (o.hidden_volume_over = !0),
            CalculateClick(e, t),
            UpdatePlay(click, 1, "no"));
        }),
        (this.StageMouseUp = function (e, t) {
          mouseDown &&
            (EndMove(),
            (mouseDown = !1),
            CalculateClick(e, t),
            o.controls.ControlClick(key),
            UpdatePlay(click, 1, "no"));
        }),
        (this.UpdatePlay = function (e, t, o) {
          (t == _duration_play && e == _time_play) || UpdatePlay(e, t, o);
        }),
        (this.UpdatePlaySeek = function () {
          1 < click && (click = 1),
            click < 0 && (click = 0),
            css(line3, {
              width: click * w,
            });
        }),
        (this.UpdateLoad = function (e, t) {
          0 < t && 0 < e
            ? (css(line1, {
                width: int(w * (e / t)),
              }),
              (_duration_load = t),
              (_time_load = e))
            : css(line1, {
                width: (_time_load = 0),
              });
        }),
        (this.Remove = function () {
          control.removeChild(lines),
            bg &&
              (bg.removeAttribute("onclick"),
              bg.removeAttribute("onmouseover"),
              bg.removeAttribute("onmouseout"),
              bg.parentNode.removeChild(bg),
              (bg = null)),
            handle && control.removeChild(handle),
            control.parentNode == o.frame
              ? o.frame.removeChild(control)
              : o.toolbar &&
                control.parentNode == o.toolbar &&
                o.toolbar.removeChild(control),
            (control = null);
        });
    },
    ControlsBg = function () {
      var i,
        e,
        t = [],
        s = !0,
        n = 1,
        a = 1,
        r = 0,
        l = 0,
        c = random(1e5, 2e5);
      for (e in ((t.position = v.toolbar.position), v.toolbar))
        v.toolbar.hasOwnProperty(e) && (t[e] = v.toolbar[e]);
      0 == t.show &&
        ((v.toolbar.h = t.h = 0),
        (t.padding = t.margin = "0 0 0 0"),
        (t.gradient = 0)),
        (t.scale = 1),
        (t = MarginPadding(t, "margin", "margin")),
        (t = MarginPadding(t, "marginproc", "marginproc")),
        exist(t.paddingtop) &&
          20 != t.paddingtop &&
          "-20 0 0 0" == t.margin &&
          (t.margintop = t.paddingtop);
      var d = createElement("div");
      css(d, {
        position: "absolute",
        left: 0,
        top: 0,
        width: 1 == t.stretchonfullscreen ? "100%" : o.normal_w,
        height: t.h - ("top" != t.position ? t.margintop : 0),
        opacity_: t.a,
        "pointer-events": "none",
        fontSize: "14px",
        lineHeight: "1em",
      }),
        o.frame.appendChild(d);
      var u,
        p = createElement("div");
      css(p, {
        position_: "absolute",
        left_: 0,
        top_: 0,
        width_: "100%",
        height: t.h - ("top" != t.position ? t.marginbottom + t.margintop : 0),
        opacity: t.a,
        display: "block",
        "margin-left": t.marginleft,
        "margin-right": t.marginright,
        "border-radius": t.rounding,
      }),
        d.appendChild(p),
        (i = d.offsetWidth),
        (v.toolbar_margintop = -t.margintop),
        1 == t.gradient
          ? "000000" == t.color || "" != v.toolbar.image
            ? ("top" != t.position && (v.toolbar_margintop = 98 - t.h),
              (u =
                "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg=="),
              -1 < v.toolbar.image.indexOf("data:image") &&
                (u = v.toolbar.image),
              css(p, {
                height: t.h + ("top" != t.position ? v.toolbar_margintop : 0),
                background: "url(" + u + ") repeat-x 50% 100%",
                "background-size": "auto",
              }))
            : ((u =
                "to bottom, rgba(" +
                hexToRgb(t.color) +
                ",0), rgba(" +
                hexToRgb(t.color) +
                ",1)"),
              css(p, {
                background: "linear-gradient(" + u + ")",
              }))
          : css(p, {
              "background-color": t.color,
            }),
        (this.h = function () {
          return t.h - ("top" != t.position ? t.margintop : 0);
        }),
        (this.c = function () {
          return d;
        }),
        (this.s = function (e) {
          return t[e];
        }),
        (this.g = function (e) {
          if (!d) return !1;
          switch (e) {
            case "w":
              return 0 < d.offsetWidth && (i = d.offsetWidth), i;
            case "width":
              return d.offsetWidth;
            case "height":
              return d.offsetHeight;
            case "x":
              return int(d.style.left);
            case "y":
              return int(d.style.top);
            case "opacity":
              return d.style.opacity || 1;
            case "show":
              return s;
            case "scaleX":
              return n;
            case "scaleY":
              return a;
            case "key":
              return "bg";
            case "x0":
              return r;
            case "y0":
              return l;
            case "motion_id":
              return "bg" + c;
            default:
              return !1;
          }
        }),
        (this.set = function (e, t) {
          switch (e) {
            case "show":
              s = t;
              break;
            case "w":
              i = t;
              break;
            case "display":
              css(d, {
                display: t && !o.hidecontrols ? "block" : "none",
              }),
                (s = t);
              break;
            case "scale":
              css(d, {
                transform: "scale(" + t + ")",
              }),
                (a = n = t);
              break;
            case "scaleX":
              css(d, {
                transform: "scaleX(" + t + ")",
              }),
                (n = t);
              break;
            case "scaleY":
              css(d, {
                transform: "scaleY(" + t + ")",
              }),
                (a = t);
              break;
            case "opacity":
              css(d, {
                opacity: t,
              });
              break;
            case "left":
              css(d, {
                left: t,
              });
              break;
            case "top":
              css(d, {
                top: t,
              });
              break;
            case "width":
              css(d, {
                width: t,
              });
              break;
            case "height":
              css(d, {
                height: t,
              });
              break;
            case "x":
              css(d, {
                left: t,
              });
              break;
            case "y":
              css(d, {
                top: t,
              });
              break;
            case "x0":
              r = t;
              break;
            case "y0":
              l = t;
          }
        }),
        (this.Remove = function () {
          o.frame.removeChild(d), (d = null);
        });
    };
  function VisibleCheck() {
    exist(options.id) &&
      document.getElementById(options.id) &&
      (isHidden(document.getElementById(options.id)) && 1 != options.visible
        ? setTimeout(VisibleCheck, 50)
        : Init());
  }
  function Init() {
    for (var i = 0; i < pljssglobal.length; i++)
      pljssglobal[i].api("id") == options.id &&
        pljssglobal[i].api("playing") &&
        pljssglobal[i].api("stop");
    pljssglobal.push(o.this);
    var stop = !1,
      obsrvr,
      ioscss,
      tmp;
    if (exist(options.player))
      for (var i = 2; i < 10; i++)
        options.player == i &&
          "" != o["u" + i] &&
          ((v = UpdateObject(v, JSON.parse(decode(o["u" + i])))), (stop = !0));
    if (
      ("" == o.u ||
        stop ||
        (v = UpdateObject(
          v,
          "object" != typeof o.u ? JSON.parse(decode(o.u)) : o.u
        )),
      "function" != typeof pljscom)
    )
      for (var key in options)
        options.hasOwnProperty(key) &&
          0 == key.indexOf("rc_") &&
          (options[key] = null);
    if (
      ((v = UpdateObject(v, options)),
      (exist(v.file) && "" != v.file) || 1 != v.emptyremove)
    ) {
      for (var key in ((1 != v.postmessage && 1 != v.pjsframed) ||
        window.addEventListener("message", function (e) {
          var t,
            i = void 0;
          if (
            (exist(e.data.time) && (i = e.data.time),
            exist(e.data.volume) && (i = e.data.volume),
            exist(e.data.method) && (t = e.data.method),
            exist(e.data.api) && (t = e.data.api),
            t && v.postmessages) &&
            "" != v.postmessages &&
            -1 == v.postmessages.replace(/\s+/gi, "").split(",").indexOf(t)
          )
            return;
          1 == v.pjsframed && "function" == typeof PjsFrMsg && PjsFrMsg(e),
            t &&
              o.init &&
              (exist(e.data.set) && (i = e.data.set), apiProcessor(t, i));
        }),
      o.compilation))
        o.compilation.hasOwnProperty(key) &&
          "" != o.compilation[key] &&
          (o.compilations += o.compilation[key] + " ");
      if (
        (log(o.version + " " + o.compilations),
        (pljssglobalid = v.id),
        (o.d = location.hostname),
        parent)
      ) {
        var exception = !1;
        try {
          if (parent)
            if (parent.document)
              for (
                var frames = parent.document.getElementsByTagName("IFRAME"),
                  i = 0;
                i < frames.length;
                i++
              )
                frames[i].contentWindow === window &&
                  ((o.parentIframe = frames[i]),
                  (o.iniframe = !0),
                  1 != v.notframe &&
                    css(o.parentIframe, {
                      border: "none",
                    }),
                  (o.parentIframe_style = o.parentIframe.style),
                  log("iframe"));
            else exception = !0;
        } catch (err) {
          exception = !0;
        }
        exception && ((o.iniframe = !0), log("Cross-domain"));
      }
      if (
        (o.iniframe &&
          document.referrer &&
          (o.domain = document.referrer.split("/")[2]),
        o.prted || prtObj(),
        "function" != typeof PjsFr || !PjsFr())
      ) {
        if (
          ((o.init = !0),
          CustomFonts(),
          1 == v.ga &&
            1 != v.ga4 &&
            "function" == typeof PluginOldGA &&
            (o.ga = new PluginOldGA()),
          (o.container = document.getElementById(v.id)),
          !o.container)
        )
          return (v.log = 1), log('id "' + v.id + '" not found'), !1;
        (o.container.innerHTML = ""),
          css(o.container, {
            padding: 0,
            "word-spacing": "normal",
          }),
          (o.container_h = o.container.offsetHeight),
          (o.container_w = o.container.offsetWidth),
          exist(v.playersize) &&
            !exist(v.aspect) &&
            (exist(v.playersize.aspect) && (v.aspect = v.playersize.aspect),
            exist(v.playersize.changeheight) &&
              (v.changeheight = v.playersize.changeheight)),
          -1 < o.container.style.width.indexOf("%") &&
            (o.container_w_procent = o.container.style.width),
          ("off" == v.aspect || -1 < o.container.style.height.indexOf("%")) &&
            ((v.aspect = "%"),
            (o.container_h_procent = o.container.style.height),
            (o.container_h = 0)),
          0 == o.container_w &&
            (0 < o.container.style.width.indexOf("px")
              ? (o.container_w = parseInt(o.container.style.width))
              : 0 < o.container.parentNode.style.width.indexOf("px")
              ? (o.container_w = parseInt(o.container.parentNode.style.width))
              : 0 <
                  o.container.parentNode.parentNode.style.width.indexOf("px") &&
                (o.container_w = parseInt(
                  o.container.parentNode.parentNode.style.width
                ))),
          0 < String(v.aspect).indexOf("x")
            ? ((o.aspect = v.aspect.split("x")[0] / v.aspect.split("x")[1]),
              0 == o.container_h && (o.container_h = o.container_w / o.aspect))
            : (o.aspect = 0),
          css(o.container, {
            position: "relative",
            "box-sizing": "content-box",
            "text-align": "left",
            "-webkit-user-select": "none",
            overflow_: "hidden",
            fontFamily: "sans-serif",
            "min-height": 15,
            fontSize: "14px",
            "line-height": "1em",
            direction: "ltr",
          }),
          1 == v.shadow &&
            css(o.container, {
              "box-shadow":
                " 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)",
            }),
          0 < o.aspect
            ? css(o.container, {
                height: o.container_h,
              })
            : css(o.container, {
                height:
                  0 == o.container_h ? o.container_h_procent : o.container_h,
              }),
          (o.frame = createElement("div")),
          css(o.frame, {
            position: "absolute",
            "box-sizing": "content-box",
            backgroundColor: v.screencolor,
            color: "#ffffff",
            width: "100%",
            height: "100%",
            left: 0,
            top: 0,
            fontSize: "14px",
            "line-height": "1em",
          }),
          1 != v.notofh && (o.frame.style.overflow = "hidden"),
          1 == v.transbg && (o.frame.style.backgroundColor = "transparent"),
          1 == v.border &&
            css(o.container, {
              border: v.bordersize + "px solid " + v.bordercolor,
            }),
          (o.css = document.createElement("style")),
          (o.css.type = "text/css"),
          o.frame.appendChild(o.css),
          o.frame.setAttribute("id", "oframe" + v.id),
          pushCSS(
            "pjsdiv, pjsdiv > *{position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important} pjsdiv img{max-width:none} pjsdiv > *:focus {outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}#pljs_yt_" +
              v.id +
              "{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}pjsdiv iframe{display:block!important;max-height:none!important}"
          ),
          datetime(1),
          window.MutationObserver &&
            ((obsrvr = new MutationObserver(function (e) {
              if (0 < e[0].removedNodes.length)
                for (var t = 0; t < e[0].removedNodes.length; t++)
                  e[0].removedNodes[t] == o.frame && Destroy();
            })),
            obsrvr.observe(o.container, {
              childList: !0,
            })),
          (o.frameresize = createElement("iframe")),
          attr(o.frameresize, {
            id: "pjsfrrs" + v.id,
            scrolling: "no",
            title: "",
            allowfullscreen: "true",
            allowtransparency: "true",
            "allow-scripts": "true",
          }),
          css(o.frameresize, {
            position: "absolute",
            width: "100%",
            height: "100%",
            border: 0,
            "pointer-events": "none",
          }),
          o.frame.appendChild(o.frameresize),
          (o.container.oncontextmenu = function (e) {
            o.rightclick++,
              5 == o.rightclick &&
                ((v.log = 1),
                log(o.version + " " + o.compilations + " " + o.playerid)),
              ((e = e || window.event).cancelBubble = !0),
              e.stopPropagation && e.stopPropagation();
            var t = e.pageX - findLeft(o.frame),
              e = e.pageY - findTop(o.frame);
            return (
              1 == v.rc_custom &&
                exist(v.rc_label) &&
                "" != trim(v.rc_label) &&
                ((o.brand = v.rc_label),
                exist(v.rc_labelurl) && (o.brandurl = v.rc_labelurl),
                "none" == v.rc_label && (o.brandurl = o.d)),
              RightMenu(t, e),
              !1
            );
          }),
          (o.system = new System()),
          o.system.ios &&
            ((ioscss =
              1 == v.hidestartbutios
                ? "*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}"
                : ""),
            (1 != v.nativecontrolsmobile ||
              1 == v.nativenotios ||
              (1 == v.nativenotiphone && o.system.iphone) ||
              (1 == v.nativenotipad && o.system.ipad)) &&
              ((o.system.ios && 1 == v.nativefullios) ||
                (ioscss +=
                  "video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}")),
            (tmp = document.createElement("style")),
            (tmp.type = "text/css"),
            tmp.appendChild(document.createTextNode(ioscss)),
            o.frame.appendChild(tmp)),
          o.system.mobiletv &&
            1 == v.autoplay &&
            1 == v.autoplaynomobiletv &&
            (v.autoplay = 0),
          0 == o.aspect &&
            15 == o.frame.offsetHeight &&
            !o.container_h_procent &&
            0 < v.playerheight &&
            css(o.container, {
              height: v.playerheight,
            }),
          exist(v.autonext) && (v.playlist.autoplaylist = v.autonext),
          exist(v.playlistloop) && (v.playlist.playlistrewind = v.playlistloop),
          exist(v.start) && (o.seekto = v.start),
          Ready(),
          setTimeout(function () {
            js("init"),
              v.ready &&
                ("function" == typeof v.ready && (v.ready = v.ready.name),
                eval(
                  v.ready +
                    (-1 == v.ready.indexOf("()") ? '("' + v.id + '")' : "")
                ));
          }, 1);
      }
    } else log("remove");
    function RightMenu(e, t) {
      if (
        -1 == o.brandurl.indexOf(o.d) ||
        1 == v.rc_anyway ||
        1 == v.rightmenu
      ) {
        if (exist(o.rightmenu)) show2(o.rightmenu);
        else {
          var i;
          v.rmbgcolor || (v.rmbgcolor = "000000"),
            v.rmcolor || (v.rmcolor = "ffffff"),
            (o.rightmenu = createElement("div"));
          for (var s, n = 0, a = 0; a < 10; a++)
            if (
              ((1 == v["rm" + a] && 1 == v.rightmenu) || 9 == a) &&
              ((exist(v["rm" + a + "t"]) && exist(v["rm" + a + "a"])) || 9 == a)
            ) {
              if (((i = createElement("div2")), 9 == a)) {
                if (1 == v.rc_nobrand) break;
                i.innerText =
                  o.brand + (1 == v.rc_version ? " " + o.version : "");
              } else i.innerText = v["rm" + a + "t"];
              9 != a &&
                -1 < v["rm" + a + "a"].indexOf(",0/1") &&
                ((s = v["rm" + a + "a"].split(",")),
                (i.innerText +=
                  " (" +
                  (1 == api(s[0].substr(4)) ? Lang("on") : Lang("off")) +
                  ")")),
                i.setAttribute("i", a),
                RightCSS(i),
                i.addEventListener("click", RightClick),
                o.rightmenu.appendChild(i),
                n++;
            }
          css(o.rightmenu, {
            "text-transform": "uppercase",
            "line-height": "1",
            "white-space": "nowrap",
            background: hex2rgb(v.rmbgcolor, 0.7),
          }),
            1 < n &&
              css(o.rightmenu, {
                padding: "5px",
              }),
            (o.rightmenu.style.zIndex = "99999"),
            (o.rightmenu.onmousemove = RightMove),
            o.frame.appendChild(o.rightmenu);
        }
        css(o.rightmenu, {
          position: "absolute",
          top: t,
          left: e,
          "text-align": "left",
        });
        var r = !1;
        o.screen_w - e < o.rightmenu.offsetWidth - 20 &&
          1 != v.notofh &&
          (css(o.rightmenu, {
            left: e - o.rightmenu.offsetWidth,
          }),
          (r = !0)),
          (1 != v.rmright && !r) ||
            css(o.rightmenu, {
              "text-align": "right",
            }),
          (o.right_x = e),
          (o.right_y = t),
          clearTimeout(o.rightout),
          (o.rightout = setTimeout(function () {
            hide2(o.rightmenu);
          }, 2e3));
      }
    }
    function RightMove() {
      clearTimeout(o.rightout),
        (o.rightout = setTimeout(function () {
          hide2(o.rightmenu);
        }, 2e3));
    }
    function RightClick(e) {
      var i = e.target.getAttribute("i"),
        y,
        dont = !1,
        x,
        z,
        b,
        u;
      0 < i &&
        (9 == i
          ? "" != o.brandurl && window.open(o.brandurl)
          : ((x = v["rm" + i + "a"]),
            x &&
              (0 == x.indexOf("api:") &&
                (-1 < x.indexOf(",0/1")
                  ? ((z = x.split(",")),
                    (b = o.controls.butByS(x, "linkurl")),
                    (u = api(z[0].substr(4), z[1], b)),
                    js(z, u),
                    reRightMenu(),
                    RightMenu(o.right_x, o.right_y),
                    (dont = !0))
                  : ((y = x.split(",")),
                    api(y[0].substr(4), exist(y[1]) ? y[1] : null))),
              0 == x.indexOf("share:") && o.share && o.share.api(x.substr(6)),
              0 == x.indexOf("js:") &&
                ((y = x.split(",")),
                eval(
                  y[0].substr(3) +
                    "(" +
                    (exist(y[1]) ? '"' + y[1] + '"' : "") +
                    (exist(y[2]) ? ',"' + y[2] + '"' : "") +
                    ")"
                )),
              0 == x.indexOf("url:") && window.open(x.substr(4)))),
        dont || hide2(o.rightmenu));
    }
    function RightCSS(e) {
      css(e, {
        padding: "4px 5px",
        "font-size": (v.rmsize || "55") + "%",
        "letter-spacing": "0.15em",
        opacity: 0.9,
        color: v.rmcolor,
      }),
        e.addEventListener("mouseover", RightOver),
        e.addEventListener("mouseout", RightOut);
    }
    function RightOver(e) {
      css(e.target, {
        opacity: 1,
      }),
        css(e.target, {
          background: hex2rgb(v.rmbgcolor, 0.5),
        });
    }
    function RightOut(e) {
      css(e.target, {
        opacity: 0.9,
      }),
        css(e.target, {
          background: "none",
        });
    }
  }
  function Ready() {
    if (
      (log("Ready"),
      (o.actions = new Actions()),
      v.file || (v.file = "?"),
      v.pl && (v.file = v.pl + o.pltxt),
      (o.sessid = randomstr()),
      (o.sesstime = 0),
      (o.storage = StorageSupport()),
      o.storage)
    ) {
      null != localStorage.getItem("pljsuserid")
        ? (o.userid = localStorage.getItem("pljsuserid"))
        : ((o.userid = randomstr()),
          localStorage.setItem("pljsuserid", o.userid)),
        1 == v.qualitystore &&
          null != localStorage.getItem("pljsquality") &&
          (o.default_quality = localStorage.getItem("pljsquality")),
        1 == v.trackstore &&
          null != localStorage.getItem("pljstrack") &&
          (v.default_audio = localStorage.getItem("pljstrack"));
      for (var e = 0; e < o.vsts.length; e++)
        1 == v["vast_nofirst" + o.vsts[e]] &&
          (null != localStorage.getItem("pljsfirst" + o.vsts[e]) ||
            (v[o.vsts[e] + "s"] = 0));
      SettingsTimers("sleeptimer0"), SettingsTimers("offsettimerinit");
    }
    (o.href2 = o.href.substr(o.href.indexOf("://") + 3)),
      0 < o.href2.indexOf("#") &&
        (o.href2 = o.href2.substr(0, o.href2.indexOf("#"))),
      o.storage && 1 == v.timestore && (o.continue = new TimeStore()),
      1 == v.observer &&
        ((o.visibility = v.startvisibility),
        Visibility(o.container, "visibility", !0)),
      1 == v.minify && 1 == v.observer && (o.minify = new PluginMini()),
      1 == v.ab && PluginBlock(),
      1 == v.quizes && ((o.quiz = new PluginQuiz()), o.quiz.Start()),
      (o.media = new Media(v.file)),
      o.system.mobile
        ? window.addEventListener("orientationchange", OrientationChange, !1)
        : (o.frame.addEventListener("mouseenter", function () {
            (o.mouseHere = !0),
              (o.mouseHere2 = !0),
              o.controls && o.controls.StageOver();
          }),
          o.frame.addEventListener("mouseleave", function (e) {
            o.mouseDown ||
              (0 < v.toolbar.hideleavetimeout
                ? (clearTimeout(o.leavetimeout2),
                  (o.leavetimeout2 = setTimeout(function () {
                    o.mouseHere != o.mouseHere2 &&
                      ((o.mouseHere = o.mouseHere2), o.controls.Review());
                  }, 1e3 * v.toolbar.hideleavetimeout)))
                : (o.mouseHere = !1),
              (o.mouseHere2 = !1),
              o.controls && o.controls.StageLeave());
          }),
          o.frame.addEventListener("mousedown", function (e) {
            o.mouseDown = !0;
          }),
          o.frame.addEventListener("mouseup", function (e) {
            (o.mouseDown = !1),
              o.volumewheel ||
                ((o.hidden_volume_over = !1),
                (o.hidden_volume_over_process = !1)),
              setTimeout(function () {
                o.focus = !0;
              }, 500),
              (o.system.mobile && o.controls.ToolbarHidden()) ||
                (o.controls && o.controls.StageMouseUp(e.clientX, e.clientY)),
              1 == v.hidevideo &&
                o.controls.SettingsVisible() &&
                o.controls.Settings();
          }),
          o.frame.addEventListener("mousemove", function (e) {
            exist(o.controls) &&
              (o.mouseDown
                ? o.controls.StageMove(e.clientX, e.clientY)
                : o.controls.StageMove2());
          })),
      1 == v.geo && "function" == typeof PluginGeo && (o.geo = new PluginGeo()),
      o.mediacontainer.addEventListener(
        "touchstart",
        function (e) {
          (o.mouseDown = !0),
            (o.mouseHere = !0),
            (o.mouseMove = !1),
            Touch("start", e);
        },
        {
          passive: !0,
        }
      ),
      o.mediacontainer.addEventListener(
        "touchmove",
        function (e) {
          o.mouseDown && ((o.mouseMove = !0), Touch("move", e));
        },
        {
          passive: !0,
        }
      ),
      o.mediacontainer.addEventListener(
        "touchend",
        function (e) {
          (o.mouseDown = !1),
            (o.mouseHere = !1),
            1 == v.click0timeout &&
              new Date().getTime() - o.clicktime < 1e3 * (v.dclckto || 0.3) &&
              DoubleClick(e),
            o.mouseMove || ScreenClick(e),
            (o.mouseMove = !1),
            (o.airplay || o.airplayed) && o.controls.resize(),
            Touch("end", e);
        },
        {
          passive: !0,
        }
      );
    try {
      window.document.addEventListener("mouseup", function (e) {
        (o.focus = !1),
          o.volumewheel ||
            ((o.hidden_volume_over = !1), (o.hidden_volume_over_process = !1)),
          o.mouseDown &&
            o.controls &&
            ((o.mouseDown = !1),
            o.controls.StageMouseUp(e.clientX, e.clientY),
            o.controls.StageLeave()),
          o.mouseHere ||
            o.system.mobile ||
            o.system.tv ||
            (o.controls.SettingsClose(), o.droplist && o.droplist.Close());
      });
    } catch (e) {}
    function t(e, t) {
      var o = ["", "moz", "webkit", "ms", "MSFullscreenChange"];
      if (e)
        for (var i = 0; i < o.length; i++)
          e.addEventListener(
            o[i] + (i < o.length - 1 ? "fullscreenchange" : ""),
            t,
            !1
          );
    }
    if (
      (window.document.addEventListener("mousemove", function (e) {
        o.controls && o.mouseDown && o.controls.StageMove(e.clientX, e.clientY);
      }),
      o.frame.addEventListener(
        "touchstart",
        function (e) {
          (o.touch = !0), (o.mouseDown = !0);
        },
        {
          passive: !0,
        }
      ),
      o.frame.addEventListener(
        "touchend",
        function (e) {
          (o.touch = !1), (o.mouseDown = !1);
        },
        {
          passive: !0,
        }
      ),
      window.document.addEventListener(
        "touchmove",
        function (e) {
          o.controls &&
            o.touch &&
            o.controls.StageMove(e.touches[0].pageX, e.touches[0].pageY);
        },
        {
          passive: !0,
        }
      ),
      window.document.addEventListener("keyup", function (e) {
        var t = e.target.tagName.toLowerCase();
        "input" == t || "textarea" == t || (o.controls && o.controls.KeyUp(e));
      }),
      window.document.addEventListener("keydown", function (e) {
        var t = e.target.tagName.toLowerCase();
        "input" == t ||
          "textarea" == t ||
          "div" == t ||
          (o.controls && o.controls.KeyDown(e));
      }),
      o.parentIframe && t(parent.document, ParentFS),
      t(document, FullscreenChange),
      exist(o.frameresize.contentWindow))
    ) {
      if (
        (o.frameresize.contentWindow.addEventListener(
          "resize",
          FrameResizer,
          !0
        ),
        o.system.mobile ||
          (o.mediacontainer.addEventListener("click", ScreenClick, !1),
          1 == v.doubleclick &&
            1 == v.click0timeout &&
            o.mediacontainer.addEventListener("dblclick", DoubleClick, !1)),
        MainUpdateSize(),
        v.chromecast &&
          1 == v.chromecast.on &&
          (o.chromecast = new ChromeCast()),
        1 == v.effects && (o.effects = new PluginEffects()),
        (o.controls = new Controls()),
        v.control_title.templated &&
          (o.title_template = v.control_title.template),
        Title(),
        MainResize(),
        o.storage)
      ) {
        var i;
        1 != v.volumestore ||
          0 == v.volume ||
          o.system.mobile ||
          (null != localStorage.getItem("pljsvolume") &&
            (v.volume = localStorage.getItem("pljsvolume")),
          1 == localStorage.getItem("pljsmute") &&
            1 == v.mutestore &&
            (v.mute = 1)),
          1 == v.speedstore &&
            ((i = localStorage.getItem("pljsspeed")),
            exist(i) &&
              (0 < i.indexOf(".") && o.line_speed
                ? o.actions.SetSpeed(i, 1)
                : o.files_speed &&
                  (-1 == (a = o.files_speed.indexOf(i)) &&
                    (a = o.files_speed.indexOf(+i)),
                  -1 != a &&
                    o.controls.SettingsExist("speed") &&
                    ((o.current_speed = a), o.media.SetSpeed(o.files_speed[a])),
                  o.controls.SettingsSpeed())));
        var s = !1;
        if (1 == v.sub_designstore)
          for (var n = 0; n < o.sub_options.length; n++)
            null != localStorage.getItem("pljs" + o.sub_options[n]) &&
              ((v[o.sub_options[n]] = localStorage.getItem(
                "pljs" + o.sub_options[n]
              )),
              (s = !0));
        s ||
          (o.system.mobile &&
            (v.sub_bottommob &&
              -1 < v.sub_bottommob &&
              (v.sub_bottom = v.sub_bottommob),
            exist(v.sub_sizemob) &&
              ((v.sub_size = v.sub_sizemob),
              exist2(v.sub_sizemobfull) &&
                (v.sub_size_fullscreen = v.sub_sizemobfull))));
      }
      var a;
      !o.continue ||
        ((a = o.continue.flag()).t &&
          a.d &&
          (o.controls.Played(a.t, a.d),
          o.controls.Duration(a.t, a.d),
          (v.duration = a.d))),
        o.actions.Volume(v.volume),
        1 == v.mute && (o.actions.Mute(), o.controls.refresh()),
        (o.alert = new Alert()),
        0 < v.rounding &&
          (1 == v.hidevideo || o.normal_h < 120
            ? (css(o.container, {
                "border-radius": v.rounding + "px",
              }),
              css(o.frame, {
                "border-radius": v.rounding + "px",
              }))
            : PluginRounding()),
        exist(v.midroll) && str2obj("midroll"),
        exist(v.overlay) && str2obj("overlay"),
        exist(o.playlist) && js("playlist"),
        1 == v.pass && 1 == v.passonstart && o.actions.Password();
      for (e = 2; e < 10; e++)
        exist(v["design" + e]) &&
          "mobile" == v["design" + e] &&
          o.system.mobile &&
          apiProcessor("design", e);
      setTimeout(FrameResizer, 500, !0);
    } else log("Local");
  }
  function ScreenClick(e) {
    2 < o.moving[o.mediacontainer] ||
      ((o.acted = !0),
      0 == v.dclckto && (v.click0timeout = 1),
      o.click_t && 1 == v.screenclick && !o.system.tv
        ? DoubleClick(e)
        : ((e = 1e3 * (v.dclckto || 0.35)),
          ClearClick(),
          clearTimeout(o.click_t2),
          (o.click_t2 = setTimeout(function () {
            o.clicks = 0;
          }, 200 + e)),
          1 == v.click0timeout ||
          (0 == v.doubleclick && 1 != v.hotkey.seeksides)
            ? ScreenClick2()
            : (o.click_t = setTimeout(ScreenClick2, e))),
      o.clicks++);
  }
  function ScreenClick2() {
    if ((ClearClick(), o.system.mobile)) {
      if (o.controls.ToolbarHidden()) return void o.controls.StageMove2();
      if (o.nativefull) {
        if (1 == v.nativefulldroid && 1 == v.nfscldr && o.system.android)
          return;
        if (1 == v.nativefullios && 1 == v.nfsclios && o.system.ios) return;
      }
    }
    1 < o.clicks
      ? (o.clicks = 0)
      : ((o.clicks = 0), 1 == v.screenclick && o.actions.ScreenClick());
  }
  function DoubleClick(e) {
    ClearClick();
    var t,
      i = !1;
    1 == v.hotkey.seeksides &&
      e &&
      ((1 == v.hotkey.seeksidesmob && !o.system.mobile) ||
        (o.system.mobile
          ? (t = e.layerX) ||
            (e.changedTouches &&
              (t = e.changedTouches[0].pageX - findLeft(o.frame)))
          : (t = e.offsetX),
        t &&
          (t < o.screen_w / 2
            ? t < (20 * o.screen_w) / 100 &&
              (apiProcessor(
                "seek",
                "-" + existv(v.hotkey.seeksidesec, 10) * o.clicks
              ),
              1 == v.hotkey.icons &&
                1 == v.hotkey.seekiconbut &&
                PluginHotIcon("seek", 0),
              (i = !0))
            : t > o.screen_w - (20 * o.screen_w) / 100 &&
              (apiProcessor(
                "seek",
                "+" + existv(v.hotkey.seeksidesec, 10) * o.clicks
              ),
              1 == v.hotkey.icons &&
                1 == v.hotkey.seekiconbut &&
                PluginHotIcon("seek", 1),
              (i = !0)),
          i && e.stopPropagation && e.stopPropagation()))),
      i ||
        (1 == v.doubleclick
          ? (1 == v.nativecontrolsmobile && o.system.mobile) ||
            (o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen())
          : o.actions.ScreenClick());
  }
  function ClearClick() {
    clearTimeout(o.click_t), (o.click_t = void 0);
  }
  function FrameResizer(e) {
    o.screen_lw != o.frame.offsetWidth
      ? (e && (o.screen_lw = o.frame.offsetWidth), FrameResizer())
      : MainResize();
  }
  function MainResize() {
    var e = !1;
    (o.normal_w == o.frame.offsetWidth && o.normal_h == o.frame.offsetHeight) ||
      (e = !0),
      MainUpdateSize(),
      o.controls && o.controls.resize(),
      o.media.resize(),
      e && !o.fullscreen && js("resize", o.normal_w + "," + o.normal_h);
  }
  function MainUpdateSize() {
    var e,
      t,
      i = o.frame.offsetWidth,
      s = o.frame.offsetHeight;
    o.controls &&
      1 == v.change2playlist &&
      "bottom" != v.playlist.position &&
      0 < o.controls.PlaylistG("top") &&
      ((e =
        o.controls.PlaylistG("scroll_height") +
        o.controls.PlaylistG("top") +
        5 +
        o.controls.PlaylistG("margin_bottom") +
        existv(v.change2playlist_bottom, 0)),
      css(o.container, {
        height: e,
      })),
      0 < o.aspect &&
        !o.fullscreen &&
        !o.fullscreen_start &&
        ((s = i / o.aspect + existv(v.screenmarginbottom, 0)),
        css(o.container, {
          height: s,
        })),
      o.fullscreen ||
        o.fullscreen_start ||
        o.fullscreen_process ||
        ((o.normal_w = Math.round(i)), (o.normal_h = Math.round(s))),
      o.system.mobile &&
        o.fullscreen &&
        1 == v.landfullmobile &&
        1 != v.landscapefull &&
        screen.orientation &&
        (0 < o.aspect
          ? o.aspect < 1
            ? void 0 !== (t = screen.orientation.lock("portrait")) &&
              t.then(function () {}).catch(function (e) {})
            : void 0 !== (t = screen.orientation.lock("landscape")) &&
              t.then(function () {}).catch(function (e) {})
          : void 0 !== (t = screen.orientation.lock("landscape")) &&
            t.then(function () {}).catch(function (e) {})),
      (o.screen_w = i),
      (o.screen_h = s),
      exist(v.title) && o.controls && "" != v.title && o.controls.updateTitle(),
      exist(o.custom_aspect) && o.media.scale(o.custom_aspect),
      o.vast && !o.fullscreen && o.vast.Resize(),
      o.droplist && o.droplist.Resize(),
      o.quiz && o.quiz.Resize(),
      o.effects && o.effects.api("resize");
  }
  function Title() {
    for (var e in (o.actions.TitleTemplate(v), v))
      v.hasOwnProperty(e) &&
        0 == e.indexOf("title") &&
        "" != v[e] &&
        ((o.maintitle = v[e]), o.actions.Title(e));
  }
  function Poster(e, t, i) {
    e &&
      "" != e &&
      ((t == o.poster && e == o.currentposter) ||
        (0 == e.indexOf("#" + v.enc2) && (e = o[o.fd[0]](e)),
        0 == e.indexOf("#0") && (e = fd0(e)),
        (e = (e = checkBase64(e)).replace(/\s/g, "%20")),
        css(t, {
          background: "url(" + e + ") no-repeat center center",
          "background-size":
            "stretch" == i
              ? "100% 100%"
              : "none" == i
              ? "auto"
              : "fill" == i
              ? "cover"
              : "contain",
        }),
        show(t),
        t == o.poster && (o.currentposter = e)));
  }
  function Logo(e) {
    var t, i;
    1 == e.on &&
      exist(e.src) &&
      ((e.src = checkBase64(e.src)),
      (t = createElement("div")),
      (-1 < e.src.indexOf("http") || 0 == e.src.indexOf("//")) &&
        (((i = createElement("img")).src = e.src), t.appendChild(i)),
      (e = UpdateObject(e, v.logo)),
      (e = MarginPadding(e, "margin", "margin")),
      css(t, {
        position: "absolute",
      }),
      -1 < e.position.indexOf("bottom") &&
        css(t, {
          bottom: e.marginbottom,
        }),
      -1 < e.position.indexOf("right") &&
        css(t, {
          right: e.marginright,
        }),
      -1 < e.position.indexOf("top") &&
        css(t, {
          top: e.margintop,
        }),
      -1 < e.position.indexOf("left") &&
        css(t, {
          left: e.marginleft,
        }),
      o.container.appendChild(t));
  }
  function FullscreenChange() {
    o.fullscreen && !isFullscreen()
      ? o.actions.NormalscreenUI(!0)
      : (o.fullscreen_start || o.mouseHere) &&
        (isFullscreen() && (o.fullscreen = !0), o.actions.FullscreenUI()),
      log("fullscreen", o.fullscreen);
  }
  function ParentFS() {
    1 == v.observer && Visibility(o.container, "visibility", !0);
  }
  function Orientation() {
    log("orientation " + screen.orientation.angle);
  }
  function OrientationChange() {
    var e;
    90 === Math.abs(window.orientation)
      ? (log("landscape"),
        1 == v.landscapefull &&
          ((e = !0),
          1 != v.lsfullstart || o.start || (e = !1),
          1 != v.lsfullplay || o.play || (e = !1),
          o.vast && (e = !0),
          !o.fullscreen && e && o.actions.Fullscreen()))
      : (log("portrait"),
        1 == v.landscapefull && o.fullscreen && o.actions.Normalscreen());
  }
  function isFullscreen(e) {
    e = e || document;
    var t = !1;
    try {
      t = !!(
        e.webkitFullscreenElement ||
        e.webkitIsFullScreen ||
        e.mozFullScreen ||
        e.msFullscreenElement ||
        null != e.fullscreenElement
      );
    } catch (e) {
      t = !1;
    }
    return t;
  }
  function isHidden(e) {
    return 0 == e.offsetWidth && 0 == e.offsetHeight;
  }
  function Destroy() {
    for (var e in o)
      -1 < e.indexOf("Interval") && clearInterval(o[e]),
        -1 < e.indexOf("timeout") && clearTimeout(o[e]);
    log("Destroyed");
  }
  "string" == typeof options && optStr(),
    (o.this = this),
    options.id
      ? document.getElementById(options.id)
        ? VisibleCheck()
        : document.addEventListener("DOMContentLoaded", Init)
      : "function" == typeof PluginReplace && PluginReplace();
}
window.PlayerjsAsync && setTimeout(PlayerjsAsync, 1);
"undefined" != typeof window &&
  (function (e, t) {
    "object" == typeof exports && "object" == typeof module
      ? (module.exports = t())
      : "function" == typeof define && define.amd
      ? define([], t)
      : "object" == typeof exports
      ? (exports.Hls = t())
      : (e.Hls = t());
  })(this, function () {
    return (
      (i = {}),
      (a.m = r =
        [
          function (e, t, r) {
            "use strict";
            r.d(t, "a", function () {
              return l;
            }),
              r.d(t, "b", function () {
                return d;
              });
            r = r(5);
            function i() {}
            var a = {
                trace: i,
                debug: i,
                log: i,
                warn: i,
                info: i,
                error: i,
              },
              n = a;
            var o = Object(r.a)();
            function s(n) {
              var s = o.console[n];
              return s
                ? function () {
                    for (
                      var e, t, r = arguments.length, i = new Array(r), a = 0;
                      a < r;
                      a++
                    )
                      i[a] = arguments[a];
                    i[0] &&
                      (i[0] = ((e = n), (t = i[0]), "[" + e + "] > " + t)),
                      s.apply(o.console, i);
                  }
                : i;
            }
            var l = function (e) {
                if ((o.console && !0 === e) || "object" == typeof e) {
                  !(function (t) {
                    for (
                      var e = arguments.length,
                        r = new Array(1 < e ? e - 1 : 0),
                        i = 1;
                      i < e;
                      i++
                    )
                      r[i - 1] = arguments[i];
                    r.forEach(function (e) {
                      n[e] = t[e] ? t[e].bind(t) : s(e);
                    });
                  })(e, "debug", "log", "info", "warn", "error");
                  try {
                    n.log();
                  } catch (e) {
                    n = a;
                  }
                } else n = a;
              },
              d = n;
          },
          function (e, t, r) {
            "use strict";
            t.a = {
              MEDIA_ATTACHING: "hlsMediaAttaching",
              MEDIA_ATTACHED: "hlsMediaAttached",
              MEDIA_DETACHING: "hlsMediaDetaching",
              MEDIA_DETACHED: "hlsMediaDetached",
              BUFFER_RESET: "hlsBufferReset",
              BUFFER_CODECS: "hlsBufferCodecs",
              BUFFER_CREATED: "hlsBufferCreated",
              BUFFER_APPENDING: "hlsBufferAppending",
              BUFFER_APPENDED: "hlsBufferAppended",
              BUFFER_EOS: "hlsBufferEos",
              BUFFER_FLUSHING: "hlsBufferFlushing",
              BUFFER_FLUSHED: "hlsBufferFlushed",
              MANIFEST_LOADING: "hlsManifestLoading",
              MANIFEST_LOADED: "hlsManifestLoaded",
              MANIFEST_PARSED: "hlsManifestParsed",
              LEVEL_SWITCHING: "hlsLevelSwitching",
              LEVEL_SWITCHED: "hlsLevelSwitched",
              LEVEL_LOADING: "hlsLevelLoading",
              LEVEL_LOADED: "hlsLevelLoaded",
              LEVEL_UPDATED: "hlsLevelUpdated",
              LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
              LEVELS_UPDATED: "hlsLevelsUpdated",
              AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
              AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
              AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
              AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
              AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
              SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
              SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
              SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
              SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
              SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
              CUES_PARSED: "hlsCuesParsed",
              NON_NATIVE_TEXT_TRACKS_FOUND: "hlsNonNativeTextTracksFound",
              INIT_PTS_FOUND: "hlsInitPtsFound",
              FRAG_LOADING: "hlsFragLoading",
              FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
              FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
              FRAG_LOADED: "hlsFragLoaded",
              FRAG_DECRYPTED: "hlsFragDecrypted",
              FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
              FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
              FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
              FRAG_PARSING_DATA: "hlsFragParsingData",
              FRAG_PARSED: "hlsFragParsed",
              FRAG_BUFFERED: "hlsFragBuffered",
              FRAG_CHANGED: "hlsFragChanged",
              FPS_DROP: "hlsFpsDrop",
              FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
              ERROR: "hlsError",
              DESTROYING: "hlsDestroying",
              KEY_LOADING: "hlsKeyLoading",
              KEY_LOADED: "hlsKeyLoaded",
              STREAM_STATE_TRANSITION: "hlsStreamStateTransition",
              LIVE_BACK_BUFFER_REACHED: "hlsLiveBackBufferReached",
            };
          },
          function (e, t, r) {
            "use strict";
            var i, a;
            r.d(t, "b", function () {
              return i;
            }),
              r.d(t, "a", function () {
                return a;
              }),
              ((t = i = i || {}).NETWORK_ERROR = "networkError"),
              (t.MEDIA_ERROR = "mediaError"),
              (t.KEY_SYSTEM_ERROR = "keySystemError"),
              (t.MUX_ERROR = "muxError"),
              (t.OTHER_ERROR = "otherError"),
              ((t = a = a || {}).KEY_SYSTEM_NO_KEYS = "keySystemNoKeys"),
              (t.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess"),
              (t.KEY_SYSTEM_NO_SESSION = "keySystemNoSession"),
              (t.KEY_SYSTEM_LICENSE_REQUEST_FAILED =
                "keySystemLicenseRequestFailed"),
              (t.KEY_SYSTEM_NO_INIT_DATA = "keySystemNoInitData"),
              (t.MANIFEST_LOAD_ERROR = "manifestLoadError"),
              (t.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut"),
              (t.MANIFEST_PARSING_ERROR = "manifestParsingError"),
              (t.MANIFEST_INCOMPATIBLE_CODECS_ERROR =
                "manifestIncompatibleCodecsError"),
              (t.LEVEL_EMPTY_ERROR = "levelEmptyError"),
              (t.LEVEL_LOAD_ERROR = "levelLoadError"),
              (t.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut"),
              (t.LEVEL_SWITCH_ERROR = "levelSwitchError"),
              (t.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError"),
              (t.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut"),
              (t.FRAG_LOAD_ERROR = "fragLoadError"),
              (t.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut"),
              (t.FRAG_DECRYPT_ERROR = "fragDecryptError"),
              (t.FRAG_PARSING_ERROR = "fragParsingError"),
              (t.REMUX_ALLOC_ERROR = "remuxAllocError"),
              (t.KEY_LOAD_ERROR = "keyLoadError"),
              (t.KEY_LOAD_TIMEOUT = "keyLoadTimeOut"),
              (t.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError"),
              (t.BUFFER_APPEND_ERROR = "bufferAppendError"),
              (t.BUFFER_APPENDING_ERROR = "bufferAppendingError"),
              (t.BUFFER_STALLED_ERROR = "bufferStalledError"),
              (t.BUFFER_FULL_ERROR = "bufferFullError"),
              (t.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole"),
              (t.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall"),
              (t.INTERNAL_EXCEPTION = "internalException");
          },
          function (e, t, r) {
            "use strict";
            r.d(t, "a", function () {
              return i;
            });
            var i =
              Number.isFinite ||
              function (e) {
                return "number" == typeof e && isFinite(e);
              };
            Number.MAX_SAFE_INTEGER;
          },
          function (e, t, r) {
            "use strict";
            r.d(t, "b", function () {
              return i;
            });
            var u,
              c = r(5),
              r =
                ((o.isHeader = function (e, t) {
                  return (
                    t + 10 <= e.length &&
                    73 === e[t] &&
                    68 === e[t + 1] &&
                    51 === e[t + 2] &&
                    e[t + 3] < 255 &&
                    e[t + 4] < 255 &&
                    e[t + 6] < 128 &&
                    e[t + 7] < 128 &&
                    e[t + 8] < 128 &&
                    e[t + 9] < 128
                  );
                }),
                (o.isFooter = function (e, t) {
                  return (
                    t + 10 <= e.length &&
                    51 === e[t] &&
                    68 === e[t + 1] &&
                    73 === e[t + 2] &&
                    e[t + 3] < 255 &&
                    e[t + 4] < 255 &&
                    e[t + 6] < 128 &&
                    e[t + 7] < 128 &&
                    e[t + 8] < 128 &&
                    e[t + 9] < 128
                  );
                }),
                (o.getID3Data = function (e, t) {
                  for (var r = t, i = 0; o.isHeader(e, t); )
                    (i += 10),
                      (i += o._readSize(e, t + 6)),
                      o.isFooter(e, t + 10) && (i += 10),
                      (t += i);
                  if (0 < i) return e.subarray(r, r + i);
                }),
                (o._readSize = function (e, t) {
                  var r = 0,
                    r = (127 & e[t]) << 21;
                  return (
                    (r |= (127 & e[t + 1]) << 14),
                    (r |= (127 & e[t + 2]) << 7) | (127 & e[t + 3])
                  );
                }),
                (o.getTimeStamp = function (e) {
                  for (var t = o.getID3Frames(e), r = 0; r < t.length; r++) {
                    var i = t[r];
                    if (o.isTimeStampFrame(i)) return o._readTimeStamp(i);
                  }
                }),
                (o.isTimeStampFrame = function (e) {
                  return (
                    e &&
                    "PRIV" === e.key &&
                    "com.apple.streaming.transportStreamTimestamp" === e.info
                  );
                }),
                (o._getFrameData = function (e) {
                  var t = String.fromCharCode(e[0], e[1], e[2], e[3]),
                    r = o._readSize(e, 4);
                  return {
                    type: t,
                    size: r,
                    data: e.subarray(10, 10 + r),
                  };
                }),
                (o.getID3Frames = function (e) {
                  for (var t = 0, r = []; o.isHeader(e, t); ) {
                    for (
                      var i = o._readSize(e, t + 6), a = (t += 10) + i;
                      t + 8 < a;

                    ) {
                      var n = o._getFrameData(e.subarray(t)),
                        s = o._decodeFrame(n);
                      s && r.push(s), (t += n.size + 10);
                    }
                    o.isFooter(e, t) && (t += 10);
                  }
                  return r;
                }),
                (o._decodeFrame = function (e) {
                  return "PRIV" === e.type
                    ? o._decodePrivFrame(e)
                    : "T" === e.type[0]
                    ? o._decodeTextFrame(e)
                    : "W" === e.type[0]
                    ? o._decodeURLFrame(e)
                    : void 0;
                }),
                (o._readTimeStamp = function (e) {
                  if (8 === e.data.byteLength) {
                    var t = new Uint8Array(e.data),
                      e = 1 & t[3],
                      t = (t[4] << 23) + (t[5] << 15) + (t[6] << 7) + t[7];
                    return (t /= 45), e && (t += 47721858.84), Math.round(t);
                  }
                }),
                (o._decodePrivFrame = function (e) {
                  if (!(e.size < 2)) {
                    var t = o._utf8ArrayToStr(e.data, !0),
                      r = new Uint8Array(e.data.subarray(t.length + 1));
                    return {
                      key: e.type,
                      info: t,
                      data: r.buffer,
                    };
                  }
                }),
                (o._decodeTextFrame = function (e) {
                  if (!(e.size < 2)) {
                    if ("TXXX" === e.type) {
                      var t = 1,
                        r = o._utf8ArrayToStr(e.data.subarray(1), !0);
                      t += r.length + 1;
                      t = o._utf8ArrayToStr(e.data.subarray(t));
                      return {
                        key: e.type,
                        info: r,
                        data: t,
                      };
                    }
                    t = o._utf8ArrayToStr(e.data.subarray(1));
                    return {
                      key: e.type,
                      data: t,
                    };
                  }
                }),
                (o._decodeURLFrame = function (e) {
                  if ("WXXX" === e.type) {
                    if (e.size < 2) return;
                    var t = 1,
                      r = o._utf8ArrayToStr(e.data.subarray(1), !0);
                    t += r.length + 1;
                    t = o._utf8ArrayToStr(e.data.subarray(t));
                    return {
                      key: e.type,
                      info: r,
                      data: t,
                    };
                  }
                  t = o._utf8ArrayToStr(e.data);
                  return {
                    key: e.type,
                    data: t,
                  };
                }),
                (o._utf8ArrayToStr = function (e, t) {
                  void 0 === t && (t = !1);
                  var r =
                    ((i = Object(c.a)()),
                    u ||
                      void 0 === i.TextDecoder ||
                      (u = new i.TextDecoder("utf-8")),
                    u);
                  if (r) {
                    var i = r.decode(e);
                    if (t) {
                      r = i.indexOf("\0");
                      return -1 !== r ? i.substring(0, r) : i;
                    }
                    return i.replace(/\0/g, "");
                  }
                  for (var a, n, s, o = e.length, l = "", d = 0; d < o; ) {
                    if (0 === (a = e[d++]) && t) return l;
                    if (0 !== a && 3 !== a)
                      switch (a >> 4) {
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                          l += String.fromCharCode(a);
                          break;
                        case 12:
                        case 13:
                          (n = e[d++]),
                            (l += String.fromCharCode(
                              ((31 & a) << 6) | (63 & n)
                            ));
                          break;
                        case 14:
                          (n = e[d++]),
                            (s = e[d++]),
                            (l += String.fromCharCode(
                              ((15 & a) << 12) |
                                ((63 & n) << 6) |
                                ((63 & s) << 0)
                            ));
                      }
                  }
                  return l;
                }),
                o);
            function o() {}
            var i = r._utf8ArrayToStr;
            t.a = r;
          },
          function (e, t, r) {
            "use strict";
            function i() {
              return "undefined" == typeof window ? self : window;
            }
            r.d(t, "a", function () {
              return i;
            });
          },
          function (e, t, r) {
            var i =
                /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,
              n = /^([^\/?#]*)(.*)$/,
              a = /(?:\/|^)\.(?=\/)/g,
              s = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,
              o = {
                buildAbsoluteURL: function (e, t, r) {
                  if (((r = r || {}), (e = e.trim()), !(t = t.trim()))) {
                    if (!r.alwaysNormalize) return e;
                    var i = o.parseURL(e);
                    if (!i) throw new Error("Error trying to parse base URL.");
                    return (
                      (i.path = o.normalizePath(i.path)), o.buildURLFromParts(i)
                    );
                  }
                  i = o.parseURL(t);
                  if (!i)
                    throw new Error("Error trying to parse relative URL.");
                  if (i.scheme)
                    return r.alwaysNormalize
                      ? ((i.path = o.normalizePath(i.path)),
                        o.buildURLFromParts(i))
                      : t;
                  t = o.parseURL(e);
                  if (!t) throw new Error("Error trying to parse base URL.");
                  !t.netLoc &&
                    t.path &&
                    "/" !== t.path[0] &&
                    ((a = n.exec(t.path)), (t.netLoc = a[1]), (t.path = a[2])),
                    t.netLoc && !t.path && (t.path = "/");
                  var a,
                    e = {
                      scheme: t.scheme,
                      netLoc: i.netLoc,
                      path: null,
                      params: i.params,
                      query: i.query,
                      fragment: i.fragment,
                    };
                  return (
                    i.netLoc ||
                      ((e.netLoc = t.netLoc), "/" === i.path[0]) ||
                      (i.path
                        ? ((a =
                            (a = t.path).substring(0, a.lastIndexOf("/") + 1) +
                            i.path),
                          (e.path = o.normalizePath(a)))
                        : ((e.path = t.path),
                          i.params ||
                            ((e.params = t.params),
                            i.query || (e.query = t.query)))),
                    null === e.path &&
                      (e.path = r.alwaysNormalize
                        ? o.normalizePath(i.path)
                        : i.path),
                    o.buildURLFromParts(e)
                  );
                },
                parseURL: function (e) {
                  e = i.exec(e);
                  return e
                    ? {
                        scheme: e[1] || "",
                        netLoc: e[2] || "",
                        path: e[3] || "",
                        params: e[4] || "",
                        query: e[5] || "",
                        fragment: e[6] || "",
                      }
                    : null;
                },
                normalizePath: function (e) {
                  for (
                    e = e.split("").reverse().join("").replace(a, "");
                    e.length !== (e = e.replace(s, "")).length;

                  );
                  return e.split("").reverse().join("");
                },
                buildURLFromParts: function (e) {
                  return (
                    e.scheme +
                    e.netLoc +
                    e.path +
                    e.params +
                    e.query +
                    e.fragment
                  );
                },
              };
            e.exports = o;
          },
          function (e, t, r) {
            "use strict";
            var o =
                ((a.prototype.decrypt = function (e, t) {
                  return this.subtle.decrypt(
                    {
                      name: "AES-CBC",
                      iv: this.aesIV,
                    },
                    t,
                    e
                  );
                }),
                a),
              l =
                ((i.prototype.expandKey = function () {
                  return this.subtle.importKey(
                    "raw",
                    this.key,
                    {
                      name: "AES-CBC",
                    },
                    !1,
                    ["encrypt", "decrypt"]
                  );
                }),
                i);
            function i(e, t) {
              (this.subtle = e), (this.key = t);
            }
            function a(e, t) {
              (this.subtle = e), (this.aesIV = t);
            }
            var n,
              d =
                (((n = g.prototype).uint8ArrayToUint32Array_ = function (e) {
                  for (
                    var t = new DataView(e), r = new Uint32Array(4), i = 0;
                    i < 4;
                    i++
                  )
                    r[i] = t.getUint32(4 * i);
                  return r;
                }),
                (n.initTable = function () {
                  for (
                    var e = this.sBox,
                      t = this.invSBox,
                      r = this.subMix,
                      i = r[0],
                      a = r[1],
                      n = r[2],
                      s = r[3],
                      r = this.invSubMix,
                      o = r[0],
                      l = r[1],
                      d = r[2],
                      u = r[3],
                      c = new Uint32Array(256),
                      h = 0,
                      f = 0,
                      g = 0,
                      g = 0;
                    g < 256;
                    g++
                  )
                    c[g] = g < 128 ? g << 1 : (g << 1) ^ 283;
                  for (g = 0; g < 256; g++) {
                    var p =
                        ((p = f ^ (f << 1) ^ (f << 2) ^ (f << 3) ^ (f << 4)) >>>
                          8) ^
                        (255 & p) ^
                        99,
                      m = c[(t[(e[h] = p)] = h)],
                      v = c[m],
                      y = c[v],
                      b = (257 * c[p]) ^ (16843008 * p);
                    (i[h] = (b << 24) | (b >>> 8)),
                      (a[h] = (b << 16) | (b >>> 16)),
                      (n[h] = (b << 8) | (b >>> 24)),
                      (s[h] = b),
                      (b =
                        (16843009 * y) ^
                        (65537 * v) ^
                        (257 * m) ^
                        (16843008 * h)),
                      (o[p] = (b << 24) | (b >>> 8)),
                      (l[p] = (b << 16) | (b >>> 16)),
                      (d[p] = (b << 8) | (b >>> 24)),
                      (u[p] = b),
                      h
                        ? ((h = m ^ c[c[c[y ^ m]]]), (f ^= c[c[f]]))
                        : (h = f = 1);
                  }
                }),
                (n.expandKey = function (e) {
                  for (
                    var t = this.uint8ArrayToUint32Array_(e), r = !0, i = 0;
                    i < t.length && r;

                  )
                    (r = t[i] === this.key[i]), i++;
                  if (!r) {
                    this.key = t;
                    var a = (this.keySize = t.length);
                    if (4 !== a && 6 !== a && 8 !== a)
                      throw new Error("Invalid aes key size=" + a);
                    for (
                      var n,
                        s,
                        o,
                        l = (this.ksRows = 4 * (a + 6 + 1)),
                        d = (this.keySchedule = new Uint32Array(l)),
                        u = (this.invKeySchedule = new Uint32Array(l)),
                        c = this.sBox,
                        h = this.rcon,
                        e = this.invSubMix,
                        f = e[0],
                        g = e[1],
                        p = e[2],
                        m = e[3],
                        v = 0;
                      v < l;
                      v++
                    )
                      v < a
                        ? (s = d[v] = t[v])
                        : ((o = s),
                          v % a == 0
                            ? ((o =
                                (c[(o = (o << 8) | (o >>> 24)) >>> 24] << 24) |
                                (c[(o >>> 16) & 255] << 16) |
                                (c[(o >>> 8) & 255] << 8) |
                                c[255 & o]),
                              (o ^= h[(v / a) | 0] << 24))
                            : 6 < a &&
                              v % a == 4 &&
                              (o =
                                (c[o >>> 24] << 24) |
                                (c[(o >>> 16) & 255] << 16) |
                                (c[(o >>> 8) & 255] << 8) |
                                c[255 & o]),
                          (d[v] = s = (d[v - a] ^ o) >>> 0));
                    for (n = 0; n < l; n++)
                      (v = l - n),
                        (o = 3 & n ? d[v] : d[v - 4]),
                        (u[n] =
                          n < 4 || v <= 4
                            ? o
                            : f[c[o >>> 24]] ^
                              g[c[(o >>> 16) & 255]] ^
                              p[c[(o >>> 8) & 255]] ^
                              m[c[255 & o]]),
                        (u[n] = u[n] >>> 0);
                  }
                }),
                (n.networkToHostOrderSwap = function (e) {
                  return (
                    (e << 24) |
                    ((65280 & e) << 8) |
                    ((16711680 & e) >> 8) |
                    (e >>> 24)
                  );
                }),
                (n.decrypt = function (e, t, r, i) {
                  for (
                    var a,
                      n,
                      s,
                      o,
                      l,
                      d,
                      u,
                      c,
                      h,
                      f,
                      g,
                      p,
                      m,
                      v,
                      y = this.keySize + 6,
                      b = this.invKeySchedule,
                      T = this.invSBox,
                      E = this.invSubMix,
                      S = E[0],
                      _ = E[1],
                      R = E[2],
                      A = E[3],
                      r = this.uint8ArrayToUint32Array_(r),
                      k = r[0],
                      w = r[1],
                      L = r[2],
                      D = r[3],
                      O = new Int32Array(e),
                      C = new Int32Array(O.length),
                      I = this.networkToHostOrderSwap;
                    t < O.length;

                  ) {
                    for (
                      h = I(O[t]),
                        f = I(O[t + 1]),
                        g = I(O[t + 2]),
                        p = I(O[t + 3]),
                        l = h ^ b[0],
                        d = p ^ b[1],
                        u = g ^ b[2],
                        c = f ^ b[3],
                        m = 4,
                        v = 1;
                      v < y;
                      v++
                    )
                      (a =
                        S[l >>> 24] ^
                        _[(d >> 16) & 255] ^
                        R[(u >> 8) & 255] ^
                        A[255 & c] ^
                        b[m]),
                        (n =
                          S[d >>> 24] ^
                          _[(u >> 16) & 255] ^
                          R[(c >> 8) & 255] ^
                          A[255 & l] ^
                          b[m + 1]),
                        (s =
                          S[u >>> 24] ^
                          _[(c >> 16) & 255] ^
                          R[(l >> 8) & 255] ^
                          A[255 & d] ^
                          b[m + 2]),
                        (o =
                          S[c >>> 24] ^
                          _[(l >> 16) & 255] ^
                          R[(d >> 8) & 255] ^
                          A[255 & u] ^
                          b[m + 3]),
                        (l = a),
                        (d = n),
                        (u = s),
                        (c = o),
                        (m += 4);
                    (a =
                      (T[l >>> 24] << 24) ^
                      (T[(d >> 16) & 255] << 16) ^
                      (T[(u >> 8) & 255] << 8) ^
                      T[255 & c] ^
                      b[m]),
                      (n =
                        (T[d >>> 24] << 24) ^
                        (T[(u >> 16) & 255] << 16) ^
                        (T[(c >> 8) & 255] << 8) ^
                        T[255 & l] ^
                        b[m + 1]),
                      (s =
                        (T[u >>> 24] << 24) ^
                        (T[(c >> 16) & 255] << 16) ^
                        (T[(l >> 8) & 255] << 8) ^
                        T[255 & d] ^
                        b[m + 2]),
                      (o =
                        (T[c >>> 24] << 24) ^
                        (T[(l >> 16) & 255] << 16) ^
                        (T[(d >> 8) & 255] << 8) ^
                        T[255 & u] ^
                        b[m + 3]),
                      (m += 3),
                      (C[t] = I(a ^ k)),
                      (C[t + 1] = I(o ^ w)),
                      (C[t + 2] = I(s ^ L)),
                      (C[t + 3] = I(n ^ D)),
                      (k = h),
                      (w = f),
                      (L = g),
                      (D = p),
                      (t += 4);
                  }
                  return i
                    ? (i =
                        (e = (r = C.buffer).byteLength) &&
                        new DataView(r).getUint8(e - 1))
                      ? r.slice(0, e - i)
                      : r
                    : C.buffer;
                }),
                (n.destroy = function () {
                  (this.key = void 0),
                    (this.keySize = void 0),
                    (this.ksRows = void 0),
                    (this.sBox = void 0),
                    (this.invSBox = void 0),
                    (this.subMix = void 0),
                    (this.invSubMix = void 0),
                    (this.keySchedule = void 0),
                    (this.invKeySchedule = void 0),
                    (this.rcon = void 0);
                }),
                g),
              s = r(2),
              u = r(0),
              c = r(1),
              r = r(5),
              h = Object(r.a)(),
              r =
                (((r = f.prototype).isSync = function () {
                  return this.disableWebCrypto && this.config.enableSoftwareAES;
                }),
                (r.decrypt = function (t, r, i, a) {
                  var e,
                    n,
                    s = this;
                  this.disableWebCrypto && this.config.enableSoftwareAES
                    ? (this.logEnabled &&
                        (u.b.log("JS AES decrypt"), (this.logEnabled = !1)),
                      (e = this.decryptor) || (this.decryptor = e = new d()),
                      e.expandKey(r),
                      a(e.decrypt(t, 0, i, this.removePKCS7Padding)))
                    : (this.logEnabled &&
                        (u.b.log("WebCrypto AES decrypt"),
                        (this.logEnabled = !1)),
                      (n = this.subtle),
                      this.key !== r &&
                        ((this.key = r), (this.fastAesKey = new l(n, r))),
                      this.fastAesKey
                        .expandKey()
                        .then(function (e) {
                          new o(n, i)
                            .decrypt(t, e)
                            .catch(function (e) {
                              s.onWebCryptoError(e, t, r, i, a);
                            })
                            .then(function (e) {
                              a(e);
                            });
                        })
                        .catch(function (e) {
                          s.onWebCryptoError(e, t, r, i, a);
                        }));
                }),
                (r.onWebCryptoError = function (e, t, r, i, a) {
                  this.config.enableSoftwareAES
                    ? (u.b.log("WebCrypto Error, disable WebCrypto API"),
                      (this.disableWebCrypto = !0),
                      (this.logEnabled = !0),
                      this.decrypt(t, r, i, a))
                    : (u.b.error("decrypting error : " + e.message),
                      this.observer.trigger(c.a.ERROR, {
                        type: s.b.MEDIA_ERROR,
                        details: s.a.FRAG_DECRYPT_ERROR,
                        fatal: !0,
                        reason: e.message,
                      }));
                }),
                (r.destroy = function () {
                  var e = this.decryptor;
                  e && (e.destroy(), (this.decryptor = void 0));
                }),
                f);
            function f(e, t, r) {
              (r = (void 0 === r ? {} : r).removePKCS7Padding),
                (r = void 0 === r || r);
              if (
                ((this.logEnabled = !0),
                (this.observer = e),
                (this.config = t),
                (this.removePKCS7Padding = r))
              )
                try {
                  var i = h.crypto;
                  i && (this.subtle = i.subtle || i.webkitSubtle);
                } catch (e) {}
              this.disableWebCrypto = !this.subtle;
            }
            function g() {
              (this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54]),
                (this.subMix = [
                  new Uint32Array(256),
                  new Uint32Array(256),
                  new Uint32Array(256),
                  new Uint32Array(256),
                ]),
                (this.invSubMix = [
                  new Uint32Array(256),
                  new Uint32Array(256),
                  new Uint32Array(256),
                  new Uint32Array(256),
                ]),
                (this.sBox = new Uint32Array(256)),
                (this.invSBox = new Uint32Array(256)),
                (this.key = new Uint32Array(0)),
                this.initTable();
            }
            t.a = r;
          },
          function (e, t, r) {
            "use strict";
            var i = Object.prototype.hasOwnProperty,
              f = "~";
            function a() {}
            function n(e, t, r) {
              (this.fn = e), (this.context = t), (this.once = r || !1);
            }
            function s(e, t, r, i, a) {
              if ("function" != typeof r)
                throw new TypeError("The listener must be a function");
              (a = new n(r, i || e, a)), (t = f ? f + t : t);
              return (
                e._events[t]
                  ? e._events[t].fn
                    ? (e._events[t] = [e._events[t], a])
                    : e._events[t].push(a)
                  : ((e._events[t] = a), e._eventsCount++),
                e
              );
            }
            function l(e, t) {
              0 == --e._eventsCount
                ? (e._events = new a())
                : delete e._events[t];
            }
            function o() {
              (this._events = new a()), (this._eventsCount = 0);
            }
            Object.create &&
              ((a.prototype = Object.create(null)),
              new a().__proto__ || (f = !1)),
              (o.prototype.eventNames = function () {
                var e,
                  t,
                  r = [];
                if (0 === this._eventsCount) return r;
                for (t in (e = this._events))
                  i.call(e, t) && r.push(f ? t.slice(1) : t);
                return Object.getOwnPropertySymbols
                  ? r.concat(Object.getOwnPropertySymbols(e))
                  : r;
              }),
              (o.prototype.listeners = function (e) {
                var e = f ? f + e : e,
                  t = this._events[e];
                if (!t) return [];
                if (t.fn) return [t.fn];
                for (var r = 0, i = t.length, a = new Array(i); r < i; r++)
                  a[r] = t[r].fn;
                return a;
              }),
              (o.prototype.listenerCount = function (e) {
                (e = f ? f + e : e), (e = this._events[e]);
                return e ? (e.fn ? 1 : e.length) : 0;
              }),
              (o.prototype.emit = function (e, t, r, i, a, n) {
                var s = f ? f + e : e;
                if (!this._events[s]) return !1;
                var o,
                  l = this._events[s],
                  d = arguments.length;
                if (l.fn) {
                  switch (
                    (l.once && this.removeListener(e, l.fn, void 0, !0), d)
                  ) {
                    case 1:
                      return l.fn.call(l.context), !0;
                    case 2:
                      return l.fn.call(l.context, t), !0;
                    case 3:
                      return l.fn.call(l.context, t, r), !0;
                    case 4:
                      return l.fn.call(l.context, t, r, i), !0;
                    case 5:
                      return l.fn.call(l.context, t, r, i, a), !0;
                    case 6:
                      return l.fn.call(l.context, t, r, i, a, n), !0;
                  }
                  for (h = 1, o = new Array(d - 1); h < d; h++)
                    o[h - 1] = arguments[h];
                  l.fn.apply(l.context, o);
                } else
                  for (var u, c = l.length, h = 0; h < c; h++)
                    switch (
                      (l[h].once && this.removeListener(e, l[h].fn, void 0, !0),
                      d)
                    ) {
                      case 1:
                        l[h].fn.call(l[h].context);
                        break;
                      case 2:
                        l[h].fn.call(l[h].context, t);
                        break;
                      case 3:
                        l[h].fn.call(l[h].context, t, r);
                        break;
                      case 4:
                        l[h].fn.call(l[h].context, t, r, i);
                        break;
                      default:
                        if (!o)
                          for (u = 1, o = new Array(d - 1); u < d; u++)
                            o[u - 1] = arguments[u];
                        l[h].fn.apply(l[h].context, o);
                    }
                return !0;
              }),
              (o.prototype.on = function (e, t, r) {
                return s(this, e, t, r, !1);
              }),
              (o.prototype.once = function (e, t, r) {
                return s(this, e, t, r, !0);
              }),
              (o.prototype.removeListener = function (e, t, r, i) {
                e = f ? f + e : e;
                if (!this._events[e]) return this;
                if (!t) return l(this, e), this;
                var a = this._events[e];
                if (a.fn)
                  a.fn !== t ||
                    (i && !a.once) ||
                    (r && a.context !== r) ||
                    l(this, e);
                else {
                  for (var n = 0, s = [], o = a.length; n < o; n++)
                    (a[n].fn !== t ||
                      (i && !a[n].once) ||
                      (r && a[n].context !== r)) &&
                      s.push(a[n]);
                  s.length
                    ? (this._events[e] = 1 === s.length ? s[0] : s)
                    : l(this, e);
                }
                return this;
              }),
              (o.prototype.removeAllListeners = function (e) {
                return (
                  e
                    ? ((e = f ? f + e : e), this._events[e] && l(this, e))
                    : ((this._events = new a()), (this._eventsCount = 0)),
                  this
                );
              }),
              (o.prototype.off = o.prototype.removeListener),
              (o.prototype.addListener = o.prototype.on),
              (o.prefixed = f),
              (o.EventEmitter = o),
              (e.exports = o);
          },
          function (e, t, r) {
            "use strict";
            var W = r(1),
              q = r(2),
              p = r(7),
              g = r(3),
              X = r(0),
              i = r(5);
            function a(e, t) {
              return 255 === e[t] && 240 == (246 & e[t + 1]);
            }
            function l(e, t) {
              return 1 & e[t + 1] ? 7 : 9;
            }
            function d(e, t) {
              return (
                ((3 & e[t + 3]) << 11) |
                (e[t + 4] << 3) |
                ((224 & e[t + 5]) >>> 5)
              );
            }
            function m(e, t) {
              return t + 1 < e.length && a(e, t);
            }
            function v(e, t, r, i, a) {
              e.samplerate ||
                ((a = (function (e, t, r, i) {
                  var a,
                    n,
                    s,
                    o = navigator.userAgent.toLowerCase(),
                    l = i,
                    d = [
                      96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3,
                      12e3, 11025, 8e3, 7350,
                    ],
                    u = 1 + ((192 & t[r + 2]) >>> 6);
                  if (!((a = (60 & t[r + 2]) >>> 2) > d.length - 1))
                    return (
                      (n = (1 & t[r + 2]) << 2),
                      (n |= (192 & t[r + 3]) >>> 6),
                      X.b.log(
                        "manifest codec:" +
                          i +
                          ",ADTS data:type:" +
                          u +
                          ",sampleingIndex:" +
                          a +
                          "[" +
                          d[a] +
                          "Hz],channelConfig:" +
                          n
                      ),
                      (i = /firefox/i.test(o)
                        ? 6 <= a
                          ? ((u = 5), (s = new Array(4)), a - 3)
                          : ((u = 2), (s = new Array(2)), a)
                        : -1 !== o.indexOf("android")
                        ? ((u = 2), (s = new Array(2)), a)
                        : ((u = 5),
                          (s = new Array(4)),
                          (i &&
                            (-1 !== i.indexOf("mp4a.40.29") ||
                              -1 !== i.indexOf("mp4a.40.5"))) ||
                          (!i && 6 <= a)
                            ? a - 3
                            : (((i &&
                                -1 !== i.indexOf("mp4a.40.2") &&
                                ((6 <= a && 1 == n) || /vivaldi/i.test(o))) ||
                                (!i && 1 == n)) &&
                                ((u = 2), (s = new Array(2))),
                              a))),
                      (s[0] = u << 3),
                      (s[0] |= (14 & a) >> 1),
                      (s[1] |= (1 & a) << 7),
                      (s[1] |= n << 3),
                      5 === u &&
                        ((s[1] |= (14 & i) >> 1),
                        (s[2] = (1 & i) << 7),
                        (s[2] |= 8),
                        (s[3] = 0)),
                      {
                        config: s,
                        samplerate: d[a],
                        channelCount: n,
                        codec: "mp4a.40." + u,
                        manifestCodec: l,
                      }
                    );
                  e.trigger(W.a.ERROR, {
                    type: q.b.MEDIA_ERROR,
                    details: q.a.FRAG_PARSING_ERROR,
                    fatal: !0,
                    reason: "invalid ADTS sampling index:" + a,
                  });
                })(t, r, i, a)),
                (e.config = a.config),
                (e.samplerate = a.samplerate),
                (e.channelCount = a.channelCount),
                (e.codec = a.codec),
                (e.manifestCodec = a.manifestCodec),
                X.b.log(
                  "parsed codec:" +
                    e.codec +
                    ",rate:" +
                    a.samplerate +
                    ",nb channel:" +
                    a.channelCount
                ));
            }
            function f(e) {
              return 9216e4 / e;
            }
            function y(e, a, n, s, o) {
              var t = (function (e) {
                var t = a.length,
                  r = l(a, n),
                  i = d(a, n);
                if (0 < (i -= r) && n + r + i <= t)
                  return {
                    headerLength: r,
                    frameLength: i,
                    stamp: s + o * e,
                  };
              })(f(e.samplerate));
              if (t) {
                var r = t.stamp,
                  i = t.headerLength,
                  t = t.frameLength,
                  r = {
                    unit: a.subarray(n + i, n + i + t),
                    pts: r,
                    dts: r,
                  };
                return (
                  e.samples.push(r),
                  {
                    sample: r,
                    length: t + i,
                  }
                );
              }
            }
            var n,
              k = r(4),
              E =
                (((n = O.prototype).resetInitSegment = function (e, t, r, i) {
                  this._audioTrack = {
                    container: "audio/adts",
                    type: "audio",
                    id: 0,
                    sequenceNumber: 0,
                    isAAC: !0,
                    samples: [],
                    len: 0,
                    manifestCodec: t,
                    duration: i,
                    inputTimeScale: 9e4,
                  };
                }),
                (n.resetTimeStamp = function () {}),
                (O.probe = function (e) {
                  if (!e) return !1;
                  for (
                    var t = (k.a.getID3Data(e, 0) || []).length, r = e.length;
                    t < r;
                    t++
                  )
                    if (
                      (function (e, t) {
                        if (m(e, t)) {
                          var r = l(e, t);
                          if (t + r >= e.length) return;
                          var i = d(e, t);
                          if (i <= r) return;
                          i = t + i;
                          if (i === e.length || (i + 1 < e.length && a(e, i)))
                            return 1;
                        }
                      })(e, t)
                    )
                      return X.b.log("ADTS sync word found !"), !0;
                  return !1;
                }),
                (n.append = function (e, t, r, i) {
                  for (
                    var a = this._audioTrack,
                      n = k.a.getID3Data(e, 0) || [],
                      s = k.a.getTimeStamp(n),
                      o = Object(g.a)(s) ? 90 * s : 9e4 * t,
                      l = 0,
                      d = o,
                      u = e.length,
                      c = n.length,
                      h = [
                        {
                          pts: d,
                          dts: d,
                          data: n,
                        },
                      ];
                    c < u - 1;

                  )
                    if (m(e, c) && c + 5 < u) {
                      v(a, this.observer, e, c, a.manifestCodec);
                      var f = y(a, e, c, o, l);
                      if (!f) {
                        X.b.log("Unable to parse AAC frame");
                        break;
                      }
                      (c += f.length), (d = f.sample.pts), l++;
                    } else
                      k.a.isHeader(e, c)
                        ? ((n = k.a.getID3Data(e, c)),
                          h.push({
                            pts: d,
                            dts: d,
                            data: n,
                          }),
                          (c += n.length))
                        : c++;
                  this.remuxer.remux(
                    a,
                    {
                      samples: [],
                    },
                    {
                      samples: h,
                      inputTimeScale: 9e4,
                    },
                    {
                      samples: [],
                    },
                    t,
                    r,
                    i
                  );
                }),
                (n.destroy = function () {}),
                O),
              S = r(10),
              u = {
                BitratesMap: [
                  32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416,
                  448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256,
                  320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
                  256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176,
                  192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112,
                  128, 144, 160,
                ],
                SamplingRateMap: [
                  44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3,
                ],
                SamplesCoefficients: [
                  [0, 72, 144, 12],
                  [0, 0, 0, 0],
                  [0, 72, 144, 12],
                  [0, 144, 144, 12],
                ],
                BytesInSlot: [0, 1, 1, 4],
                appendFrame: function (e, t, r, i, a) {
                  if (!(r + 24 > t.length)) {
                    var n = this.parseHeader(t, r);
                    if (n && r + n.frameLength <= t.length) {
                      (a = i + a * ((9e4 * n.samplesPerFrame) / n.sampleRate)),
                        (a = {
                          unit: t.subarray(r, r + n.frameLength),
                          pts: a,
                          dts: a,
                        });
                      return (
                        (e.config = []),
                        (e.channelCount = n.channelCount),
                        (e.samplerate = n.sampleRate),
                        e.samples.push(a),
                        {
                          sample: a,
                          length: n.frameLength,
                        }
                      );
                    }
                  }
                },
                parseHeader: function (e, t) {
                  var r = (e[t + 1] >> 3) & 3,
                    i = (e[t + 1] >> 1) & 3,
                    a = (e[t + 2] >> 4) & 15,
                    n = (e[t + 2] >> 2) & 3,
                    s = (e[t + 2] >> 1) & 1;
                  if (1 != r && 0 != a && 15 != a && 3 != n) {
                    var o = 3 == r ? 3 - i : 3 == i ? 3 : 4,
                      o = 1e3 * u.BitratesMap[14 * o + a - 1],
                      a = 3 == r ? 0 : 2 == r ? 1 : 2,
                      n = u.SamplingRateMap[3 * a + n],
                      e = e[t + 3] >> 6 == 3 ? 1 : 2,
                      t = u.SamplesCoefficients[r][i],
                      r = u.BytesInSlot[i],
                      i = 8 * t * r;
                    return {
                      sampleRate: n,
                      channelCount: e,
                      frameLength: parseInt((t * o) / n + s, 10) * r,
                      samplesPerFrame: i,
                    };
                  }
                },
                isHeaderPattern: function (e, t) {
                  return (
                    255 === e[t] &&
                    224 == (224 & e[t + 1]) &&
                    0 != (6 & e[t + 1])
                  );
                },
                isHeader: function (e, t) {
                  return !!(t + 1 < e.length && this.isHeaderPattern(e, t));
                },
                probe: function (e, t) {
                  if (t + 1 < e.length && this.isHeaderPattern(e, t)) {
                    var r = this.parseHeader(e, t),
                      i = 4;
                    r && r.frameLength && (i = r.frameLength);
                    i = t + i;
                    if (
                      i === e.length ||
                      (i + 1 < e.length && this.isHeaderPattern(e, i))
                    )
                      return !0;
                  }
                  return !1;
                },
              },
              b = u,
              w =
                (((r = D.prototype).loadWord = function () {
                  var e = this.data,
                    t = this.bytesAvailable,
                    r = e.byteLength - t,
                    i = new Uint8Array(4),
                    t = Math.min(4, t);
                  if (0 === t) throw new Error("no bytes available");
                  i.set(e.subarray(r, r + t)),
                    (this.word = new DataView(i.buffer).getUint32(0)),
                    (this.bitsAvailable = 8 * t),
                    (this.bytesAvailable -= t);
                }),
                (r.skipBits = function (e) {
                  var t;
                  this.bitsAvailable > e ||
                    ((e -= this.bitsAvailable),
                    (e -= (t = e >> 3) >> 3),
                    (this.bytesAvailable -= t),
                    this.loadWord()),
                    (this.word <<= e),
                    (this.bitsAvailable -= e);
                }),
                (r.readBits = function (e) {
                  var t = Math.min(this.bitsAvailable, e),
                    r = this.word >>> (32 - t);
                  return (
                    32 < e &&
                      X.b.error("Cannot read more than 32 bits at a time"),
                    (this.bitsAvailable -= t),
                    0 < this.bitsAvailable
                      ? (this.word <<= t)
                      : 0 < this.bytesAvailable && this.loadWord(),
                    0 < (t = e - t) && this.bitsAvailable
                      ? (r << t) | this.readBits(t)
                      : r
                  );
                }),
                (r.skipLZ = function () {
                  for (var e = 0; e < this.bitsAvailable; ++e)
                    if (0 != (this.word & (2147483648 >>> e)))
                      return (this.word <<= e), (this.bitsAvailable -= e), e;
                  return this.loadWord(), e + this.skipLZ();
                }),
                (r.skipUEG = function () {
                  this.skipBits(1 + this.skipLZ());
                }),
                (r.skipEG = function () {
                  this.skipBits(1 + this.skipLZ());
                }),
                (r.readUEG = function () {
                  var e = this.skipLZ();
                  return this.readBits(e + 1) - 1;
                }),
                (r.readEG = function () {
                  var e = this.readUEG();
                  return 1 & e ? (1 + e) >>> 1 : -1 * (e >>> 1);
                }),
                (r.readBoolean = function () {
                  return 1 === this.readBits(1);
                }),
                (r.readUByte = function () {
                  return this.readBits(8);
                }),
                (r.readUShort = function () {
                  return this.readBits(16);
                }),
                (r.readUInt = function () {
                  return this.readBits(32);
                }),
                (r.skipScalingList = function (e) {
                  for (var t = 8, r = 8, i = 0; i < e; i++)
                    0 !== r && (r = (t + this.readEG() + 256) % 256),
                      (t = 0 === r ? t : r);
                }),
                (r.readSPS = function () {
                  var e,
                    t,
                    r,
                    i,
                    a = 0,
                    n = 0,
                    s = 0,
                    o = 0,
                    l = this.readUByte.bind(this),
                    d = this.readBits.bind(this),
                    u = this.readUEG.bind(this),
                    c = this.readBoolean.bind(this),
                    h = this.skipBits.bind(this),
                    f = this.skipEG.bind(this),
                    g = this.skipUEG.bind(this),
                    p = this.skipScalingList.bind(this);
                  if (
                    (l(),
                    (e = l()),
                    d(5),
                    h(3),
                    l(),
                    g(),
                    100 === e ||
                      110 === e ||
                      122 === e ||
                      244 === e ||
                      44 === e ||
                      83 === e ||
                      86 === e ||
                      118 === e ||
                      128 === e)
                  ) {
                    var m = u();
                    if ((3 === m && h(1), g(), g(), h(1), c()))
                      for (r = 3 !== m ? 8 : 12, i = 0; i < r; i++)
                        c() && p(i < 6 ? 16 : 64);
                  }
                  g();
                  var m = u();
                  if (0 === m) u();
                  else if (1 === m)
                    for (h(1), f(), f(), t = u(), i = 0; i < t; i++) f();
                  g(),
                    h(1),
                    (m = u()),
                    (g = u()),
                    0 === (d = d(1)) && h(1),
                    h(1),
                    c() && ((a = u()), (n = u()), (s = u()), (o = u()));
                  var v = [1, 1];
                  if (c() && c())
                    switch (l()) {
                      case 1:
                        v = [1, 1];
                        break;
                      case 2:
                        v = [12, 11];
                        break;
                      case 3:
                        v = [10, 11];
                        break;
                      case 4:
                        v = [16, 11];
                        break;
                      case 5:
                        v = [40, 33];
                        break;
                      case 6:
                        v = [24, 11];
                        break;
                      case 7:
                        v = [20, 11];
                        break;
                      case 8:
                        v = [32, 11];
                        break;
                      case 9:
                        v = [80, 33];
                        break;
                      case 10:
                        v = [18, 11];
                        break;
                      case 11:
                        v = [15, 11];
                        break;
                      case 12:
                        v = [64, 33];
                        break;
                      case 13:
                        v = [160, 99];
                        break;
                      case 14:
                        v = [4, 3];
                        break;
                      case 15:
                        v = [3, 2];
                        break;
                      case 16:
                        v = [2, 1];
                        break;
                      case 255:
                        v = [(l() << 8) | l(), (l() << 8) | l()];
                    }
                  return {
                    width: Math.ceil(16 * (m + 1) - 2 * a - 2 * n),
                    height: (2 - d) * (g + 1) * 16 - (d ? 2 : 4) * (s + o),
                    pixelRatio: v,
                  };
                }),
                (r.readSliceType = function () {
                  return this.readUByte(), this.readUEG(), this.readUEG();
                }),
                D),
              s =
                (((r = L.prototype).decryptBuffer = function (e, t) {
                  this.decrypter.decrypt(
                    e,
                    this.decryptdata.key.buffer,
                    this.decryptdata.iv.buffer,
                    t
                  );
                }),
                (r.decryptAacSample = function (t, r, i, a) {
                  var n = t[r].unit,
                    e = n.subarray(16, n.length - (n.length % 16)),
                    e = e.buffer.slice(e.byteOffset, e.byteOffset + e.length),
                    s = this;
                  this.decryptBuffer(e, function (e) {
                    (e = new Uint8Array(e)),
                      n.set(e, 16),
                      a || s.decryptAacSamples(t, r + 1, i);
                  });
                }),
                (r.decryptAacSamples = function (e, t, r) {
                  for (; ; t++) {
                    if (t >= e.length) return void r();
                    if (!(e[t].unit.length < 32)) {
                      var i = this.decrypter.isSync();
                      if ((this.decryptAacSample(e, t, r, i), !i)) return;
                    }
                  }
                }),
                (r.getAvcEncryptedData = function (e) {
                  for (
                    var t = 16 * Math.floor((e.length - 48) / 160) + 16,
                      r = new Int8Array(t),
                      i = 0,
                      a = 32;
                    a <= e.length - 16;
                    a += 160, i += 16
                  )
                    r.set(e.subarray(a, a + 16), i);
                  return r;
                }),
                (r.getAvcDecryptedUnit = function (e, t) {
                  t = new Uint8Array(t);
                  for (var r = 0, i = 32; i <= e.length - 16; i += 160, r += 16)
                    e.set(t.subarray(r, r + 16), i);
                  return e;
                }),
                (r.decryptAvcSample = function (t, r, i, a, n, s) {
                  var o = this.discardEPB(n.data),
                    e = this.getAvcEncryptedData(o),
                    l = this;
                  this.decryptBuffer(e.buffer, function (e) {
                    (n.data = l.getAvcDecryptedUnit(o, e)),
                      s || l.decryptAvcSamples(t, r, i + 1, a);
                  });
                }),
                (r.decryptAvcSamples = function (e, t, r, i) {
                  for (; ; t++, r = 0) {
                    if (t >= e.length) return void i();
                    for (var a = e[t].units; !(r >= a.length); r++) {
                      var n = a[r];
                      if (!(n.length <= 48 || (1 !== n.type && 5 !== n.type))) {
                        var s = this.decrypter.isSync();
                        if ((this.decryptAvcSample(e, t, r, i, n, s), !s))
                          return;
                      }
                    }
                  }
                }),
                L),
              o = {
                video: 1,
                audio: 2,
                id3: 3,
                text: 4,
              },
              _ =
                (((r = C.prototype).setDecryptData = function (e) {
                  null != e && null != e.key && "SAMPLE-AES" === e.method
                    ? (this.sampleAes = new s(
                        this.observer,
                        this.config,
                        e,
                        this.discardEPB
                      ))
                    : (this.sampleAes = null);
                }),
                (C.probe = function (e) {
                  e = C._syncOffset(e);
                  return !(
                    e < 0 ||
                    (e &&
                      X.b.warn(
                        "MPEG2-TS detected but first sync word found @ offset " +
                          e +
                          ", junk ahead ?"
                      ),
                    0)
                  );
                }),
                (C._syncOffset = function (e) {
                  for (var t = Math.min(1e3, e.length - 564), r = 0; r < t; ) {
                    if (71 === e[r] && 71 === e[r + 188] && 71 === e[r + 376])
                      return r;
                    r++;
                  }
                  return -1;
                }),
                (C.createTrack = function (e, t) {
                  return {
                    container:
                      "video" === e || "audio" === e ? "video/mp2t" : void 0,
                    type: e,
                    id: o[e],
                    pid: -1,
                    inputTimeScale: 9e4,
                    sequenceNumber: 0,
                    samples: [],
                    dropped: "video" === e ? 0 : void 0,
                    isAAC: "audio" === e || void 0,
                    duration: "audio" === e ? t : void 0,
                  };
                }),
                (r.resetInitSegment = function (e, t, r, i) {
                  (this.pmtParsed = !1),
                    (this._pmtId = -1),
                    (this.pmtUnknownTypes = {}),
                    (this._avcTrack = C.createTrack("video", i)),
                    (this._audioTrack = C.createTrack("audio", i)),
                    (this._id3Track = C.createTrack("id3", i)),
                    (this._txtTrack = C.createTrack("text", i)),
                    (this.aacOverFlow = null),
                    (this.aacLastPTS = null),
                    (this.avcSample = null),
                    (this.audioCodec = t),
                    (this.videoCodec = r),
                    (this._duration = i);
                }),
                (r.resetTimeStamp = function () {}),
                (r.append = function (e, t, r, i) {
                  var a,
                    n,
                    s,
                    o,
                    l,
                    d = e.length,
                    u = !1;
                  (this.pmtUnknownTypes = {}), (this.contiguous = r);
                  var c = this.pmtParsed,
                    h = this._avcTrack,
                    f = this._audioTrack,
                    g = this._id3Track,
                    p = h.pid,
                    m = f.pid,
                    v = g.pid,
                    y = this._pmtId,
                    b = h.pesData,
                    T = f.pesData,
                    E = g.pesData,
                    S = this._parsePAT,
                    _ = this._parsePMT.bind(this),
                    R = this._parsePES,
                    A = this._parseAVCPES.bind(this),
                    k = this._parseAACPES.bind(this),
                    w = this._parseMPEGPES.bind(this),
                    L = this._parseID3PES.bind(this),
                    D = C._syncOffset(e);
                  for (d -= (d + D) % 188, a = D; a < d; a += 188)
                    if (71 === e[a]) {
                      if (
                        ((n = !!(64 & e[a + 1])),
                        (s = ((31 & e[a + 1]) << 8) + e[a + 2]),
                        1 < (48 & e[a + 3]) >> 4)
                      ) {
                        if ((o = a + 5 + e[a + 4]) === a + 188) continue;
                      } else o = a + 4;
                      switch (s) {
                        case p:
                          n &&
                            (b && (l = R(b)) && A(l, !1),
                            (b = {
                              data: [],
                              size: 0,
                            })),
                            b &&
                              (b.data.push(e.subarray(o, a + 188)),
                              (b.size += a + 188 - o));
                          break;
                        case m:
                          n &&
                            (T && (l = R(T)) && (f.isAAC ? k : w)(l),
                            (T = {
                              data: [],
                              size: 0,
                            })),
                            T &&
                              (T.data.push(e.subarray(o, a + 188)),
                              (T.size += a + 188 - o));
                          break;
                        case v:
                          n &&
                            (E && (l = R(E)) && L(l),
                            (E = {
                              data: [],
                              size: 0,
                            })),
                            E &&
                              (E.data.push(e.subarray(o, a + 188)),
                              (E.size += a + 188 - o));
                          break;
                        case 0:
                          n && (o += e[o] + 1), (y = this._pmtId = S(e, o));
                          break;
                        case y:
                          n && (o += e[o] + 1);
                          var O = _(
                            e,
                            o,
                            !0 === this.typeSupported.mpeg ||
                              !0 === this.typeSupported.mp3,
                            null != this.sampleAes
                          );
                          0 < (p = O.avc) && (h.pid = p),
                            0 < (m = O.audio) &&
                              ((f.pid = m), (f.isAAC = O.isAAC)),
                            0 < (v = O.id3) && (g.pid = v),
                            u &&
                              !c &&
                              (X.b.log("reparse from beginning"),
                              (u = !1),
                              (a = D - 188)),
                            (c = this.pmtParsed = !0);
                          break;
                        case 17:
                        case 8191:
                          break;
                        default:
                          u = !0;
                      }
                    } else
                      this.observer.trigger(W.a.ERROR, {
                        type: q.b.MEDIA_ERROR,
                        details: q.a.FRAG_PARSING_ERROR,
                        fatal: !1,
                        reason: "TS packet did not start with 0x47",
                      });
                  b && (l = R(b))
                    ? (A(l, !0), (h.pesData = null))
                    : (h.pesData = b),
                    T && (l = R(T))
                      ? ((f.isAAC ? k : w)(l), (f.pesData = null))
                      : (T &&
                          T.size &&
                          X.b.log(
                            "last AAC PES packet truncated,might overlap between fragments"
                          ),
                        (f.pesData = T)),
                    E && (l = R(E))
                      ? (L(l), (g.pesData = null))
                      : (g.pesData = E),
                    null == this.sampleAes
                      ? this.remuxer.remux(f, h, g, this._txtTrack, t, r, i)
                      : this.decryptAndRemux(f, h, g, this._txtTrack, t, r, i);
                }),
                (r.decryptAndRemux = function (e, t, r, i, a, n, s) {
                  var o;
                  e.samples && e.isAAC
                    ? (o = this).sampleAes.decryptAacSamples(
                        e.samples,
                        0,
                        function () {
                          o.decryptAndRemuxAvc(e, t, r, i, a, n, s);
                        }
                      )
                    : this.decryptAndRemuxAvc(e, t, r, i, a, n, s);
                }),
                (r.decryptAndRemuxAvc = function (e, t, r, i, a, n, s) {
                  var o;
                  t.samples
                    ? (o = this).sampleAes.decryptAvcSamples(
                        t.samples,
                        0,
                        0,
                        function () {
                          o.remuxer.remux(e, t, r, i, a, n, s);
                        }
                      )
                    : this.remuxer.remux(e, t, r, i, a, n, s);
                }),
                (r.destroy = function () {
                  (this._initPTS = this._initDTS = void 0),
                    (this._duration = 0);
                }),
                (r._parsePAT = function (e, t) {
                  return ((31 & e[t + 10]) << 8) | e[t + 11];
                }),
                (r._trackUnknownPmt = function (e, t, r) {
                  var i = this.pmtUnknownTypes[e] || 0;
                  return (
                    0 === i && ((this.pmtUnknownTypes[e] = 0), t.call(X.b, r)),
                    this.pmtUnknownTypes[e]++,
                    i
                  );
                }),
                (r._parsePMT = function (e, t, r, i) {
                  var a,
                    n = {
                      audio: -1,
                      avc: -1,
                      id3: -1,
                      isAAC: !0,
                    },
                    s = t + 3 + (((15 & e[t + 1]) << 8) | e[t + 2]) - 4;
                  for (
                    t += 12 + (((15 & e[t + 10]) << 8) | e[t + 11]);
                    t < s;

                  ) {
                    switch (((a = ((31 & e[t + 1]) << 8) | e[t + 2]), e[t])) {
                      case 207:
                        if (!i) {
                          this._trackUnknownPmt(
                            e[t],
                            X.b.warn,
                            "ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream"
                          );
                          break;
                        }
                      case 15:
                        -1 === n.audio && (n.audio = a);
                        break;
                      case 21:
                        -1 === n.id3 && (n.id3 = a);
                        break;
                      case 219:
                        if (!i) {
                          this._trackUnknownPmt(
                            e[t],
                            X.b.warn,
                            "H.264 with AES-128-CBC slice encryption found in unencrypted stream"
                          );
                          break;
                        }
                      case 27:
                        -1 === n.avc && (n.avc = a);
                        break;
                      case 3:
                      case 4:
                        r
                          ? -1 === n.audio && ((n.audio = a), (n.isAAC = !1))
                          : this._trackUnknownPmt(
                              e[t],
                              X.b.warn,
                              "MPEG audio found, not supported in this browser"
                            );
                        break;
                      case 36:
                        this._trackUnknownPmt(
                          e[t],
                          X.b.warn,
                          "Unsupported HEVC stream type found"
                        );
                        break;
                      default:
                        this._trackUnknownPmt(
                          e[t],
                          X.b.log,
                          "Unknown stream type:" + e[t]
                        );
                    }
                    t += 5 + (((15 & e[t + 3]) << 8) | e[t + 4]);
                  }
                  return n;
                }),
                (r._parsePES = function (e) {
                  var t,
                    r,
                    i,
                    a,
                    n,
                    s,
                    o,
                    l = 0,
                    d = e.data;
                  if (!e || 0 === e.size) return null;
                  for (; d[0].length < 19 && 1 < d.length; ) {
                    var u = new Uint8Array(d[0].length + d[1].length);
                    u.set(d[0]),
                      u.set(d[1], d[0].length),
                      (d[0] = u),
                      d.splice(1, 1);
                  }
                  if (1 !== ((t = d[0])[0] << 16) + (t[1] << 8) + t[2])
                    return null;
                  if ((r = (t[4] << 8) + t[5]) && r > e.size - 6) return null;
                  if (
                    (192 & (i = t[7]) &&
                      ((n =
                        536870912 * (14 & t[9]) +
                        4194304 * (255 & t[10]) +
                        16384 * (254 & t[11]) +
                        128 * (255 & t[12]) +
                        (254 & t[13]) / 2),
                      64 & i
                        ? 54e5 <
                            n -
                              (s =
                                536870912 * (14 & t[14]) +
                                4194304 * (255 & t[15]) +
                                16384 * (254 & t[16]) +
                                128 * (255 & t[17]) +
                                (254 & t[18]) / 2) &&
                          (X.b.warn(
                            Math.round((n - s) / 9e4) +
                              "s delta between PTS and DTS, align them"
                          ),
                          (n = s))
                        : (s = n)),
                    (o = (i = t[8]) + 9),
                    e.size <= o)
                  )
                    return null;
                  (e.size -= o), (a = new Uint8Array(e.size));
                  for (var c = 0, h = d.length; c < h; c++) {
                    var f = (t = d[c]).byteLength;
                    if (o) {
                      if (f < o) {
                        o -= f;
                        continue;
                      }
                      (t = t.subarray(o)), (f -= o), (o = 0);
                    }
                    a.set(t, l), (l += f);
                  }
                  return (
                    r && (r -= i + 3),
                    {
                      data: a,
                      pts: n,
                      dts: s,
                      len: r,
                    }
                  );
                }),
                (r.pushAccesUnit = function (e, t) {
                  if (e.units.length && e.frame) {
                    var r = t.samples,
                      i = r.length;
                    if (isNaN(e.pts)) {
                      if (!i) return void t.dropped++;
                      var a = r[i - 1];
                      (e.pts = a.pts), (e.dts = a.dts);
                    }
                    !this.config.forceKeyFrameOnDiscontinuity ||
                    !0 === e.key ||
                    (t.sps && (i || this.contiguous))
                      ? ((e.id = i), r.push(e))
                      : t.dropped++;
                  }
                  e.debug.length &&
                    X.b.log(e.pts + "/" + e.dts + ":" + e.debug);
                }),
                (r._parseAVCPES = function (m, e) {
                  function v(e, t, r, i) {
                    return {
                      key: e,
                      pts: t,
                      dts: r,
                      units: [],
                      debug: i,
                    };
                  }
                  var y,
                    b,
                    T,
                    E = this,
                    S = this._avcTrack,
                    t = this._parseAVCNALu(m.data),
                    _ = this.avcSample,
                    R = !1,
                    A = this.pushAccesUnit.bind(this);
                  (m.data = null),
                    _ &&
                      t.length &&
                      !S.audFound &&
                      (A(_, S), (_ = this.avcSample = v(!1, m.pts, m.dts, ""))),
                    t.forEach(function (e) {
                      switch (e.type) {
                        case 1:
                          (b = !0),
                            ((_ =
                              _ ||
                              (E.avcSample = v(!0, m.pts, m.dts, ""))).frame =
                              !0);
                          var t = e.data;
                          R &&
                            4 < t.length &&
                            ((2 !== (h = new w(t).readSliceType()) &&
                              4 !== h &&
                              7 !== h &&
                              9 !== h) ||
                              (_.key = !0));
                          break;
                        case 5:
                          (b = !0),
                            ((_ =
                              _ ||
                              (E.avcSample = v(!0, m.pts, m.dts, ""))).key =
                              !0),
                            (_.frame = !0);
                          break;
                        case 6:
                          (b = !0),
                            (y = new w(E.discardEPB(e.data))).readUByte();
                          for (
                            var r = 0, i = 0, a = !1, n = 0;
                            !a && 1 < y.bytesAvailable;

                          ) {
                            for (r = 0; (r += n = y.readUByte()), 255 === n; );
                            for (i = 0; (i += n = y.readUByte()), 255 === n; );
                            if (4 === r && 0 !== y.bytesAvailable) {
                              if (
                                ((a = !0),
                                181 === y.readUByte() &&
                                  49 === y.readUShort() &&
                                  1195456820 === y.readUInt() &&
                                  3 === y.readUByte())
                              ) {
                                var s = y.readUByte(),
                                  o = 31 & s,
                                  l = [s, y.readUByte()];
                                for (T = 0; T < o; T++)
                                  l.push(y.readUByte()),
                                    l.push(y.readUByte()),
                                    l.push(y.readUByte());
                                E._insertSampleInOrder(E._txtTrack.samples, {
                                  type: 3,
                                  pts: m.pts,
                                  bytes: l,
                                });
                              }
                            } else if (5 === r && 0 !== y.bytesAvailable) {
                              if (((a = !0), 16 < i)) {
                                var d = [];
                                for (T = 0; T < 16; T++)
                                  d.push(y.readUByte().toString(16)),
                                    (3 !== T &&
                                      5 !== T &&
                                      7 !== T &&
                                      9 !== T) ||
                                      d.push("-");
                                var u = i - 16,
                                  c = new Uint8Array(u);
                                for (T = 0; T < u; T++) c[T] = y.readUByte();
                                E._insertSampleInOrder(E._txtTrack.samples, {
                                  pts: m.pts,
                                  payloadType: r,
                                  uuid: d.join(""),
                                  userDataBytes: c,
                                  userData: Object(k.b)(c.buffer),
                                });
                              }
                            } else if (i < y.bytesAvailable)
                              for (T = 0; T < i; T++) y.readUByte();
                          }
                          break;
                        case 7:
                          if (((R = b = !0), !S.sps)) {
                            var h = (y = new w(e.data)).readSPS();
                            (S.width = h.width),
                              (S.height = h.height),
                              (S.pixelRatio = h.pixelRatio),
                              (S.sps = [e.data]),
                              (S.duration = E._duration);
                            var f = e.data.subarray(1, 4),
                              g = "avc1.";
                            for (T = 0; T < 3; T++) {
                              var p = f[T].toString(16);
                              p.length < 2 && (p = "0" + p), (g += p);
                            }
                            S.codec = g;
                          }
                          break;
                        case 8:
                          (b = !0), S.pps || (S.pps = [e.data]);
                          break;
                        case 9:
                          (b = !1),
                            (S.audFound = !0),
                            _ && A(_, S),
                            (_ = E.avcSample = v(!1, m.pts, m.dts, ""));
                          break;
                        case 12:
                          b = !1;
                          break;
                        default:
                          (b = !1),
                            _ && (_.debug += "unknown NAL " + e.type + " ");
                      }
                      _ && b && _.units.push(e);
                    }),
                    e && _ && (A(_, S), (this.avcSample = null));
                }),
                (r._insertSampleInOrder = function (e, t) {
                  var r = e.length;
                  if (0 < r) {
                    if (t.pts >= e[r - 1].pts) e.push(t);
                    else
                      for (var i = r - 1; 0 <= i; i--)
                        if (t.pts < e[i].pts) {
                          e.splice(i, 0, t);
                          break;
                        }
                  } else e.push(t);
                }),
                (r._getLastNalUnit = function () {
                  var e,
                    t,
                    r = this.avcSample;
                  return (
                    (r && 0 !== r.units.length) ||
                      (r = (e = this._avcTrack.samples)[e.length - 1]),
                    r && (t = (t = r.units)[t.length - 1]),
                    t
                  );
                }),
                (r._parseAVCNALu = function (e) {
                  var t,
                    r,
                    i,
                    a,
                    n,
                    s,
                    o,
                    l,
                    d = 0,
                    u = e.byteLength,
                    c = this._avcTrack,
                    h = c.naluState || 0,
                    f = h,
                    g = [],
                    p = -1;
                  for (
                    -1 === h && ((a = 31 & e[(p = 0)]), (h = 0), (d = 1));
                    d < u;

                  )
                    (t = e[d++]),
                      (h = h
                        ? 1 !== h
                          ? t
                            ? 1 === t
                              ? (0 <= p
                                  ? ((i = {
                                      data: e.subarray(p, d - h - 1),
                                      type: a,
                                    }),
                                    g.push(i))
                                  : (n = this._getLastNalUnit()) &&
                                    (f &&
                                      d <= 4 - f &&
                                      n.state &&
                                      (n.data = n.data.subarray(
                                        0,
                                        n.data.byteLength - f
                                      )),
                                    0 < (r = d - h - 1)) &&
                                    ((s = new Uint8Array(
                                      n.data.byteLength + r
                                    )).set(n.data, 0),
                                    s.set(e.subarray(0, r), n.data.byteLength),
                                    (n.data = s)),
                                d < u ? ((a = 31 & e[(p = d)]), 0) : -1)
                              : 0
                            : 3
                          : t
                          ? 0
                          : 2
                        : t
                        ? 0
                        : 1);
                  return (
                    0 <= p &&
                      0 <= h &&
                      ((i = {
                        data: e.subarray(p, u),
                        type: a,
                        state: h,
                      }),
                      g.push(i)),
                    0 === g.length &&
                      (o = this._getLastNalUnit()) &&
                      ((l = new Uint8Array(
                        o.data.byteLength + e.byteLength
                      )).set(o.data, 0),
                      l.set(e, o.data.byteLength),
                      (o.data = l)),
                    (c.naluState = h),
                    g
                  );
                }),
                (r.discardEPB = function (e) {
                  for (var t, r, i = e.byteLength, a = [], n = 1; n < i - 2; )
                    0 === e[n] && 0 === e[n + 1] && 3 === e[n + 2]
                      ? (a.push(n + 2), (n += 2))
                      : n++;
                  if (0 === a.length) return e;
                  (t = i - a.length), (r = new Uint8Array(t));
                  for (var s = 0, n = 0; n < t; s++, n++)
                    s === a[0] && (s++, a.shift()), (r[n] = e[s]);
                  return r;
                }),
                (r._parseAACPES = function (e) {
                  var t,
                    r,
                    i,
                    a,
                    n,
                    s,
                    o = this._audioTrack,
                    l = e.data,
                    d = e.pts,
                    u = this.aacOverFlow,
                    c = this.aacLastPTS;
                  for (
                    u &&
                      ((e = new Uint8Array(u.byteLength + l.byteLength)).set(
                        u,
                        0
                      ),
                      e.set(l, u.byteLength),
                      (l = e)),
                      r = 0,
                      a = l.length;
                    r < a - 1 && !m(l, r);
                    r++
                  );
                  if (
                    !r ||
                    ((s =
                      r < a - 1
                        ? ((n =
                            "AAC PES did not start with ADTS header,offset:" +
                            r),
                          !1)
                        : ((n = "no ADTS header found in AAC PES"), !0)),
                    X.b.warn("parsing error:" + n),
                    this.observer.trigger(W.a.ERROR, {
                      type: q.b.MEDIA_ERROR,
                      details: q.a.FRAG_PARSING_ERROR,
                      fatal: s,
                      reason: n,
                    }),
                    !s)
                  ) {
                    for (
                      v(o, this.observer, l, r, this.audioCodec),
                        t = 0,
                        s = f(o.samplerate),
                        u &&
                          c &&
                          ((s = c + s),
                          1 < Math.abs(s - d) &&
                            (X.b.log(
                              "AAC: align PTS for overlapping frames by " +
                                Math.round((s - d) / 90)
                            ),
                            (d = s)));
                      r < a;

                    ) {
                      if (m(l, r)) {
                        if (r + 5 < a) {
                          var h = y(o, l, r, d, t);
                          if (h) {
                            (r += h.length), (i = h.sample.pts), t++;
                            continue;
                          }
                        }
                        break;
                      }
                      r++;
                    }
                    (u = r < a ? l.subarray(r, a) : null),
                      (this.aacOverFlow = u),
                      (this.aacLastPTS = i);
                  }
                }),
                (r._parseMPEGPES = function (e) {
                  for (
                    var t = e.data, r = t.length, i = 0, a = 0, n = e.pts;
                    a < r;

                  )
                    if (b.isHeader(t, a)) {
                      var s = b.appendFrame(this._audioTrack, t, a, n, i);
                      if (!s) break;
                      (a += s.length), i++;
                    } else a++;
                }),
                (r._parseID3PES = function (e) {
                  this._id3Track.samples.push(e);
                }),
                C),
              R =
                (((r = A.prototype).resetInitSegment = function (e, t, r, i) {
                  this._audioTrack = {
                    container: "audio/mpeg",
                    type: "audio",
                    id: -1,
                    sequenceNumber: 0,
                    isAAC: !1,
                    samples: [],
                    len: 0,
                    manifestCodec: t,
                    duration: i,
                    inputTimeScale: 9e4,
                  };
                }),
                (r.resetTimeStamp = function () {}),
                (A.probe = function (e) {
                  var t,
                    r,
                    i = k.a.getID3Data(e, 0);
                  if (i && void 0 !== k.a.getTimeStamp(i))
                    for (
                      t = i.length, r = Math.min(e.length - 1, t + 100);
                      t < r;
                      t++
                    )
                      if (b.probe(e, t))
                        return X.b.log("MPEG Audio sync word found !"), !0;
                  return !1;
                }),
                (r.append = function (e, t, r, i) {
                  for (
                    var a = k.a.getID3Data(e, 0) || [],
                      n = k.a.getTimeStamp(a),
                      s = void 0 !== n ? 90 * n : 9e4 * t,
                      o = a.length,
                      l = e.length,
                      d = 0,
                      u = 0,
                      c = this._audioTrack,
                      h = [
                        {
                          pts: s,
                          dts: s,
                          data: a,
                        },
                      ];
                    o < l;

                  )
                    if (b.isHeader(e, o)) {
                      var f = b.appendFrame(c, e, o, s, d);
                      if (!f) break;
                      (o += f.length), (u = f.sample.pts), d++;
                    } else
                      k.a.isHeader(e, o)
                        ? ((a = k.a.getID3Data(e, o)),
                          h.push({
                            pts: u,
                            dts: u,
                            data: a,
                          }),
                          (o += a.length))
                        : o++;
                  this.remuxer.remux(
                    c,
                    {
                      samples: [],
                    },
                    {
                      samples: h,
                      inputTimeScale: 9e4,
                    },
                    {
                      samples: [],
                    },
                    t,
                    r,
                    i
                  );
                }),
                (r.destroy = function () {}),
                A),
              N =
                ((T.getSilentFrame = function (e, t) {
                  if ("mp4a.40.2" === e) {
                    if (1 === t)
                      return new Uint8Array([0, 200, 0, 128, 35, 128]);
                    if (2 === t)
                      return new Uint8Array([
                        33, 0, 73, 144, 2, 25, 0, 35, 128,
                      ]);
                    if (3 === t)
                      return new Uint8Array([
                        0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142,
                      ]);
                    if (4 === t)
                      return new Uint8Array([
                        0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44,
                        128, 8, 2, 56,
                      ]);
                    if (5 === t)
                      return new Uint8Array([
                        0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48,
                        4, 153, 0, 33, 144, 2, 56,
                      ]);
                    if (6 === t)
                      return new Uint8Array([
                        0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48,
                        4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224,
                      ]);
                  } else {
                    if (1 === t)
                      return new Uint8Array([
                        1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28,
                        6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 94,
                      ]);
                    if (2 === t)
                      return new Uint8Array([
                        1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0,
                        149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 94,
                      ]);
                    if (3 === t)
                      return new Uint8Array([
                        1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0,
                        149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                        90, 90, 94,
                      ]);
                  }
                  return null;
                }),
                T),
              c = Math.pow(2, 32) - 1,
              z =
                ((h.init = function () {
                  for (var e in (h.types = {
                    avc1: [],
                    avcC: [],
                    btrt: [],
                    dinf: [],
                    dref: [],
                    esds: [],
                    ftyp: [],
                    hdlr: [],
                    mdat: [],
                    mdhd: [],
                    mdia: [],
                    mfhd: [],
                    minf: [],
                    moof: [],
                    moov: [],
                    mp4a: [],
                    ".mp3": [],
                    mvex: [],
                    mvhd: [],
                    pasp: [],
                    sdtp: [],
                    stbl: [],
                    stco: [],
                    stsc: [],
                    stsd: [],
                    stsz: [],
                    stts: [],
                    tfdt: [],
                    tfhd: [],
                    traf: [],
                    trak: [],
                    trun: [],
                    trex: [],
                    tkhd: [],
                    vmhd: [],
                    smhd: [],
                  }))
                    h.types.hasOwnProperty(e) &&
                      (h.types[e] = [
                        e.charCodeAt(0),
                        e.charCodeAt(1),
                        e.charCodeAt(2),
                        e.charCodeAt(3),
                      ]);
                  var t = new Uint8Array([
                      0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110,
                      100, 108, 101, 114, 0,
                    ]),
                    r = new Uint8Array([
                      0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110,
                      100, 108, 101, 114, 0,
                    ]);
                  h.HDLR_TYPES = {
                    video: t,
                    audio: r,
                  };
                  var i = new Uint8Array([
                      0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0,
                      0, 0, 1,
                    ]),
                    a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                  (h.STTS = h.STSC = h.STCO = a),
                    (h.STSZ = new Uint8Array([
                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                    ])),
                    (h.VMHD = new Uint8Array([
                      0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
                    ])),
                    (h.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0])),
                    (h.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]));
                  (t = new Uint8Array([105, 115, 111, 109])),
                    (r = new Uint8Array([97, 118, 99, 49])),
                    (a = new Uint8Array([0, 0, 0, 1]));
                  (h.FTYP = h.box(h.types.ftyp, t, a, t, r)),
                    (h.DINF = h.box(h.types.dinf, h.box(h.types.dref, i)));
                }),
                (h.box = function (e) {
                  for (
                    var t,
                      r = Array.prototype.slice.call(arguments, 1),
                      i = 8,
                      a = r.length,
                      n = a;
                    a--;

                  )
                    i += r[a].byteLength;
                  for (
                    (t = new Uint8Array(i))[0] = (i >> 24) & 255,
                      t[1] = (i >> 16) & 255,
                      t[2] = (i >> 8) & 255,
                      t[3] = 255 & i,
                      t.set(e, 4),
                      a = 0,
                      i = 8;
                    a < n;
                    a++
                  )
                    t.set(r[a], i), (i += r[a].byteLength);
                  return t;
                }),
                (h.hdlr = function (e) {
                  return h.box(h.types.hdlr, h.HDLR_TYPES[e]);
                }),
                (h.mdat = function (e) {
                  return h.box(h.types.mdat, e);
                }),
                (h.mdhd = function (e, t) {
                  t *= e;
                  var r = Math.floor(t / (1 + c)),
                    t = Math.floor(t % (1 + c));
                  return h.box(
                    h.types.mdhd,
                    new Uint8Array([
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      2,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      3,
                      (e >> 24) & 255,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      255 & e,
                      r >> 24,
                      (r >> 16) & 255,
                      (r >> 8) & 255,
                      255 & r,
                      t >> 24,
                      (t >> 16) & 255,
                      (t >> 8) & 255,
                      255 & t,
                      85,
                      196,
                      0,
                      0,
                    ])
                  );
                }),
                (h.mdia = function (e) {
                  return h.box(
                    h.types.mdia,
                    h.mdhd(e.timescale, e.duration),
                    h.hdlr(e.type),
                    h.minf(e)
                  );
                }),
                (h.mfhd = function (e) {
                  return h.box(
                    h.types.mfhd,
                    new Uint8Array([
                      0,
                      0,
                      0,
                      0,
                      e >> 24,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      255 & e,
                    ])
                  );
                }),
                (h.minf = function (e) {
                  return "audio" === e.type
                    ? h.box(
                        h.types.minf,
                        h.box(h.types.smhd, h.SMHD),
                        h.DINF,
                        h.stbl(e)
                      )
                    : h.box(
                        h.types.minf,
                        h.box(h.types.vmhd, h.VMHD),
                        h.DINF,
                        h.stbl(e)
                      );
                }),
                (h.moof = function (e, t, r) {
                  return h.box(h.types.moof, h.mfhd(e), h.traf(r, t));
                }),
                (h.moov = function (e) {
                  for (var t = e.length, r = []; t--; ) r[t] = h.trak(e[t]);
                  return h.box.apply(
                    null,
                    [h.types.moov, h.mvhd(e[0].timescale, e[0].duration)]
                      .concat(r)
                      .concat(h.mvex(e))
                  );
                }),
                (h.mvex = function (e) {
                  for (var t = e.length, r = []; t--; ) r[t] = h.trex(e[t]);
                  return h.box.apply(null, [h.types.mvex].concat(r));
                }),
                (h.mvhd = function (e, t) {
                  t *= e;
                  var r = Math.floor(t / (1 + c)),
                    t = Math.floor(t % (1 + c)),
                    t = new Uint8Array([
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      2,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      3,
                      (e >> 24) & 255,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      255 & e,
                      r >> 24,
                      (r >> 16) & 255,
                      (r >> 8) & 255,
                      255 & r,
                      t >> 24,
                      (t >> 16) & 255,
                      (t >> 8) & 255,
                      255 & t,
                      0,
                      1,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      64,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      255,
                      255,
                      255,
                      255,
                    ]);
                  return h.box(h.types.mvhd, t);
                }),
                (h.sdtp = function (e) {
                  for (
                    var t,
                      r = e.samples || [],
                      i = new Uint8Array(4 + r.length),
                      a = 0;
                    a < r.length;
                    a++
                  )
                    (t = r[a].flags),
                      (i[a + 4] =
                        (t.dependsOn << 4) |
                        (t.isDependedOn << 2) |
                        t.hasRedundancy);
                  return h.box(h.types.sdtp, i);
                }),
                (h.stbl = function (e) {
                  return h.box(
                    h.types.stbl,
                    h.stsd(e),
                    h.box(h.types.stts, h.STTS),
                    h.box(h.types.stsc, h.STSC),
                    h.box(h.types.stsz, h.STSZ),
                    h.box(h.types.stco, h.STCO)
                  );
                }),
                (h.avc1 = function (e) {
                  for (var t, r, i = [], a = [], n = 0; n < e.sps.length; n++)
                    (r = (t = e.sps[n]).byteLength),
                      i.push((r >>> 8) & 255),
                      i.push(255 & r),
                      (i = i.concat(Array.prototype.slice.call(t)));
                  for (n = 0; n < e.pps.length; n++)
                    (r = (t = e.pps[n]).byteLength),
                      a.push((r >>> 8) & 255),
                      a.push(255 & r),
                      (a = a.concat(Array.prototype.slice.call(t)));
                  var s = h.box(
                      h.types.avcC,
                      new Uint8Array(
                        [1, i[3], i[4], i[5], 255, 224 | e.sps.length]
                          .concat(i)
                          .concat([e.pps.length])
                          .concat(a)
                      )
                    ),
                    o = e.width,
                    l = e.height,
                    d = e.pixelRatio[0],
                    u = e.pixelRatio[1];
                  return h.box(
                    h.types.avc1,
                    new Uint8Array([
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      (o >> 8) & 255,
                      255 & o,
                      (l >> 8) & 255,
                      255 & l,
                      0,
                      72,
                      0,
                      0,
                      0,
                      72,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      18,
                      100,
                      97,
                      105,
                      108,
                      121,
                      109,
                      111,
                      116,
                      105,
                      111,
                      110,
                      47,
                      104,
                      108,
                      115,
                      46,
                      106,
                      115,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      24,
                      17,
                      17,
                    ]),
                    s,
                    h.box(
                      h.types.btrt,
                      new Uint8Array([
                        0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192,
                      ])
                    ),
                    h.box(
                      h.types.pasp,
                      new Uint8Array([
                        d >> 24,
                        (d >> 16) & 255,
                        (d >> 8) & 255,
                        255 & d,
                        u >> 24,
                        (u >> 16) & 255,
                        (u >> 8) & 255,
                        255 & u,
                      ])
                    )
                  );
                }),
                (h.esds = function (e) {
                  var t = e.config.length;
                  return new Uint8Array(
                    [
                      0,
                      0,
                      0,
                      0,
                      3,
                      23 + t,
                      0,
                      1,
                      0,
                      4,
                      15 + t,
                      64,
                      21,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      5,
                    ]
                      .concat([t])
                      .concat(e.config)
                      .concat([6, 1, 2])
                  );
                }),
                (h.mp4a = function (e) {
                  var t = e.samplerate;
                  return h.box(
                    h.types.mp4a,
                    new Uint8Array([
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      e.channelCount,
                      0,
                      16,
                      0,
                      0,
                      0,
                      0,
                      (t >> 8) & 255,
                      255 & t,
                      0,
                      0,
                    ]),
                    h.box(h.types.esds, h.esds(e))
                  );
                }),
                (h.mp3 = function (e) {
                  var t = e.samplerate;
                  return h.box(
                    h.types[".mp3"],
                    new Uint8Array([
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      e.channelCount,
                      0,
                      16,
                      0,
                      0,
                      0,
                      0,
                      (t >> 8) & 255,
                      255 & t,
                      0,
                      0,
                    ])
                  );
                }),
                (h.stsd = function (e) {
                  return "audio" === e.type
                    ? e.isAAC || "mp3" !== e.codec
                      ? h.box(h.types.stsd, h.STSD, h.mp4a(e))
                      : h.box(h.types.stsd, h.STSD, h.mp3(e))
                    : h.box(h.types.stsd, h.STSD, h.avc1(e));
                }),
                (h.tkhd = function (e) {
                  var t = e.id,
                    r = e.duration * e.timescale,
                    i = e.width,
                    a = e.height,
                    e = Math.floor(r / (1 + c)),
                    r = Math.floor(r % (1 + c));
                  return h.box(
                    h.types.tkhd,
                    new Uint8Array([
                      1,
                      0,
                      0,
                      7,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      2,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      3,
                      (t >> 24) & 255,
                      (t >> 16) & 255,
                      (t >> 8) & 255,
                      255 & t,
                      0,
                      0,
                      0,
                      0,
                      e >> 24,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      255 & e,
                      r >> 24,
                      (r >> 16) & 255,
                      (r >> 8) & 255,
                      255 & r,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      64,
                      0,
                      0,
                      0,
                      (i >> 8) & 255,
                      255 & i,
                      0,
                      0,
                      (a >> 8) & 255,
                      255 & a,
                      0,
                      0,
                    ])
                  );
                }),
                (h.traf = function (e, t) {
                  var r = h.sdtp(e),
                    i = e.id,
                    a = Math.floor(t / (1 + c)),
                    t = Math.floor(t % (1 + c));
                  return h.box(
                    h.types.traf,
                    h.box(
                      h.types.tfhd,
                      new Uint8Array([
                        0,
                        0,
                        0,
                        0,
                        i >> 24,
                        (i >> 16) & 255,
                        (i >> 8) & 255,
                        255 & i,
                      ])
                    ),
                    h.box(
                      h.types.tfdt,
                      new Uint8Array([
                        1,
                        0,
                        0,
                        0,
                        a >> 24,
                        (a >> 16) & 255,
                        (a >> 8) & 255,
                        255 & a,
                        t >> 24,
                        (t >> 16) & 255,
                        (t >> 8) & 255,
                        255 & t,
                      ])
                    ),
                    h.trun(e, r.length + 16 + 20 + 8 + 16 + 8 + 8),
                    r
                  );
                }),
                (h.trak = function (e) {
                  return (
                    (e.duration = e.duration || 4294967295),
                    h.box(h.types.trak, h.tkhd(e), h.mdia(e))
                  );
                }),
                (h.trex = function (e) {
                  e = e.id;
                  return h.box(
                    h.types.trex,
                    new Uint8Array([
                      0,
                      0,
                      0,
                      0,
                      e >> 24,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      255 & e,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      1,
                    ])
                  );
                }),
                (h.trun = function (e, t) {
                  var r,
                    i,
                    a,
                    n,
                    s,
                    o = e.samples || [],
                    l = o.length,
                    e = 12 + 16 * l,
                    d = new Uint8Array(e);
                  for (
                    t += 8 + e,
                      d.set(
                        [
                          0,
                          0,
                          15,
                          1,
                          (l >>> 24) & 255,
                          (l >>> 16) & 255,
                          (l >>> 8) & 255,
                          255 & l,
                          (t >>> 24) & 255,
                          (t >>> 16) & 255,
                          (t >>> 8) & 255,
                          255 & t,
                        ],
                        0
                      ),
                      r = 0;
                    r < l;
                    r++
                  )
                    (i = (s = o[r]).duration),
                      (a = s.size),
                      (n = s.flags),
                      (s = s.cts),
                      d.set(
                        [
                          (i >>> 24) & 255,
                          (i >>> 16) & 255,
                          (i >>> 8) & 255,
                          255 & i,
                          (a >>> 24) & 255,
                          (a >>> 16) & 255,
                          (a >>> 8) & 255,
                          255 & a,
                          (n.isLeading << 2) | n.dependsOn,
                          (n.isDependedOn << 6) |
                            (n.hasRedundancy << 4) |
                            (n.paddingValue << 1) |
                            n.isNonSync,
                          61440 & n.degradPrio,
                          15 & n.degradPrio,
                          (s >>> 24) & 255,
                          (s >>> 16) & 255,
                          (s >>> 8) & 255,
                          255 & s,
                        ],
                        12 + 16 * r
                      );
                  return h.box(h.types.trun, d);
                }),
                (h.initSegment = function (e) {
                  h.types || h.init();
                  var t = h.moov(e);
                  return (
                    (e = new Uint8Array(h.FTYP.byteLength + t.byteLength)).set(
                      h.FTYP
                    ),
                    e.set(t, h.FTYP.byteLength),
                    e
                  );
                }),
                h);
            function h() {}
            function T() {}
            function A(e, t, r) {
              (this.observer = e), (this.config = r), (this.remuxer = t);
            }
            function C(e, t, r, i) {
              (this.observer = e),
                (this.config = r),
                (this.typeSupported = i),
                (this.remuxer = t),
                (this.sampleAes = null),
                (this.pmtUnknownTypes = {});
            }
            function L(e, t, r, i) {
              (this.decryptdata = r),
                (this.discardEPB = i),
                (this.decrypter = new p.a(e, t, {
                  removePKCS7Padding: !1,
                }));
            }
            function D(e) {
              (this.data = e),
                (this.bytesAvailable = e.byteLength),
                (this.word = 0),
                (this.bitsAvailable = 0);
            }
            function O(e, t, r) {
              (this.observer = e), (this.config = r), (this.remuxer = t);
            }
            function I(e, t, r, i) {
              void 0 === r && (r = 1), void 0 === i && (i = !1);
              r *= e * t;
              return i ? Math.round(r) : r;
            }
            function Q(e, t) {
              return void 0 === t && (t = !1), I(e, 1e3, 1 / 9e4, t);
            }
            function P(e, t) {
              return void 0 === t && (t = 1), I(e, 9e4, 1 / t);
            }
            var B = P(10),
              $ = P(0.2),
              J = null;
            function Z(e, t) {
              var r;
              if (void 0 === t) return e;
              for (
                r = t < e ? -8589934592 : 8589934592;
                4294967296 < Math.abs(e - t);

              )
                e += r;
              return e;
            }
            var x,
              M =
                (((r = K.prototype).destroy = function () {}),
                (r.resetTimeStamp = function (e) {
                  this._initPTS = this._initDTS = e;
                }),
                (r.resetInitSegment = function () {
                  this.ISGenerated = !1;
                }),
                (r.getVideoStartPts = function (e) {
                  var i = !1,
                    e = e.reduce(function (e, t) {
                      var r = t.pts - e;
                      return r < -4294967296
                        ? ((i = !0), e)
                        : 0 < r
                        ? e
                        : t.pts;
                    }, e[0].pts);
                  return i && X.b.debug("PTS rollover detected"), e;
                }),
                (r.remux = function (e, t, r, i, a, n, s) {
                  var o, l, d, u, c, h;
                  this.ISGenerated || this.generateIS(e, t, a),
                    this.ISGenerated &&
                      ((h = e.samples.length),
                      (o = t.samples.length),
                      (d = l = a),
                      h &&
                        o &&
                        ((u = this.getVideoStartPts(t.samples)),
                        (u = (e.samples[0].pts - u) / t.inputTimeScale),
                        (l += Math.max(0, u)),
                        (d += Math.max(0, -u))),
                      h
                        ? (e.timescale ||
                            (X.b.warn(
                              "regenerate InitSegment as audio detected"
                            ),
                            this.generateIS(e, t, a)),
                          (h = this.remuxAudio(e, l, n, s)),
                          o &&
                            (h && (c = h.endPTS - h.startPTS),
                            t.timescale ||
                              (X.b.warn(
                                "regenerate InitSegment as video detected"
                              ),
                              this.generateIS(e, t, a)),
                            this.remuxVideo(t, d, n, c)))
                        : !o ||
                          ((s = this.remuxVideo(t, d, n, 0, s)) &&
                            e.codec &&
                            this.remuxEmptyAudio(e, l, n, s))),
                    r.samples.length && this.remuxID3(r, a),
                    i.samples.length && this.remuxText(i, a),
                    this.observer.trigger(W.a.FRAG_PARSED);
                }),
                (r.generateIS = function (e, t, r) {
                  var i,
                    a,
                    n = this.observer,
                    s = e.samples,
                    o = t.samples,
                    l = this.typeSupported,
                    d = "audio/mp4",
                    u = {},
                    c = {
                      tracks: u,
                    },
                    h = void 0 === this._initPTS;
                  h && (a = i = 1 / 0),
                    e.config &&
                      s.length &&
                      ((e.timescale = e.samplerate),
                      X.b.log("audio sampling rate : " + e.samplerate),
                      e.isAAC ||
                        (l.mpeg
                          ? ((d = "audio/mpeg"), (e.codec = ""))
                          : l.mp3 && (e.codec = "mp3")),
                      (u.audio = {
                        container: d,
                        codec: e.codec,
                        initSegment:
                          !e.isAAC && l.mpeg
                            ? new Uint8Array()
                            : z.initSegment([e]),
                        metadata: {
                          channelCount: e.channelCount,
                        },
                      }),
                      h &&
                        (a = i = s[0].pts - Math.round(e.inputTimeScale * r))),
                    t.sps && t.pps && o.length
                      ? ((e = t.inputTimeScale),
                        (t.timescale = e),
                        (u.video = {
                          container: "video/mp4",
                          codec: t.codec,
                          initSegment: z.initSegment([t]),
                          metadata: {
                            width: t.width,
                            height: t.height,
                          },
                        }),
                        h &&
                          ((t = this.getVideoStartPts(o)),
                          (r = Math.round(e * r)),
                          (i = Math.min(i, o[0].dts - r)),
                          (a = Math.min(a, t - r)),
                          this.observer.trigger(W.a.INIT_PTS_FOUND, {
                            initPTS: a,
                          })))
                      : h &&
                        u.audio &&
                        this.observer.trigger(W.a.INIT_PTS_FOUND, {
                          initPTS: a,
                        }),
                    Object.keys(u).length
                      ? (n.trigger(W.a.FRAG_PARSING_INIT_SEGMENT, c),
                        (this.ISGenerated = !0),
                        h && ((this._initPTS = a), (this._initDTS = i)))
                      : n.trigger(W.a.ERROR, {
                          type: q.b.MEDIA_ERROR,
                          details: q.a.FRAG_PARSING_ERROR,
                          fatal: !1,
                          reason: "no audio/video samples found",
                        });
                }),
                (r.remuxVideo = function (e, t, r, i) {
                  var a,
                    n,
                    s,
                    o = e.timescale,
                    l = e.samples,
                    d = [],
                    u = l.length,
                    c = this._initPTS,
                    h = 8,
                    f = Number.POSITIVE_INFINITY,
                    g = Number.NEGATIVE_INFINITY,
                    p = 0,
                    m = !1,
                    v = this.nextAvcDts;
                  if (0 !== u) {
                    r || (v = t * o - (l[0].pts - Z(l[0].dts, l[0].pts)));
                    for (var y = 0; y < u; y++) {
                      var b = l[y];
                      (b.pts = Z(b.pts - c, v)),
                        (b.dts = Z(b.dts - c, v)),
                        b.dts > b.pts &&
                          (p = Math.max(Math.min(p, b.pts - b.dts), -1 * $)),
                        b.dts < l[0 < y ? y - 1 : y].dts && (m = !0);
                    }
                    m &&
                      l.sort(function (e, t) {
                        var r = e.dts - t.dts,
                          i = e.pts - t.pts;
                        return r || i || e.id - t.id;
                      }),
                      (s = l[0].dts),
                      (Y = l[u - 1].dts);
                    var T = Math.round((Y - s) / (u - 1));
                    if (p < 0) {
                      if (p < -2 * T) {
                        X.b.warn(
                          "PTS < DTS detected in video samples, offsetting DTS from PTS by " +
                            Q(-T, !0) +
                            " ms"
                        );
                        for (var E = p, S = 0; S < u; S++)
                          (l[S].dts = E = Math.max(E, l[S].pts - T)),
                            (l[S].pts = Math.max(E, l[S].pts));
                      } else {
                        X.b.warn(
                          "PTS < DTS detected in video samples, shifting DTS by " +
                            Q(p, !0) +
                            " ms to overcome this issue"
                        );
                        for (var _ = 0; _ < u; _++) l[_].dts = l[_].dts + p;
                      }
                      (s = l[0].dts), (Y = l[u - 1].dts);
                    }
                    !r ||
                      (((r = T < (t = s - v)) || t < -1) &&
                        (r
                          ? X.b.warn(
                              "AVC: " +
                                Q(t, !0) +
                                " ms (" +
                                t +
                                "dts) hole between fragments detected, filling it"
                            )
                          : X.b.warn(
                              "AVC: " +
                                Q(-t, !0) +
                                " ms (" +
                                t +
                                "dts) overlapping between fragments detected"
                            ),
                        (s = v),
                        (r = l[0].pts - t),
                        (l[0].dts = s),
                        (l[0].pts = r),
                        X.b.log(
                          "Video: First PTS/DTS adjusted: " +
                            Q(r, !0) +
                            "/" +
                            Q(s, !0) +
                            ", delta: " +
                            Q(t, !0) +
                            " ms"
                        ))),
                      J && J < 75 && (s = Math.max(0, s));
                    for (var R = 0, A = 0, k = 0; k < u; k++) {
                      for (
                        var w = l[k], L = w.units, D = L.length, O = 0, C = 0;
                        C < D;
                        C++
                      )
                        O += L[C].data.length;
                      (A += O),
                        (R += D),
                        (w.length = O),
                        (w.dts = Math.max(w.dts, s)),
                        (w.pts = Math.max(w.pts, w.dts, 0)),
                        (f = Math.min(w.pts, f)),
                        (g = Math.max(w.pts, g));
                    }
                    Y = l[u - 1].dts;
                    var I = A + 4 * R + 8;
                    try {
                      n = new Uint8Array(I);
                    } catch (e) {
                      return void this.observer.trigger(W.a.ERROR, {
                        type: q.b.MUX_ERROR,
                        details: q.a.REMUX_ALLOC_ERROR,
                        fatal: !1,
                        bytes: I,
                        reason: "fail allocating video mdat " + I,
                      });
                    }
                    var P = new DataView(n.buffer);
                    P.setUint32(0, I), n.set(z.types.mdat, 4);
                    for (var x = 0; x < u; x++) {
                      for (
                        var M,
                          F,
                          U = l[x],
                          N = U.units,
                          B = 0,
                          G = 0,
                          K = N.length;
                        G < K;
                        G++
                      ) {
                        var j = N[G],
                          H = j.data,
                          j = j.data.byteLength;
                        P.setUint32(h, j),
                          (h += 4),
                          n.set(H, h),
                          (h += j),
                          (B += 4 + j);
                      }
                      x < u - 1
                        ? (a = l[x + 1].dts - U.dts)
                        : ((F = this.config),
                          (M = U.dts - l[0 < x ? x - 1 : x].dts),
                          F.stretchShortVideoTrack
                            ? ((F = F.maxBufferHole),
                              Math.floor(F * o) <
                              (F = (i ? f + i * o : this.nextAudioPts) - U.pts)
                                ? ((a = F - M) < 0 && (a = M),
                                  X.b.log(
                                    "It is approximately " +
                                      Q(F, !1) +
                                      " ms to the next segment; using duration " +
                                      Q(a, !1) +
                                      " ms for the last video frame."
                                  ))
                                : (a = M))
                            : (a = M)),
                        (M = Math.round(U.pts - U.dts)),
                        d.push({
                          size: B,
                          duration: a,
                          cts: M,
                          flags: {
                            isLeading: 0,
                            isDependedOn: 0,
                            hasRedundancy: 0,
                            degradPrio: 0,
                            dependsOn: U.key ? 2 : 1,
                            isNonSync: U.key ? 0 : 1,
                          },
                        });
                    }
                    this.nextAvcDts = Y + a;
                    var V,
                      Y = e.dropped;
                    (e.nbNalu = 0),
                      (e.dropped = 0),
                      d.length &&
                        -1 <
                          navigator.userAgent.toLowerCase().indexOf("chrome") &&
                        (((V = d[0].flags).dependsOn = 2), (V.isNonSync = 0)),
                      (e.samples = d),
                      (V = z.moof(e.sequenceNumber++, s, e)),
                      (e.samples = []);
                    Y = {
                      data1: V,
                      data2: n,
                      startPTS: f / o,
                      endPTS: (g + a) / o,
                      startDTS: s / o,
                      endDTS: this.nextAvcDts / o,
                      type: "video",
                      hasAudio: !1,
                      hasVideo: !0,
                      nb: d.length,
                      dropped: Y,
                    };
                    return this.observer.trigger(W.a.FRAG_PARSING_DATA, Y), Y;
                  }
                }),
                (r.remuxAudio = function (e, t, r, i) {
                  var a,
                    n,
                    s,
                    o,
                    l,
                    d = e.inputTimeScale,
                    u = e.timescale,
                    c = d / u,
                    h = (e.isAAC ? 1024 : 1152) * c,
                    f = this._initPTS,
                    g = !e.isAAC && this.typeSupported.mpeg,
                    p = g ? 0 : 8,
                    m = e.samples,
                    v = [],
                    y = this.nextAudioPts;
                  if (
                    ((r |=
                      m.length &&
                      y &&
                      ((i && Math.abs(t - y / d) < 0.1) ||
                        Math.abs(m[0].pts - y - f) < 20 * h)),
                    m.forEach(function (e) {
                      e.pts = e.dts = Z(e.pts - f, t * d);
                    }),
                    0 !==
                      (m = m.filter(function (e) {
                        return 0 <= e.pts;
                      })).length)
                  ) {
                    if ((r || (y = i ? Math.max(0, t * d) : m[0].pts), e.isAAC))
                      for (
                        var b = this.config.maxAudioFramesDrift, T = 0, E = y;
                        T < m.length;

                      ) {
                        var S = m[T],
                          _ = S.pts,
                          R = _ - E;
                        if (R <= -b * h)
                          r || 0 < T
                            ? (X.b.warn(
                                "Dropping 1 audio frame @ " +
                                  Q(E, !0) / 1e3 +
                                  "s due to " +
                                  Q(R, !0) +
                                  " ms overlap."
                              ),
                              m.splice(T, 1))
                            : (X.b.warn(
                                "Audio frame @ " +
                                  Q(_, !0) / 1e3 +
                                  "s overlaps nextAudioPts by " +
                                  Q(R, !0) +
                                  " ms."
                              ),
                              (E = _ + h),
                              T++);
                        else if (b * h <= R && R < B && E) {
                          var A = Math.round(R / h);
                          X.b.warn(
                            "Injecting " +
                              A +
                              " audio frames @ " +
                              Q(E, !0) / 1e3 +
                              "s due to " +
                              Q(R, !0) +
                              " ms gap."
                          );
                          for (var k = 0; k < A; k++) {
                            var w = Math.max(E, 0);
                            (n = N.getSilentFrame(
                              e.manifestCodec || e.codec,
                              e.channelCount
                            )) ||
                              (X.b.log(
                                "Unable to get silent frame for given audio codec; duplicating last frame instead."
                              ),
                              (n = S.unit.subarray())),
                              m.splice(T, 0, {
                                unit: n,
                                pts: w,
                                dts: w,
                              }),
                              (E += h),
                              T++;
                          }
                          (S.pts = S.dts = E), (E += h), T++;
                        } else Math.abs(R), (S.pts = S.dts = E), (E += h), T++;
                      }
                    for (var L = m.length, D = 0; L--; )
                      D += m[L].unit.byteLength;
                    for (var O = 0, C = m.length; O < C; O++) {
                      var I = m[O],
                        P = I.unit,
                        I = I.pts;
                      if (void 0 !== l && a)
                        a.duration = Math.round((I - l) / c);
                      else {
                        var x = I - y,
                          M = 0;
                        if (r && e.isAAC && x) {
                          if (0 < x && x < B)
                            (M = Math.round((I - y) / h)),
                              X.b.log(
                                Q(x, !0) +
                                  " ms hole between AAC samples detected,filling it"
                              ),
                              0 < M &&
                                ((n = N.getSilentFrame(
                                  e.manifestCodec || e.codec,
                                  e.channelCount
                                )) || (n = P.subarray()),
                                (D += M * n.length));
                          else if (x < -12) {
                            X.b.log(
                              "drop overlapping AAC sample, expected/parsed/delta: " +
                                Q(y, !0) +
                                " ms / " +
                                Q(I, !0) +
                                " ms / " +
                                Q(-x, !0) +
                                " ms"
                            ),
                              (D -= P.byteLength);
                            continue;
                          }
                          I = y;
                        }
                        if (((o = I), !(0 < D))) return;
                        D += p;
                        try {
                          s = new Uint8Array(D);
                        } catch (e) {
                          return void this.observer.trigger(W.a.ERROR, {
                            type: q.b.MUX_ERROR,
                            details: q.a.REMUX_ALLOC_ERROR,
                            fatal: !1,
                            bytes: D,
                            reason: "fail allocating audio mdat " + D,
                          });
                        }
                        g ||
                          (new DataView(s.buffer).setUint32(0, D),
                          s.set(z.types.mdat, 4));
                        for (var F = 0; F < M; F++)
                          (n = N.getSilentFrame(
                            e.manifestCodec || e.codec,
                            e.channelCount
                          )) ||
                            (X.b.log(
                              "Unable to get silent frame for given audio codec; duplicating this frame instead."
                            ),
                            (n = P.subarray())),
                            s.set(n, p),
                            (p += n.byteLength),
                            (a = {
                              size: n.byteLength,
                              cts: 0,
                              duration: 1024,
                              flags: {
                                isLeading: 0,
                                isDependedOn: 0,
                                hasRedundancy: 0,
                                degradPrio: 0,
                                dependsOn: 1,
                              },
                            }),
                            v.push(a);
                      }
                      s.set(P, p);
                      x = P.byteLength;
                      (p += x),
                        (a = {
                          size: x,
                          cts: 0,
                          duration: 0,
                          flags: {
                            isLeading: 0,
                            isDependedOn: 0,
                            hasRedundancy: 0,
                            degradPrio: 0,
                            dependsOn: 1,
                          },
                        }),
                        v.push(a),
                        (l = I);
                    }
                    var U = 0;
                    if (
                      (2 <= (L = v.length) &&
                        ((U = v[L - 2].duration), (a.duration = U)),
                      L)
                    ) {
                      (this.nextAudioPts = y = l + c * U),
                        (e.samples = v),
                        (u = g
                          ? new Uint8Array()
                          : z.moof(e.sequenceNumber++, o / c, e)),
                        (e.samples = []);
                      (i = o / d),
                        (U = y / d),
                        (U = {
                          data1: u,
                          data2: s,
                          startPTS: i,
                          endPTS: U,
                          startDTS: i,
                          endDTS: U,
                          type: "audio",
                          hasAudio: !0,
                          hasVideo: !1,
                          nb: L,
                        });
                      return this.observer.trigger(W.a.FRAG_PARSING_DATA, U), U;
                    }
                    return null;
                  }
                }),
                (r.remuxEmptyAudio = function (e, t, r, i) {
                  var a = e.inputTimeScale,
                    n = a / (e.samplerate || a),
                    s = this.nextAudioPts,
                    o = (void 0 !== s ? s : i.startDTS * a) + this._initDTS,
                    a = i.endDTS * a + this._initDTS,
                    l = 1024 * n,
                    d = Math.ceil((a - o) / l),
                    u = N.getSilentFrame(
                      e.manifestCodec || e.codec,
                      e.channelCount
                    );
                  if ((X.b.warn("remux empty Audio"), u)) {
                    for (var c = [], h = 0; h < d; h++) {
                      var f = o + h * l;
                      c.push({
                        unit: u,
                        pts: f,
                        dts: f,
                      });
                    }
                    (e.samples = c), this.remuxAudio(e, t, r);
                  } else
                    X.b.trace(
                      "Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!"
                    );
                }),
                (r.remuxID3 = function (e, t) {
                  var r = e.samples.length;
                  if (r) {
                    for (
                      var i = e.inputTimeScale,
                        a = this._initPTS,
                        n = this._initDTS,
                        s = 0;
                      s < r;
                      s++
                    ) {
                      var o = e.samples[s];
                      (o.pts = Z(o.pts - a, t * i) / i),
                        (o.dts = Z(o.dts - n, t * i) / i);
                    }
                    this.observer.trigger(W.a.FRAG_PARSING_METADATA, {
                      samples: e.samples,
                    }),
                      (e.samples = []);
                  }
                }),
                (r.remuxText = function (e, t) {
                  var r = e.samples.length,
                    i = e.inputTimeScale,
                    a = this._initPTS;
                  if (r) {
                    for (var n = 0; n < r; n++) {
                      var s = e.samples[n];
                      s.pts = Z(s.pts - a, t * i) / i;
                    }
                    e.samples.sort(function (e, t) {
                      return e.pts - t.pts;
                    }),
                      this.observer.trigger(W.a.FRAG_PARSING_USERDATA, {
                        samples: e.samples,
                      });
                  }
                  e.samples = [];
                }),
                K),
              F =
                (((r = G.prototype).destroy = function () {}),
                (r.resetTimeStamp = function () {}),
                (r.resetInitSegment = function () {}),
                (r.remux = function (e, t, r, i, a, n, s, o) {
                  var l = this.observer,
                    d = "";
                  e && (d += "audio"),
                    t && (d += "video"),
                    l.trigger(W.a.FRAG_PARSING_DATA, {
                      data1: o,
                      startPTS: a,
                      startDTS: a,
                      type: d,
                      hasAudio: !!e,
                      hasVideo: !!t,
                      nb: 1,
                      dropped: 0,
                    }),
                    l.trigger(W.a.FRAG_PARSED);
                }),
                G),
              U = Object(i.a)();
            function G(e) {
              this.observer = e;
            }
            function K(e, t, r, i) {
              (this.observer = e),
                (this.config = t),
                (this.typeSupported = r),
                (this.ISGenerated = !1),
                null === J &&
                  ((r = navigator.userAgent.match(/Chrome\/(\d+)/i)),
                  (J = r ? parseInt(r[1]) : 0));
            }
            try {
              x = U.performance.now.bind(U.performance);
            } catch (e) {
              X.b.debug("Unable to use Performance API on this environment"),
                (x = U.Date.now);
            }
            ((i = j.prototype).destroy = function () {
              var e = this.demuxer;
              e && e.destroy();
            }),
              (i.push = function (e, r, i, a, n, s, o, l, d, u, c, h) {
                var t,
                  f,
                  g = this;
                0 < e.byteLength &&
                null != r &&
                null != r.key &&
                "AES-128" === r.method
                  ? (null == (t = this.decrypter) &&
                      (t = this.decrypter =
                        new p.a(this.observer, this.config)),
                    (f = x()),
                    t.decrypt(e, r.key.buffer, r.iv.buffer, function (e) {
                      var t = x();
                      g.observer.trigger(W.a.FRAG_DECRYPTED, {
                        stats: {
                          tstart: f,
                          tdecrypt: t,
                        },
                      }),
                        g.pushDecrypted(
                          new Uint8Array(e),
                          r,
                          new Uint8Array(i),
                          a,
                          n,
                          s,
                          o,
                          l,
                          d,
                          u,
                          c,
                          h
                        );
                    }))
                  : this.pushDecrypted(
                      new Uint8Array(e),
                      r,
                      new Uint8Array(i),
                      a,
                      n,
                      s,
                      o,
                      l,
                      d,
                      u,
                      c,
                      h
                    );
              }),
              (i.pushDecrypted = function (e, t, r, i, a, n, s, o, l, d, u, c) {
                var h = this.demuxer,
                  f = this.remuxer;
                if (!h || s || o) {
                  for (
                    var g,
                      p = this.observer,
                      m = this.typeSupported,
                      v = this.config,
                      y = [
                        {
                          demux: _,
                          remux: M,
                        },
                        {
                          demux: S.a,
                          remux: F,
                        },
                        {
                          demux: E,
                          remux: M,
                        },
                        {
                          demux: R,
                          remux: M,
                        },
                      ],
                      b = 0,
                      T = y.length;
                    b < T && !(g = y[b]).demux.probe(e);
                    b++
                  );
                  if (!g)
                    return void p.trigger(W.a.ERROR, {
                      type: q.b.MEDIA_ERROR,
                      details: q.a.FRAG_PARSING_ERROR,
                      fatal: !0,
                      reason: "no demux matching with content found",
                    });
                  (f && f instanceof g.remux) ||
                    (f = new g.remux(p, v, m, this.vendor)),
                    (h && h instanceof g.demux) ||
                      ((h = new g.demux(p, f, v, m)),
                      (this.probe = g.demux.probe)),
                    (this.demuxer = h),
                    (this.remuxer = f);
                }
                (s || o) &&
                  (h.resetInitSegment(r, i, a, d), f.resetInitSegment()),
                  s && (h.resetTimeStamp(c), f.resetTimeStamp(c)),
                  "function" == typeof h.setDecryptData && h.setDecryptData(t),
                  h.append(e, n, l, u);
              }),
              (i = j);
            function j(e, t, r, i) {
              (this.observer = e),
                (this.typeSupported = t),
                (this.config = r),
                (this.vendor = i);
            }
            t.a = i;
          },
          function (e, t, r) {
            "use strict";
            var n = r(0),
              o = r(1),
              s = Math.pow(2, 32) - 1,
              r =
                (((r = h.prototype).resetTimeStamp = function (e) {
                  this.initPTS = e;
                }),
                (r.resetInitSegment = function (e, t, r, i) {
                  var a, n;
                  e && e.byteLength
                    ? (null == t && (t = "mp4a.40.5"),
                      null == r && (r = "avc1.42e01e"),
                      (n = {}),
                      (a = this.initData = h.parseInitSegment(e)).audio &&
                      a.video
                        ? (n.audiovideo = {
                            container: "video/mp4",
                            codec: t + "," + r,
                            initSegment: i ? e : null,
                          })
                        : (a.audio &&
                            (n.audio = {
                              container: "audio/mp4",
                              codec: t,
                              initSegment: i ? e : null,
                            }),
                          a.video &&
                            (n.video = {
                              container: "video/mp4",
                              codec: r,
                              initSegment: i ? e : null,
                            })),
                      this.observer.trigger(o.a.FRAG_PARSING_INIT_SEGMENT, {
                        tracks: n,
                      }))
                    : (t && (this.audioCodec = t), r && (this.videoCodec = r));
                }),
                (h.probe = function (e) {
                  return (
                    0 <
                    h.findBox(
                      {
                        data: e,
                        start: 0,
                        end: Math.min(e.length, 16384),
                      },
                      ["moof"]
                    ).length
                  );
                }),
                (h.bin2str = function (e) {
                  return String.fromCharCode.apply(null, e);
                }),
                (h.readUint16 = function (e, t) {
                  e.data && ((t += e.start), (e = e.data));
                  t = (e[t] << 8) | e[t + 1];
                  return t < 0 ? 65536 + t : t;
                }),
                (h.readUint32 = function (e, t) {
                  e.data && ((t += e.start), (e = e.data));
                  t =
                    (e[t] << 24) |
                    (e[t + 1] << 16) |
                    (e[t + 2] << 8) |
                    e[t + 3];
                  return t < 0 ? 4294967296 + t : t;
                }),
                (h.writeUint32 = function (e, t, r) {
                  e.data && ((t += e.start), (e = e.data)),
                    (e[t] = r >> 24),
                    (e[t + 1] = (r >> 16) & 255),
                    (e[t + 2] = (r >> 8) & 255),
                    (e[t + 3] = 255 & r);
                }),
                (h.findBox = function (e, t) {
                  var r,
                    i,
                    a,
                    n,
                    s,
                    o = [];
                  if (
                    (e.data
                      ? ((n = e.start), (i = e.end), (e = e.data))
                      : ((n = 0), (i = e.byteLength)),
                    !t.length)
                  )
                    return null;
                  for (r = n; r < i; )
                    (s = 1 < (a = h.readUint32(e, r)) ? r + a : i),
                      h.bin2str(e.subarray(r + 4, r + 8)) === t[0] &&
                        (1 === t.length
                          ? o.push({
                              data: e,
                              start: r + 8,
                              end: s,
                            })
                          : (a = h.findBox(
                              {
                                data: e,
                                start: r + 8,
                                end: s,
                              },
                              t.slice(1)
                            )).length && (o = o.concat(a))),
                      (r = s);
                  return o;
                }),
                (h.parseSegmentIndex = function (e) {
                  var t,
                    r = h.findBox(e, ["moov"])[0],
                    r = r ? r.end : null,
                    i = 0,
                    a = h.findBox(e, ["sidx"]);
                  if (!a || !a[0]) return null;
                  t = [];
                  var e = (a = a[0]).data[0],
                    n = h.readUint32(a, (i = 0 === e ? 8 : 16));
                  (i += 4), (i += 0 === e ? 8 : 16), (i += 2);
                  var s = a.end + 0,
                    o = h.readUint16(a, i);
                  i += 2;
                  for (var l = 0; l < o; l++) {
                    var d = i,
                      u = h.readUint32(a, d);
                    d += 4;
                    var c = 2147483647 & u;
                    if (1 == (2147483648 & u) >>> 31)
                      return void console.warn(
                        "SIDX has hierarchical references (not supported)"
                      );
                    u = h.readUint32(a, d);
                    (d += 4),
                      t.push({
                        referenceSize: c,
                        subsegmentDuration: u,
                        info: {
                          duration: u / n,
                          start: s,
                          end: s + c - 1,
                        },
                      }),
                      (s += c),
                      (i = d += 4);
                  }
                  return {
                    earliestPresentationTime: 0,
                    timescale: n,
                    version: e,
                    referencesCount: o,
                    references: t,
                    moovEndOffset: r,
                  };
                }),
                (h.parseInitSegment = function (e) {
                  var a = [];
                  return (
                    h.findBox(e, ["moov", "trak"]).forEach(function (e) {
                      var t,
                        r,
                        i = h.findBox(e, ["tkhd"])[0];
                      i &&
                        ((r = 0 === i.data[i.start] ? 12 : 20),
                        (t = h.readUint32(i, r)),
                        (i = h.findBox(e, ["mdia", "mdhd"])[0]) &&
                          ((r = 0 === i.data[i.start] ? 12 : 20),
                          (i = h.readUint32(i, r)),
                          !(r = h.findBox(e, ["mdia", "hdlr"])[0]) ||
                            ((r = {
                              soun: "audio",
                              vide: "video",
                            }[
                              h.bin2str(
                                r.data.subarray(r.start + 8, r.start + 12)
                              )
                            ]) &&
                              ((e = h.findBox(e, [
                                "mdia",
                                "minf",
                                "stbl",
                                "stsd",
                              ])).length &&
                                ((e = e[0]),
                                (e = h.bin2str(
                                  e.data.subarray(e.start + 12, e.start + 16)
                                )),
                                n.b.log(
                                  "MP4Demuxer:" + r + ":" + e + " found"
                                )),
                              (a[t] = {
                                timescale: i,
                                type: r,
                              }),
                              (a[r] = {
                                timescale: i,
                                id: t,
                              })))));
                    }),
                    a
                  );
                }),
                (h.getStartDTS = function (r, e) {
                  var e = h.findBox(e, ["moof", "traf"]),
                    e = [].concat.apply(
                      [],
                      e.map(function (t) {
                        return h.findBox(t, ["tfhd"]).map(function (e) {
                          var e = h.readUint32(e, 4),
                            e = r[e].timescale || 9e4;
                          return (
                            h.findBox(t, ["tfdt"]).map(function (e) {
                              var t = e.data[e.start],
                                r = h.readUint32(e, 4);
                              return (
                                1 === t &&
                                  ((r *= Math.pow(2, 32)),
                                  (r += h.readUint32(e, 8))),
                                r
                              );
                            })[0] / e
                          );
                        });
                      })
                    ),
                    e = Math.min.apply(null, e);
                  return isFinite(e) ? e : 0;
                }),
                (h.offsetStartDTS = function (r, e, a) {
                  h.findBox(e, ["moof", "traf"]).map(function (t) {
                    return h.findBox(t, ["tfhd"]).map(function (e) {
                      var e = h.readUint32(e, 4),
                        i = r[e].timescale || 9e4;
                      h.findBox(t, ["tfdt"]).map(function (e) {
                        var t = e.data[e.start],
                          r = h.readUint32(e, 4);
                        0 === t
                          ? h.writeUint32(e, 4, r - a * i)
                          : ((r *= Math.pow(2, 32)),
                            (r += h.readUint32(e, 8)),
                            (r -= a * i),
                            (r = Math.max(r, 0)),
                            (t = Math.floor(r / (1 + s))),
                            (r = Math.floor(r % (1 + s))),
                            h.writeUint32(e, 4, t),
                            h.writeUint32(e, 8, r));
                      });
                    });
                  });
                }),
                (r.append = function (e, t, r, i) {
                  var a = this.initData;
                  a ||
                    (this.resetInitSegment(
                      e,
                      this.audioCodec,
                      this.videoCodec,
                      !1
                    ),
                    (a = this.initData));
                  var n,
                    s = this.initPTS;
                  void 0 === s &&
                    ((n = h.getStartDTS(a, e)),
                    (this.initPTS = s = n - t),
                    this.observer.trigger(o.a.INIT_PTS_FOUND, {
                      initPTS: s,
                    })),
                    h.offsetStartDTS(a, e, s),
                    (s = h.getStartDTS(a, e)),
                    this.remuxer.remux(
                      a.audio,
                      a.video,
                      null,
                      null,
                      s,
                      r,
                      i,
                      e
                    );
                }),
                (r.destroy = function () {}),
                h);
            function h(e, t) {
              (this.observer = e), (this.remuxer = t);
            }
            t.a = r;
          },
          function (e, t, h) {
            function n(r) {
              var i = {};
              function a(e) {
                if (i[e]) return i[e].exports;
                var t = (i[e] = {
                  i: e,
                  l: !1,
                  exports: {},
                });
                return (
                  r[e].call(t.exports, t, t.exports, a), (t.l = !0), t.exports
                );
              }
              (a.m = r),
                (a.c = i),
                (a.i = function (e) {
                  return e;
                }),
                (a.d = function (e, t, r) {
                  a.o(e, t) ||
                    Object.defineProperty(e, t, {
                      configurable: !1,
                      enumerable: !0,
                      get: r,
                    });
                }),
                (a.r = function (e) {
                  Object.defineProperty(e, "__esModule", {
                    value: !0,
                  });
                }),
                (a.n = function (e) {
                  var t =
                    e && e.__esModule
                      ? function () {
                          return e.default;
                        }
                      : function () {
                          return e;
                        };
                  return a.d(t, "a", t), t;
                }),
                (a.o = function (e, t) {
                  return Object.prototype.hasOwnProperty.call(e, t);
                }),
                (a.p = "/"),
                (a.oe = function (e) {
                  throw (console.error(e), e);
                });
              var e = a((a.s = ENTRY_MODULE));
              return e.default || e;
            }
            function f(e) {
              return (e + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&");
            }
            e.exports = function (c, e) {
              e = e || {};
              var r = {
                  main: h.m,
                },
                i = e.all
                  ? {
                      main: Object.keys(r.main),
                    }
                  : (function (e) {
                      for (
                        var t = {
                            main: [c],
                          },
                          r = {
                            main: [],
                          },
                          i = {
                            main: {},
                          };
                        (function (r) {
                          return Object.keys(r).reduce(function (e, t) {
                            return e || 0 < r[t].length;
                          }, !1);
                        })(t);

                      )
                        for (var a = Object.keys(t), n = 0; n < a.length; n++) {
                          var s = a[n],
                            o = t[s].pop();
                          if (((i[s] = i[s] || {}), !i[s][o] && e[s][o])) {
                            (i[s][o] = !0), (r[s] = r[s] || []), r[s].push(o);
                            for (
                              var l = (function (e, t, r) {
                                  var i = {};
                                  i[r] = [];
                                  var a = t.toString();
                                  if (
                                    !(t = a.match(
                                      /^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/
                                    ))
                                  )
                                    return i;
                                  for (
                                    var n,
                                      t = t[1],
                                      s = new RegExp(
                                        "(\\\\n|\\W)" +
                                          f(t) +
                                          "\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)",
                                        "g"
                                      );
                                    (n = s.exec(a));

                                  )
                                    "dll-reference" !== n[3] && i[r].push(n[3]);
                                  for (
                                    s = new RegExp(
                                      "\\(" +
                                        f(t) +
                                        '\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',
                                      "g"
                                    );
                                    (n = s.exec(a));

                                  )
                                    e[n[2]] ||
                                      (i[r].push(n[1]), (e[n[2]] = h(n[1]).m)),
                                      (i[n[2]] = i[n[2]] || []),
                                      i[n[2]].push(n[4]);
                                  for (
                                    var o, l = Object.keys(i), d = 0;
                                    d < l.length;
                                    d++
                                  )
                                    for (var u = 0; u < i[l[d]].length; u++)
                                      (o = i[l[d]][u]),
                                        isNaN(+o) || (i[l[d]][u] = +i[l[d]][u]);
                                  return i;
                                })(e, e[s][o], s),
                                d = Object.keys(l),
                                u = 0;
                              u < d.length;
                              u++
                            )
                              (t[d[u]] = t[d[u]] || []),
                                (t[d[u]] = t[d[u]].concat(l[d[u]]));
                          }
                        }
                      return r;
                    })(r),
                a = "";
              Object.keys(i)
                .filter(function (e) {
                  return "main" !== e;
                })
                .forEach(function (t) {
                  for (var e = 0; i[t][e]; ) e++;
                  i[t].push(e),
                    (r[t][e] =
                      "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })"),
                    (a =
                      a +
                      "var " +
                      t +
                      " = (" +
                      n.toString().replace("ENTRY_MODULE", JSON.stringify(e)) +
                      ")({" +
                      i[t]
                        .map(function (e) {
                          return JSON.stringify(e) + ": " + r[t][e].toString();
                        })
                        .join(",") +
                      "});\n");
                }),
                (a =
                  a +
                  "new ((" +
                  n.toString().replace("ENTRY_MODULE", JSON.stringify(c)) +
                  ")({" +
                  i.main
                    .map(function (e) {
                      return JSON.stringify(e) + ": " + r.main[e].toString();
                    })
                    .join(",") +
                  "}))(self);");
              var t = new window.Blob([a], {
                type: "text/javascript",
              });
              if (e.bare) return t;
              (e = (
                window.URL ||
                window.webkitURL ||
                window.mozURL ||
                window.msURL
              ).createObjectURL(t)),
                (t = new window.Worker(e));
              return (t.objectURL = e), t;
            };
          },
          function (e, t, r) {
            "use strict";
            r.r(t);
            var s = r(9),
              o = r(1),
              l = r(0),
              d = r(8);
            t.default = function (i) {
              var a = new d.EventEmitter();
              (a.trigger = function (e) {
                for (
                  var t = arguments.length,
                    r = new Array(1 < t ? t - 1 : 0),
                    i = 1;
                  i < t;
                  i++
                )
                  r[i - 1] = arguments[i];
                a.emit.apply(a, [e, e].concat(r));
              }),
                (a.off = function (e) {
                  for (
                    var t = arguments.length,
                      r = new Array(1 < t ? t - 1 : 0),
                      i = 1;
                    i < t;
                    i++
                  )
                    r[i - 1] = arguments[i];
                  a.removeListener.apply(a, [e].concat(r));
                });
              function n(e, t) {
                i.postMessage({
                  event: e,
                  data: t,
                });
              }
              i.addEventListener("message", function (e) {
                var t = e.data;
                switch (t.cmd) {
                  case "init":
                    var r = JSON.parse(t.config);
                    (i.demuxer = new s.a(a, t.typeSupported, r, t.vendor)),
                      Object(l.a)(r.debug),
                      n("init", null);
                    break;
                  case "demux":
                    i.demuxer.push(
                      t.data,
                      t.decryptdata,
                      t.initSegment,
                      t.audioCodec,
                      t.videoCodec,
                      t.timeOffset,
                      t.discontinuity,
                      t.trackSwitch,
                      t.contiguous,
                      t.duration,
                      t.accurateTimeOffset,
                      t.defaultInitPTS
                    );
                }
              }),
                a.on(o.a.FRAG_DECRYPTED, n),
                a.on(o.a.FRAG_PARSING_INIT_SEGMENT, n),
                a.on(o.a.FRAG_PARSED, n),
                a.on(o.a.ERROR, n),
                a.on(o.a.FRAG_PARSING_METADATA, n),
                a.on(o.a.FRAG_PARSING_USERDATA, n),
                a.on(o.a.INIT_PTS_FOUND, n),
                a.on(o.a.FRAG_PARSING_DATA, function (e, t) {
                  var r = [],
                    e = {
                      event: e,
                      data: t,
                    };
                  t.data1 &&
                    ((e.data1 = t.data1.buffer),
                    r.push(t.data1.buffer),
                    delete t.data1),
                    t.data2 &&
                      ((e.data2 = t.data2.buffer),
                      r.push(t.data2.buffer),
                      delete t.data2),
                    i.postMessage(e, r);
                });
            };
          },
          function (e, t, r) {
            "use strict";
            r.r(t),
              r.d(t, "default", function () {
                return fr;
              });
            var i = {};
            r.r(i),
              r.d(i, "newCue", function () {
                return Tt;
              });
            var g,
              a,
              n = r(6),
              m = r(2),
              A = r(3),
              E = r(1),
              k = r(0),
              s = {
                hlsEventGeneric: !0,
                hlsHandlerDestroying: !0,
                hlsHandlerDestroyed: !0,
              },
              o =
                (((st = l.prototype).destroy = function () {
                  this.onHandlerDestroying(),
                    this.unregisterListeners(),
                    this.onHandlerDestroyed();
                }),
                (st.onHandlerDestroying = function () {}),
                (st.onHandlerDestroyed = function () {}),
                (st.isEventHandler = function () {
                  return (
                    "object" == typeof this.handledEvents &&
                    this.handledEvents.length &&
                    "function" == typeof this.onEvent
                  );
                }),
                (st.registerListeners = function () {
                  this.isEventHandler() &&
                    this.handledEvents.forEach(function (e) {
                      if (s[e]) throw new Error("Forbidden event-name: " + e);
                      this.hls.on(e, this.onEvent);
                    }, this);
                }),
                (st.unregisterListeners = function () {
                  this.isEventHandler() &&
                    this.handledEvents.forEach(function (e) {
                      this.hls.off(e, this.onEvent);
                    }, this);
                }),
                (st.onEvent = function (e, t) {
                  this.onEventGeneric(e, t);
                }),
                (st.onEventGeneric = function (e, t) {
                  try {
                    (function (e, t) {
                      var r = "on" + e.replace("hls", "");
                      if ("function" != typeof this[r])
                        throw new Error(
                          "Event " +
                            e +
                            " has no generic handler in this " +
                            this.constructor.name +
                            " class (tried " +
                            r +
                            ")"
                        );
                      return this[r].bind(this, t);
                    }
                      .call(this, e, t)
                      .call());
                  } catch (t) {
                    k.b.error(
                      "An internal error happened while handling event " +
                        e +
                        '. Error message: "' +
                        t.message +
                        '". Here is a stacktrace:',
                      t
                    ),
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.OTHER_ERROR,
                        details: m.a.INTERNAL_EXCEPTION,
                        fatal: !1,
                        event: e,
                        err: t,
                      });
                  }
                }),
                l);
            function l(e) {
              (this.hls = void 0),
                (this.handledEvents = void 0),
                (this.useGenericHandler = void 0),
                (this.hls = e),
                (this.onEvent = this.onEvent.bind(this));
              for (
                var t = arguments.length,
                  r = new Array(1 < t ? t - 1 : 0),
                  i = 1;
                i < t;
                i++
              )
                r[i - 1] = arguments[i];
              (this.handledEvents = r),
                (this.useGenericHandler = !0),
                this.registerListeners();
            }
            ((Ee = g = g || {}).MANIFEST = "manifest"),
              (Ee.LEVEL = "level"),
              (Ee.AUDIO_TRACK = "audioTrack"),
              (Ee.SUBTITLE_TRACK = "subtitleTrack"),
              ((Fe = a = a || {}).MAIN = "main"),
              (Fe.AUDIO = "audio"),
              (Fe.SUBTITLE = "subtitle");
            var d = r(10);
            function u(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var c,
              w =
                (u(h.prototype, [
                  {
                    key: "uri",
                    get: function () {
                      return (
                        !this._uri &&
                          this.reluri &&
                          (this._uri = Object(n.buildAbsoluteURL)(
                            this.baseuri,
                            this.reluri,
                            {
                              alwaysNormalize: !0,
                            }
                          )),
                        this._uri
                      );
                    },
                  },
                ]),
                h);
            function h(e, t) {
              (this._uri = null),
                (this.baseuri = void 0),
                (this.reluri = void 0),
                (this.method = null),
                (this.key = null),
                (this.iv = null),
                (this.baseuri = e),
                (this.reluri = t);
            }
            function f(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            ((ut = c = c || {}).AUDIO = "audio"), (ut.VIDEO = "video");
            var L =
              (((tr = p.prototype).setByteRange = function (e, t) {
                var r = e.split("@", 2),
                  e = [];
                1 === r.length
                  ? (e[0] = t ? t.byteRangeEndOffset : 0)
                  : (e[0] = parseInt(r[1])),
                  (e[1] = parseInt(r[0]) + e[0]),
                  (this._byteRange = e);
              }),
              (tr.addElementaryStream = function (e) {
                this._elementaryStreams[e] = !0;
              }),
              (tr.hasElementaryStream = function (e) {
                return !0 === this._elementaryStreams[e];
              }),
              (tr.createInitializationVector = function (e) {
                for (var t = new Uint8Array(16), r = 12; r < 16; r++)
                  t[r] = (e >> (8 * (15 - r))) & 255;
                return t;
              }),
              (tr.setDecryptDataFromLevelKey = function (e, t) {
                var r = e;
                return (
                  null != e &&
                    e.method &&
                    e.uri &&
                    !e.iv &&
                    (((r = new w(e.baseuri, e.reluri)).method = e.method),
                    (r.iv = this.createInitializationVector(t))),
                  r
                );
              }),
              f(p.prototype, [
                {
                  key: "url",
                  get: function () {
                    return (
                      !this._url &&
                        this.relurl &&
                        (this._url = Object(n.buildAbsoluteURL)(
                          this.baseurl,
                          this.relurl,
                          {
                            alwaysNormalize: !0,
                          }
                        )),
                      this._url
                    );
                  },
                  set: function (e) {
                    this._url = e;
                  },
                },
                {
                  key: "byteRange",
                  get: function () {
                    return this._byteRange || [];
                  },
                },
                {
                  key: "byteRangeStartOffset",
                  get: function () {
                    return this.byteRange[0];
                  },
                },
                {
                  key: "byteRangeEndOffset",
                  get: function () {
                    return this.byteRange[1];
                  },
                },
                {
                  key: "decryptdata",
                  get: function () {
                    return this.levelkey || this._decryptdata
                      ? (!this._decryptdata &&
                          this.levelkey &&
                          ("number" != typeof (e = this.sn) &&
                            (this.levelkey &&
                              "AES-128" === this.levelkey.method &&
                              !this.levelkey.iv &&
                              k.b.warn(
                                'missing IV for initialization segment with method="' +
                                  this.levelkey.method +
                                  '" - compliance issue'
                              ),
                            (e = 0)),
                          (this._decryptdata = this.setDecryptDataFromLevelKey(
                            this.levelkey,
                            e
                          ))),
                        this._decryptdata)
                      : null;
                    var e;
                  },
                },
                {
                  key: "endProgramDateTime",
                  get: function () {
                    if (null === this.programDateTime) return null;
                    if (!Object(A.a)(this.programDateTime)) return null;
                    var e = Object(A.a)(this.duration) ? this.duration : 0;
                    return this.programDateTime + 1e3 * e;
                  },
                },
                {
                  key: "encrypted",
                  get: function () {
                    return !(
                      !this.decryptdata ||
                      null === this.decryptdata.uri ||
                      null !== this.decryptdata.key
                    );
                  },
                },
              ]),
              p);
            function p() {
              var e;
              (this._url = null),
                (this._byteRange = null),
                (this._decryptdata = null),
                (this._elementaryStreams =
                  (((e = {})[c.AUDIO] = !1), (e[c.VIDEO] = !1), e)),
                (this.deltaPTS = 0),
                (this.rawProgramDateTime = null),
                (this.programDateTime = null),
                (this.title = null),
                (this.tagList = []),
                (this.cc = void 0),
                (this.type = void 0),
                (this.relurl = void 0),
                (this.baseurl = void 0),
                (this.duration = void 0),
                (this.start = void 0),
                (this.sn = 0),
                (this.urlId = 0),
                (this.level = 0),
                (this.levelkey = void 0),
                (this.loader = void 0);
            }
            function v(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var D =
                (v(_.prototype, [
                  {
                    key: "hasProgramDateTime",
                    get: function () {
                      return !(
                        !this.fragments[0] ||
                        !Object(A.a)(this.fragments[0].programDateTime)
                      );
                    },
                  },
                ]),
                _),
              y = /^(\d+)x(\d+)$/,
              b = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,
              O =
                (((Je = S.prototype).decimalInteger = function (e) {
                  e = parseInt(this[e], 10);
                  return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e;
                }),
                (Je.hexadecimalInteger = function (e) {
                  if (this[e]) {
                    for (
                      var t =
                          (1 & (t = (this[e] || "0x").slice(2)).length
                            ? "0"
                            : "") + t,
                        r = new Uint8Array(t.length / 2),
                        i = 0;
                      i < t.length / 2;
                      i++
                    )
                      r[i] = parseInt(t.slice(2 * i, 2 * i + 2), 16);
                    return r;
                  }
                  return null;
                }),
                (Je.hexadecimalIntegerAsNumber = function (e) {
                  e = parseInt(this[e], 16);
                  return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e;
                }),
                (Je.decimalFloatingPoint = function (e) {
                  return parseFloat(this[e]);
                }),
                (Je.enumeratedString = function (e) {
                  return this[e];
                }),
                (Je.decimalResolution = function (e) {
                  e = y.exec(this[e]);
                  if (null !== e)
                    return {
                      width: parseInt(e[1], 10),
                      height: parseInt(e[2], 10),
                    };
                }),
                (S.parseAttrList = function (e) {
                  var t,
                    r = {};
                  for (b.lastIndex = 0; null !== (t = b.exec(e)); ) {
                    var i = t[2];
                    0 === i.indexOf('"') &&
                      i.lastIndexOf('"') === i.length - 1 &&
                      (i = i.slice(1, -1)),
                      (r[t[1]] = i);
                  }
                  return r;
                }),
                S),
              T = {
                audio: {
                  a3ds: !0,
                  "ac-3": !0,
                  "ac-4": !0,
                  alac: !0,
                  alaw: !0,
                  dra1: !0,
                  "dts+": !0,
                  "dts-": !0,
                  dtsc: !0,
                  dtse: !0,
                  dtsh: !0,
                  "ec-3": !0,
                  enca: !0,
                  g719: !0,
                  g726: !0,
                  m4ae: !0,
                  mha1: !0,
                  mha2: !0,
                  mhm1: !0,
                  mhm2: !0,
                  mlpa: !0,
                  mp4a: !0,
                  "raw ": !0,
                  Opus: !0,
                  samr: !0,
                  sawb: !0,
                  sawp: !0,
                  sevc: !0,
                  sqcp: !0,
                  ssmv: !0,
                  twos: !0,
                  ulaw: !0,
                },
                video: {
                  avc1: !0,
                  avc2: !0,
                  avc3: !0,
                  avc4: !0,
                  avcp: !0,
                  drac: !0,
                  dvav: !0,
                  dvhe: !0,
                  encv: !0,
                  hev1: !0,
                  hvc1: !0,
                  mjp2: !0,
                  mp4v: !0,
                  mvc1: !0,
                  mvc2: !0,
                  mvc3: !0,
                  mvc4: !0,
                  resv: !0,
                  rv60: !0,
                  s263: !0,
                  svc1: !0,
                  svc2: !0,
                  "vc-1": !0,
                  vp08: !0,
                  vp09: !0,
                },
              };
            function S(e) {
              for (var t in ("string" == typeof e && (e = S.parseAttrList(e)),
              e))
                e.hasOwnProperty(t) && (this[t] = e[t]);
            }
            function _(e) {
              (this.endCC = 0),
                (this.endSN = 0),
                (this.fragments = []),
                (this.initSegment = null),
                (this.live = !0),
                (this.needSidxRanges = !1),
                (this.startCC = 0),
                (this.startSN = 0),
                (this.startTimeOffset = null),
                (this.targetduration = 0),
                (this.totalduration = 0),
                (this.type = null),
                (this.url = e),
                (this.version = null);
            }
            function R(e, t) {
              return MediaSource.isTypeSupported(
                (t || "video") + '/mp4;codecs="' + e + '"'
              );
            }
            var C =
                /(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,
              I = /#EXT-X-MEDIA:(.*)/g,
              P = new RegExp(
                [
                  /#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,
                  /|(?!#)([\S+ ?]+)/.source,
                  /|#EXT-X-BYTERANGE:*(.+)/.source,
                  /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,
                  /|#.*/.source,
                ].join(""),
                "g"
              ),
              x =
                /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,
              M = /\.(mp4|m4s|m4v|m4a)$/i,
              F =
                ((U.findGroup = function (e, t) {
                  for (var r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (i.id === t) return i;
                  }
                }),
                (U.convertAVC1ToAVCOTI = function (e) {
                  var t,
                    r = e.split(".");
                  return (
                    2 < r.length
                      ? ((t = r.shift() + "."),
                        (t += parseInt(r.shift()).toString(16)),
                        (t += ("000" + parseInt(r.shift()).toString(16)).substr(
                          -4
                        )))
                      : (t = e),
                    t
                  );
                }),
                (U.resolve = function (e, t) {
                  return n.buildAbsoluteURL(t, e, {
                    alwaysNormalize: !0,
                  });
                }),
                (U.parseMasterPlaylist = function (e, t) {
                  var r,
                    i,
                    a,
                    n,
                    s = [],
                    o = {},
                    l = !1;
                  for (C.lastIndex = 0; null != (n = C.exec(e)); )
                    n[1]
                      ? ((i = (r = {}).attrs = new O(n[1])),
                        (r.url = U.resolve(n[2], t)),
                        (a = i.decimalResolution("RESOLUTION")) &&
                          ((r.width = a.width), (r.height = a.height)),
                        (r.bitrate =
                          i.decimalInteger("AVERAGE-BANDWIDTH") ||
                          i.decimalInteger("BANDWIDTH")),
                        (r.name = i.NAME),
                        (function (i, a) {
                          ["video", "audio"].forEach(function (r) {
                            var e,
                              t = i.filter(function (e) {
                                return !!(t = T[r]) && !0 === t[e.slice(0, 4)];
                                var t;
                              });
                            t.length &&
                              ((e = t.filter(function (e) {
                                return (
                                  0 === e.lastIndexOf("avc1", 0) ||
                                  0 === e.lastIndexOf("mp4a", 0)
                                );
                              })),
                              (a[r + "Codec"] = (0 < e.length ? e : t)[0]),
                              (i = i.filter(function (e) {
                                return -1 === t.indexOf(e);
                              })));
                          }),
                            (a.unknownCodecs = i);
                        })([].concat((i.CODECS || "").split(/[ ,]+/)), r),
                        r.videoCodec &&
                          -1 !== r.videoCodec.indexOf("avc1") &&
                          (r.videoCodec = U.convertAVC1ToAVCOTI(r.videoCodec)),
                        s.push(r))
                      : !n[3] ||
                        ((n = new O(n[3]))["DATA-ID"] &&
                          ((l = !0), (o[n["DATA-ID"]] = n)));
                  return {
                    levels: s,
                    sessionData: l ? o : null,
                  };
                }),
                (U.parseMasterPlaylistMedia = function (e, t, r, i) {
                  void 0 === i && (i = []);
                  var a = [],
                    n = 0;
                  for (I.lastIndex = 0; null !== (s = I.exec(e)); ) {
                    var s,
                      o = new O(s[1]);
                    o.TYPE === r &&
                      ((s = {
                        attrs: o,
                        id: n++,
                        groupId: o["GROUP-ID"],
                        instreamId: o["INSTREAM-ID"],
                        name: o.NAME || o.LANGUAGE,
                        type: r,
                        default: "YES" === o.DEFAULT,
                        autoselect: "YES" === o.AUTOSELECT,
                        forced: "YES" === o.FORCED,
                        lang: o.LANGUAGE,
                      }),
                      o.URI && (s.url = U.resolve(o.URI, t)),
                      i.length &&
                        ((o = U.findGroup(i, s.groupId)),
                        (s.audioCodec = (o || i[0]).codec)),
                      a.push(s));
                  }
                  return a;
                }),
                (U.parseLevelPlaylist = function (e, t, r, i, a) {
                  var n,
                    s,
                    o,
                    l = 0,
                    d = 0,
                    u = new D(t),
                    c = 0,
                    h = null,
                    f = new L(),
                    g = null;
                  for (P.lastIndex = 0; null !== (n = P.exec(e)); ) {
                    var p = n[1];
                    if (p) {
                      f.duration = parseFloat(p);
                      var m = (" " + n[2]).slice(1);
                      (f.title = m || null),
                        f.tagList.push(m ? ["INF", p, m] : ["INF", p]);
                    } else if (n[3])
                      Object(A.a)(f.duration) &&
                        ((v = l++),
                        (f.type = i),
                        (f.start = d),
                        o && (f.levelkey = o),
                        (f.sn = v),
                        (f.level = r),
                        (f.cc = c),
                        (f.urlId = a),
                        (f.baseurl = t),
                        (f.relurl = (" " + n[3]).slice(1)),
                        (p = h),
                        (v = f).rawProgramDateTime
                          ? (v.programDateTime = Date.parse(
                              v.rawProgramDateTime
                            ))
                          : null != p &&
                            p.programDateTime &&
                            (v.programDateTime = p.endProgramDateTime),
                        Object(A.a)(v.programDateTime) ||
                          ((v.programDateTime = null),
                          (v.rawProgramDateTime = null)),
                        u.fragments.push(f),
                        (d += (h = f).duration),
                        (f = new L()));
                    else if (n[4]) {
                      var v = (" " + n[4]).slice(1);
                      h ? f.setByteRange(v, h) : f.setByteRange(v);
                    } else if (n[5])
                      (f.rawProgramDateTime = (" " + n[5]).slice(1)),
                        f.tagList.push([
                          "PROGRAM-DATE-TIME",
                          f.rawProgramDateTime,
                        ]),
                        null === g && (g = u.fragments.length);
                    else if ((n = n[0].match(x))) {
                      for (s = 1; s < n.length && void 0 === n[s]; s++);
                      var y = (" " + n[s + 1]).slice(1),
                        b = (" " + n[s + 2]).slice(1);
                      switch (n[s]) {
                        case "#":
                          f.tagList.push(b ? [y, b] : [y]);
                          break;
                        case "PLAYLIST-TYPE":
                          u.type = y.toUpperCase();
                          break;
                        case "MEDIA-SEQUENCE":
                          l = u.startSN = parseInt(y);
                          break;
                        case "TARGETDURATION":
                          u.targetduration = parseFloat(y);
                          break;
                        case "VERSION":
                          u.version = parseInt(y);
                          break;
                        case "EXTM3U":
                          break;
                        case "ENDLIST":
                          u.live = !1;
                          break;
                        case "DIS":
                          c++, f.tagList.push(["DIS"]);
                          break;
                        case "DISCONTINUITY-SEQ":
                          c = parseInt(y);
                          break;
                        case "KEY":
                          var T = new O(y),
                            E = T.enumeratedString("METHOD"),
                            S = T.URI,
                            _ = T.hexadecimalInteger("IV");
                          if (
                            "com.apple.streamingkeydelivery" ===
                            (T.KEYFORMAT || "identity")
                          ) {
                            k.b.warn(
                              "Keyformat com.apple.streamingkeydelivery is not supported"
                            );
                            continue;
                          }
                          E &&
                            ((o = new w(t, S)),
                            S &&
                              0 <=
                                [
                                  "AES-128",
                                  "SAMPLE-AES",
                                  "SAMPLE-AES-CENC",
                                ].indexOf(E) &&
                              ((o.method = E), (o.key = null), (o.iv = _)));
                          break;
                        case "START":
                          var R = new O(y).decimalFloatingPoint("TIME-OFFSET");
                          Object(A.a)(R) && (u.startTimeOffset = R);
                          break;
                        case "MAP":
                          R = new O(y);
                          (f.relurl = R.URI),
                            R.BYTERANGE && f.setByteRange(R.BYTERANGE),
                            (f.baseurl = t),
                            (f.level = r),
                            (f.type = i),
                            (f.sn = "initSegment"),
                            (u.initSegment = f),
                            ((f = new L()).rawProgramDateTime =
                              u.initSegment.rawProgramDateTime);
                          break;
                        default:
                          k.b.warn("line parsed but not handled: " + n);
                      }
                    } else
                      k.b.warn(
                        "No matches on slow regex match for level playlist!"
                      );
                  }
                  return (
                    (f = h) &&
                      !f.relurl &&
                      (u.fragments.pop(), (d -= f.duration)),
                    (u.totalduration = d),
                    (u.averagetargetduration = d / u.fragments.length),
                    (u.endSN = l - 1),
                    (u.startCC = u.fragments[0] ? u.fragments[0].cc : 0),
                    (u.endCC = c),
                    !u.initSegment &&
                      u.fragments.length &&
                      u.fragments.every(function (e) {
                        return M.test(e.relurl);
                      }) &&
                      (k.b.warn(
                        "MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"
                      ),
                      ((f = new L()).relurl = u.fragments[0].relurl),
                      (f.baseurl = t),
                      (f.level = r),
                      (f.type = i),
                      (f.sn = "initSegment"),
                      (u.initSegment = f),
                      (u.needSidxRanges = !0)),
                    g &&
                      (function (e) {
                        for (var t = e[g], r = g - 1; 0 <= r; r--) {
                          var i = e[r];
                          (i.programDateTime =
                            t.programDateTime - 1e3 * i.duration),
                            (t = i);
                        }
                      })(u.fragments),
                    u
                  );
                }),
                U);
            function U() {}
            var N = window.performance,
              B = (function (t) {
                var e;
                function f(e) {
                  return (
                    ((e =
                      t.call(
                        this,
                        e,
                        E.a.MANIFEST_LOADING,
                        E.a.LEVEL_LOADING,
                        E.a.AUDIO_TRACK_LOADING,
                        E.a.SUBTITLE_TRACK_LOADING
                      ) || this).loaders = {}),
                    e
                  );
                }
                (r = t),
                  ((e = f).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r),
                  (f.canHaveQualityLevels = function (e) {
                    return e !== g.AUDIO_TRACK && e !== g.SUBTITLE_TRACK;
                  }),
                  (f.mapContextToLevelType = function (e) {
                    switch (e.type) {
                      case g.AUDIO_TRACK:
                        return a.AUDIO;
                      case g.SUBTITLE_TRACK:
                        return a.SUBTITLE;
                      default:
                        return a.MAIN;
                    }
                  }),
                  (f.getResponseUrl = function (e, t) {
                    e = e.url;
                    return (
                      (void 0 !== e && 0 !== e.indexOf("data:")) || (e = t.url),
                      e
                    );
                  });
                var r = f.prototype;
                return (
                  (r.createInternalLoader = function (e) {
                    var t = this.hls.config,
                      r = t.pLoader,
                      i = t.loader,
                      t = new (r || i)(t);
                    return (e.loader = t), (this.loaders[e.type] = t);
                  }),
                  (r.getInternalLoader = function (e) {
                    return this.loaders[e.type];
                  }),
                  (r.resetInternalLoader = function (e) {
                    this.loaders[e] && delete this.loaders[e];
                  }),
                  (r.destroyInternalLoaders = function () {
                    for (var e in this.loaders) {
                      var t = this.loaders[e];
                      t && t.destroy(), this.resetInternalLoader(e);
                    }
                  }),
                  (r.destroy = function () {
                    this.destroyInternalLoaders(),
                      t.prototype.destroy.call(this);
                  }),
                  (r.onManifestLoading = function (e) {
                    this.load({
                      url: e.url,
                      type: g.MANIFEST,
                      level: 0,
                      id: null,
                      responseType: "text",
                    });
                  }),
                  (r.onLevelLoading = function (e) {
                    this.load({
                      url: e.url,
                      type: g.LEVEL,
                      level: e.level,
                      id: e.id,
                      responseType: "text",
                    });
                  }),
                  (r.onAudioTrackLoading = function (e) {
                    this.load({
                      url: e.url,
                      type: g.AUDIO_TRACK,
                      level: null,
                      id: e.id,
                      responseType: "text",
                    });
                  }),
                  (r.onSubtitleTrackLoading = function (e) {
                    this.load({
                      url: e.url,
                      type: g.SUBTITLE_TRACK,
                      level: null,
                      id: e.id,
                      responseType: "text",
                    });
                  }),
                  (r.load = function (e) {
                    var t = this.hls.config;
                    k.b.debug(
                      "Loading playlist of type " +
                        e.type +
                        ", level: " +
                        e.level +
                        ", id: " +
                        e.id
                    );
                    var r,
                      i,
                      a,
                      n,
                      s = this.getInternalLoader(e);
                    if (s) {
                      var o = s.context;
                      if (o && o.url === e.url)
                        return k.b.trace("playlist request ongoing"), !1;
                      k.b.warn("aborting previous loader for type: " + e.type),
                        s.abort();
                    }
                    switch (e.type) {
                      case g.MANIFEST:
                        (r = t.manifestLoadingMaxRetry),
                          (i = t.manifestLoadingTimeOut),
                          (a = t.manifestLoadingRetryDelay),
                          (n = t.manifestLoadingMaxRetryTimeout);
                        break;
                      case g.LEVEL:
                        (a = n = r = 0), (i = t.levelLoadingTimeOut);
                        break;
                      default:
                        (r = t.levelLoadingMaxRetry),
                          (i = t.levelLoadingTimeOut),
                          (a = t.levelLoadingRetryDelay),
                          (n = t.levelLoadingMaxRetryTimeout);
                    }
                    s = this.createInternalLoader(e);
                    var l = {
                        timeout: i,
                        maxRetry: r,
                        retryDelay: a,
                        maxRetryDelay: n,
                      },
                      o = {
                        onSuccess: this.loadsuccess.bind(this),
                        onError: this.loaderror.bind(this),
                        onTimeout: this.loadtimeout.bind(this),
                      };
                    return (
                      k.b.debug(
                        "Calling internal loader delegate for URL: " + e.url
                      ),
                      s.load(e, l, o),
                      !0
                    );
                  }),
                  (r.loadsuccess = function (e, t, r, i) {
                    if ((void 0 === i && (i = null), r.isSidxRequest))
                      return (
                        this._handleSidxRequest(e, r),
                        void this._handlePlaylistLoaded(e, t, r, i)
                      );
                    if (
                      (this.resetInternalLoader(r.type),
                      "string" != typeof e.data)
                    )
                      throw new Error(
                        'expected responseType of "text" for PlaylistLoader'
                      );
                    var a = e.data;
                    (t.tload = N.now()),
                      0 === a.indexOf("#EXTM3U")
                        ? 0 < a.indexOf("#EXTINF:") ||
                          0 < a.indexOf("#EXT-X-TARGETDURATION:")
                          ? this._handleTrackOrLevelPlaylist(e, t, r, i)
                          : this._handleMasterPlaylist(e, t, r, i)
                        : this._handleManifestParsingError(
                            e,
                            r,
                            "no EXTM3U delimiter",
                            i
                          );
                  }),
                  (r.loaderror = function (e, t, r) {
                    void 0 === r && (r = null),
                      this._handleNetworkError(t, r, !1, e);
                  }),
                  (r.loadtimeout = function (e, t, r) {
                    void 0 === r && (r = null),
                      this._handleNetworkError(t, r, !0);
                  }),
                  (r._handleMasterPlaylist = function (e, t, r, i) {
                    var a,
                      n,
                      s = this.hls,
                      o = e.data,
                      l = f.getResponseUrl(e, r),
                      d = F.parseMasterPlaylist(o, l),
                      u = d.levels,
                      c = d.sessionData;
                    u.length
                      ? ((a = u.map(function (e) {
                          return {
                            id: e.attrs.AUDIO,
                            codec: e.audioCodec,
                          };
                        })),
                        (d = F.parseMasterPlaylistMedia(o, l, "AUDIO", a)),
                        (a = F.parseMasterPlaylistMedia(o, l, "SUBTITLES")),
                        (o = F.parseMasterPlaylistMedia(
                          o,
                          l,
                          "CLOSED-CAPTIONS"
                        )),
                        d.length &&
                          ((n = !1),
                          d.forEach(function (e) {
                            e.url || (n = !0);
                          }),
                          !1 === n &&
                            u[0].audioCodec &&
                            !u[0].attrs.AUDIO &&
                            (k.b.log(
                              "audio codec signaled in quality level, but no embedded audio track signaled, create one"
                            ),
                            d.unshift({
                              type: "main",
                              name: "main",
                              default: !1,
                              autoselect: !1,
                              forced: !1,
                              id: -1,
                              attrs: {},
                              url: "",
                            }))),
                        s.trigger(E.a.MANIFEST_LOADED, {
                          levels: u,
                          audioTracks: d,
                          subtitles: a,
                          captions: o,
                          url: l,
                          stats: t,
                          networkDetails: i,
                          sessionData: c,
                        }))
                      : this._handleManifestParsingError(
                          e,
                          r,
                          "no level found in manifest",
                          i
                        );
                  }),
                  (r._handleTrackOrLevelPlaylist = function (e, t, r, i) {
                    var a,
                      n = this.hls,
                      s = r.id,
                      o = r.level,
                      l = r.type,
                      d = f.getResponseUrl(e, r),
                      u = Object(A.a)(s) ? s : 0,
                      c = Object(A.a)(o) ? o : u,
                      h = f.mapContextToLevelType(r),
                      u = F.parseLevelPlaylist(e.data, d, c, h, u);
                    (u.tload = t.tload),
                      u.fragments.length
                        ? (l === g.MANIFEST &&
                            ((a = {
                              url: d,
                              details: u,
                            }),
                            n.trigger(E.a.MANIFEST_LOADED, {
                              levels: [a],
                              audioTracks: [],
                              url: d,
                              stats: t,
                              networkDetails: i,
                              sessionData: null,
                            })),
                          (t.tparsed = N.now()),
                          u.needSidxRanges
                            ? ((a = u.initSegment.url),
                              this.load({
                                url: a,
                                isSidxRequest: !0,
                                type: l,
                                level: o,
                                levelDetails: u,
                                id: s,
                                rangeStart: 0,
                                rangeEnd: 2048,
                                responseType: "arraybuffer",
                              }))
                            : ((r.levelDetails = u),
                              this._handlePlaylistLoaded(e, t, r, i)))
                        : n.trigger(E.a.ERROR, {
                            type: m.b.NETWORK_ERROR,
                            details: m.a.LEVEL_EMPTY_ERROR,
                            fatal: !1,
                            url: d,
                            reason: "no fragments found in level",
                            level:
                              "number" == typeof r.level ? r.level : void 0,
                          });
                  }),
                  (r._handleSidxRequest = function (e, t) {
                    if ("string" == typeof e.data)
                      throw new Error(
                        "sidx request must be made with responseType of array buffer"
                      );
                    var r,
                      i = d.a.parseSegmentIndex(new Uint8Array(e.data));
                    i &&
                      ((e = i.references),
                      (r = t.levelDetails),
                      e.forEach(function (e, t) {
                        e = e.info;
                        !r ||
                          (0 === (t = r.fragments[t]).byteRange.length &&
                            t.setByteRange(
                              String(1 + e.end - e.start) +
                                "@" +
                                String(e.start)
                            ));
                      }),
                      r &&
                        r.initSegment.setByteRange(
                          String(i.moovEndOffset) + "@0"
                        ));
                  }),
                  (r._handleManifestParsingError = function (e, t, r, i) {
                    this.hls.trigger(E.a.ERROR, {
                      type: m.b.NETWORK_ERROR,
                      details: m.a.MANIFEST_PARSING_ERROR,
                      fatal: !0,
                      url: e.url,
                      reason: r,
                      networkDetails: i,
                    });
                  }),
                  (r._handleNetworkError = function (e, t, r, i) {
                    var a, n;
                    void 0 === r && (r = !1),
                      void 0 === i && (i = null),
                      k.b.info(
                        "A network error occured while loading a " +
                          e.type +
                          "-type playlist"
                      );
                    var s = this.getInternalLoader(e);
                    switch (e.type) {
                      case g.MANIFEST:
                        (a = r
                          ? m.a.MANIFEST_LOAD_TIMEOUT
                          : m.a.MANIFEST_LOAD_ERROR),
                          (n = !0);
                        break;
                      case g.LEVEL:
                        (a = r ? m.a.LEVEL_LOAD_TIMEOUT : m.a.LEVEL_LOAD_ERROR),
                          (n = !1);
                        break;
                      case g.AUDIO_TRACK:
                        (a = r
                          ? m.a.AUDIO_TRACK_LOAD_TIMEOUT
                          : m.a.AUDIO_TRACK_LOAD_ERROR),
                          (n = !1);
                        break;
                      default:
                        n = !1;
                    }
                    s && (s.abort(), this.resetInternalLoader(e.type));
                    t = {
                      type: m.b.NETWORK_ERROR,
                      details: a,
                      fatal: n,
                      url: e.url,
                      loader: s,
                      context: e,
                      networkDetails: t,
                    };
                    i && (t.response = i), this.hls.trigger(E.a.ERROR, t);
                  }),
                  (r._handlePlaylistLoaded = function (e, t, r, i) {
                    var a = r.type,
                      n = r.level,
                      s = r.id,
                      o = r.levelDetails;
                    if (o && o.targetduration)
                      if (f.canHaveQualityLevels(r.type))
                        this.hls.trigger(E.a.LEVEL_LOADED, {
                          details: o,
                          level: n || 0,
                          id: s || 0,
                          stats: t,
                          networkDetails: i,
                        });
                      else
                        switch (a) {
                          case g.AUDIO_TRACK:
                            this.hls.trigger(E.a.AUDIO_TRACK_LOADED, {
                              details: o,
                              id: s,
                              stats: t,
                              networkDetails: i,
                            });
                            break;
                          case g.SUBTITLE_TRACK:
                            this.hls.trigger(E.a.SUBTITLE_TRACK_LOADED, {
                              details: o,
                              id: s,
                              stats: t,
                              networkDetails: i,
                            });
                        }
                    else
                      this._handleManifestParsingError(
                        e,
                        r,
                        "invalid target duration",
                        i
                      );
                  }),
                  f
                );
              })(o),
              G = (function (i) {
                var e;
                function t(e) {
                  return (
                    ((e = i.call(this, e, E.a.FRAG_LOADING) || this).loaders =
                      {}),
                    e
                  );
                }
                (r = i),
                  ((e = t).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r);
                var r = t.prototype;
                return (
                  (r.destroy = function () {
                    var e,
                      t = this.loaders;
                    for (e in t) {
                      var r = t[e];
                      r && r.destroy();
                    }
                    (this.loaders = {}), i.prototype.destroy.call(this);
                  }),
                  (r.onFragLoading = function (e) {
                    var t = e.frag,
                      r = t.type,
                      i = this.loaders,
                      a = this.hls.config,
                      n = a.fLoader,
                      s = a.loader;
                    t.loaded = 0;
                    e = i[r];
                    e &&
                      (k.b.warn(
                        "abort previous fragment loader for type: " + r
                      ),
                      e.abort()),
                      (e = i[r] = t.loader = new (a.fLoader ? n : s)(a)),
                      (n = {
                        url: t.url,
                        frag: t,
                        responseType: "arraybuffer",
                        progressData: !1,
                      });
                    var s = t.byteRangeStartOffset,
                      t = t.byteRangeEndOffset;
                    Object(A.a)(s) &&
                      Object(A.a)(t) &&
                      ((n.rangeStart = s), (n.rangeEnd = t)),
                      (t = {
                        timeout: a.fragLoadingTimeOut,
                        maxRetry: 0,
                        retryDelay: 0,
                        maxRetryDelay: a.fragLoadingMaxRetryTimeout,
                      }),
                      (a = {
                        onSuccess: this.loadsuccess.bind(this),
                        onError: this.loaderror.bind(this),
                        onTimeout: this.loadtimeout.bind(this),
                        onProgress: this.loadprogress.bind(this),
                      }),
                      e.load(n, t, a);
                  }),
                  (r.loadsuccess = function (e, t, r, i) {
                    void 0 === i && (i = null);
                    (e = e.data), (r = r.frag);
                    (r.loader = void 0),
                      (this.loaders[r.type] = void 0),
                      this.hls.trigger(E.a.FRAG_LOADED, {
                        payload: e,
                        frag: r,
                        stats: t,
                        networkDetails: i,
                      });
                  }),
                  (r.loaderror = function (e, t, r) {
                    void 0 === r && (r = null);
                    var i = t.frag,
                      a = i.loader;
                    a && a.abort(),
                      (this.loaders[i.type] = void 0),
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.NETWORK_ERROR,
                        details: m.a.FRAG_LOAD_ERROR,
                        fatal: !1,
                        frag: t.frag,
                        response: e,
                        networkDetails: r,
                      });
                  }),
                  (r.loadtimeout = function (e, t, r) {
                    void 0 === r && (r = null);
                    var i = t.frag,
                      a = i.loader;
                    a && a.abort(),
                      (this.loaders[i.type] = void 0),
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.NETWORK_ERROR,
                        details: m.a.FRAG_LOAD_TIMEOUT,
                        fatal: !1,
                        frag: t.frag,
                        networkDetails: r,
                      });
                  }),
                  (r.loadprogress = function (e, t, r, i) {
                    void 0 === i && (i = null);
                    t = t.frag;
                    (t.loaded = e.loaded),
                      this.hls.trigger(E.a.FRAG_LOAD_PROGRESS, {
                        frag: t,
                        stats: e,
                        networkDetails: i,
                      });
                  }),
                  t
                );
              })(o),
              K = (function (r) {
                var e;
                function t(e) {
                  return (
                    ((e = r.call(this, e, E.a.KEY_LOADING) || this).loaders =
                      {}),
                    (e.decryptkey = null),
                    (e.decrypturl = null),
                    e
                  );
                }
                (i = r),
                  ((e = t).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = t.prototype;
                return (
                  (i.destroy = function () {
                    for (var e in this.loaders) {
                      var t = this.loaders[e];
                      t && t.destroy();
                    }
                    (this.loaders = {}), r.prototype.destroy.call(this);
                  }),
                  (i.onKeyLoading = function (e) {
                    var t,
                      r = e.frag,
                      i = r.type,
                      a = this.loaders[i];
                    r.decryptdata
                      ? (t = r.decryptdata.uri) !== this.decrypturl ||
                        null === this.decryptkey
                        ? ((e = this.hls.config),
                          a &&
                            (k.b.warn(
                              "abort previous key loader for type:" + i
                            ),
                            a.abort()),
                          t
                            ? ((r.loader = this.loaders[i] = new e.loader(e)),
                              (this.decrypturl = t),
                              (this.decryptkey = null),
                              (i = {
                                url: t,
                                frag: r,
                                responseType: "arraybuffer",
                              }),
                              (t = {
                                timeout: e.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: e.fragLoadingRetryDelay,
                                maxRetryDelay: e.fragLoadingMaxRetryTimeout,
                              }),
                              (e = {
                                onSuccess: this.loadsuccess.bind(this),
                                onError: this.loaderror.bind(this),
                                onTimeout: this.loadtimeout.bind(this),
                              }),
                              r.loader.load(i, t, e))
                            : k.b.warn("key uri is falsy"))
                        : this.decryptkey &&
                          ((r.decryptdata.key = this.decryptkey),
                          this.hls.trigger(E.a.KEY_LOADED, {
                            frag: r,
                          }))
                      : k.b.warn(
                          "Missing decryption data on fragment in onKeyLoading"
                        );
                  }),
                  (i.loadsuccess = function (e, t, r) {
                    r = r.frag;
                    r.decryptdata
                      ? ((this.decryptkey = r.decryptdata.key =
                          new Uint8Array(e.data)),
                        (r.loader = void 0),
                        delete this.loaders[r.type],
                        this.hls.trigger(E.a.KEY_LOADED, {
                          frag: r,
                        }))
                      : k.b.error("after key load, decryptdata unset");
                  }),
                  (i.loaderror = function (e, t) {
                    var r = t.frag,
                      t = r.loader;
                    t && t.abort(),
                      delete this.loaders[r.type],
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.NETWORK_ERROR,
                        details: m.a.KEY_LOAD_ERROR,
                        fatal: !1,
                        frag: r,
                        response: e,
                      });
                  }),
                  (i.loadtimeout = function (e, t) {
                    var r = t.frag,
                      t = r.loader;
                    t && t.abort(),
                      delete this.loaders[r.type],
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.NETWORK_ERROR,
                        details: m.a.KEY_LOAD_TIMEOUT,
                        fatal: !1,
                        frag: r,
                      });
                  }),
                  t
                );
              })(o),
              j = "NOT_LOADED",
              H = "APPENDING",
              V = "PARTIAL",
              Y = (function (r) {
                var e;
                function t(e) {
                  var t;
                  return (
                    ((t =
                      r.call(
                        this,
                        e,
                        E.a.BUFFER_APPENDED,
                        E.a.FRAG_BUFFERED,
                        E.a.FRAG_LOADED
                      ) || this).bufferPadding = 0.2),
                    (t.fragments = Object.create(null)),
                    (t.timeRanges = Object.create(null)),
                    (t.config = e.config),
                    t
                  );
                }
                (i = r),
                  ((e = t).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = t.prototype;
                return (
                  (i.destroy = function () {
                    (this.fragments = Object.create(null)),
                      (this.timeRanges = Object.create(null)),
                      (this.config = null),
                      o.prototype.destroy.call(this),
                      r.prototype.destroy.call(this);
                  }),
                  (i.getBufferedFrag = function (t, r) {
                    var i = this.fragments,
                      e = Object.keys(i).filter(function (e) {
                        e = i[e];
                        if (e.body.type !== r) return !1;
                        if (!e.buffered) return !1;
                        e = e.body;
                        return e.startPTS <= t && t <= e.endPTS;
                      });
                    if (0 === e.length) return null;
                    e = e.pop();
                    return i[e].body;
                  }),
                  (i.detectEvictedFragments = function (n, s) {
                    var o = this;
                    Object.keys(this.fragments).forEach(function (e) {
                      var t = o.fragments[e];
                      if (t && t.buffered) {
                        e = t.range[n];
                        if (e)
                          for (var r = e.time, i = 0; i < r.length; i++) {
                            var a = r[i];
                            if (!o.isTimeBuffered(a.startPTS, a.endPTS, s)) {
                              o.removeFragment(t.body);
                              break;
                            }
                          }
                      }
                    });
                  }),
                  (i.detectPartialFragments = function (r) {
                    var i = this,
                      e = this.getFragmentKey(r),
                      a = this.fragments[e];
                    a &&
                      ((a.buffered = !0),
                      Object.keys(this.timeRanges).forEach(function (e) {
                        var t;
                        r.hasElementaryStream(e) &&
                          ((t = i.timeRanges[e]),
                          (a.range[e] = i.getBufferedTimes(
                            r.startPTS,
                            r.endPTS,
                            t
                          )));
                      }));
                  }),
                  (i.getBufferedTimes = function (e, t, r) {
                    for (var i, a, n = [], s = !1, o = 0; o < r.length; o++) {
                      if (
                        ((i = r.start(o) - this.bufferPadding),
                        (a = r.end(o) + this.bufferPadding),
                        i <= e && t <= a)
                      ) {
                        n.push({
                          startPTS: Math.max(e, r.start(o)),
                          endPTS: Math.min(t, r.end(o)),
                        });
                        break;
                      }
                      if (e < a && i < t)
                        n.push({
                          startPTS: Math.max(e, r.start(o)),
                          endPTS: Math.min(t, r.end(o)),
                        }),
                          (s = !0);
                      else if (t <= i) break;
                    }
                    return {
                      time: n,
                      partial: s,
                    };
                  }),
                  (i.getFragmentKey = function (e) {
                    return e.type + "_" + e.level + "_" + e.urlId + "_" + e.sn;
                  }),
                  (i.getPartialFragment = function (t) {
                    var r,
                      i,
                      a = this,
                      n = null,
                      s = 0;
                    return (
                      Object.keys(this.fragments).forEach(function (e) {
                        e = a.fragments[e];
                        a.isPartial(e) &&
                          ((r = e.body.startPTS - a.bufferPadding),
                          (i = e.body.endPTS + a.bufferPadding),
                          r <= t &&
                            t <= i &&
                            ((i = Math.min(t - r, i - t)),
                            s <= i && ((n = e.body), (s = i))));
                      }),
                      n
                    );
                  }),
                  (i.getState = function (e) {
                    var t = this.getFragmentKey(e),
                      e = this.fragments[t],
                      t = j;
                    return (
                      void 0 !== e &&
                        (t = e.buffered
                          ? !0 === this.isPartial(e)
                            ? V
                            : "OK"
                          : H),
                      t
                    );
                  }),
                  (i.isPartial = function (e) {
                    return (
                      !0 === e.buffered &&
                      ((void 0 !== e.range.video &&
                        !0 === e.range.video.partial) ||
                        (void 0 !== e.range.audio &&
                          !0 === e.range.audio.partial))
                    );
                  }),
                  (i.isTimeBuffered = function (e, t, r) {
                    for (var i, a, n = 0; n < r.length; n++) {
                      if (
                        ((i = r.start(n) - this.bufferPadding),
                        (a = r.end(n) + this.bufferPadding),
                        i <= e && t <= a)
                      )
                        return !0;
                      if (t <= i) return !1;
                    }
                    return !1;
                  }),
                  (i.onFragLoaded = function (e) {
                    e = e.frag;
                    Object(A.a)(e.sn) &&
                      !e.bitrateTest &&
                      (this.fragments[this.getFragmentKey(e)] = {
                        body: e,
                        range: Object.create(null),
                        buffered: !1,
                      });
                  }),
                  (i.onBufferAppended = function (e) {
                    var r = this;
                    (this.timeRanges = e.timeRanges),
                      Object.keys(this.timeRanges).forEach(function (e) {
                        var t = r.timeRanges[e];
                        r.detectEvictedFragments(e, t);
                      });
                  }),
                  (i.onFragBuffered = function (e) {
                    this.detectPartialFragments(e.frag);
                  }),
                  (i.hasFragment = function (e) {
                    e = this.getFragmentKey(e);
                    return void 0 !== this.fragments[e];
                  }),
                  (i.removeFragment = function (e) {
                    e = this.getFragmentKey(e);
                    delete this.fragments[e];
                  }),
                  (i.removeAllFragments = function () {
                    this.fragments = Object.create(null);
                  }),
                  t
                );
              })(o),
              W = function (e, t) {
                for (var r, i, a = 0, n = e.length - 1; a <= n; ) {
                  var s = t((i = e[(r = ((a + n) / 2) | 0)]));
                  if (0 < s) a = 1 + r;
                  else {
                    if (!(s < 0)) return i;
                    n = r - 1;
                  }
                }
                return null;
              },
              q =
                (($.isBuffered = function (e, t) {
                  try {
                    if (e)
                      for (var r = e.buffered, i = 0; i < r.length; i++)
                        if (t >= r.start(i) && t <= r.end(i)) return !0;
                  } catch (e) {}
                  return !1;
                }),
                ($.bufferInfo = function (e, t, r) {
                  try {
                    if (e) {
                      for (var i = e.buffered, a = [], n = 0; n < i.length; n++)
                        a.push({
                          start: i.start(n),
                          end: i.end(n),
                        });
                      return this.bufferedInfo(a, t, r);
                    }
                  } catch (e) {}
                  return {
                    len: 0,
                    start: t,
                    end: t,
                    nextStart: void 0,
                  };
                }),
                ($.bufferedInfo = function (e, t, r) {
                  e.sort(function (e, t) {
                    return e.start - t.start || t.end - e.end;
                  });
                  var i = [];
                  if (r)
                    for (var a = 0; a < e.length; a++) {
                      var n,
                        s = i.length;
                      s
                        ? ((n = i[s - 1].end),
                          e[a].start - n < r
                            ? e[a].end > n && (i[s - 1].end = e[a].end)
                            : i.push(e[a]))
                        : i.push(e[a]);
                    }
                  else i = e;
                  for (var o, l = 0, d = t, u = t, c = 0; c < i.length; c++) {
                    var h = i[c].start,
                      f = i[c].end;
                    if (h <= t + r && t < f) (d = h), (l = (u = f) - t);
                    else if (t + r < h) {
                      o = h;
                      break;
                    }
                  }
                  return {
                    len: l,
                    start: d,
                    end: u,
                    nextStart: o,
                  };
                }),
                $),
              X = r(8),
              z = r(11),
              Q = r(9);
            function $() {}
            function J() {
              return window.MediaSource || window.WebKitMediaSource;
            }
            var Z,
              ee = r(5),
              te =
                ((Z = X.EventEmitter),
                (it = Z),
                ((tt = se).prototype = Object.create(it.prototype)),
                ((tt.prototype.constructor = tt).__proto__ = it),
                (se.prototype.trigger = function (e) {
                  for (
                    var t = arguments.length,
                      r = new Array(1 < t ? t - 1 : 0),
                      i = 1;
                    i < t;
                    i++
                  )
                    r[i - 1] = arguments[i];
                  this.emit.apply(this, [e, e].concat(r));
                }),
                se),
              re = Object(ee.a)(),
              ie = J() || {
                isTypeSupported: function () {
                  return !1;
                },
              },
              ae =
                (((t = ne.prototype).destroy = function () {
                  var e = this.w;
                  e
                    ? (e.removeEventListener("message", this.onwmsg),
                      e.terminate(),
                      (this.w = null))
                    : (t = this.demuxer) &&
                      (t.destroy(), (this.demuxer = null));
                  var t = this.observer;
                  t && (t.removeAllListeners(), (this.observer = null));
                }),
                (t.push = function (e, t, r, i, a, n, s, o) {
                  var l = this.w,
                    d = Object(A.a)(a.startPTS) ? a.startPTS : a.start,
                    u = a.decryptdata,
                    c = this.frag,
                    h = !(c && a.cc === c.cc),
                    f = !(c && a.level === c.level),
                    c = c && a.sn === c.sn + 1,
                    c = !f && c;
                  h && k.b.log(this.id + ":discontinuity detected"),
                    f && k.b.log(this.id + ":switch detected"),
                    (this.frag = a),
                    l
                      ? l.postMessage(
                          {
                            cmd: "demux",
                            data: e,
                            decryptdata: u,
                            initSegment: t,
                            audioCodec: r,
                            videoCodec: i,
                            timeOffset: d,
                            discontinuity: h,
                            trackSwitch: f,
                            contiguous: c,
                            duration: n,
                            accurateTimeOffset: s,
                            defaultInitPTS: o,
                          },
                          e instanceof ArrayBuffer ? [e] : []
                        )
                      : (l = this.demuxer) &&
                        l.push(e, u, t, r, i, d, h, f, c, n, s, o);
                }),
                (t.onWorkerMessage = function (e) {
                  var t = e.data,
                    r = this.hls;
                  switch (t.event) {
                    case "init":
                      re.URL.revokeObjectURL(this.w.objectURL);
                      break;
                    case E.a.FRAG_PARSING_DATA:
                      (t.data.data1 = new Uint8Array(t.data1)),
                        t.data2 && (t.data.data2 = new Uint8Array(t.data2));
                    default:
                      (t.data = t.data || {}),
                        (t.data.frag = this.frag),
                        (t.data.id = this.id),
                        r.trigger(t.event, t.data);
                  }
                }),
                ne);
            function ne(r, e) {
              var i = this;
              (this.hls = r), (this.id = e);
              function t(e, t) {
                ((t = t || {}).frag = i.frag), (t.id = i.id), r.trigger(e, t);
              }
              var a = (this.observer = new te()),
                n = r.config;
              a.on(E.a.FRAG_DECRYPTED, t),
                a.on(E.a.FRAG_PARSING_INIT_SEGMENT, t),
                a.on(E.a.FRAG_PARSING_DATA, t),
                a.on(E.a.FRAG_PARSED, t),
                a.on(E.a.ERROR, t),
                a.on(E.a.FRAG_PARSING_METADATA, t),
                a.on(E.a.FRAG_PARSING_USERDATA, t),
                a.on(E.a.INIT_PTS_FOUND, t);
              var s,
                o = {
                  mp4: ie.isTypeSupported("video/mp4"),
                  mpeg: ie.isTypeSupported("audio/mpeg"),
                  mp3: ie.isTypeSupported('audio/mp4; codecs="mp3"'),
                },
                l = navigator.vendor;
              if (n.enableWorker && "undefined" != typeof Worker) {
                k.b.log("demuxing in webworker");
                try {
                  (s = this.w = z(12)),
                    (this.onwmsg = this.onWorkerMessage.bind(this)),
                    s.addEventListener("message", this.onwmsg),
                    (s.onerror = function (e) {
                      r.trigger(E.a.ERROR, {
                        type: m.b.OTHER_ERROR,
                        details: m.a.INTERNAL_EXCEPTION,
                        fatal: !0,
                        event: "demuxerWorker",
                        err: {
                          message:
                            e.message +
                            " (" +
                            e.filename +
                            ":" +
                            e.lineno +
                            ")",
                        },
                      });
                    }),
                    s.postMessage({
                      cmd: "init",
                      typeSupported: o,
                      vendor: l,
                      id: e,
                      config: JSON.stringify(n),
                    });
                } catch (r) {
                  k.b.warn("Error in worker:", r),
                    k.b.error(
                      "Error while initializing DemuxerWorker, fallback on DemuxerInline"
                    ),
                    s && re.URL.revokeObjectURL(s.objectURL),
                    (this.demuxer = new Q.a(a, o, n, l)),
                    (this.w = void 0);
                }
              } else this.demuxer = new Q.a(a, o, n, l);
            }
            function se() {
              return Z.apply(this, arguments) || this;
            }
            function oe(e, t, r) {
              switch (t) {
                case "audio":
                  e.audioGroupIds || (e.audioGroupIds = []),
                    e.audioGroupIds.push(r);
                  break;
                case "text":
                  e.textGroupIds || (e.textGroupIds = []),
                    e.textGroupIds.push(r);
              }
            }
            function le(e, t, r) {
              var i = e[t],
                a = e[r],
                e = a.startPTS;
              Object(A.a)(e)
                ? t < r
                  ? ((i.duration = e - i.start),
                    i.duration < 0 &&
                      k.b.warn(
                        "negative duration computed for frag " +
                          i.sn +
                          ",level " +
                          i.level +
                          ", there should be some duration drift between playlist and fragment!"
                      ))
                  : ((a.duration = i.start - e),
                    a.duration < 0 &&
                      k.b.warn(
                        "negative duration computed for frag " +
                          a.sn +
                          ",level " +
                          a.level +
                          ", there should be some duration drift between playlist and fragment!"
                      ))
                : t < r
                ? ((r = i.cc === a.cc),
                  (a.start =
                    i.start +
                    (r && i.minEndPTS ? i.minEndPTS - i.start : i.duration)))
                : (a.start = Math.max(i.start - a.duration, 0));
            }
            function de(e, t, r, i, a, n) {
              var s = r,
                o = i;
              Object(A.a)(t.startPTS) &&
                ((l = Math.abs(t.startPTS - r)),
                Object(A.a)(t.deltaPTS)
                  ? (t.deltaPTS = Math.max(l, t.deltaPTS))
                  : (t.deltaPTS = l),
                (s = Math.max(r, t.startPTS)),
                (r = Math.min(r, t.startPTS)),
                (o = Math.min(i, t.endPTS)),
                (i = Math.max(i, t.endPTS)),
                (a = Math.min(a, t.startDTS)),
                (n = Math.max(n, t.endDTS)));
              var l = r - t.start;
              (t.start = t.startPTS = r),
                (t.maxStartPTS = s),
                (t.endPTS = i),
                (t.minEndPTS = o),
                (t.startDTS = a),
                (t.endDTS = n),
                (t.duration = i - r);
              var d,
                u,
                r = t.sn;
              if (!e || r < e.startSN || r > e.endSN) return 0;
              for (
                r = r - e.startSN, (d = e.fragments)[r] = t, u = r;
                0 < u;
                u--
              )
                le(d, u, u - 1);
              for (u = r; u < d.length - 1; u++) le(d, u, u + 1);
              return (e.PTSKnown = !0), l;
            }
            function ue(a, n) {
              n.initSegment && a.initSegment && (n.initSegment = a.initSegment);
              var r,
                i = 0;
              if (
                (ce(a, n, function (e, t) {
                  (i = e.cc - t.cc),
                    Object(A.a)(e.startPTS) &&
                      ((t.start = t.startPTS = e.startPTS),
                      (t.endPTS = e.endPTS),
                      (t.duration = e.duration),
                      (t.backtracked = e.backtracked),
                      (t.dropped = e.dropped),
                      (r = t)),
                    (n.PTSKnown = !0);
                }),
                n.PTSKnown)
              ) {
                if (i) {
                  k.b.log(
                    "discontinuity sliding from playlist, take drift into account"
                  );
                  for (var e = n.fragments, t = 0; t < e.length; t++)
                    e[t].cc += i;
                }
                r
                  ? de(n, r, r.startPTS, r.endPTS, r.startDTS, r.endDTS)
                  : (function () {
                      var e = n.startSN - a.startSN,
                        t = a.fragments,
                        r = n.fragments;
                      if (!(e < 0 || e > t.length))
                        for (var i = 0; i < r.length; i++)
                          r[i].start += t[e].start;
                    })(),
                  (n.PTSKnown = a.PTSKnown);
              }
            }
            function ce(e, t, r) {
              if (e && t)
                for (
                  var i = Math.max(e.startSN, t.startSN) - t.startSN,
                    a = Math.min(e.endSN, t.endSN) - t.startSN,
                    n = t.startSN - e.startSN,
                    s = i;
                  s <= a;
                  s++
                ) {
                  var o = e.fragments[n + s],
                    l = t.fragments[s];
                  if (!o || !l) break;
                  r(o, l, s);
                }
            }
            function he(e, t, r) {
              var i = 1e3 * (t.averagetargetduration || t.targetduration),
                a = i / 2;
              return (
                e && t.endSN === e.endSN && (i = a),
                r && (i = Math.max(a, i - (window.performance.now() - r))),
                Math.round(i)
              );
            }
            var fe = function (e) {
              for (var t = "", r = e.length, i = 0; i < r; i++)
                t +=
                  "[" + e.start(i).toFixed(3) + "," + e.end(i).toFixed(3) + "]";
              return t;
            };
            function ge(r, e) {
              e.fragments.forEach(function (e) {
                var t;
                e &&
                  ((t = e.start + r),
                  (e.start = e.startPTS = t),
                  (e.endPTS = t + e.duration));
              }),
                (e.PTSKnown = !0);
            }
            function pe(e, t, r) {
              var i, a, n, s;
              (i = e),
                (a = r),
                (s = !1),
                (e = t) &&
                  e.details &&
                  a &&
                  (a.endCC > a.startCC || (i && i.cc < a.startCC)) &&
                  (s = !0),
                s &&
                  (n = (function (e) {
                    var t = e.fragments,
                      e = a.fragments;
                    if (e.length && t.length) {
                      e = (function (e, t) {
                        for (var r = null, i = 0; i < e.length; i += 1) {
                          var a = e[i];
                          if (a && a.cc === t) {
                            r = a;
                            break;
                          }
                        }
                        return r;
                      })(t, e[0].cc);
                      if (e && (!e || e.startPTS)) return e;
                      k.b.log("No frag in previous level to align on");
                    } else k.b.log("No fragments to align");
                  })(e.details)) &&
                  (k.b.log(
                    "Adjusting PTS using last level due to CC increase within current level"
                  ),
                  ge(n.start, a)),
                !r.PTSKnown &&
                  t &&
                  ((n = r),
                  (r = t.details) &&
                    r.fragments.length &&
                    n.hasProgramDateTime &&
                    r.hasProgramDateTime &&
                    ((t = r.fragments[0].programDateTime),
                    (r =
                      (n.fragments[0].programDateTime - t) / 1e3 +
                      r.fragments[0].start),
                    Object(A.a)(r) &&
                      (k.b.log(
                        "adjusting PTS using programDateTime delta, sliding:" +
                          r.toFixed(3)
                      ),
                      ge(r, n))));
            }
            function me(e, t, r) {
              if (
                null === t ||
                !Array.isArray(e) ||
                !e.length ||
                !Object(A.a)(t)
              )
                return null;
              if (t < (e[0].programDateTime || 0)) return null;
              if (t >= (e[e.length - 1].endProgramDateTime || 0)) return null;
              r = r || 0;
              for (var i = 0; i < e.length; ++i) {
                var a = e[i];
                if (
                  (function (e, t, r) {
                    t = 1e3 * Math.min(t, r.duration + (r.deltaPTS || 0));
                    return (r.endProgramDateTime || 0) - t > e;
                  })(t, r, a)
                )
                  return a;
              }
              return null;
            }
            function ve(e, t, r, i) {
              void 0 === r && (r = 0), void 0 === i && (i = 0);
              var a = null;
              return (
                e
                  ? (a = t[e.sn - t[0].sn + 1])
                  : 0 === r && 0 === t[0].start && (a = t[0]),
                ((!a || 0 !== ye(r, i, a)) && W(t, ye.bind(null, r, i))) || a
              );
            }
            function ye(e, t, r) {
              void 0 === e && (e = 0), void 0 === t && (t = 0);
              t = Math.min(t, r.duration + (r.deltaPTS || 0));
              return r.start + r.duration - t <= e
                ? 1
                : r.start - t > e && r.start
                ? -1
                : 0;
            }
            var be =
              (((st = Te.prototype).poll = function (e) {
                var t = this.config,
                  r = this.media,
                  i = this.stalled,
                  a = r.currentTime,
                  n = r.seeking,
                  s = this.seeking && !n,
                  o = !this.seeking && n;
                if (((this.seeking = n), a === e)) {
                  if (
                    ((o || s) && (this.stalled = null),
                    !r.paused &&
                      !r.ended &&
                      0 !== r.playbackRate &&
                      r.buffered.length)
                  ) {
                    var l = q.bufferInfo(r, a, 0),
                      e = 0 < l.len,
                      o = l.nextStart || 0;
                    if (e || o) {
                      if (n) {
                        (s = 2 < l.len),
                          (e =
                            !o ||
                            (2 < o - a &&
                              !this.fragmentTracker.getPartialFragment(a)));
                        if (s || e) return;
                        this.moved = !1;
                      }
                      if (!this.moved && this.stalled) {
                        var d = Math.max(o, l.start || 0) - a;
                        if (0 < d && d <= 2)
                          return void this._trySkipBufferHole(null);
                      }
                      o = self.performance.now();
                      null !== i
                        ? ((d = o - i),
                          !n && 250 <= d && this._reportStall(l.len),
                          (t = q.bufferInfo(r, a, t.maxBufferHole)),
                          this._tryFixBufferStall(t, d))
                        : (this.stalled = o);
                    }
                  }
                } else
                  (this.moved = !0),
                    null !== i &&
                      (this.stallReported &&
                        ((i = self.performance.now() - i),
                        k.b.warn(
                          "playback not stuck anymore @" +
                            a +
                            ", after " +
                            Math.round(i) +
                            "ms"
                        ),
                        (this.stallReported = !1)),
                      (this.stalled = null),
                      (this.nudgeRetry = 0));
              }),
              (st._tryFixBufferStall = function (e, t) {
                var r = this.config,
                  i = this.fragmentTracker,
                  a = this.media.currentTime,
                  a = i.getPartialFragment(a);
                (a && this._trySkipBufferHole(a)) ||
                  (e.len > r.maxBufferHole &&
                    t > 1e3 * r.highBufferWatchdogPeriod &&
                    (k.b.warn("Trying to nudge playhead over buffer-hole"),
                    (this.stalled = null),
                    this._tryNudgeBuffer()));
              }),
              (st._reportStall = function (e) {
                var t = this.hls,
                  r = this.media;
                this.stallReported ||
                  ((this.stallReported = !0),
                  k.b.warn(
                    "Playback stalling at @" +
                      r.currentTime +
                      " due to low buffer (buffer=" +
                      e +
                      ")"
                  ),
                  t.trigger(E.a.ERROR, {
                    type: m.b.MEDIA_ERROR,
                    details: m.a.BUFFER_STALLED_ERROR,
                    fatal: !1,
                    buffer: e,
                  }));
              }),
              (st._trySkipBufferHole = function (e) {
                for (
                  var t = this.config,
                    r = this.hls,
                    i = this.media,
                    a = i.currentTime,
                    n = 0,
                    s = 0;
                  s < i.buffered.length;
                  s++
                ) {
                  var o = i.buffered.start(s);
                  if (a + t.maxBufferHole >= n && a < o) {
                    o = Math.max(o + 0.05, i.currentTime + 0.1);
                    return (
                      k.b.warn(
                        "skipping hole, adjusting currentTime from " +
                          a +
                          " to " +
                          o
                      ),
                      (this.moved = !0),
                      (this.stalled = null),
                      (i.currentTime = o),
                      e &&
                        r.trigger(E.a.ERROR, {
                          type: m.b.MEDIA_ERROR,
                          details: m.a.BUFFER_SEEK_OVER_HOLE,
                          fatal: !1,
                          reason:
                            "fragment loaded with buffer holes, seeking from " +
                            a +
                            " to " +
                            o,
                          frag: e,
                        }),
                      o
                    );
                  }
                  n = i.buffered.end(s);
                }
                return 0;
              }),
              (st._tryNudgeBuffer = function () {
                var e = this.config,
                  t = this.hls,
                  r = this.media,
                  i = r.currentTime,
                  a = (this.nudgeRetry || 0) + 1;
                (this.nudgeRetry = a) < e.nudgeMaxRetry
                  ? ((a = i + a * e.nudgeOffset),
                    k.b.warn("Nudging 'currentTime' from " + i + " to " + a),
                    (r.currentTime = a),
                    t.trigger(E.a.ERROR, {
                      type: m.b.MEDIA_ERROR,
                      details: m.a.BUFFER_NUDGE_ON_STALL,
                      fatal: !1,
                    }))
                  : (k.b.error(
                      "Playhead still not moving while enough data buffered @" +
                        i +
                        " after " +
                        e.nudgeMaxRetry +
                        " nudges"
                    ),
                    t.trigger(E.a.ERROR, {
                      type: m.b.MEDIA_ERROR,
                      details: m.a.BUFFER_STALLED_ERROR,
                      fatal: !0,
                    }));
              }),
              Te);
            function Te(e, t, r, i) {
              (this.config = e),
                (this.media = t),
                (this.fragmentTracker = r),
                (this.hls = i),
                (this.nudgeRetry = 0),
                (this.stallReported = !1),
                (this.stalled = null),
                (this.moved = !1),
                (this.seeking = !1);
            }
            var Ee = (function (a) {
                var e;
                function t(e) {
                  for (
                    var t = arguments.length,
                      r = new Array(1 < t ? t - 1 : 0),
                      i = 1;
                    i < t;
                    i++
                  )
                    r[i - 1] = arguments[i];
                  return (
                    ((e =
                      a.call.apply(a, [this, e].concat(r)) || this)._boundTick =
                      void 0),
                    (e._tickTimer = null),
                    (e._tickInterval = null),
                    (e._tickCallCount = 0),
                    (e._boundTick = e.tick.bind(
                      (function (e) {
                        if (void 0 === e)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return e;
                      })(e)
                    )),
                    e
                  );
                }
                (r = a),
                  ((e = t).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r);
                var r = t.prototype;
                return (
                  (r.onHandlerDestroying = function () {
                    this.clearNextTick(), this.clearInterval();
                  }),
                  (r.hasInterval = function () {
                    return !!this._tickInterval;
                  }),
                  (r.hasNextTick = function () {
                    return !!this._tickTimer;
                  }),
                  (r.setInterval = function (e) {
                    return (
                      !this._tickInterval &&
                      ((this._tickInterval = self.setInterval(
                        this._boundTick,
                        e
                      )),
                      !0)
                    );
                  }),
                  (r.clearInterval = function () {
                    return (
                      !!this._tickInterval &&
                      (self.clearInterval(this._tickInterval),
                      !(this._tickInterval = null))
                    );
                  }),
                  (r.clearNextTick = function () {
                    return (
                      !!this._tickTimer &&
                      (self.clearTimeout(this._tickTimer),
                      !(this._tickTimer = null))
                    );
                  }),
                  (r.tick = function () {
                    this._tickCallCount++,
                      1 === this._tickCallCount &&
                        (this.doTick(),
                        1 < this._tickCallCount &&
                          (this.clearNextTick(),
                          (this._tickTimer = self.setTimeout(
                            this._boundTick,
                            0
                          ))),
                        (this._tickCallCount = 0));
                  }),
                  (r.doTick = function () {}),
                  t
                );
              })(o),
              Se = "STOPPED",
              _e = "STARTING",
              Re = "IDLE",
              Ae = "KEY_LOADING",
              ke = "FRAG_LOADING",
              we = "FRAG_LOADING_WAITING_RETRY",
              Le = "WAITING_TRACK",
              De = "PARSING",
              Oe = "PARSED",
              Ce = "BUFFER_FLUSHING",
              Ie = "ENDED",
              Pe = "ERROR",
              xe = "WAITING_INIT_PTS",
              Me = "WAITING_LEVEL",
              Fe = (function (e) {
                var t;
                function r() {
                  return e.apply(this, arguments) || this;
                }
                (i = e),
                  ((t = r).prototype = Object.create(i.prototype)),
                  ((t.prototype.constructor = t).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.doTick = function () {}),
                  (i.startLoad = function () {}),
                  (i.stopLoad = function () {
                    var e = this.fragCurrent;
                    e &&
                      (e.loader && e.loader.abort(),
                      this.fragmentTracker.removeFragment(e)),
                      this.demuxer &&
                        (this.demuxer.destroy(), (this.demuxer = null)),
                      (this.fragCurrent = null),
                      (this.fragPrevious = null),
                      this.clearInterval(),
                      this.clearNextTick(),
                      (this.state = Se);
                  }),
                  (i._streamEnded = function (e, t) {
                    var r = this.fragCurrent,
                      i = this.fragmentTracker;
                    if (
                      t.live ||
                      !r ||
                      r.backtracked ||
                      r.sn !== t.endSN ||
                      e.nextStart
                    )
                      return !1;
                    r = i.getState(r);
                    return r === V || "OK" === r;
                  }),
                  (i.onMediaSeeking = function () {
                    var e,
                      t = this.config,
                      r = this.media,
                      i = this.mediaBuffer,
                      a = this.state,
                      n = r ? r.currentTime : null,
                      s = q.bufferInfo(i || r, n, this.config.maxBufferHole);
                    k.b.log(
                      "media seeking to " + (Object(A.a)(n) ? n.toFixed(3) : n)
                    ),
                      a === ke
                        ? ((e = this.fragCurrent),
                          0 === s.len &&
                            e &&
                            ((i = t.maxFragLookUpTolerance),
                            (t = e.start - i),
                            (i = e.start + e.duration + i),
                            n < t || i < n
                              ? (e.loader &&
                                  (k.b.log(
                                    "seeking outside of buffer while fragment load in progress, cancel fragment load"
                                  ),
                                  e.loader.abort()),
                                (this.fragCurrent = null),
                                (this.fragPrevious = null),
                                (this.state = Re))
                              : k.b.log(
                                  "seeking outside of buffer but within currently loaded fragment range"
                                )))
                        : a === Ie &&
                          (0 === s.len &&
                            ((this.fragPrevious = null),
                            (this.fragCurrent = null)),
                          (this.state = Re)),
                      r && (this.lastCurrentTime = n),
                      this.loadedmetadata ||
                        (this.nextLoadPosition = this.startPosition = n),
                      this.tick();
                  }),
                  (i.onMediaEnded = function () {
                    this.startPosition = this.lastCurrentTime = 0;
                  }),
                  (i.onHandlerDestroying = function () {
                    this.stopLoad(), e.prototype.onHandlerDestroying.call(this);
                  }),
                  (i.onHandlerDestroyed = function () {
                    (this.state = Se), (this.fragmentTracker = null);
                  }),
                  (i.computeLivePosition = function (e, t) {
                    var r =
                      void 0 !== this.config.liveSyncDuration
                        ? this.config.liveSyncDuration
                        : this.config.liveSyncDurationCount * t.targetduration;
                    return e + Math.max(0, t.totalduration - r);
                  }),
                  r
                );
              })(Ee);
            function Ue(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var Ne,
              Be = (function (i) {
                var e;
                function t(e, t) {
                  var r;
                  return (
                    ((r =
                      i.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHED,
                        E.a.MEDIA_DETACHING,
                        E.a.MANIFEST_LOADING,
                        E.a.MANIFEST_PARSED,
                        E.a.LEVEL_LOADED,
                        E.a.LEVELS_UPDATED,
                        E.a.KEY_LOADED,
                        E.a.FRAG_LOADED,
                        E.a.FRAG_LOAD_EMERGENCY_ABORTED,
                        E.a.FRAG_PARSING_INIT_SEGMENT,
                        E.a.FRAG_PARSING_DATA,
                        E.a.FRAG_PARSED,
                        E.a.ERROR,
                        E.a.AUDIO_TRACK_SWITCHING,
                        E.a.AUDIO_TRACK_SWITCHED,
                        E.a.BUFFER_CREATED,
                        E.a.BUFFER_APPENDED,
                        E.a.BUFFER_FLUSHED
                      ) || this).fragmentTracker = t),
                    (r.config = e.config),
                    (r.audioCodecSwap = !1),
                    (r._state = Se),
                    (r.stallReported = !1),
                    (r.gapController = null),
                    (r.altAudio = !1),
                    (r.audioOnly = !1),
                    (r.bitrateTest = !1),
                    r
                  );
                }
                (r = i),
                  ((e = t).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r);
                var r = t.prototype;
                return (
                  (r.startLoad = function (e) {
                    var t, r, i;
                    this.levels
                      ? ((t = this.lastCurrentTime),
                        (r = this.hls),
                        this.stopLoad(),
                        this.setInterval(100),
                        (this.level = -1),
                        (this.fragLoadError = 0),
                        this.startFragRequested ||
                          (-1 === (i = r.startLevel) &&
                            (r.config.testBandwidth
                              ? ((i = 0), (this.bitrateTest = !0))
                              : (i = r.nextAutoLevel)),
                          (this.level = r.nextLoadLevel = i),
                          (this.loadedmetadata = !1)),
                        0 < t &&
                          -1 === e &&
                          (k.b.log(
                            "override startPosition with lastCurrentTime @" +
                              t.toFixed(3)
                          ),
                          (e = t)),
                        (this.state = Re),
                        (this.nextLoadPosition =
                          this.startPosition =
                          this.lastCurrentTime =
                            e),
                        this.tick())
                      : ((this.forceStartLoad = !0), (this.state = Se));
                  }),
                  (r.stopLoad = function () {
                    (this.forceStartLoad = !1), i.prototype.stopLoad.call(this);
                  }),
                  (r.doTick = function () {
                    switch (this.state) {
                      case Ce:
                        this.fragLoadError = 0;
                        break;
                      case Re:
                        this._doTickIdle();
                        break;
                      case Me:
                        var e = this.levels[this.level];
                        e && e.details && (this.state = Re);
                        break;
                      case we:
                        var t = window.performance.now(),
                          e = this.retryDate;
                        (!e || e <= t || (this.media && this.media.seeking)) &&
                          (k.b.log(
                            "mediaController: retryDate reached, switch back to IDLE state"
                          ),
                          (this.state = Re));
                    }
                    this._checkBuffer(), this._checkFragmentChanged();
                  }),
                  (r._doTickIdle = function () {
                    var e = this.hls,
                      t = e.config,
                      r = this.media;
                    if (
                      void 0 !== this.levelLastLoaded &&
                      (r || (!this.startFragRequested && t.startFragPrefetch))
                    )
                      if (this.altAudio && this.audioOnly)
                        this.demuxer.frag = null;
                      else {
                        var i = this.loadedmetadata
                            ? r.currentTime
                            : this.nextLoadPosition,
                          a = e.nextLoadLevel,
                          n = this.levels[a];
                        if (n) {
                          var s = n.bitrate,
                            s = s
                              ? Math.max(
                                  (8 * t.maxBufferSize) / s,
                                  t.maxBufferLength
                                )
                              : t.maxBufferLength;
                          s = Math.min(s, t.maxMaxBufferLength);
                          (t =
                            i < t.maxBufferHole
                              ? Math.max(2, t.maxBufferHole)
                              : t.maxBufferHole),
                            (r = q.bufferInfo(this.mediaBuffer || r, i, t)),
                            (t = r.len);
                          if (!(s <= t)) {
                            k.b.trace(
                              "buffer length of " +
                                t.toFixed(3) +
                                " is below max of " +
                                s.toFixed(3) +
                                ". checking for more payload ..."
                            ),
                              (this.level = e.nextLoadLevel = a);
                            n = n.details;
                            if (!n || (n.live && this.levelLastLoaded !== a))
                              this.state = Me;
                            else {
                              if (this._streamEnded(r, n)) {
                                a = {};
                                return (
                                  this.altAudio && (a.type = "video"),
                                  this.hls.trigger(E.a.BUFFER_EOS, a),
                                  void (this.state = Ie)
                                );
                              }
                              this._fetchPayloadOrEos(i, r, n);
                            }
                          }
                        }
                      }
                  }),
                  (r._fetchPayloadOrEos = function (e, t, r) {
                    var i = this.fragPrevious,
                      a = (this.level, r.fragments),
                      n = a.length;
                    if (0 !== n) {
                      var s,
                        o = a[0].start,
                        l = a[n - 1].start + a[n - 1].duration,
                        d = t.end;
                      if (r.initSegment && !r.initSegment.data)
                        s = r.initSegment;
                      else if (r.live) {
                        t = this.config.initialLiveManifestSize;
                        if (n < t)
                          return void k.b.warn(
                            "Can not start playback of a level, reason: not enough fragments " +
                              n +
                              " < " +
                              t
                          );
                        if (
                          null ===
                          (s = this._ensureFragmentAtLivePoint(
                            r,
                            d,
                            o,
                            l,
                            i,
                            a
                          ))
                        )
                          return;
                      } else d < o && (s = a[0]);
                      (s = s || this._findFragment(o, i, n, a, d, l, r)) &&
                        (s.encrypted
                          ? this._loadKey(s, r)
                          : this._loadFragment(s, r, e, d));
                    }
                  }),
                  (r._ensureFragmentAtLivePoint = function (e, t, r, i, a, n) {
                    var s,
                      o = this.hls.config,
                      l = this.media,
                      d = 1 / 0;
                    return (
                      void 0 !== o.liveMaxLatencyDuration
                        ? (d = o.liveMaxLatencyDuration)
                        : Object(A.a)(o.liveMaxLatencyDurationCount) &&
                          (d =
                            o.liveMaxLatencyDurationCount * e.targetduration),
                      t < Math.max(r - o.maxFragLookUpTolerance, i - d) &&
                        ((t =
                          r =
                          this.liveSyncPosition =
                            this.computeLivePosition(r, e)),
                        l &&
                          !l.paused &&
                          l.readyState &&
                          l.duration > r &&
                          r > l.currentTime &&
                          (k.b.log(
                            "buffer end: " +
                              t.toFixed(3) +
                              " is located too far from the end of live sliding playlist, reset currentTime to : " +
                              r.toFixed(3)
                          ),
                          (l.currentTime = r)),
                        (this.nextLoadPosition = r)),
                      e.PTSKnown && i < t && l && l.readyState
                        ? null
                        : (this.startFragRequested &&
                            !e.PTSKnown &&
                            a &&
                            (e.hasProgramDateTime
                              ? (k.b.log(
                                  "live playlist, switching playlist, load frag with same PDT: " +
                                    a.programDateTime
                                ),
                                (s = me(
                                  n,
                                  a.endProgramDateTime,
                                  o.maxFragLookUpTolerance
                                )))
                              : ((o = a.sn + 1) >= e.startSN &&
                                  o <= e.endSN &&
                                  ((e = n[o - e.startSN]),
                                  a.cc === e.cc &&
                                    ((s = e),
                                    k.b.log(
                                      "live playlist, switching playlist, load frag with next SN: " +
                                        s.sn
                                    ))),
                                s ||
                                  ((s = W(n, function (e) {
                                    return a.cc - e.cc;
                                  })) &&
                                    k.b.log(
                                      "live playlist, switching playlist, load frag with same CC: " +
                                        s.sn
                                    )))),
                          s)
                    );
                  }),
                  (r._findFragment = function (e, t, r, i, a, n, s) {
                    var o = this.hls.config,
                      l =
                        a < n
                          ? ve(
                              t,
                              i,
                              a,
                              a > n - o.maxFragLookUpTolerance
                                ? 0
                                : o.maxFragLookUpTolerance
                            )
                          : i[r - 1];
                    return (
                      l &&
                        ((a = l.sn - s.startSN),
                        (n = t && l.level === t.level),
                        (r = i[a - 1]),
                        (i = i[1 + a]),
                        t &&
                          l.sn === t.sn &&
                          (n && !l.backtracked
                            ? l.sn < s.endSN
                              ? (s = t.deltaPTS) &&
                                s > o.maxBufferHole &&
                                t.dropped &&
                                a
                                ? ((l = r),
                                  k.b.warn(
                                    "Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this"
                                  ))
                                : ((l = i),
                                  "OK" !== this.fragmentTracker.getState(l) &&
                                    k.b.log(
                                      "Re-loading fragment with SN: " + l.sn
                                    ))
                              : (l = null)
                            : l.backtracked &&
                              (i && i.backtracked
                                ? (k.b.warn(
                                    "Already backtracked from fragment " +
                                      i.sn +
                                      ", will not backtrack to fragment " +
                                      l.sn +
                                      ". Loading fragment " +
                                      i.sn
                                  ),
                                  (l = i))
                                : (k.b.warn(
                                    "Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"
                                  ),
                                  (l.dropped = 0),
                                  r
                                    ? ((l = r).backtracked = !0)
                                    : a && (l = null))))),
                      l
                    );
                  }),
                  (r._loadKey = function (e, t) {
                    k.b.log(
                      "Loading key for " +
                        e.sn +
                        " of [" +
                        t.startSN +
                        "-" +
                        t.endSN +
                        "], level " +
                        this.level
                    ),
                      (this.state = Ae),
                      this.hls.trigger(E.a.KEY_LOADING, {
                        frag: e,
                      });
                  }),
                  (r._loadFragment = function (e, t, r, i) {
                    var a = this.fragmentTracker.getState(e);
                    "initSegment" !== (this.fragCurrent = e).sn &&
                      (this.startFragRequested = !0),
                      Object(A.a)(e.sn) &&
                        !e.bitrateTest &&
                        (this.nextLoadPosition = e.start + e.duration),
                      e.backtracked || a === j || a === V
                        ? ((e.autoLevel = this.hls.autoLevelEnabled),
                          (e.bitrateTest = this.bitrateTest),
                          k.b.log(
                            "Loading " +
                              e.sn +
                              " of [" +
                              t.startSN +
                              "-" +
                              t.endSN +
                              "], level " +
                              this.level +
                              ", " +
                              (this.loadedmetadata
                                ? "currentTime"
                                : "nextLoadPosition") +
                              ": " +
                              parseFloat(r.toFixed(3)) +
                              ", bufferEnd: " +
                              parseFloat(i.toFixed(3))
                          ),
                          this.hls.trigger(E.a.FRAG_LOADING, {
                            frag: e,
                          }),
                          this.demuxer ||
                            (this.demuxer = new ae(this.hls, "main")),
                          (this.state = ke))
                        : a === H &&
                          this._reduceMaxBufferLength(e.duration) &&
                          this.fragmentTracker.removeFragment(e);
                  }),
                  (r.getBufferedFrag = function (e) {
                    return this.fragmentTracker.getBufferedFrag(e, a.MAIN);
                  }),
                  (r.followingBufferedFrag = function (e) {
                    return e ? this.getBufferedFrag(e.endPTS + 0.5) : null;
                  }),
                  (r._checkFragmentChanged = function () {
                    var e,
                      t,
                      r = this.media;
                    r &&
                      r.readyState &&
                      !1 === r.seeking &&
                      ((e = r.currentTime) > this.lastCurrentTime &&
                        (this.lastCurrentTime = e),
                      q.isBuffered(r, e)
                        ? (t = this.getBufferedFrag(e))
                        : q.isBuffered(r, e + 0.1) &&
                          (t = this.getBufferedFrag(e + 0.1)),
                      t) &&
                      (e = t) !== this.fragPlaying &&
                      (this.hls.trigger(E.a.FRAG_CHANGED, {
                        frag: e,
                      }),
                      (t = e.level),
                      (this.fragPlaying && this.fragPlaying.level === t) ||
                        this.hls.trigger(E.a.LEVEL_SWITCHED, {
                          level: t,
                        }),
                      (this.fragPlaying = e));
                  }),
                  (r.immediateLevelSwitch = function () {
                    var e;
                    k.b.log("immediateLevelSwitch"),
                      this.immediateSwitch ||
                        ((this.immediateSwitch = !0),
                        (e = this.media)
                          ? (t = e.paused) || e.pause()
                          : (t = !0),
                        (this.previouslyPaused = t));
                    var t = this.fragCurrent;
                    t && t.loader && t.loader.abort(),
                      (this.fragCurrent = null),
                      this.flushMainBuffer(0, Number.POSITIVE_INFINITY);
                  }),
                  (r.immediateLevelSwitchEnd = function () {
                    var e = this.media;
                    e &&
                      e.buffered.length &&
                      ((this.immediateSwitch = !1),
                      0 < e.currentTime &&
                        q.isBuffered(e, e.currentTime) &&
                        (e.currentTime -= 1e-4),
                      this.previouslyPaused || e.play());
                  }),
                  (r.nextLevelSwitch = function () {
                    var e,
                      t,
                      r,
                      i = this.media;
                    i &&
                      i.readyState &&
                      ((e = this.getBufferedFrag(i.currentTime)) &&
                        1 < e.startPTS &&
                        this.flushMainBuffer(0, e.startPTS - 1),
                      (r = i.paused
                        ? 0
                        : ((t = this.hls.nextLoadLevel),
                          (r = this.levels[t]),
                          (t = this.fragLastKbps) && this.fragCurrent
                            ? (this.fragCurrent.duration * r.bitrate) /
                                (1e3 * t) +
                              1
                            : 0)),
                      !(t = this.getBufferedFrag(i.currentTime + r)) ||
                        ((i = this.followingBufferedFrag(t)) &&
                          ((r = this.fragCurrent) &&
                            r.loader &&
                            r.loader.abort(),
                          (this.fragCurrent = null),
                          (i = Math.max(
                            t.endPTS,
                            i.maxStartPTS +
                              Math.min(
                                this.config.maxFragLookUpTolerance,
                                i.duration
                              )
                          )),
                          this.flushMainBuffer(i, Number.POSITIVE_INFINITY))));
                  }),
                  (r.flushMainBuffer = function (e, t) {
                    this.state = Ce;
                    t = {
                      startOffset: e,
                      endOffset: t,
                    };
                    this.altAudio && (t.type = "video"),
                      this.hls.trigger(E.a.BUFFER_FLUSHING, t);
                  }),
                  (r.onMediaAttached = function (e) {
                    var t = (this.media = this.mediaBuffer = e.media);
                    (this.onvseeking = this.onMediaSeeking.bind(this)),
                      (this.onvseeked = this.onMediaSeeked.bind(this)),
                      (this.onvended = this.onMediaEnded.bind(this)),
                      t.addEventListener("seeking", this.onvseeking),
                      t.addEventListener("seeked", this.onvseeked),
                      t.addEventListener("ended", this.onvended);
                    e = this.config;
                    this.levels &&
                      e.autoStartLoad &&
                      this.hls.startLoad(e.startPosition),
                      (this.gapController = new be(
                        e,
                        t,
                        this.fragmentTracker,
                        this.hls
                      ));
                  }),
                  (r.onMediaDetaching = function () {
                    var e = this.media;
                    e &&
                      e.ended &&
                      (k.b.log(
                        "MSE detaching and video ended, reset startPosition"
                      ),
                      (this.startPosition = this.lastCurrentTime = 0));
                    var t = this.levels;
                    t &&
                      t.forEach(function (e) {
                        e.details &&
                          e.details.fragments.forEach(function (e) {
                            e.backtracked = void 0;
                          });
                      }),
                      e &&
                        (e.removeEventListener("seeking", this.onvseeking),
                        e.removeEventListener("seeked", this.onvseeked),
                        e.removeEventListener("ended", this.onvended),
                        (this.onvseeking =
                          this.onvseeked =
                          this.onvended =
                            null)),
                      this.fragmentTracker.removeAllFragments(),
                      (this.media = this.mediaBuffer = null),
                      (this.loadedmetadata = !1),
                      this.stopLoad();
                  }),
                  (r.onMediaSeeked = function () {
                    var e = this.media,
                      e = e ? e.currentTime : void 0;
                    Object(A.a)(e) &&
                      k.b.log("media seeked to " + e.toFixed(3)),
                      this.tick();
                  }),
                  (r.onManifestLoading = function () {
                    k.b.log("trigger BUFFER_RESET"),
                      this.hls.trigger(E.a.BUFFER_RESET),
                      this.fragmentTracker.removeAllFragments(),
                      (this.stalled = !1),
                      (this.startPosition = this.lastCurrentTime = 0);
                  }),
                  (r.onManifestParsed = function (e) {
                    var t,
                      r = !1,
                      i = !1;
                    e.levels.forEach(function (e) {
                      (t = e.audioCodec) &&
                        (-1 !== t.indexOf("mp4a.40.2") && (r = !0),
                        -1 !== t.indexOf("mp4a.40.5") && (i = !0));
                    }),
                      (this.audioCodecSwitch = r && i),
                      this.audioCodecSwitch &&
                        k.b.log(
                          "both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"
                        ),
                      (this.altAudio = e.altAudio),
                      (this.levels = e.levels),
                      (this.startFragRequested = !1);
                    e = this.config;
                    (e.autoStartLoad || this.forceStartLoad) &&
                      this.hls.startLoad(e.startPosition);
                  }),
                  (r.onLevelLoaded = function (e) {
                    var t = e.details,
                      r = e.level,
                      i = this.levels[this.levelLastLoaded],
                      a = this.levels[r],
                      n = t.totalduration,
                      s = 0;
                    k.b.log(
                      "level " +
                        r +
                        " loaded [" +
                        t.startSN +
                        "," +
                        t.endSN +
                        "],duration:" +
                        n
                    ),
                      t.live
                        ? (e = a.details) && 0 < t.fragments.length
                          ? (ue(e, t),
                            (s = t.fragments[0].start),
                            (this.liveSyncPosition = this.computeLivePosition(
                              s,
                              e
                            )),
                            t.PTSKnown && Object(A.a)(s)
                              ? k.b.log("live playlist sliding:" + s.toFixed(3))
                              : (k.b.log(
                                  "live playlist - outdated PTS, unknown sliding"
                                ),
                                pe(this.fragPrevious, i, t)))
                          : (k.b.log(
                              "live playlist - first load, unknown sliding"
                            ),
                            (t.PTSKnown = !1),
                            pe(this.fragPrevious, i, t))
                        : (t.PTSKnown = !1),
                      (a.details = t),
                      (this.levelLastLoaded = r),
                      this.hls.trigger(E.a.LEVEL_UPDATED, {
                        details: t,
                        level: r,
                      }),
                      !1 === this.startFragRequested &&
                        ((-1 !== this.startPosition &&
                          -1 !== this.lastCurrentTime) ||
                          ((r = t.startTimeOffset),
                          Object(A.a)(r)
                            ? (r < 0 &&
                                (k.b.log(
                                  "negative start time offset " +
                                    r +
                                    ", count from end of last fragment"
                                ),
                                (r = s + n + r)),
                              k.b.log(
                                "start time offset found in playlist, adjust startPosition to " +
                                  r
                              ),
                              (this.startPosition = r))
                            : t.live
                            ? ((this.startPosition = this.computeLivePosition(
                                s,
                                t
                              )),
                              k.b.log(
                                "configure startPosition to " +
                                  this.startPosition
                              ))
                            : (this.startPosition = 0),
                          (this.lastCurrentTime = this.startPosition)),
                        (this.nextLoadPosition = this.startPosition)),
                      this.state === Me && (this.state = Re),
                      this.tick();
                  }),
                  (r.onKeyLoaded = function () {
                    this.state === Ae && ((this.state = Re), this.tick());
                  }),
                  (r.onFragLoaded = function (e) {
                    var t,
                      r,
                      i = this.fragCurrent,
                      a = this.hls,
                      n = this.levels,
                      s = this.media,
                      o = e.frag;
                    this.state === ke &&
                      i &&
                      "main" === o.type &&
                      o.level === i.level &&
                      o.sn === i.sn &&
                      ((r = e.stats),
                      (n = (t = n[i.level]).details),
                      (this.bitrateTest = !1),
                      (this.stats = r),
                      k.b.log(
                        "Loaded " +
                          i.sn +
                          " of [" +
                          n.startSN +
                          " ," +
                          n.endSN +
                          "],level " +
                          i.level
                      ),
                      o.bitrateTest && a.nextLoadLevel
                        ? ((this.state = Re),
                          (this.startFragRequested = !1),
                          (r.tparsed = r.tbuffered = window.performance.now()),
                          a.trigger(E.a.FRAG_BUFFERED, {
                            stats: r,
                            frag: i,
                            id: "main",
                          }),
                          this.tick())
                        : "initSegment" === o.sn
                        ? ((this.state = Re),
                          (r.tparsed = r.tbuffered = window.performance.now()),
                          (n.initSegment.data = e.payload),
                          a.trigger(E.a.FRAG_BUFFERED, {
                            stats: r,
                            frag: i,
                            id: "main",
                          }),
                          this.tick())
                        : (k.b.log(
                            "Parsing " +
                              i.sn +
                              " of [" +
                              n.startSN +
                              " ," +
                              n.endSN +
                              "],level " +
                              i.level +
                              ", cc " +
                              i.cc
                          ),
                          (this.state = De),
                          (this.pendingBuffering = !0),
                          (this.appended = !1),
                          o.bitrateTest &&
                            ((o.bitrateTest = !1),
                            this.fragmentTracker.onFragLoaded({
                              frag: o,
                            })),
                          (r = !(s && s.seeking) && (n.PTSKnown || !n.live)),
                          (o = n.initSegment ? n.initSegment.data : []),
                          (s = this._getAudioCodec(t)),
                          (this.demuxer =
                            this.demuxer || new ae(this.hls, "main")).push(
                            e.payload,
                            o,
                            s,
                            t.videoCodec,
                            i,
                            n.totalduration,
                            r
                          ))),
                      (this.fragLoadError = 0);
                  }),
                  (r.onFragParsingInitSegment = function (e) {
                    var t = this.fragCurrent,
                      r = e.frag;
                    if (
                      t &&
                      "main" === e.id &&
                      r.sn === t.sn &&
                      r.level === t.level &&
                      this.state === De
                    ) {
                      var i,
                        a,
                        n = e.tracks;
                      for (i in ((this.audioOnly = n.audio && !n.video),
                      this.altAudio && !this.audioOnly && delete n.audio,
                      (a = n.audio) &&
                        ((r = this.levels[this.level].audioCodec),
                        (t = navigator.userAgent.toLowerCase()),
                        r &&
                          this.audioCodecSwap &&
                          (k.b.log("swapping playlist audio codec"),
                          (r =
                            -1 !== r.indexOf("mp4a.40.5")
                              ? "mp4a.40.2"
                              : "mp4a.40.5")),
                        this.audioCodecSwitch &&
                          1 !== a.metadata.channelCount &&
                          -1 === t.indexOf("firefox") &&
                          (r = "mp4a.40.5"),
                        -1 !== t.indexOf("android") &&
                          "audio/mpeg" !== a.container &&
                          ((r = "mp4a.40.2"),
                          k.b.log("Android: force audio codec to " + r)),
                        (a.levelCodec = r),
                        (a.id = e.id)),
                      (a = n.video) &&
                        ((a.levelCodec = this.levels[this.level].videoCodec),
                        (a.id = e.id)),
                      this.hls.trigger(E.a.BUFFER_CODECS, n),
                      n)) {
                        (a = n[i]),
                          k.b.log(
                            "main track:" +
                              i +
                              ",container:" +
                              a.container +
                              ",codecs[level/parsed]=[" +
                              a.levelCodec +
                              "/" +
                              a.codec +
                              "]"
                          );
                        var s = a.initSegment;
                        s &&
                          ((this.appended = !0),
                          (this.pendingBuffering = !0),
                          this.hls.trigger(E.a.BUFFER_APPENDING, {
                            type: i,
                            data: s,
                            parent: "main",
                            content: "initSegment",
                          }));
                      }
                      this.tick();
                    }
                  }),
                  (r.onFragParsingData = function (t) {
                    var r = this,
                      e = this.fragCurrent,
                      i = t.frag;
                    if (
                      e &&
                      "main" === t.id &&
                      i.sn === e.sn &&
                      i.level === e.level &&
                      ("audio" !== t.type || !this.altAudio) &&
                      this.state === De
                    ) {
                      var a = this.levels[this.level],
                        i = e;
                      if (
                        (Object(A.a)(t.endPTS) ||
                          ((t.endPTS = t.startPTS + e.duration),
                          (t.endDTS = t.startDTS + e.duration)),
                        !0 === t.hasAudio && i.addElementaryStream(c.AUDIO),
                        !0 === t.hasVideo && i.addElementaryStream(c.VIDEO),
                        k.b.log(
                          "Parsed " +
                            t.type +
                            ",PTS:[" +
                            t.startPTS.toFixed(3) +
                            "," +
                            t.endPTS.toFixed(3) +
                            "],DTS:[" +
                            t.startDTS.toFixed(3) +
                            "/" +
                            t.endDTS.toFixed(3) +
                            "],nb:" +
                            t.nb +
                            ",dropped:" +
                            (t.dropped || 0)
                        ),
                        "video" === t.type)
                      )
                        if (((i.dropped = t.dropped), i.dropped))
                          if (i.backtracked)
                            k.b.warn(
                              "Already backtracked on this fragment, appending with the gap",
                              i.sn
                            );
                          else {
                            e = a.details;
                            if (!e || i.sn !== e.startSN)
                              return (
                                k.b.warn(
                                  "missing video frame(s), backtracking fragment",
                                  i.sn
                                ),
                                this.fragmentTracker.removeFragment(i),
                                (i.backtracked = !0),
                                (this.nextLoadPosition = t.startPTS),
                                (this.state = Re),
                                (this.fragPrevious = i),
                                this.demuxer &&
                                  (this.demuxer.destroy(),
                                  (this.demuxer = null)),
                                void this.tick()
                              );
                            k.b.warn(
                              "missing video frame(s) on first frag, appending with gap",
                              i.sn
                            );
                          }
                        else i.backtracked = !1;
                      var i = de(
                          a.details,
                          i,
                          t.startPTS,
                          t.endPTS,
                          t.startDTS,
                          t.endDTS
                        ),
                        n = this.hls;
                      n.trigger(E.a.LEVEL_PTS_UPDATED, {
                        details: a.details,
                        level: this.level,
                        drift: i,
                        type: t.type,
                        start: t.startPTS,
                        end: t.endPTS,
                      }),
                        [t.data1, t.data2].forEach(function (e) {
                          e &&
                            e.length &&
                            r.state === De &&
                            ((r.appended = !0),
                            (r.pendingBuffering = !0),
                            n.trigger(E.a.BUFFER_APPENDING, {
                              type: t.type,
                              data: e,
                              parent: "main",
                              content: "data",
                            }));
                        }),
                        this.tick();
                    }
                  }),
                  (r.onFragParsed = function (e) {
                    var t = this.fragCurrent,
                      r = e.frag;
                    t &&
                      "main" === e.id &&
                      r.sn === t.sn &&
                      r.level === t.level &&
                      this.state === De &&
                      ((this.stats.tparsed = window.performance.now()),
                      (this.state = Oe),
                      this._checkAppendedParsed());
                  }),
                  (r.onAudioTrackSwitching = function (e) {
                    var t,
                      r = this.altAudio,
                      i = !!e.url,
                      e = e.id;
                    i ||
                      (this.mediaBuffer !== this.media &&
                        (k.b.log(
                          "switching on main audio, use media.buffered to schedule main fragment loading"
                        ),
                        (this.mediaBuffer = this.media),
                        (t = this.fragCurrent).loader &&
                          (k.b.log(
                            "switching to main audio track, cancel main fragment load"
                          ),
                          t.loader.abort()),
                        (this.fragCurrent = null),
                        (this.fragPrevious = null),
                        this.demuxer &&
                          (this.demuxer.destroy(), (this.demuxer = null)),
                        (this.state = Re)),
                      (t = this.hls),
                      r &&
                        t.trigger(E.a.BUFFER_FLUSHING, {
                          startOffset: 0,
                          endOffset: Number.POSITIVE_INFINITY,
                          type: "audio",
                        }),
                      t.trigger(E.a.AUDIO_TRACK_SWITCHED, {
                        id: e,
                      }));
                  }),
                  (r.onAudioTrackSwitched = function (e) {
                    var t = e.id,
                      e = !!this.hls.audioTracks[t].url;
                    !e ||
                      ((t = this.videoBuffer) &&
                        this.mediaBuffer !== t &&
                        (k.b.log(
                          "switching on alternate audio, use video.buffered to schedule main fragment loading"
                        ),
                        (this.mediaBuffer = t))),
                      (this.altAudio = e),
                      this.tick();
                  }),
                  (r.onBufferCreated = function (e) {
                    var t,
                      r,
                      i,
                      a = e.tracks,
                      n = !1;
                    for (i in a) {
                      var s = a[i];
                      "main" === s.id
                        ? ((t = s),
                          "video" === (r = i) &&
                            (this.videoBuffer = a[i].buffer))
                        : (n = !0);
                    }
                    n && t
                      ? (k.b.log(
                          "alternate track found, use " +
                            r +
                            ".buffered to schedule main fragment loading"
                        ),
                        (this.mediaBuffer = t.buffer))
                      : (this.mediaBuffer = this.media);
                  }),
                  (r.onBufferAppended = function (e) {
                    var t;
                    "main" === e.parent &&
                      (((t = this.state) !== De && t !== Oe) ||
                        ((this.pendingBuffering = 0 < e.pending),
                        this._checkAppendedParsed()));
                  }),
                  (r._checkAppendedParsed = function () {
                    var e, t;
                    this.state !== Oe ||
                      (this.appended && this.pendingBuffering) ||
                      ((e = this.fragCurrent) &&
                        ((t = this.mediaBuffer || this.media),
                        k.b.log("main buffered : " + fe(t.buffered)),
                        (this.fragPrevious = e),
                        ((t = this.stats).tbuffered = window.performance.now()),
                        (this.fragLastKbps = Math.round(
                          (8 * t.total) / (t.tbuffered - t.tfirst)
                        )),
                        this.hls.trigger(E.a.FRAG_BUFFERED, {
                          stats: t,
                          frag: e,
                          id: "main",
                        }),
                        (this.state = Re)),
                      (this.loadedmetadata || this.startPosition <= 0) &&
                        this.tick());
                  }),
                  (r.onError = function (e) {
                    var t = e.frag || this.fragCurrent;
                    if (!t || "main" === t.type) {
                      var r,
                        i =
                          !!this.media &&
                          q.isBuffered(this.media, this.media.currentTime) &&
                          q.isBuffered(
                            this.media,
                            this.media.currentTime + 0.5
                          );
                      switch (e.details) {
                        case m.a.FRAG_LOAD_ERROR:
                        case m.a.FRAG_LOAD_TIMEOUT:
                        case m.a.KEY_LOAD_ERROR:
                        case m.a.KEY_LOAD_TIMEOUT:
                          e.fatal ||
                            (this.fragLoadError + 1 <=
                            this.config.fragLoadingMaxRetry
                              ? ((r = Math.min(
                                  Math.pow(2, this.fragLoadError) *
                                    this.config.fragLoadingRetryDelay,
                                  this.config.fragLoadingMaxRetryTimeout
                                )),
                                k.b.warn(
                                  "mediaController: frag loading failed, retry in " +
                                    r +
                                    " ms"
                                ),
                                (this.retryDate = window.performance.now() + r),
                                this.loadedmetadata ||
                                  ((this.startFragRequested = !1),
                                  (this.nextLoadPosition = this.startPosition)),
                                this.fragLoadError++,
                                (this.state = we))
                              : (k.b.error(
                                  "mediaController: " +
                                    e.details +
                                    " reaches max retry, redispatch as fatal ..."
                                ),
                                (e.fatal = !0),
                                (this.state = Pe)));
                          break;
                        case m.a.LEVEL_LOAD_ERROR:
                        case m.a.LEVEL_LOAD_TIMEOUT:
                          this.state !== Pe &&
                            (e.fatal
                              ? ((this.state = Pe),
                                k.b.warn(
                                  "streamController: " +
                                    e.details +
                                    ",switch to " +
                                    this.state +
                                    " state ..."
                                ))
                              : e.levelRetry ||
                                this.state !== Me ||
                                (this.state = Re));
                          break;
                        case m.a.BUFFER_FULL_ERROR:
                          "main" !== e.parent ||
                            (this.state !== De && this.state !== Oe) ||
                            (i
                              ? (this._reduceMaxBufferLength(
                                  this.config.maxBufferLength
                                ),
                                (this.state = Re))
                              : (k.b.warn(
                                  "buffer full error also media.currentTime is not buffered, flush everything"
                                ),
                                (this.fragCurrent = null),
                                this.flushMainBuffer(
                                  0,
                                  Number.POSITIVE_INFINITY
                                )));
                      }
                    }
                  }),
                  (r._reduceMaxBufferLength = function (e) {
                    var t = this.config;
                    return (
                      t.maxMaxBufferLength >= e &&
                      ((t.maxMaxBufferLength /= 2),
                      k.b.warn(
                        "main:reduce max buffer length to " +
                          t.maxMaxBufferLength +
                          "s"
                      ),
                      !0)
                    );
                  }),
                  (r._checkBuffer = function () {
                    var e = this.media;
                    e &&
                      0 !== e.readyState &&
                      ((e = (this.mediaBuffer || e).buffered),
                      !this.loadedmetadata && e.length
                        ? ((this.loadedmetadata = !0), this._seekToStartPos())
                        : this.immediateSwitch
                        ? this.immediateLevelSwitchEnd()
                        : this.gapController.poll(this.lastCurrentTime, e));
                  }),
                  (r.onFragLoadEmergencyAborted = function () {
                    (this.state = Re),
                      this.loadedmetadata ||
                        ((this.startFragRequested = !1),
                        (this.nextLoadPosition = this.startPosition)),
                      this.tick();
                  }),
                  (r.onBufferFlushed = function () {
                    var e,
                      t = this.mediaBuffer || this.media;
                    t &&
                      ((e = this.audioOnly ? c.AUDIO : c.VIDEO),
                      this.fragmentTracker.detectEvictedFragments(
                        e,
                        t.buffered
                      )),
                      (this.state = Re),
                      (this.fragPrevious = null);
                  }),
                  (r.onLevelsUpdated = function (e) {
                    this.levels = e.levels;
                  }),
                  (r.swapAudioCodec = function () {
                    this.audioCodecSwap = !this.audioCodecSwap;
                  }),
                  (r._seekToStartPos = function () {
                    var e,
                      t = this.media,
                      r = t.currentTime,
                      i = this.startPosition;
                    r !== i &&
                      0 <= i &&
                      (t.seeking
                        ? k.b.log(
                            "could not seek to " +
                              i +
                              ", already seeking at " +
                              r
                          )
                        : (0 <
                            (e =
                              (t.buffered.length ? t.buffered.start(0) : 0) -
                              i) &&
                            e < this.config.maxBufferHole &&
                            (k.b.log(
                              "adjusting start position by " +
                                e +
                                " to match buffer start"
                            ),
                            (i += e),
                            (this.startPosition = i)),
                          k.b.log(
                            "seek to target start position " +
                              i +
                              " from current time " +
                              r +
                              ". ready state " +
                              t.readyState
                          ),
                          (t.currentTime = i)));
                  }),
                  (r._getAudioCodec = function (e) {
                    e = this.config.defaultAudioCodec || e.audioCodec;
                    return (
                      this.audioCodecSwap &&
                        (k.b.log("swapping playlist audio codec"),
                        (e =
                          e &&
                          (-1 !== e.indexOf("mp4a.40.5")
                            ? "mp4a.40.2"
                            : "mp4a.40.5"))),
                      e
                    );
                  }),
                  Ue(t.prototype, [
                    {
                      key: "state",
                      set: function (e) {
                        var t;
                        this.state !== e &&
                          ((t = this.state),
                          (this._state = e),
                          k.b.log("main stream-controller: " + t + "->" + e),
                          this.hls.trigger(E.a.STREAM_STATE_TRANSITION, {
                            previousState: t,
                            nextState: e,
                          }));
                      },
                      get: function () {
                        return this._state;
                      },
                    },
                    {
                      key: "currentLevel",
                      get: function () {
                        var e = this.media;
                        if (e) {
                          e = this.getBufferedFrag(e.currentTime);
                          if (e) return e.level;
                        }
                        return -1;
                      },
                    },
                    {
                      key: "nextBufferedFrag",
                      get: function () {
                        var e = this.media;
                        return e
                          ? this.followingBufferedFrag(
                              this.getBufferedFrag(e.currentTime)
                            )
                          : null;
                      },
                    },
                    {
                      key: "nextLevel",
                      get: function () {
                        var e = this.nextBufferedFrag;
                        return e ? e.level : -1;
                      },
                    },
                    {
                      key: "liveSyncPosition",
                      get: function () {
                        return this._liveSyncPosition;
                      },
                      set: function (e) {
                        this._liveSyncPosition = e;
                      },
                    },
                  ]),
                  t
                );
              })(Fe);
            function Ge(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var Ke = (function (t) {
                var e;
                function r(e) {
                  return (
                    ((e =
                      t.call(
                        this,
                        e,
                        E.a.MANIFEST_LOADED,
                        E.a.LEVEL_LOADED,
                        E.a.AUDIO_TRACK_SWITCHED,
                        E.a.FRAG_LOADED,
                        E.a.ERROR
                      ) || this).canload = !1),
                    (e.currentLevelIndex = null),
                    (e.manualLevelIndex = -1),
                    (e.timer = null),
                    (Ne = /chrome|firefox/.test(
                      navigator.userAgent.toLowerCase()
                    )),
                    e
                  );
                }
                (i = t),
                  ((e = r).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.onHandlerDestroying = function () {
                    this.clearTimer(), (this.manualLevelIndex = -1);
                  }),
                  (i.clearTimer = function () {
                    null !== this.timer &&
                      (clearTimeout(this.timer), (this.timer = null));
                  }),
                  (i.startLoad = function () {
                    var e = this._levels;
                    (this.canload = !0),
                      (this.levelRetryCount = 0),
                      e &&
                        e.forEach(function (e) {
                          e.loadError = 0;
                          var t = e.details;
                          t && t.live && (e.details = void 0);
                        }),
                      null !== this.timer && this.loadLevel();
                  }),
                  (i.stopLoad = function () {
                    this.canload = !1;
                  }),
                  (i.onManifestLoaded = function (e) {
                    var t,
                      r = [],
                      i = [],
                      a = {},
                      n = null,
                      s = !1,
                      o = !1;
                    if (
                      (e.levels.forEach(function (e) {
                        var t = e.attrs;
                        (e.loadError = 0),
                          (e.fragmentError = !1),
                          (s = s || !!e.videoCodec),
                          (o = o || !!e.audioCodec),
                          Ne &&
                            e.audioCodec &&
                            -1 !== e.audioCodec.indexOf("mp4a.40.34") &&
                            (e.audioCodec = void 0),
                          (n = a[e.bitrate])
                            ? n.url.push(e.url)
                            : ((e.url = [e.url]),
                              (e.urlId = 0),
                              (a[e.bitrate] = e),
                              r.push(e)),
                          t &&
                            (t.AUDIO && oe(n || e, "audio", t.AUDIO),
                            t.SUBTITLES && oe(n || e, "text", t.SUBTITLES));
                      }),
                      s &&
                        o &&
                        (r = r.filter(function (e) {
                          return !!e.videoCodec;
                        })),
                      (r = r.filter(function (e) {
                        var t = e.audioCodec,
                          e = e.videoCodec;
                        return (!t || R(t, "audio")) && (!e || R(e, "video"));
                      })),
                      e.audioTracks &&
                        (i = e.audioTracks.filter(function (e) {
                          return !e.audioCodec || R(e.audioCodec, "audio");
                        })).forEach(function (e, t) {
                          e.id = t;
                        }),
                      0 < r.length)
                    ) {
                      (t = r[0].bitrate),
                        r.sort(function (e, t) {
                          return e.bitrate - t.bitrate;
                        }),
                        (this._levels = r);
                      for (var l = 0; l < r.length; l++)
                        if (r[l].bitrate === t) {
                          (this._firstLevel = l),
                            k.b.log(
                              "manifest loaded," +
                                r.length +
                                " level(s) found, first bitrate:" +
                                t
                            );
                          break;
                        }
                      var d = o && !s;
                      this.hls.trigger(E.a.MANIFEST_PARSED, {
                        levels: r,
                        audioTracks: i,
                        firstLevel: this._firstLevel,
                        stats: e.stats,
                        audio: o,
                        video: s,
                        altAudio:
                          !d &&
                          i.some(function (e) {
                            return !!e.url;
                          }),
                      });
                    } else
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.MEDIA_ERROR,
                        details: m.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                        fatal: !0,
                        url: this.hls.url,
                        reason:
                          "no level with compatible codecs found in manifest",
                      });
                  }),
                  (i.setLevelInternal = function (e) {
                    var t,
                      r = this._levels,
                      i = this.hls;
                    0 <= e && e < r.length
                      ? (this.clearTimer(),
                        this.currentLevelIndex !== e &&
                          (k.b.log("switching to level " + e),
                          ((t = r[(this.currentLevelIndex = e)]).level = e),
                          i.trigger(E.a.LEVEL_SWITCHING, t)),
                        ((r = (t = r[e]).details) && !r.live) ||
                          ((r = t.urlId),
                          i.trigger(E.a.LEVEL_LOADING, {
                            url: t.url[r],
                            level: e,
                            id: r,
                          })))
                      : i.trigger(E.a.ERROR, {
                          type: m.b.OTHER_ERROR,
                          details: m.a.LEVEL_SWITCH_ERROR,
                          level: e,
                          fatal: !1,
                          reason: "invalid level idx",
                        });
                  }),
                  (i.onError = function (e) {
                    if (e.fatal)
                      e.type === m.b.NETWORK_ERROR && this.clearTimer();
                    else {
                      var t,
                        r = !1,
                        i = !1;
                      switch (e.details) {
                        case m.a.FRAG_LOAD_ERROR:
                        case m.a.FRAG_LOAD_TIMEOUT:
                        case m.a.KEY_LOAD_ERROR:
                        case m.a.KEY_LOAD_TIMEOUT:
                          (t = e.frag.level), (i = !0);
                          break;
                        case m.a.LEVEL_LOAD_ERROR:
                        case m.a.LEVEL_LOAD_TIMEOUT:
                          (t = e.context.level), (r = !0);
                          break;
                        case m.a.REMUX_ALLOC_ERROR:
                          (t = e.level), (r = !0);
                      }
                      void 0 !== t && this.recoverLevel(e, t, r, i);
                    }
                  }),
                  (i.recoverLevel = function (e, t, r, i) {
                    var a = this,
                      n = this.hls.config,
                      s = e.details,
                      o = this._levels[t];
                    if ((o.loadError++, (o.fragmentError = i), r)) {
                      if (!(this.levelRetryCount + 1 <= n.levelLoadingMaxRetry))
                        return (
                          k.b.error(
                            "level controller, cannot recover from " +
                              s +
                              " error"
                          ),
                          (this.currentLevelIndex = null),
                          this.clearTimer(),
                          void (e.fatal = !0)
                        );
                      (n = Math.min(
                        Math.pow(2, this.levelRetryCount) *
                          n.levelLoadingRetryDelay,
                        n.levelLoadingMaxRetryTimeout
                      )),
                        (this.timer = setTimeout(function () {
                          return a.loadLevel();
                        }, n)),
                        (e.levelRetry = !0),
                        this.levelRetryCount++,
                        k.b.warn(
                          "level controller, " +
                            s +
                            ", retry in " +
                            n +
                            " ms, current retry count is " +
                            this.levelRetryCount
                        );
                    }
                    (r || i) &&
                      (1 < (r = o.url.length) && o.loadError < r
                        ? ((o.urlId = (o.urlId + 1) % r),
                          (o.details = void 0),
                          k.b.warn(
                            "level controller, " +
                              s +
                              " for level " +
                              t +
                              ": switching to redundant URL-id " +
                              o.urlId
                          ))
                        : -1 === this.manualLevelIndex
                        ? ((t = 0 === t ? this._levels.length - 1 : t - 1),
                          k.b.warn(
                            "level controller, " + s + ": switch to " + t
                          ),
                          (this.hls.nextAutoLevel = this.currentLevelIndex = t))
                        : i &&
                          (k.b.warn(
                            "level controller, " + s + ": reload a fragment"
                          ),
                          (this.currentLevelIndex = null)));
                  }),
                  (i.onFragLoaded = function (e) {
                    e = e.frag;
                    void 0 === e ||
                      "main" !== e.type ||
                      (void 0 !== (e = this._levels[e.level]) &&
                        ((e.fragmentError = !1),
                        (e.loadError = 0),
                        (this.levelRetryCount = 0)));
                  }),
                  (i.onLevelLoaded = function (e) {
                    var t = this,
                      r = e.level,
                      i = e.details;
                    r === this.currentLevelIndex &&
                      ((r = this._levels[r]).fragmentError ||
                        ((r.loadError = 0), (this.levelRetryCount = 0)),
                      i.live
                        ? ((e = he(r.details, i, e.stats.trequest)),
                          k.b.log(
                            "live playlist, reload in " + Math.round(e) + " ms"
                          ),
                          (this.timer = setTimeout(function () {
                            return t.loadLevel();
                          }, e)))
                        : this.clearTimer());
                  }),
                  (i.onAudioTrackSwitched = function (e) {
                    var t = this.hls.audioTracks[e.id].groupId,
                      r = this.hls.levels[this.currentLevelIndex];
                    if (r && r.audioGroupIds) {
                      for (var i = -1, a = 0; a < r.audioGroupIds.length; a++)
                        if (r.audioGroupIds[a] === t) {
                          i = a;
                          break;
                        }
                      i !== r.urlId && ((r.urlId = i), this.startLoad());
                    }
                  }),
                  (i.loadLevel = function () {
                    var e, t, r;
                    k.b.debug("call to loadLevel"),
                      null !== this.currentLevelIndex &&
                        this.canload &&
                        "object" ==
                          typeof (r = this._levels[this.currentLevelIndex]) &&
                        0 < r.url.length &&
                        ((e = this.currentLevelIndex),
                        (t = r.urlId),
                        (r = r.url[t]),
                        k.b.log(
                          "Attempt loading level index " +
                            e +
                            " with URL-id " +
                            t
                        ),
                        this.hls.trigger(E.a.LEVEL_LOADING, {
                          url: r,
                          level: e,
                          id: t,
                        }));
                  }),
                  (i.removeLevel = function (r, i) {
                    var e = this.levels
                      .filter(function (e, t) {
                        return (
                          t !== r ||
                          (1 < e.url.length &&
                            void 0 !== i &&
                            ((e.url = e.url.filter(function (e, t) {
                              return t !== i;
                            })),
                            !(e.urlId = 0)))
                        );
                      })
                      .map(function (e, t) {
                        var r = e.details;
                        return (
                          r &&
                            r.fragments &&
                            r.fragments.forEach(function (e) {
                              e.level = t;
                            }),
                          e
                        );
                      });
                    (this._levels = e),
                      this.hls.trigger(E.a.LEVELS_UPDATED, {
                        levels: e,
                      });
                  }),
                  Ge(r.prototype, [
                    {
                      key: "levels",
                      get: function () {
                        return this._levels;
                      },
                    },
                    {
                      key: "level",
                      get: function () {
                        return this.currentLevelIndex;
                      },
                      set: function (e) {
                        var t = this._levels;
                        t &&
                          ((e = Math.min(e, t.length - 1)),
                          (this.currentLevelIndex === e && t[e].details) ||
                            this.setLevelInternal(e));
                      },
                    },
                    {
                      key: "manualLevel",
                      get: function () {
                        return this.manualLevelIndex;
                      },
                      set: function (e) {
                        (this.manualLevelIndex = e),
                          void 0 === this._startLevel && (this._startLevel = e),
                          -1 !== e && (this.level = e);
                      },
                    },
                    {
                      key: "firstLevel",
                      get: function () {
                        return this._firstLevel;
                      },
                      set: function (e) {
                        this._firstLevel = e;
                      },
                    },
                    {
                      key: "startLevel",
                      get: function () {
                        if (void 0 !== this._startLevel)
                          return this._startLevel;
                        var e = this.hls.config.startLevel;
                        return void 0 !== e ? e : this._firstLevel;
                      },
                      set: function (e) {
                        this._startLevel = e;
                      },
                    },
                    {
                      key: "nextLoadLevel",
                      get: function () {
                        return -1 !== this.manualLevelIndex
                          ? this.manualLevelIndex
                          : this.hls.nextAutoLevel;
                      },
                      set: function (e) {
                        (this.level = e),
                          -1 === this.manualLevelIndex &&
                            (this.hls.nextAutoLevel = e);
                      },
                    },
                  ]),
                  r
                );
              })(o),
              je = r(4);
            function He(e, t) {
              var r;
              try {
                r = new Event("addtrack");
              } catch (e) {
                (r = document.createEvent("Event")).initEvent(
                  "addtrack",
                  !1,
                  !1
                );
              }
              (r.track = e), t.dispatchEvent(r);
            }
            function Ve(e) {
              if (null != e && e.cues)
                for (; 0 < e.cues.length; ) e.removeCue(e.cues[0]);
            }
            var Ye = (function (t) {
                var e;
                function r(e) {
                  return (
                    ((e =
                      t.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHED,
                        E.a.MEDIA_DETACHING,
                        E.a.FRAG_PARSING_METADATA,
                        E.a.LIVE_BACK_BUFFER_REACHED
                      ) || this).id3Track = void 0),
                    (e.media = void 0),
                    e
                  );
                }
                (i = t),
                  ((e = r).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.destroy = function () {
                    o.prototype.destroy.call(this);
                  }),
                  (i.onMediaAttached = function (e) {
                    (this.media = e.media), this.media;
                  }),
                  (i.onMediaDetaching = function () {
                    Ve(this.id3Track),
                      (this.id3Track = void 0),
                      (this.media = void 0);
                  }),
                  (i.getID3Track = function (e) {
                    for (var t = 0; t < e.length; t++) {
                      var r = e[t];
                      if ("metadata" === r.kind && "id3" === r.label)
                        return He(r, this.media), r;
                    }
                    return this.media.addTextTrack("metadata", "id3");
                  }),
                  (i.onFragParsingMetadata = function (e) {
                    var t = e.frag,
                      r = e.samples;
                    this.id3Track ||
                      ((this.id3Track = this.getID3Track(
                        this.media.textTracks
                      )),
                      (this.id3Track.mode = "hidden"));
                    for (
                      var i =
                          window.WebKitDataCue ||
                          window.VTTCue ||
                          window.TextTrackCue,
                        a = 0;
                      a < r.length;
                      a++
                    ) {
                      var n = je.a.getID3Frames(r[a].data);
                      if (n) {
                        var s = Math.max(r[a].pts, 0),
                          o = a < r.length - 1 ? r[a + 1].pts : t.endPTS;
                        (o = o || t.start + t.duration) - s <= 0 &&
                          (o = s + 0.25);
                        for (var l = 0; l < n.length; l++) {
                          var d,
                            u = n[l];
                          je.a.isTimeStampFrame(u) ||
                            (((d = new i(s, o, "")).value = u),
                            this.id3Track.addCue(d));
                        }
                      }
                    }
                  }),
                  (i.onLiveBackBufferReached = function (e) {
                    var e = e.bufferEnd,
                      t = this.id3Track;
                    if (t && t.cues && t.cues.length) {
                      var r = (function (e, t) {
                        if (t < e[0].endTime) return e[0];
                        if (t > e[e.length - 1].endTime) return e[e.length - 1];
                        for (var r = 0, i = e.length - 1; r <= i; ) {
                          var a = Math.floor((i + r) / 2);
                          if (t < e[a].endTime) i = a - 1;
                          else {
                            if (!(t > e[a].endTime)) return e[a];
                            r = a + 1;
                          }
                        }
                        return e[r].endTime - t < t - e[i].endTime
                          ? e[r]
                          : e[i];
                      })(t.cues, e);
                      if (r) for (; t.cues[0] !== r; ) t.removeCue(t.cues[0]);
                    }
                  }),
                  r
                );
              })(o),
              We =
                (((ut = ze.prototype).sample = function (e, t) {
                  var r = Math.pow(this.alpha_, e);
                  (this.estimate_ = t * (1 - r) + r * this.estimate_),
                    (this.totalWeight_ += e);
                }),
                (ut.getTotalWeight = function () {
                  return this.totalWeight_;
                }),
                (ut.getEstimate = function () {
                  if (this.alpha_) {
                    var e = 1 - Math.pow(this.alpha_, this.totalWeight_);
                    return this.estimate_ / e;
                  }
                  return this.estimate_;
                }),
                ze),
              qe =
                (((tr = Xe.prototype).sample = function (e, t) {
                  (e = (e = Math.max(e, this.minDelayMs_)) / 1e3),
                    (t = (8 * t) / e);
                  this.fast_.sample(e, t), this.slow_.sample(e, t);
                }),
                (tr.canEstimate = function () {
                  var e = this.fast_;
                  return e && e.getTotalWeight() >= this.minWeight_;
                }),
                (tr.getEstimate = function () {
                  return this.canEstimate()
                    ? Math.min(
                        this.fast_.getEstimate(),
                        this.slow_.getEstimate()
                      )
                    : this.defaultEstimate_;
                }),
                (tr.destroy = function () {}),
                Xe);
            function Xe(e, t, r, i) {
              (this.hls = void 0),
                (this.defaultEstimate_ = void 0),
                (this.minWeight_ = void 0),
                (this.minDelayMs_ = void 0),
                (this.slow_ = void 0),
                (this.fast_ = void 0),
                (this.hls = e),
                (this.defaultEstimate_ = i),
                (this.minWeight_ = 0.001),
                (this.minDelayMs_ = 50),
                (this.slow_ = new We(t)),
                (this.fast_ = new We(r));
            }
            function ze(e) {
              (this.alpha_ = void 0),
                (this.estimate_ = void 0),
                (this.totalWeight_ = void 0),
                (this.alpha_ = e ? Math.exp(Math.log(0.5) / e) : 0),
                (this.estimate_ = 0),
                (this.totalWeight_ = 0);
            }
            function Qe(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var $e = window.performance,
              Je = (function (r) {
                var e;
                function t(e) {
                  var t;
                  return (
                    ((t =
                      r.call(
                        this,
                        e,
                        E.a.FRAG_LOADING,
                        E.a.FRAG_LOADED,
                        E.a.FRAG_BUFFERED,
                        E.a.ERROR
                      ) || this).lastLoadedFragLevel = 0),
                    (t._nextAutoLevel = -1),
                    (t.hls = e),
                    (t.timer = null),
                    (t._bwEstimator = null),
                    (t.onCheck = t._abandonRulesCheck.bind(
                      (function (e) {
                        if (void 0 === e)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return e;
                      })(t)
                    )),
                    t
                  );
                }
                (i = r),
                  ((e = t).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = t.prototype;
                return (
                  (i.destroy = function () {
                    this.clearTimer(), o.prototype.destroy.call(this);
                  }),
                  (i.onFragLoading = function (e) {
                    var t,
                      r,
                      i = e.frag;
                    "main" !== i.type ||
                      (this.timer ||
                        ((this.fragCurrent = i),
                        (this.timer = setInterval(this.onCheck, 100))),
                      this._bwEstimator) ||
                      ((e = (r = this.hls).config),
                      (i = i.level),
                      (i = r.levels[i].details.live
                        ? ((t = e.abrEwmaFastLive), e.abrEwmaSlowLive)
                        : ((t = e.abrEwmaFastVoD), e.abrEwmaSlowVoD)),
                      (this._bwEstimator = new qe(
                        r,
                        i,
                        t,
                        e.abrEwmaDefaultEstimate
                      )));
                  }),
                  (i._abandonRulesCheck = function () {
                    var e = this.hls,
                      t = e.media,
                      r = this.fragCurrent;
                    if (r) {
                      var i = r.loader;
                      if (!i || (i.stats && i.stats.aborted))
                        return (
                          k.b.warn(
                            "frag loader destroy or aborted, disarm abandonRules"
                          ),
                          this.clearTimer(),
                          void (this._nextAutoLevel = -1)
                        );
                      var a = i.stats;
                      if (
                        t &&
                        a &&
                        ((!t.paused && 0 !== t.playbackRate) ||
                          !t.readyState) &&
                        r.autoLevel &&
                        r.level
                      ) {
                        var n = $e.now() - a.trequest,
                          s = Math.abs(t.playbackRate);
                        if (n > (500 * r.duration) / s) {
                          var o = e.levels,
                            l = Math.max(
                              1,
                              a.bw ? a.bw / 8 : (1e3 * a.loaded) / n
                            ),
                            d = o[r.level];
                          if (d) {
                            var u = d.realBitrate
                                ? Math.max(d.realBitrate, d.bitrate)
                                : d.bitrate,
                              d =
                                a.total ||
                                Math.max(
                                  a.loaded,
                                  Math.round((r.duration * u) / 8)
                                ),
                              u = t.currentTime,
                              d = (d - a.loaded) / l,
                              c =
                                (q.bufferInfo(t, u, e.config.maxBufferHole)
                                  .end -
                                  u) /
                                s;
                            if (c < (2 * r.duration) / s && c < d) {
                              for (
                                var h = e.minAutoLevel, f = r.level - 1;
                                h < f;
                                f--
                              ) {
                                var g = o[f].realBitrate
                                  ? Math.max(o[f].realBitrate, o[f].bitrate)
                                  : o[f].bitrate;
                                if ((r.duration * g) / (6.4 * l) < c) break;
                              }
                              void 0 < d &&
                                (k.b.warn(
                                  "loading too slow, abort fragment loading and switch to level " +
                                    f +
                                    ":fragLoadedDelay[" +
                                    f +
                                    "]<fragLoadedDelay[" +
                                    (r.level - 1) +
                                    "];bufferStarvationDelay:" +
                                    (void 0).toFixed(1) +
                                    "<" +
                                    d.toFixed(1) +
                                    ":" +
                                    c.toFixed(1)
                                ),
                                (e.nextLoadLevel = f),
                                this._bwEstimator.sample(n, a.loaded),
                                i.abort(),
                                this.clearTimer(),
                                e.trigger(E.a.FRAG_LOAD_EMERGENCY_ABORTED, {
                                  frag: r,
                                  stats: a,
                                }));
                            }
                          }
                        }
                      }
                    }
                  }),
                  (i.onFragLoaded = function (e) {
                    var t,
                      r,
                      i = e.frag;
                    "main" === i.type &&
                      Object(A.a)(i.sn) &&
                      (this.clearTimer(),
                      (this.lastLoadedFragLevel = i.level),
                      (this._nextAutoLevel = -1),
                      this.hls.config.abrMaxWithRealBitrate &&
                        ((i =
                          ((t = this.hls.levels[i.level]).loaded
                            ? t.loaded.bytes
                            : 0) + e.stats.loaded),
                        (r =
                          (t.loaded ? t.loaded.duration : 0) + e.frag.duration),
                        (t.loaded = {
                          bytes: i,
                          duration: r,
                        }),
                        (t.realBitrate = Math.round((8 * i) / r))),
                      e.frag.bitrateTest &&
                        (((r = e.stats).tparsed = r.tbuffered = r.tload),
                        this.onFragBuffered(e)));
                  }),
                  (i.onFragBuffered = function (e) {
                    var t = e.stats,
                      r = e.frag;
                    !0 === t.aborted ||
                      "main" !== r.type ||
                      !Object(A.a)(r.sn) ||
                      (r.bitrateTest && t.tload !== t.tbuffered) ||
                      ((e = t.tparsed - t.trequest),
                      k.b.log(
                        "latency/loading/parsing/append/kbps:" +
                          Math.round(t.tfirst - t.trequest) +
                          "/" +
                          Math.round(t.tload - t.tfirst) +
                          "/" +
                          Math.round(t.tparsed - t.tload) +
                          "/" +
                          Math.round(t.tbuffered - t.tparsed) +
                          "/" +
                          Math.round(
                            (8 * t.loaded) / (t.tbuffered - t.trequest)
                          )
                      ),
                      this._bwEstimator.sample(e, t.loaded),
                      (t.bwEstimate = this._bwEstimator.getEstimate()),
                      r.bitrateTest
                        ? (this.bitrateTestDelay = e / 1e3)
                        : (this.bitrateTestDelay = 0));
                  }),
                  (i.onError = function (e) {
                    switch (e.details) {
                      case m.a.FRAG_LOAD_ERROR:
                      case m.a.FRAG_LOAD_TIMEOUT:
                        this.clearTimer();
                    }
                  }),
                  (i.clearTimer = function () {
                    clearInterval(this.timer), (this.timer = null);
                  }),
                  (i._findBestLevel = function (e, t, r, i, a, n, s, o, l) {
                    for (var d = a; i <= d; d--) {
                      var u = l[d];
                      if (u) {
                        var c = u.details,
                          h = c ? c.totalduration / c.fragments.length : t,
                          f = !!c && c.live,
                          g = d <= e ? s * r : o * r,
                          u = l[d].realBitrate
                            ? Math.max(l[d].realBitrate, l[d].bitrate)
                            : l[d].bitrate,
                          c = (u * h) / g;
                        if (
                          (k.b.trace(
                            "level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " +
                              d +
                              "/" +
                              Math.round(g) +
                              "/" +
                              u +
                              "/" +
                              h +
                              "/" +
                              n +
                              "/" +
                              c
                          ),
                          u < g &&
                            (!c || (f && !this.bitrateTestDelay) || c < n))
                        )
                          return d;
                      }
                    }
                    return -1;
                  }),
                  Qe(t.prototype, [
                    {
                      key: "nextAutoLevel",
                      get: function () {
                        var e = this._nextAutoLevel,
                          t = this._bwEstimator;
                        if (!(-1 === e || (t && t.canEstimate()))) return e;
                        t = this._nextABRAutoLevel;
                        return -1 !== e && (t = Math.min(e, t)), t;
                      },
                      set: function (e) {
                        this._nextAutoLevel = e;
                      },
                    },
                    {
                      key: "_nextABRAutoLevel",
                      get: function () {
                        var e = this.hls,
                          t = e.maxAutoLevel,
                          r = e.levels,
                          i = e.config,
                          a = e.minAutoLevel,
                          n = e.media,
                          s = this.lastLoadedFragLevel,
                          o = this.fragCurrent ? this.fragCurrent.duration : 0,
                          l = n ? n.currentTime : 0,
                          d =
                            n && 0 !== n.playbackRate
                              ? Math.abs(n.playbackRate)
                              : 1,
                          u = this._bwEstimator
                            ? this._bwEstimator.getEstimate()
                            : i.abrEwmaDefaultEstimate,
                          c = (q.bufferInfo(n, l, i.maxBufferHole).end - l) / d,
                          h = this._findBestLevel(
                            s,
                            o,
                            u,
                            a,
                            t,
                            c,
                            i.abrBandWidthFactor,
                            i.abrBandWidthUpFactor,
                            r
                          );
                        if (0 <= h) return h;
                        k.b.trace(
                          "rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering"
                        );
                        (e = o
                          ? Math.min(o, i.maxStarvationDelay)
                          : i.maxStarvationDelay),
                          (n = i.abrBandWidthFactor),
                          (l = i.abrBandWidthUpFactor);
                        return (
                          0 != c ||
                            ((d = this.bitrateTestDelay) &&
                              ((e =
                                (o
                                  ? Math.min(o, i.maxLoadingDelay)
                                  : i.maxLoadingDelay) - d),
                              k.b.trace(
                                "bitrate test took " +
                                  Math.round(1e3 * d) +
                                  "ms, set first fragment max fetchDuration to " +
                                  Math.round(1e3 * e) +
                                  " ms"
                              ),
                              (n = l = 1))),
                          (h = this._findBestLevel(
                            s,
                            o,
                            u,
                            a,
                            t,
                            c + e,
                            n,
                            l,
                            r
                          )),
                          Math.max(h, 0)
                        );
                      },
                    },
                  ]),
                  t
                );
              })(o),
              Ze = J(),
              X = (function (t) {
                var e;
                function r(e) {
                  var s;
                  return (
                    ((s =
                      t.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHING,
                        E.a.MEDIA_DETACHING,
                        E.a.MANIFEST_PARSED,
                        E.a.BUFFER_RESET,
                        E.a.BUFFER_APPENDING,
                        E.a.BUFFER_CODECS,
                        E.a.BUFFER_EOS,
                        E.a.BUFFER_FLUSHING,
                        E.a.LEVEL_PTS_UPDATED,
                        E.a.LEVEL_UPDATED
                      ) || this)._msDuration = null),
                    (s._levelDuration = null),
                    (s._levelTargetDuration = 10),
                    (s._live = null),
                    (s._objectUrl = null),
                    (s._needsFlush = !1),
                    (s._needsEos = !1),
                    (s.config = void 0),
                    (s.audioTimestampOffset = void 0),
                    (s.bufferCodecEventsExpected = 0),
                    (s._bufferCodecEventsTotal = 0),
                    (s.media = null),
                    (s.mediaSource = null),
                    (s.segments = []),
                    (s.parent = void 0),
                    (s.appending = !1),
                    (s.appended = 0),
                    (s.appendError = 0),
                    (s.flushBufferCounter = 0),
                    (s.tracks = {}),
                    (s.pendingTracks = {}),
                    (s.sourceBuffer = {}),
                    (s.flushRange = []),
                    (s._onMediaSourceOpen = function () {
                      k.b.log("media source opened"),
                        s.hls.trigger(E.a.MEDIA_ATTACHED, {
                          media: s.media,
                        });
                      var e = s.mediaSource;
                      e &&
                        e.removeEventListener(
                          "sourceopen",
                          s._onMediaSourceOpen
                        ),
                        s.checkPendingTracks();
                    }),
                    (s._onMediaSourceClose = function () {
                      k.b.log("media source closed");
                    }),
                    (s._onMediaSourceEnded = function () {
                      k.b.log("media source ended");
                    }),
                    (s._onSBUpdateEnd = function () {
                      s.audioTimestampOffset &&
                        s.sourceBuffer.audio &&
                        ((t = s.sourceBuffer.audio),
                        k.b.warn(
                          "change mpeg audio timestamp offset from " +
                            t.timestampOffset +
                            " to " +
                            s.audioTimestampOffset
                        ),
                        (t.timestampOffset = s.audioTimestampOffset),
                        delete s.audioTimestampOffset),
                        s._needsFlush && s.doFlush(),
                        s._needsEos && s.checkEos(),
                        (s.appending = !1);
                      var e,
                        r = s.parent,
                        t = s.segments.reduce(function (e, t) {
                          return t.parent === r ? e + 1 : e;
                        }, 0),
                        i = {},
                        a = s.sourceBuffer;
                      for (e in a) {
                        var n = a[e];
                        if (!n)
                          throw Error(
                            "handling source buffer update end error: source buffer for " +
                              e +
                              " uninitilized and unable to update buffered TimeRanges."
                          );
                        i[e] = n.buffered;
                      }
                      s.hls.trigger(E.a.BUFFER_APPENDED, {
                        parent: r,
                        pending: t,
                        timeRanges: i,
                      }),
                        s._needsFlush || s.doAppending(),
                        s.updateMediaElementDuration(),
                        0 === t && s.flushLiveBackBuffer();
                    }),
                    (s._onSBUpdateError = function (e) {
                      k.b.error("sourceBuffer error:", e),
                        s.hls.trigger(E.a.ERROR, {
                          type: m.b.MEDIA_ERROR,
                          details: m.a.BUFFER_APPENDING_ERROR,
                          fatal: !1,
                        });
                    }),
                    (s.config = e.config),
                    s
                  );
                }
                (i = t),
                  ((e = r).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.destroy = function () {
                    o.prototype.destroy.call(this);
                  }),
                  (i.onLevelPtsUpdated = function (e) {
                    var t = e.type,
                      r = this.tracks.audio;
                    if ("audio" === t && r && "audio/mpeg" === r.container) {
                      var i = this.sourceBuffer.audio;
                      if (!i)
                        throw Error(
                          "Level PTS Updated and source buffer for audio uninitalized"
                        );
                      if (0.1 < Math.abs(i.timestampOffset - e.start)) {
                        r = i.updating;
                        try {
                          i.abort();
                        } catch (e) {
                          k.b.warn("can not abort audio buffer: " + e);
                        }
                        r
                          ? (this.audioTimestampOffset = e.start)
                          : (k.b.warn(
                              "change mpeg audio timestamp offset from " +
                                i.timestampOffset +
                                " to " +
                                e.start
                            ),
                            (i.timestampOffset = e.start));
                      }
                    }
                  }),
                  (i.onManifestParsed = function (e) {
                    var t = 2;
                    ((!e.audio || e.video) && e.altAudio) || (t = 1),
                      (this.bufferCodecEventsExpected =
                        this._bufferCodecEventsTotal =
                          t),
                      k.b.log(
                        this.bufferCodecEventsExpected +
                          " bufferCodec event(s) expected"
                      );
                  }),
                  (i.onMediaAttaching = function (e) {
                    var t = (this.media = e.media);
                    t &&
                      Ze &&
                      ((e = this.mediaSource = new Ze()).addEventListener(
                        "sourceopen",
                        this._onMediaSourceOpen
                      ),
                      e.addEventListener(
                        "sourceended",
                        this._onMediaSourceEnded
                      ),
                      e.addEventListener(
                        "sourceclose",
                        this._onMediaSourceClose
                      ),
                      (t.src = window.URL.createObjectURL(e)),
                      (this._objectUrl = t.src));
                  }),
                  (i.onMediaDetaching = function () {
                    k.b.log("media source detaching");
                    var e = this.mediaSource;
                    if (e) {
                      if ("open" === e.readyState)
                        try {
                          e.endOfStream();
                        } catch (e) {
                          k.b.warn(
                            "onMediaDetaching:" +
                              e.message +
                              " while calling endOfStream"
                          );
                        }
                      e.removeEventListener(
                        "sourceopen",
                        this._onMediaSourceOpen
                      ),
                        e.removeEventListener(
                          "sourceended",
                          this._onMediaSourceEnded
                        ),
                        e.removeEventListener(
                          "sourceclose",
                          this._onMediaSourceClose
                        ),
                        this.media &&
                          (this._objectUrl &&
                            window.URL.revokeObjectURL(this._objectUrl),
                          this.media.src === this._objectUrl
                            ? (this.media.removeAttribute("src"),
                              this.media.load())
                            : k.b.warn(
                                "media.src was changed by a third party - skip cleanup"
                              )),
                        (this.mediaSource = null),
                        (this.media = null),
                        (this._objectUrl = null),
                        (this.bufferCodecEventsExpected =
                          this._bufferCodecEventsTotal),
                        (this.pendingTracks = {}),
                        (this.tracks = {}),
                        (this.sourceBuffer = {}),
                        (this.flushRange = []),
                        (this.segments = []),
                        (this.appended = 0);
                    }
                    this.hls.trigger(E.a.MEDIA_DETACHED);
                  }),
                  (i.checkPendingTracks = function () {
                    var e = this.bufferCodecEventsExpected,
                      t = this.pendingTracks,
                      r = Object.keys(t).length;
                    ((r && !e) || 2 === r) &&
                      (this.createSourceBuffers(t),
                      (this.pendingTracks = {}),
                      this.doAppending());
                  }),
                  (i.onBufferReset = function () {
                    var e,
                      t = this.sourceBuffer;
                    for (e in t) {
                      var r = t[e];
                      try {
                        r &&
                          (this.mediaSource &&
                            this.mediaSource.removeSourceBuffer(r),
                          r.removeEventListener(
                            "updateend",
                            this._onSBUpdateEnd
                          ),
                          r.removeEventListener(
                            "error",
                            this._onSBUpdateError
                          ));
                      } catch (t) {}
                    }
                    (this.sourceBuffer = {}),
                      (this.flushRange = []),
                      (this.segments = []),
                      (this.appended = 0);
                  }),
                  (i.onBufferCodecs = function (t) {
                    var r = this;
                    Object.keys(this.sourceBuffer).length ||
                      (Object.keys(t).forEach(function (e) {
                        r.pendingTracks[e] = t[e];
                      }),
                      (this.bufferCodecEventsExpected = Math.max(
                        this.bufferCodecEventsExpected - 1,
                        0
                      )),
                      this.mediaSource &&
                        "open" === this.mediaSource.readyState &&
                        this.checkPendingTracks());
                  }),
                  (i.createSourceBuffers = function (e) {
                    var t,
                      r = this.sourceBuffer,
                      i = this.mediaSource;
                    if (!i)
                      throw Error(
                        "createSourceBuffers called when mediaSource was null"
                      );
                    for (t in e)
                      if (!r[t]) {
                        var a = e[t];
                        if (!a)
                          throw Error(
                            "source buffer exists for track " +
                              t +
                              ", however track does not"
                          );
                        var n = a.levelCodec || a.codec,
                          s = a.container + ";codecs=" + n;
                        k.b.log("creating sourceBuffer(" + s + ")");
                        try {
                          var o = (r[t] = i.addSourceBuffer(s));
                          o.addEventListener("updateend", this._onSBUpdateEnd),
                            o.addEventListener("error", this._onSBUpdateError),
                            (this.tracks[t] = {
                              buffer: o,
                              codec: n,
                              id: a.id,
                              container: a.container,
                              levelCodec: a.levelCodec,
                            });
                        } catch (e) {
                          k.b.error(
                            "error while trying to add sourceBuffer:" +
                              e.message
                          ),
                            this.hls.trigger(E.a.ERROR, {
                              type: m.b.MEDIA_ERROR,
                              details: m.a.BUFFER_ADD_CODEC_ERROR,
                              fatal: !1,
                              err: e,
                              mimeType: s,
                            });
                        }
                      }
                    this.hls.trigger(E.a.BUFFER_CREATED, {
                      tracks: this.tracks,
                    });
                  }),
                  (i.onBufferAppending = function (e) {
                    this._needsFlush ||
                      (this.segments
                        ? this.segments.push(e)
                        : (this.segments = [e]),
                      this.doAppending());
                  }),
                  (i.onBufferEos = function (e) {
                    for (var t in this.sourceBuffer) {
                      var r;
                      (e.type && e.type !== t) ||
                        ((r = this.sourceBuffer[t]) &&
                          !r.ended &&
                          ((r.ended = !0),
                          k.b.log(t + " sourceBuffer now EOS")));
                    }
                    this.checkEos();
                  }),
                  (i.checkEos = function () {
                    var e = this.sourceBuffer,
                      t = this.mediaSource;
                    if (t && "open" === t.readyState) {
                      for (var r in e) {
                        var i = e[r];
                        if (i) {
                          if (!i.ended) return;
                          if (i.updating) return void (this._needsEos = !0);
                        }
                      }
                      k.b.log(
                        "all media data are available, signal endOfStream() to MediaSource and stop loading fragment"
                      );
                      try {
                        t.endOfStream();
                      } catch (e) {
                        k.b.warn(
                          "exception while calling mediaSource.endOfStream()"
                        );
                      }
                      this._needsEos = !1;
                    } else this._needsEos = !1;
                  }),
                  (i.onBufferFlushing = function (e) {
                    e.type
                      ? this.flushRange.push({
                          start: e.startOffset,
                          end: e.endOffset,
                          type: e.type,
                        })
                      : (this.flushRange.push({
                          start: e.startOffset,
                          end: e.endOffset,
                          type: "video",
                        }),
                        this.flushRange.push({
                          start: e.startOffset,
                          end: e.endOffset,
                          type: "audio",
                        })),
                      (this.flushBufferCounter = 0),
                      this.doFlush();
                  }),
                  (i.flushLiveBackBuffer = function () {
                    if (this._live) {
                      var e = this.config.liveBackBufferLength;
                      if (isFinite(e) && !(e < 0))
                        if (this.media)
                          for (
                            var t = this.media.currentTime,
                              r = this.sourceBuffer,
                              i = Object.keys(r),
                              a = t - Math.max(e, this._levelTargetDuration),
                              n = i.length - 1;
                            0 <= n;
                            n--
                          ) {
                            var s,
                              o = i[n],
                              l = r[o];
                            !l ||
                              (0 < (s = l.buffered).length &&
                                a > s.start(0) &&
                                this.removeBufferRange(o, l, 0, a) &&
                                this.hls.trigger(E.a.LIVE_BACK_BUFFER_REACHED, {
                                  bufferEnd: a,
                                }));
                          }
                        else
                          k.b.error(
                            "flushLiveBackBuffer called without attaching media"
                          );
                    }
                  }),
                  (i.onLevelUpdated = function (e) {
                    e = e.details;
                    0 < e.fragments.length &&
                      ((this._levelDuration =
                        e.totalduration + e.fragments[0].start),
                      (this._levelTargetDuration =
                        e.averagetargetduration || e.targetduration || 10),
                      (this._live = e.live),
                      this.updateMediaElementDuration());
                  }),
                  (i.updateMediaElementDuration = function () {
                    var e,
                      t = this.config;
                    if (
                      null !== this._levelDuration &&
                      this.media &&
                      this.mediaSource &&
                      this.sourceBuffer &&
                      0 !== this.media.readyState &&
                      "open" === this.mediaSource.readyState
                    ) {
                      for (var r in this.sourceBuffer) {
                        var i = this.sourceBuffer[r];
                        if (i && !0 === i.updating) return;
                      }
                      (e = this.media.duration),
                        null === this._msDuration &&
                          (this._msDuration = this.mediaSource.duration),
                        !0 === this._live && !0 === t.liveDurationInfinity
                          ? (k.b.log(
                              "Media Source duration is set to Infinity"
                            ),
                            (this._msDuration = this.mediaSource.duration =
                              1 / 0))
                          : ((this._levelDuration > this._msDuration &&
                              this._levelDuration > e) ||
                              !Object(A.a)(e)) &&
                            (k.b.log(
                              "Updating Media Source duration to " +
                                this._levelDuration.toFixed(3)
                            ),
                            (this._msDuration = this.mediaSource.duration =
                              this._levelDuration));
                    }
                  }),
                  (i.doFlush = function () {
                    for (; this.flushRange.length; ) {
                      var e = this.flushRange[0];
                      if (!this.flushBuffer(e.start, e.end, e.type))
                        return void (this._needsFlush = !0);
                      this.flushRange.shift(), (this.flushBufferCounter = 0);
                    }
                    if (0 === this.flushRange.length) {
                      this._needsFlush = !1;
                      var t = 0,
                        r = this.sourceBuffer;
                      try {
                        for (var i in r) {
                          var a = r[i];
                          a && (t += a.buffered.length);
                        }
                      } catch (e) {
                        k.b.error(
                          "error while accessing sourceBuffer.buffered"
                        );
                      }
                      (this.appended = t), this.hls.trigger(E.a.BUFFER_FLUSHED);
                    }
                  }),
                  (i.doAppending = function () {
                    var e = this.config,
                      t = this.hls,
                      r = this.segments,
                      i = this.sourceBuffer;
                    if (Object.keys(i).length) {
                      if (!this.media || this.media.error)
                        return (
                          (this.segments = []),
                          void k.b.error(
                            "trying to append although a media error occured, flush segment and abort"
                          )
                        );
                      if (!this.appending) {
                        var a = r.shift();
                        if (a)
                          try {
                            var n = i[a.type];
                            n
                              ? n.updating
                                ? r.unshift(a)
                                : ((n.ended = !1),
                                  (this.parent = a.parent),
                                  n.appendBuffer(a.data),
                                  (this.appendError = 0),
                                  this.appended++,
                                  (this.appending = !0))
                              : this._onSBUpdateEnd();
                          } catch (i) {
                            k.b.error(
                              "error while trying to append buffer:" + i.message
                            ),
                              r.unshift(a);
                            var s = {
                              type: m.b.MEDIA_ERROR,
                              parent: a.parent,
                              details: "",
                              fatal: !1,
                            };
                            22 === i.code
                              ? ((this.segments = []),
                                (s.details = m.a.BUFFER_FULL_ERROR))
                              : (this.appendError++,
                                (s.details = m.a.BUFFER_APPEND_ERROR),
                                this.appendError > e.appendErrorMaxRetry &&
                                  (k.b.log(
                                    "fail " +
                                      e.appendErrorMaxRetry +
                                      " times to append segment in sourceBuffer"
                                  ),
                                  (this.segments = []),
                                  (s.fatal = !0))),
                              t.trigger(E.a.ERROR, s);
                          }
                      }
                    }
                  }),
                  (i.flushBuffer = function (e, t, r) {
                    var i = this.sourceBuffer;
                    if (!Object.keys(i).length) return !0;
                    var a = "null";
                    if (
                      (this.media && (a = this.media.currentTime.toFixed(3)),
                      k.b.log(
                        "flushBuffer,pos/start/end: " + a + "/" + e + "/" + t
                      ),
                      this.flushBufferCounter >= this.appended)
                    )
                      return k.b.warn("abort flushing too many retries"), !0;
                    i = i[r];
                    if (i) {
                      if (((i.ended = !1), i.updating))
                        return (
                          k.b.warn("cannot flush, sb updating in progress"), !1
                        );
                      if (this.removeBufferRange(r, i, e, t))
                        return this.flushBufferCounter++, !1;
                    }
                    return k.b.log("buffer flushed"), !0;
                  }),
                  (i.removeBufferRange = function (e, t, r, i) {
                    try {
                      for (var a = 0; a < t.buffered.length; a++) {
                        var n = t.buffered.start(a),
                          s = t.buffered.end(a),
                          o = Math.max(n, r),
                          l = Math.min(s, i);
                        if (0.5 < Math.min(l, s) - o) {
                          var d = "null";
                          return (
                            this.media &&
                              (d = this.media.currentTime.toString()),
                            k.b.log(
                              "sb remove " +
                                e +
                                " [" +
                                o +
                                "," +
                                l +
                                "], of [" +
                                n +
                                "," +
                                s +
                                "], pos:" +
                                d
                            ),
                            t.remove(o, l),
                            !0
                          );
                        }
                      }
                    } catch (e) {
                      k.b.warn("removeBufferRange failed", e);
                    }
                    return !1;
                  }),
                  r
                );
              })(o);
            function et(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var tt = (function (t) {
                function a(e) {
                  return (
                    ((e =
                      t.call(
                        this,
                        e,
                        E.a.FPS_DROP_LEVEL_CAPPING,
                        E.a.MEDIA_ATTACHING,
                        E.a.MANIFEST_PARSED,
                        E.a.LEVELS_UPDATED,
                        E.a.BUFFER_CODECS,
                        E.a.MEDIA_DETACHING
                      ) || this).autoLevelCapping = Number.POSITIVE_INFINITY),
                    (e.firstLevel = null),
                    (e.levels = []),
                    (e.media = null),
                    (e.restrictedLevels = []),
                    (e.timer = null),
                    (e.clientRect = null),
                    e
                  );
                }
                (e = t),
                  ((r = a).prototype = Object.create(e.prototype)),
                  ((r.prototype.constructor = r).__proto__ = e);
                var e,
                  r = a.prototype;
                return (
                  (r.destroy = function () {
                    this.hls.config.capLevelToPlayerSize &&
                      ((this.media = null),
                      (this.clientRect = null),
                      this.stopCapping());
                  }),
                  (r.onFpsDropLevelCapping = function (e) {
                    a.isLevelAllowed(e.droppedLevel, this.restrictedLevels) &&
                      this.restrictedLevels.push(e.droppedLevel);
                  }),
                  (r.onMediaAttaching = function (e) {
                    this.media =
                      e.media instanceof window.HTMLVideoElement
                        ? e.media
                        : null;
                  }),
                  (r.onManifestParsed = function (e) {
                    var t = this.hls;
                    (this.restrictedLevels = []),
                      (this.levels = e.levels),
                      (this.firstLevel = e.firstLevel),
                      t.config.capLevelToPlayerSize &&
                        e.video &&
                        this.startCapping();
                  }),
                  (r.onBufferCodecs = function (e) {
                    this.hls.config.capLevelToPlayerSize &&
                      e.video &&
                      this.startCapping();
                  }),
                  (r.onLevelsUpdated = function (e) {
                    this.levels = e.levels;
                  }),
                  (r.onMediaDetaching = function () {
                    this.stopCapping();
                  }),
                  (r.detectPlayerSize = function () {
                    var e, t;
                    !this.media ||
                      ((e = this.levels ? this.levels.length : 0) &&
                        (((t = this.hls).autoLevelCapping = this.getMaxLevel(
                          e - 1
                        )),
                        t.autoLevelCapping > this.autoLevelCapping &&
                          t.streamController.nextLevelSwitch(),
                        (this.autoLevelCapping = t.autoLevelCapping)));
                  }),
                  (r.getMaxLevel = function (r) {
                    var i = this;
                    if (!this.levels) return -1;
                    var e = this.levels.filter(function (e, t) {
                      return a.isLevelAllowed(t, i.restrictedLevels) && t <= r;
                    });
                    return (
                      (this.clientRect = null),
                      a.getMaxLevelByMediaSize(
                        e,
                        this.mediaWidth,
                        this.mediaHeight
                      )
                    );
                  }),
                  (r.startCapping = function () {
                    this.timer ||
                      ((this.autoLevelCapping = Number.POSITIVE_INFINITY),
                      (this.hls.firstLevel = this.getMaxLevel(this.firstLevel)),
                      clearInterval(this.timer),
                      (this.timer = setInterval(
                        this.detectPlayerSize.bind(this),
                        1e3
                      )),
                      this.detectPlayerSize());
                  }),
                  (r.stopCapping = function () {
                    (this.restrictedLevels = []),
                      (this.firstLevel = null),
                      (this.autoLevelCapping = Number.POSITIVE_INFINITY),
                      this.timer &&
                        ((this.timer = clearInterval(this.timer)),
                        (this.timer = null));
                  }),
                  (r.getDimensions = function () {
                    if (this.clientRect) return this.clientRect;
                    var e,
                      t = this.media,
                      r = {
                        width: 0,
                        height: 0,
                      };
                    return (
                      t &&
                        ((e = t.getBoundingClientRect()),
                        (r.width = e.width),
                        (r.height = e.height),
                        r.width ||
                          r.height ||
                          ((r.width = e.right - e.left || t.width || 0),
                          (r.height = e.bottom - e.top || t.height || 0))),
                      (this.clientRect = r)
                    );
                  }),
                  (a.isLevelAllowed = function (e, t) {
                    return void 0 === t && (t = []), -1 === t.indexOf(e);
                  }),
                  (a.getMaxLevelByMediaSize = function (e, t, r) {
                    if (!e || (e && !e.length)) return -1;
                    for (var i, a = e.length - 1, n = 0; n < e.length; n += 1) {
                      var s = e[n];
                      if (
                        (s.width >= t || s.height >= r) &&
                        (!(i = e[n + 1]) ||
                          s.width !== i.width ||
                          s.height !== i.height)
                      ) {
                        a = n;
                        break;
                      }
                    }
                    return a;
                  }),
                  (e = [
                    {
                      key: "contentScaleFactor",
                      get: function () {
                        var e = 1;
                        try {
                          e = window.devicePixelRatio;
                        } catch (e) {}
                        return e;
                      },
                    },
                  ]),
                  et((r = a).prototype, [
                    {
                      key: "mediaWidth",
                      get: function () {
                        return (
                          this.getDimensions().width * a.contentScaleFactor
                        );
                      },
                    },
                    {
                      key: "mediaHeight",
                      get: function () {
                        return (
                          this.getDimensions().height * a.contentScaleFactor
                        );
                      },
                    },
                  ]),
                  et(r, e),
                  a
                );
              })(o),
              rt = window.performance,
              it = (function (t) {
                var e;
                function r(e) {
                  return t.call(this, e, E.a.MEDIA_ATTACHING) || this;
                }
                (i = t),
                  ((e = r).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.destroy = function () {
                    this.timer && clearInterval(this.timer),
                      (this.isVideoPlaybackQualityAvailable = !1);
                  }),
                  (i.onMediaAttaching = function (e) {
                    var t = this.hls.config;
                    t.capLevelOnFPSDrop &&
                      ("function" ==
                        typeof (this.video =
                          e.media instanceof window.HTMLVideoElement
                            ? e.media
                            : null).getVideoPlaybackQuality &&
                        (this.isVideoPlaybackQualityAvailable = !0),
                      clearInterval(this.timer),
                      (this.timer = setInterval(
                        this.checkFPSInterval.bind(this),
                        t.fpsDroppedMonitoringPeriod
                      )));
                  }),
                  (i.checkFPS = function (e, t, r) {
                    var i,
                      a,
                      n,
                      s,
                      o = rt.now();
                    t &&
                      (this.lastTime &&
                        ((n = o - this.lastTime),
                        (i = r - this.lastDroppedFrames),
                        (s = t - this.lastDecodedFrames),
                        (a = (1e3 * i) / n),
                        (n = this.hls).trigger(E.a.FPS_DROP, {
                          currentDropped: i,
                          currentDecoded: s,
                          totalDroppedFrames: r,
                        }),
                        0 < a &&
                          i > n.config.fpsDroppedMonitoringThreshold * s &&
                          ((s = n.currentLevel),
                          k.b.warn(
                            "drop FPS ratio greater than max allowed value for currentLevel: " +
                              s
                          ),
                          0 < s &&
                            (-1 === n.autoLevelCapping ||
                              n.autoLevelCapping >= s) &&
                            (--s,
                            n.trigger(E.a.FPS_DROP_LEVEL_CAPPING, {
                              level: s,
                              droppedLevel: n.currentLevel,
                            }),
                            (n.autoLevelCapping = s),
                            n.streamController.nextLevelSwitch()))),
                      (this.lastTime = o),
                      (this.lastDroppedFrames = r),
                      (this.lastDecodedFrames = t));
                  }),
                  (i.checkFPSInterval = function () {
                    var e,
                      t = this.video;
                    t &&
                      (this.isVideoPlaybackQualityAvailable
                        ? ((e = t.getVideoPlaybackQuality()),
                          this.checkFPS(
                            t,
                            e.totalVideoFrames,
                            e.droppedVideoFrames
                          ))
                        : this.checkFPS(
                            t,
                            t.webkitDecodedFrameCount,
                            t.webkitDroppedFrameCount
                          ));
                  }),
                  r
                );
              })(o),
              t =
                (((ee = at.prototype).destroy = function () {
                  this.abort(), (this.loader = null);
                }),
                (ee.abort = function () {
                  var e = this.loader;
                  e &&
                    4 !== e.readyState &&
                    ((this.stats.aborted = !0), e.abort()),
                    window.clearTimeout(this.requestTimeout),
                    (this.requestTimeout = null),
                    window.clearTimeout(this.retryTimeout),
                    (this.retryTimeout = null);
                }),
                (ee.load = function (e, t, r) {
                  (this.context = e),
                    (this.config = t),
                    (this.callbacks = r),
                    (this.stats = {
                      trequest: window.performance.now(),
                      retry: 0,
                    }),
                    (this.retryDelay = t.retryDelay),
                    this.loadInternal();
                }),
                (ee.loadInternal = function () {
                  var e = this.context,
                    t = (this.loader = new window.XMLHttpRequest()),
                    r = this.stats;
                  (r.tfirst = 0), (r.loaded = 0);
                  var i = this.xhrSetup;
                  try {
                    if (i)
                      try {
                        i(t, e.url);
                      } catch (r) {
                        t.open("GET", e.url, !0), i(t, e.url);
                      }
                    t.readyState || t.open("GET", e.url, !0);
                  } catch (r) {
                    return void this.callbacks.onError(
                      {
                        code: t.status,
                        text: r.message,
                      },
                      e,
                      t
                    );
                  }
                  e.rangeEnd &&
                    t.setRequestHeader(
                      "Range",
                      "bytes=" + e.rangeStart + "-" + (e.rangeEnd - 1)
                    ),
                    (t.onreadystatechange = this.readystatechange.bind(this)),
                    (t.onprogress = this.loadprogress.bind(this)),
                    (t.responseType = e.responseType),
                    (this.requestTimeout = window.setTimeout(
                      this.loadtimeout.bind(this),
                      this.config.timeout
                    )),
                    t.send();
                }),
                (ee.readystatechange = function (e) {
                  var t,
                    r = e.currentTarget,
                    i = r.readyState,
                    a = this.stats,
                    n = this.context,
                    s = this.config;
                  !a.aborted &&
                    2 <= i &&
                    (window.clearTimeout(this.requestTimeout),
                    0 === a.tfirst &&
                      (a.tfirst = Math.max(
                        window.performance.now(),
                        a.trequest
                      )),
                    4 === i
                      ? 200 <= (e = r.status) && e < 300
                        ? ((a.tload = Math.max(
                            a.tfirst,
                            window.performance.now()
                          )),
                          (i =
                            "arraybuffer" === n.responseType
                              ? (t = r.response).byteLength
                              : (t = r.responseText).length),
                          (a.loaded = a.total = i),
                          (t = {
                            url: r.responseURL,
                            data: t,
                          }),
                          this.callbacks.onSuccess(t, a, n, r))
                        : a.retry >= s.maxRetry || (400 <= e && e < 499)
                        ? (k.b.error(e + " while loading " + n.url),
                          this.callbacks.onError(
                            {
                              code: e,
                              text: r.statusText,
                            },
                            n,
                            r
                          ))
                        : (k.b.warn(
                            e +
                              " while loading " +
                              n.url +
                              ", retrying in " +
                              this.retryDelay +
                              "..."
                          ),
                          this.destroy(),
                          (this.retryTimeout = window.setTimeout(
                            this.loadInternal.bind(this),
                            this.retryDelay
                          )),
                          (this.retryDelay = Math.min(
                            2 * this.retryDelay,
                            s.maxRetryDelay
                          )),
                          a.retry++)
                      : (this.requestTimeout = window.setTimeout(
                          this.loadtimeout.bind(this),
                          s.timeout
                        )));
                }),
                (ee.loadtimeout = function () {
                  k.b.warn("timeout while loading " + this.context.url),
                    this.callbacks.onTimeout(this.stats, this.context, null);
                }),
                (ee.loadprogress = function (e) {
                  var t = e.currentTarget,
                    r = this.stats;
                  (r.loaded = e.loaded),
                    e.lengthComputable && (r.total = e.total);
                  e = this.callbacks.onProgress;
                  e && e(r, this.context, null, t);
                }),
                at);
            function at(e) {
              e && e.xhrSetup && (this.xhrSetup = e.xhrSetup);
            }
            function nt(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            var st = (function (t) {
              var e;
              function r(e) {
                return (
                  ((e =
                    t.call(
                      this,
                      e,
                      E.a.MANIFEST_LOADING,
                      E.a.MANIFEST_PARSED,
                      E.a.AUDIO_TRACK_LOADED,
                      E.a.AUDIO_TRACK_SWITCHED,
                      E.a.LEVEL_LOADED,
                      E.a.ERROR
                    ) || this)._trackId = -1),
                  (e._selectDefaultTrack = !0),
                  (e.tracks = []),
                  (e.trackIdBlacklist = Object.create(null)),
                  (e.audioGroupId = null),
                  e
                );
              }
              (i = t),
                ((e = r).prototype = Object.create(i.prototype)),
                ((e.prototype.constructor = e).__proto__ = i);
              var i = r.prototype;
              return (
                (i.onManifestLoading = function () {
                  (this.tracks = []),
                    (this._trackId = -1),
                    (this._selectDefaultTrack = !0);
                }),
                (i.onManifestParsed = function (e) {
                  e = this.tracks = e.audioTracks || [];
                  this.hls.trigger(E.a.AUDIO_TRACKS_UPDATED, {
                    audioTracks: e,
                  }),
                    this._selectAudioGroup(this.hls.nextLoadLevel);
                }),
                (i.onAudioTrackLoaded = function (e) {
                  var t;
                  e.id >= this.tracks.length
                    ? k.b.warn("Invalid audio track id:", e.id)
                    : (k.b.log("audioTrack " + e.id + " loaded"),
                      (this.tracks[e.id].details = e.details),
                      e.details.live &&
                        !this.hasInterval() &&
                        ((t = 1e3 * e.details.targetduration),
                        this.setInterval(t)),
                      !e.details.live &&
                        this.hasInterval() &&
                        this.clearInterval());
                }),
                (i.onAudioTrackSwitched = function (e) {
                  e = this.tracks[e.id].groupId;
                  e && this.audioGroupId !== e && (this.audioGroupId = e);
                }),
                (i.onLevelLoaded = function (e) {
                  this._selectAudioGroup(e.level);
                }),
                (i.onError = function (e) {
                  e.type === m.b.NETWORK_ERROR &&
                    (e.fatal && this.clearInterval(),
                    e.details === m.a.AUDIO_TRACK_LOAD_ERROR &&
                      (k.b.warn(
                        "Network failure on audio-track id:",
                        e.context.id
                      ),
                      this._handleLoadError()));
                }),
                (i._setAudioTrack = function (e) {
                  var t, r, i;
                  this._trackId === e && this.tracks[this._trackId].details
                    ? k.b.debug(
                        "Same id as current audio-track passed, and track details available -> no-op"
                      )
                    : e < 0 || e >= this.tracks.length
                    ? k.b.warn("Invalid id passed to audio-track controller")
                    : ((t = this.tracks[e]),
                      k.b.log("Now switching to audio-track index " + e),
                      this.clearInterval(),
                      (this._trackId = e),
                      (r = t.url),
                      (i = t.type),
                      (e = t.id),
                      this.hls.trigger(E.a.AUDIO_TRACK_SWITCHING, {
                        id: e,
                        type: i,
                        url: r,
                      }),
                      this._loadTrackDetailsIfNeeded(t));
                }),
                (i.doTick = function () {
                  this._updateTrack(this._trackId);
                }),
                (i._selectAudioGroup = function (e) {
                  e = this.hls.levels[e];
                  e &&
                    e.audioGroupIds &&
                    ((e = e.audioGroupIds[e.urlId]),
                    this.audioGroupId !== e &&
                      ((this.audioGroupId = e),
                      this._selectInitialAudioTrack()));
                }),
                (i._selectInitialAudioTrack = function () {
                  var e,
                    t,
                    r,
                    i,
                    a = this,
                    n = this.tracks;
                  n.length &&
                    ((e = this.tracks[this._trackId]),
                    (t = null),
                    e && (t = e.name),
                    this._selectDefaultTrack &&
                      ((i = n.filter(function (e) {
                        return e.default;
                      })).length
                        ? (n = i)
                        : k.b.warn("No default audio tracks defined")),
                    (r = !1),
                    (i = function () {
                      n.forEach(function (e) {
                        r ||
                          (a.audioGroupId && e.groupId !== a.audioGroupId) ||
                          (t && t !== e.name) ||
                          (a._setAudioTrack(e.id), (r = !0));
                      });
                    })(),
                    r || ((t = null), i()),
                    r ||
                      (k.b.error(
                        "No track found for running audio group-ID: " +
                          this.audioGroupId
                      ),
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.MEDIA_ERROR,
                        details: m.a.AUDIO_TRACK_LOAD_ERROR,
                        fatal: !0,
                      })));
                }),
                (i._needsTrackLoading = function (e) {
                  var t = e.details,
                    e = e.url;
                  return !((t && !t.live) || !e);
                }),
                (i._loadTrackDetailsIfNeeded = function (e) {
                  var t;
                  this._needsTrackLoading(e) &&
                    ((t = e.url),
                    (e = e.id),
                    k.b.log("loading audio-track playlist for id: " + e),
                    this.hls.trigger(E.a.AUDIO_TRACK_LOADING, {
                      url: t,
                      id: e,
                    }));
                }),
                (i._updateTrack = function (e) {
                  e < 0 ||
                    e >= this.tracks.length ||
                    (this.clearInterval(),
                    (this._trackId = e),
                    k.b.log("trying to update audio-track " + e),
                    (e = this.tracks[e]),
                    this._loadTrackDetailsIfNeeded(e));
                }),
                (i._handleLoadError = function () {
                  this.trackIdBlacklist[this._trackId] = !0;
                  var e = this._trackId,
                    t = this.tracks[e],
                    r = t.name,
                    i = t.language,
                    t = t.groupId;
                  k.b.warn(
                    "Loading failed on audio track id: " +
                      e +
                      ", group-id: " +
                      t +
                      ', name/language: "' +
                      r +
                      '" / "' +
                      i +
                      '"'
                  );
                  for (var a = e, n = 0; n < this.tracks.length; n++)
                    if (
                      !this.trackIdBlacklist[n] &&
                      this.tracks[n].name === r
                    ) {
                      a = n;
                      break;
                    }
                  a !== e
                    ? (k.b.log(
                        "Attempting audio-track fallback id:",
                        a,
                        "group-id:",
                        this.tracks[a].groupId
                      ),
                      this._setAudioTrack(a))
                    : k.b.warn(
                        'No fallback audio-track found for name/language: "' +
                          r +
                          '" / "' +
                          i +
                          '"'
                      );
                }),
                nt(r.prototype, [
                  {
                    key: "audioTracks",
                    get: function () {
                      return this.tracks;
                    },
                  },
                  {
                    key: "audioTrack",
                    get: function () {
                      return this._trackId;
                    },
                    set: function (e) {
                      this._setAudioTrack(e), (this._selectDefaultTrack = !1);
                    },
                  },
                ]),
                r
              );
            })(Ee);
            function ot(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            function lt() {
              return {
                decode: function (e) {
                  if (!e) return "";
                  if ("string" != typeof e)
                    throw new Error("Error - expected string data.");
                  return decodeURIComponent(encodeURIComponent(e));
                },
              };
            }
            var dt = window.performance,
              ut = (function (i) {
                var e;
                function t(e, t) {
                  var r;
                  return (
                    ((r =
                      i.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHED,
                        E.a.MEDIA_DETACHING,
                        E.a.AUDIO_TRACKS_UPDATED,
                        E.a.AUDIO_TRACK_SWITCHING,
                        E.a.AUDIO_TRACK_LOADED,
                        E.a.KEY_LOADED,
                        E.a.FRAG_LOADED,
                        E.a.FRAG_PARSING_INIT_SEGMENT,
                        E.a.FRAG_PARSING_DATA,
                        E.a.FRAG_PARSED,
                        E.a.ERROR,
                        E.a.BUFFER_RESET,
                        E.a.BUFFER_CREATED,
                        E.a.BUFFER_APPENDED,
                        E.a.BUFFER_FLUSHED,
                        E.a.INIT_PTS_FOUND
                      ) || this).fragmentTracker = t),
                    (r.config = e.config),
                    (r.audioCodecSwap = !1),
                    (r._state = Se),
                    (r.initPTS = []),
                    (r.waitingFragment = null),
                    (r.videoTrackCC = null),
                    (r.waitingVideoCC = null),
                    r
                  );
                }
                (r = i),
                  ((e = t).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r);
                var r = t.prototype;
                return (
                  (r.onInitPtsFound = function (e) {
                    var t = e.id,
                      r = e.frag.cc,
                      e = e.initPTS;
                    "main" === t &&
                      ((this.initPTS[r] = e),
                      (this.videoTrackCC = r),
                      k.b.log(
                        "InitPTS for cc: " + r + " found from main: " + e
                      ),
                      this.state === xe && this.tick());
                  }),
                  (r.startLoad = function (e) {
                    var t;
                    this.tracks
                      ? ((t = this.lastCurrentTime),
                        this.stopLoad(),
                        this.setInterval(100),
                        (this.fragLoadError = 0) < t && -1 === e
                          ? (k.b.log(
                              "audio:override startPosition with lastCurrentTime @" +
                                t.toFixed(3)
                            ),
                            (this.state = Re))
                          : ((this.lastCurrentTime = this.startPosition || e),
                            (this.state = _e)),
                        (this.nextLoadPosition = this.startPosition =
                          this.lastCurrentTime),
                        this.tick())
                      : ((this.startPosition = e), (this.state = Se));
                  }),
                  (r.doTick = function () {
                    var e,
                      t,
                      r,
                      i = this.hls,
                      a = i.config;
                    switch (this.state) {
                      case Pe:
                      case "PAUSED":
                      case Ce:
                        break;
                      case _e:
                        (this.state = Le), (this.loadedmetadata = !1);
                        break;
                      case Re:
                        var n = this.tracks;
                        if (!n) break;
                        if (
                          !this.media &&
                          (this.startFragRequested || !a.startFragPrefetch)
                        )
                          break;
                        if (this.loadedmetadata) e = this.media.currentTime;
                        else if (void 0 === (e = this.nextLoadPosition)) break;
                        var s = this.mediaBuffer || this.media,
                          o = this.videoBuffer || this.media,
                          l =
                            e < a.maxBufferHole
                              ? Math.max(2, a.maxBufferHole)
                              : a.maxBufferHole,
                          d = q.bufferInfo(s, e, l),
                          u = q.bufferInfo(o, e, l),
                          c = d.len,
                          h = d.end,
                          f = this.fragPrevious,
                          g = Math.min(a.maxBufferLength, a.maxMaxBufferLength),
                          o = Math.max(g, u.len),
                          l = this.audioSwitch,
                          g = this.trackId;
                        if ((c < o || l) && g < n.length) {
                          if (void 0 === (t = n[g].details)) {
                            this.state = Le;
                            break;
                          }
                          if (!l && this._streamEnded(d, t))
                            return (
                              this.hls.trigger(E.a.BUFFER_EOS, {
                                type: "audio",
                              }),
                              void (this.state = Ie)
                            );
                          var p,
                            u = t.fragments,
                            c = u.length,
                            o = u[0].start,
                            n = u[c - 1].start + u[c - 1].duration;
                          if (l)
                            if (t.live && !t.PTSKnown)
                              k.b.log(
                                "switching audiotrack, live stream, unknown PTS,load first fragment"
                              ),
                                (h = 0);
                            else if (((h = e), t.PTSKnown && e < o)) {
                              if (!(d.end > o || d.nextStart)) return;
                              k.b.log(
                                "alt audio track ahead of main track, seek to start of alt audio track"
                              ),
                                (this.media.currentTime = o + 0.05);
                            }
                          if (t.initSegment && !t.initSegment.data)
                            p = t.initSegment;
                          else if (h <= o) {
                            if (
                              ((p = u[0]),
                              null !== this.videoTrackCC &&
                                p.cc !== this.videoTrackCC &&
                                ((r = this.videoTrackCC),
                                (p = W(u, function (e) {
                                  return e.cc < r ? 1 : e.cc > r ? -1 : 0;
                                }))),
                              t.live &&
                                p.loadIdx &&
                                p.loadIdx === this.fragLoadIdx)
                            ) {
                              var m = d.nextStart || o;
                              return (
                                k.b.log(
                                  "no alt audio available @currentTime:" +
                                    this.media.currentTime +
                                    ", seeking @" +
                                    (m + 0.05)
                                ),
                                void (this.media.currentTime = m + 0.05)
                              );
                            }
                          } else {
                            var v = a.maxFragLookUpTolerance,
                              m = f ? u[f.sn - u[0].sn + 1] : void 0,
                              c =
                                h < n
                                  ? (n - v < h && (v = 0),
                                    m && !ye(h, v, m)
                                      ? m
                                      : W(u, function (e) {
                                          return ye(h, v, e);
                                        }))
                                  : u[c - 1];
                            c &&
                              ((o = (p = c).start),
                              f &&
                                p.level === f.level &&
                                p.sn === f.sn &&
                                (p.sn < t.endSN
                                  ? ((p = u[p.sn + 1 - t.startSN]),
                                    "OK" !== this.fragmentTracker.getState(p) &&
                                      k.b.log(
                                        "SN just loaded, load next one: " + p.sn
                                      ))
                                  : (p = null)));
                          }
                          p &&
                            (p.encrypted
                              ? (k.b.log(
                                  "Loading key for " +
                                    p.sn +
                                    " of [" +
                                    t.startSN +
                                    " ," +
                                    t.endSN +
                                    "],track " +
                                    g
                                ),
                                (this.state = Ae),
                                i.trigger(E.a.KEY_LOADING, {
                                  frag: p,
                                }))
                              : ((this.fragCurrent = p),
                                (!l &&
                                  this.fragmentTracker.getState(p) !== j) ||
                                  (k.b.log(
                                    "Loading " +
                                      p.sn +
                                      ", cc: " +
                                      p.cc +
                                      " of [" +
                                      t.startSN +
                                      " ," +
                                      t.endSN +
                                      "],track " +
                                      g +
                                      ", " +
                                      (this.loadedmetadata
                                        ? "currentTime"
                                        : "nextLoadPosition") +
                                      ": " +
                                      e +
                                      ", bufferEnd: " +
                                      h.toFixed(3)
                                  ),
                                  "initSegment" !== p.sn &&
                                    (this.startFragRequested = !0),
                                  Object(A.a)(p.sn) &&
                                    (this.nextLoadPosition =
                                      p.start + p.duration),
                                  i.trigger(E.a.FRAG_LOADING, {
                                    frag: p,
                                  }),
                                  (this.state = ke))));
                        }
                        break;
                      case Le:
                        (p = this.tracks[this.trackId]) &&
                          p.details &&
                          (this.state = Re);
                        break;
                      case we:
                        var y = dt.now(),
                          b = this.retryDate,
                          T = (s = this.media) && s.seeking;
                        (!b || b <= y || T) &&
                          (k.b.log(
                            "audioStreamController: retryDate reached, switch back to IDLE state"
                          ),
                          (this.state = Re));
                        break;
                      case xe:
                        b = this.waitingFragment;
                        b
                          ? ((y = b.frag.cc),
                            void 0 !== this.initPTS[y]
                              ? ((this.waitingFragment = null),
                                (this.state = ke),
                                this.onFragLoaded(b))
                              : this.videoTrackCC !== this.waitingVideoCC
                              ? (k.b.log(
                                  "Waiting fragment cc (" +
                                    y +
                                    ") cancelled because video is at cc " +
                                    this.videoTrackCC
                                ),
                                this.clearWaitingFragment())
                              : ye(
                                  (T = q.bufferInfo(
                                    this.mediaBuffer,
                                    this.media.currentTime,
                                    a.maxBufferHole
                                  )).end,
                                  a.maxFragLookUpTolerance,
                                  b.frag
                                ) < 0 &&
                                (k.b.log(
                                  "Waiting fragment cc (" +
                                    y +
                                    ") @ " +
                                    b.frag.start +
                                    " cancelled because another fragment at " +
                                    T.end +
                                    " is needed"
                                ),
                                this.clearWaitingFragment()))
                          : (this.state = Re);
                    }
                  }),
                  (r.clearWaitingFragment = function () {
                    var e = this.waitingFragment;
                    e &&
                      (this.fragmentTracker.removeFragment(e.frag),
                      (this.waitingFragment = null),
                      (this.waitingVideoCC = null),
                      (this.state = Re));
                  }),
                  (r.onMediaAttached = function (e) {
                    e = this.media = this.mediaBuffer = e.media;
                    (this.onvseeking = this.onMediaSeeking.bind(this)),
                      (this.onvended = this.onMediaEnded.bind(this)),
                      e.addEventListener("seeking", this.onvseeking),
                      e.addEventListener("ended", this.onvended);
                    e = this.config;
                    this.tracks &&
                      e.autoStartLoad &&
                      this.startLoad(e.startPosition);
                  }),
                  (r.onMediaDetaching = function () {
                    var e = this.media;
                    e &&
                      e.ended &&
                      (k.b.log(
                        "MSE detaching and video ended, reset startPosition"
                      ),
                      (this.startPosition = this.lastCurrentTime = 0)),
                      e &&
                        (e.removeEventListener("seeking", this.onvseeking),
                        e.removeEventListener("ended", this.onvended),
                        (this.onvseeking =
                          this.onvseeked =
                          this.onvended =
                            null)),
                      (this.media = this.mediaBuffer = this.videoBuffer = null),
                      (this.loadedmetadata = !1),
                      this.fragmentTracker.removeAllFragments(),
                      this.stopLoad();
                  }),
                  (r.onAudioTracksUpdated = function (e) {
                    k.b.log("audio tracks updated"),
                      (this.tracks = e.audioTracks);
                  }),
                  (r.onAudioTrackSwitching = function (e) {
                    var t = !!e.url;
                    (this.trackId = e.id),
                      (this.fragCurrent = null),
                      this.clearWaitingFragment(),
                      (this.state = "PAUSED"),
                      t
                        ? this.setInterval(100)
                        : this.demuxer &&
                          (this.demuxer.destroy(), (this.demuxer = null)),
                      t && ((this.audioSwitch = !0), (this.state = Re)),
                      this.tick();
                  }),
                  (r.onAudioTrackLoaded = function (e) {
                    var t = e.details,
                      r = e.id,
                      i = this.tracks[r],
                      a = t.totalduration,
                      e = 0;
                    k.b.log(
                      "track " +
                        r +
                        " loaded [" +
                        t.startSN +
                        "," +
                        t.endSN +
                        "],duration:" +
                        a
                    ),
                      t.live
                        ? (a = i.details) && 0 < t.fragments.length
                          ? (ue(a, t),
                            (e = t.fragments[0].start),
                            t.PTSKnown
                              ? k.b.log(
                                  "live audio playlist sliding:" + e.toFixed(3)
                                )
                              : k.b.log(
                                  "live audio playlist - outdated PTS, unknown sliding"
                                ))
                          : ((t.PTSKnown = !1),
                            k.b.log(
                              "live audio playlist - first load, unknown sliding"
                            ))
                        : (t.PTSKnown = !1),
                      (i.details = t),
                      this.startFragRequested ||
                        (-1 === this.startPosition &&
                          ((i = t.startTimeOffset),
                          Object(A.a)(i)
                            ? (k.b.log(
                                "start time offset found in playlist, adjust startPosition to " +
                                  i
                              ),
                              (this.startPosition = i))
                            : t.live
                            ? ((this.startPosition = this.computeLivePosition(
                                e,
                                t
                              )),
                              k.b.log(
                                "compute startPosition for audio-track to " +
                                  this.startPosition
                              ))
                            : (this.startPosition = 0)),
                        (this.nextLoadPosition = this.startPosition)),
                      this.state === Le && (this.state = Re),
                      this.tick();
                  }),
                  (r.onKeyLoaded = function () {
                    this.state === Ae && ((this.state = Re), this.tick());
                  }),
                  (r.onFragLoaded = function (e) {
                    var t,
                      r,
                      i,
                      a,
                      n,
                      s,
                      o,
                      l = this.fragCurrent,
                      d = e.frag;
                    this.state === ke &&
                      l &&
                      "audio" === d.type &&
                      d.level === l.level &&
                      d.sn === l.sn &&
                      ((r = (t = (o = this.tracks[this.trackId]).details)
                        .totalduration),
                      (i = l.level),
                      (a = l.sn),
                      (n = l.cc),
                      (s =
                        this.config.defaultAudioCodec ||
                        o.audioCodec ||
                        "mp4a.40.2"),
                      (d = this.stats = e.stats),
                      "initSegment" === a
                        ? ((this.state = Re),
                          (d.tparsed = d.tbuffered = dt.now()),
                          (t.initSegment.data = e.payload),
                          this.hls.trigger(E.a.FRAG_BUFFERED, {
                            stats: d,
                            frag: l,
                            id: "audio",
                          }),
                          this.tick())
                        : ((this.state = De),
                          (this.appended = !1),
                          this.demuxer ||
                            (this.demuxer = new ae(this.hls, "audio")),
                          (o = this.initPTS[n]),
                          (d = t.initSegment ? t.initSegment.data : []),
                          void 0 !== o
                            ? ((this.pendingBuffering = !0),
                              k.b.log(
                                "Demuxing " +
                                  a +
                                  " of [" +
                                  t.startSN +
                                  " ," +
                                  t.endSN +
                                  "],track " +
                                  i
                              ),
                              this.demuxer.push(
                                e.payload,
                                d,
                                s,
                                null,
                                l,
                                r,
                                !1,
                                o
                              ))
                            : (k.b.log(
                                "Unknown video PTS for cc " +
                                  n +
                                  ", waiting for video PTS before demuxing audio frag " +
                                  a +
                                  " of [" +
                                  t.startSN +
                                  " ," +
                                  t.endSN +
                                  "],track " +
                                  i
                              ),
                              (this.waitingFragment = e),
                              (this.waitingVideoCC = this.videoTrackCC),
                              (this.state = xe)))),
                      (this.fragLoadError = 0);
                  }),
                  (r.onFragParsingInitSegment = function (e) {
                    var t = this.fragCurrent,
                      r = e.frag;
                    t &&
                      "audio" === e.id &&
                      r.sn === t.sn &&
                      r.level === t.level &&
                      this.state === De &&
                      ((r = e.tracks).video && delete r.video,
                      (t = r.audio) &&
                        ((t.levelCodec = t.codec),
                        (t.id = e.id),
                        this.hls.trigger(E.a.BUFFER_CODECS, r),
                        k.b.log(
                          "audio track:audio,container:" +
                            t.container +
                            ",codecs[level/parsed]=[" +
                            t.levelCodec +
                            "/" +
                            t.codec +
                            "]"
                        ),
                        (t = t.initSegment) &&
                          ((t = {
                            type: "audio",
                            data: t,
                            parent: "audio",
                            content: "initSegment",
                          }),
                          this.audioSwitch
                            ? (this.pendingData = [t])
                            : ((this.appended = !0),
                              (this.pendingBuffering = !0),
                              this.hls.trigger(E.a.BUFFER_APPENDING, t))),
                        this.tick()));
                  }),
                  (r.onFragParsingData = function (t) {
                    var r = this,
                      e = this.fragCurrent,
                      i = t.frag;
                    if (
                      e &&
                      "audio" === t.id &&
                      "audio" === t.type &&
                      i.sn === e.sn &&
                      i.level === e.level &&
                      this.state === De
                    ) {
                      var a = this.trackId,
                        n = this.tracks[a],
                        i = this.hls;
                      Object(A.a)(t.endPTS) ||
                        ((t.endPTS = t.startPTS + e.duration),
                        (t.endDTS = t.startDTS + e.duration)),
                        e.addElementaryStream(c.AUDIO),
                        k.b.log(
                          "parsed " +
                            t.type +
                            ",PTS:[" +
                            t.startPTS.toFixed(3) +
                            "," +
                            t.endPTS.toFixed(3) +
                            "],DTS:[" +
                            t.startDTS.toFixed(3) +
                            "/" +
                            t.endDTS.toFixed(3) +
                            "],nb:" +
                            t.nb
                        ),
                        de(n.details, e, t.startPTS, t.endPTS);
                      (n = this.media), (e = !1);
                      this.audioSwitch &&
                        (n && n.readyState
                          ? ((n = n.currentTime),
                            k.b.log("switching audio track : currentTime:" + n),
                            n >= t.startPTS &&
                              (k.b.log(
                                "switching audio track : flushing all audio"
                              ),
                              (this.state = Ce),
                              i.trigger(E.a.BUFFER_FLUSHING, {
                                startOffset: 0,
                                endOffset: Number.POSITIVE_INFINITY,
                                type: "audio",
                              }),
                              (e = !0),
                              (this.audioSwitch = !1),
                              i.trigger(E.a.AUDIO_TRACK_SWITCHED, {
                                id: a,
                              })))
                          : ((this.audioSwitch = !1),
                            i.trigger(E.a.AUDIO_TRACK_SWITCHED, {
                              id: a,
                            })));
                      var s = this.pendingData;
                      if (!s)
                        return (
                          k.b.warn(
                            "Apparently attempt to enqueue media payload without codec initialization data upfront"
                          ),
                          void i.trigger(E.a.ERROR, {
                            type: m.b.MEDIA_ERROR,
                            details: null,
                            fatal: !0,
                          })
                        );
                      this.audioSwitch ||
                        ([t.data1, t.data2].forEach(function (e) {
                          e &&
                            e.length &&
                            s.push({
                              type: t.type,
                              data: e,
                              parent: "audio",
                              content: "data",
                            });
                        }),
                        !e &&
                          s.length &&
                          (s.forEach(function (e) {
                            r.state === De &&
                              ((r.pendingBuffering = !0),
                              r.hls.trigger(E.a.BUFFER_APPENDING, e));
                          }),
                          (this.pendingData = []),
                          (this.appended = !0))),
                        this.tick();
                    }
                  }),
                  (r.onFragParsed = function (e) {
                    var t = this.fragCurrent,
                      r = e.frag;
                    t &&
                      "audio" === e.id &&
                      r.sn === t.sn &&
                      r.level === t.level &&
                      this.state === De &&
                      ((this.stats.tparsed = dt.now()),
                      (this.state = Oe),
                      this._checkAppendedParsed());
                  }),
                  (r.onBufferReset = function () {
                    (this.mediaBuffer = this.videoBuffer = null),
                      (this.loadedmetadata = !1);
                  }),
                  (r.onBufferCreated = function (e) {
                    var t = e.tracks.audio;
                    t &&
                      ((this.mediaBuffer = t.buffer),
                      (this.loadedmetadata = !0)),
                      e.tracks.video &&
                        (this.videoBuffer = e.tracks.video.buffer);
                  }),
                  (r.onBufferAppended = function (e) {
                    var t;
                    "audio" === e.parent &&
                      (((t = this.state) !== De && t !== Oe) ||
                        ((this.pendingBuffering = 0 < e.pending),
                        this._checkAppendedParsed()));
                  }),
                  (r._checkAppendedParsed = function () {
                    var e, t, r;
                    this.state !== Oe ||
                      (this.appended && this.pendingBuffering) ||
                      ((r = this.fragCurrent),
                      (e = this.stats),
                      (t = this.hls),
                      r &&
                        ((this.fragPrevious = r),
                        (e.tbuffered = dt.now()),
                        t.trigger(E.a.FRAG_BUFFERED, {
                          stats: e,
                          frag: r,
                          id: "audio",
                        }),
                        (r = this.mediaBuffer || this.media) &&
                          k.b.log("audio buffered : " + fe(r.buffered)),
                        this.audioSwitch &&
                          this.appended &&
                          ((this.audioSwitch = !1),
                          t.trigger(E.a.AUDIO_TRACK_SWITCHED, {
                            id: this.trackId,
                          })),
                        (this.state = Re)),
                      this.tick());
                  }),
                  (r.onError = function (e) {
                    var t = e.frag;
                    if (!t || "audio" === t.type)
                      switch (e.details) {
                        case m.a.FRAG_LOAD_ERROR:
                        case m.a.FRAG_LOAD_TIMEOUT:
                          var r,
                            i,
                            a = e.frag;
                          if (a && "audio" !== a.type) break;
                          e.fatal ||
                            ((a = this.fragLoadError) ? a++ : (a = 1),
                            a <= (r = this.config).fragLoadingMaxRetry
                              ? ((this.fragLoadError = a),
                                (i = Math.min(
                                  Math.pow(2, a - 1) * r.fragLoadingRetryDelay,
                                  r.fragLoadingMaxRetryTimeout
                                )),
                                k.b.warn(
                                  "AudioStreamController: frag loading failed, retry in " +
                                    i +
                                    " ms"
                                ),
                                (this.retryDate = dt.now() + i),
                                (this.state = we))
                              : (k.b.error(
                                  "AudioStreamController: " +
                                    e.details +
                                    " reaches max retry, redispatch as fatal ..."
                                ),
                                (e.fatal = !0),
                                (this.state = Pe)));
                          break;
                        case m.a.AUDIO_TRACK_LOAD_ERROR:
                        case m.a.AUDIO_TRACK_LOAD_TIMEOUT:
                        case m.a.KEY_LOAD_ERROR:
                        case m.a.KEY_LOAD_TIMEOUT:
                          this.state !== Pe &&
                            ((this.state = e.fatal ? Pe : Re),
                            k.b.warn(
                              "AudioStreamController: " +
                                e.details +
                                " while loading frag, now switching to " +
                                this.state +
                                " state ..."
                            ));
                          break;
                        case m.a.BUFFER_FULL_ERROR:
                          "audio" !== e.parent ||
                            (this.state !== De && this.state !== Oe) ||
                            ((r = this.mediaBuffer),
                            (i = this.media.currentTime),
                            r && q.isBuffered(r, i) && q.isBuffered(r, i + 0.5)
                              ? ((i = this.config).maxMaxBufferLength >=
                                  i.maxBufferLength &&
                                  ((i.maxMaxBufferLength /= 2),
                                  k.b.warn(
                                    "AudioStreamController: reduce max buffer length to " +
                                      i.maxMaxBufferLength +
                                      "s"
                                  )),
                                (this.state = Re))
                              : (k.b.warn(
                                  "AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"
                                ),
                                (this.fragCurrent = null),
                                (this.state = Ce),
                                this.hls.trigger(E.a.BUFFER_FLUSHING, {
                                  startOffset: 0,
                                  endOffset: Number.POSITIVE_INFINITY,
                                  type: "audio",
                                })));
                      }
                  }),
                  (r.onBufferFlushed = function () {
                    var t = this,
                      e = this.pendingData;
                    e && e.length
                      ? (k.b.log(
                          "AudioStreamController: appending pending audio data after buffer flushed"
                        ),
                        e.forEach(function (e) {
                          t.hls.trigger(E.a.BUFFER_APPENDING, e);
                        }),
                        (this.appended = !0),
                        (this.pendingData = []),
                        (this.state = Oe))
                      : ((this.state = Re),
                        (this.fragPrevious = null),
                        this.tick());
                  }),
                  ot(t.prototype, [
                    {
                      key: "state",
                      set: function (e) {
                        var t;
                        this.state !== e &&
                          ((t = this.state),
                          (this._state = e),
                          k.b.log("audio stream:" + t + "->" + e));
                      },
                      get: function () {
                        return this._state;
                      },
                    },
                  ]),
                  t
                );
              })(Fe),
              ct = (function () {
                if ("undefined" != typeof window && window.VTTCue)
                  return window.VTTCue;
                var b = {
                    "": !0,
                    lr: !0,
                    rl: !0,
                  },
                  t = {
                    start: !0,
                    middle: !0,
                    end: !0,
                    left: !0,
                    right: !0,
                  };
                function T(e) {
                  return (
                    "string" == typeof e &&
                    !!t[e.toLowerCase()] &&
                    e.toLowerCase()
                  );
                }
                function E(e) {
                  for (var t = 1; t < arguments.length; t++) {
                    var r,
                      i = arguments[t];
                    for (r in i) e[r] = i[r];
                  }
                  return e;
                }
                function e(e, t, r) {
                  var i = this,
                    a = {
                      enumerable: !0,
                    };
                  i.hasBeenReset = !1;
                  var n = "",
                    s = !1,
                    o = e,
                    l = t,
                    d = r,
                    u = null,
                    c = "",
                    h = !0,
                    f = "auto",
                    g = "start",
                    p = 50,
                    m = "middle",
                    v = 50,
                    y = "middle";
                  Object.defineProperty(
                    i,
                    "id",
                    E({}, a, {
                      get: function () {
                        return n;
                      },
                      set: function (e) {
                        n = "" + e;
                      },
                    })
                  ),
                    Object.defineProperty(
                      i,
                      "pauseOnExit",
                      E({}, a, {
                        get: function () {
                          return s;
                        },
                        set: function (e) {
                          s = !!e;
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "startTime",
                      E({}, a, {
                        get: function () {
                          return o;
                        },
                        set: function (e) {
                          if ("number" != typeof e)
                            throw new TypeError(
                              "Start time must be set to a number."
                            );
                          (o = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "endTime",
                      E({}, a, {
                        get: function () {
                          return l;
                        },
                        set: function (e) {
                          if ("number" != typeof e)
                            throw new TypeError(
                              "End time must be set to a number."
                            );
                          (l = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "text",
                      E({}, a, {
                        get: function () {
                          return d;
                        },
                        set: function (e) {
                          (d = "" + e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "region",
                      E({}, a, {
                        get: function () {
                          return u;
                        },
                        set: function (e) {
                          (u = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "vertical",
                      E({}, a, {
                        get: function () {
                          return c;
                        },
                        set: function (e) {
                          e =
                            "string" == typeof (e = e) &&
                            !!b[e.toLowerCase()] &&
                            e.toLowerCase();
                          if (!1 === e)
                            throw new SyntaxError(
                              "An invalid or illegal string was specified."
                            );
                          (c = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "snapToLines",
                      E({}, a, {
                        get: function () {
                          return h;
                        },
                        set: function (e) {
                          (h = !!e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "line",
                      E({}, a, {
                        get: function () {
                          return f;
                        },
                        set: function (e) {
                          if ("number" != typeof e && "auto" !== e)
                            throw new SyntaxError(
                              "An invalid number or illegal string was specified."
                            );
                          (f = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "lineAlign",
                      E({}, a, {
                        get: function () {
                          return g;
                        },
                        set: function (e) {
                          e = T(e);
                          if (!e)
                            throw new SyntaxError(
                              "An invalid or illegal string was specified."
                            );
                          (g = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "position",
                      E({}, a, {
                        get: function () {
                          return p;
                        },
                        set: function (e) {
                          if (e < 0 || 100 < e)
                            throw new Error(
                              "Position must be between 0 and 100."
                            );
                          (p = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "positionAlign",
                      E({}, a, {
                        get: function () {
                          return m;
                        },
                        set: function (e) {
                          e = T(e);
                          if (!e)
                            throw new SyntaxError(
                              "An invalid or illegal string was specified."
                            );
                          (m = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "size",
                      E({}, a, {
                        get: function () {
                          return v;
                        },
                        set: function (e) {
                          if (e < 0 || 100 < e)
                            throw new Error("Size must be between 0 and 100.");
                          (v = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    Object.defineProperty(
                      i,
                      "align",
                      E({}, a, {
                        get: function () {
                          return y;
                        },
                        set: function (e) {
                          e = T(e);
                          if (!e)
                            throw new SyntaxError(
                              "An invalid or illegal string was specified."
                            );
                          (y = e), (this.hasBeenReset = !0);
                        },
                      })
                    ),
                    (i.displayState = void 0);
                }
                return (
                  (e.prototype.getCueAsHTML = function () {
                    return window.WebVTT.convertCueToDOMTree(window, this.text);
                  }),
                  e
                );
              })();
            function ht() {
              (this.window = window),
                (this.state = "INITIAL"),
                (this.buffer = ""),
                (this.decoder = new lt()),
                (this.regionList = []);
            }
            function ft() {
              this.values = Object.create(null);
            }
            function gt(e, t, r, i) {
              var a,
                n,
                s = i ? e.split(i) : [e];
              for (a in s)
                "string" != typeof s[a] ||
                  (2 === (n = s[a].split(r)).length && t(n[0], n[1]));
            }
            ft.prototype = {
              set: function (e, t) {
                this.get(e) || "" === t || (this.values[e] = t);
              },
              get: function (e, t, r) {
                return r
                  ? this.has(e)
                    ? this.values[e]
                    : t[r]
                  : this.has(e)
                  ? this.values[e]
                  : t;
              },
              has: function (e) {
                return e in this.values;
              },
              alt: function (e, t, r) {
                for (var i = 0; i < r.length; ++i)
                  if (t === r[i]) {
                    this.set(e, t);
                    break;
                  }
              },
              integer: function (e, t) {
                /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10));
              },
              percent: function (e, t) {
                return (
                  !!(
                    t.match(/^([\d]{1,3})(\.[\d]*)?%$/) &&
                    0 <= (t = parseFloat(t)) &&
                    t <= 100
                  ) && (this.set(e, t), !0)
                );
              },
            };
            var pt = new ct(0, 0, 0),
              mt = "middle" === pt.align ? "middle" : "center";
            function vt(r, e, n) {
              var t,
                s,
                i = r;
              function a() {
                var e,
                  e = (e = r.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))
                    ? e[3]
                      ? t(e[1], e[2], e[3].replace(":", ""), e[4])
                      : 59 < e[1]
                      ? t(e[1], e[2], 0, e[4])
                      : t(0, e[1], e[2], e[4])
                    : null;
                function t(e, t, r, i) {
                  return (
                    3600 * (0 | e) + 60 * (0 | t) + (0 | r) + (0 | i) / 1e3
                  );
                }
                if (null === e) throw new Error("Malformed timestamp: " + i);
                return (r = r.replace(/^[^\sa-zA-Z-]+/, "")), e;
              }
              function o() {
                r = r.replace(/^\s+/, "");
              }
              if ((o(), (e.startTime = a()), o(), "--\x3e" !== r.substr(0, 3)))
                throw new Error(
                  "Malformed time stamp (time stamps must be separated by '--\x3e'): " +
                    i
                );
              (r = r.substr(3)),
                o(),
                (e.endTime = a()),
                o(),
                (t = r),
                (e = e),
                (s = new ft()),
                gt(
                  t,
                  function (e, t) {
                    switch (e) {
                      case "region":
                        for (var r = n.length - 1; 0 <= r; r--)
                          if (n[r].id === t) {
                            s.set(e, n[r].region);
                            break;
                          }
                        break;
                      case "vertical":
                        s.alt(e, t, ["rl", "lr"]);
                        break;
                      case "line":
                        var i = t.split(","),
                          a = i[0];
                        s.integer(e, a),
                          s.percent(e, a) && s.set("snapToLines", !1),
                          s.alt(e, a, ["auto"]),
                          2 === i.length &&
                            s.alt("lineAlign", i[1], ["start", mt, "end"]);
                        break;
                      case "position":
                        (i = t.split(",")),
                          s.percent(e, i[0]),
                          2 === i.length &&
                            s.alt("positionAlign", i[1], [
                              "start",
                              mt,
                              "end",
                              "line-left",
                              "line-right",
                              "auto",
                            ]);
                        break;
                      case "size":
                        s.percent(e, t);
                        break;
                      case "align":
                        s.alt(e, t, ["start", mt, "end", "left", "right"]);
                    }
                  },
                  /:/,
                  /\s/
                ),
                (e.region = s.get("region", null)),
                (e.vertical = s.get("vertical", "")),
                "auto" === (t = s.get("line", "auto")) &&
                  -1 === pt.line &&
                  (t = -1),
                (e.line = t),
                (e.lineAlign = s.get("lineAlign", "start")),
                (e.snapToLines = s.get("snapToLines", !0)),
                (e.size = s.get("size", 100)),
                (e.align = s.get("align", mt)),
                "auto" === (t = s.get("position", "auto")) &&
                  50 === pt.position &&
                  (t =
                    "start" === e.align || "left" === e.align
                      ? 0
                      : "end" === e.align || "right" === e.align
                      ? 100
                      : 50),
                (e.position = t);
            }
            function yt(e) {
              return e.replace(/<br(?: \/)?>/gi, "\n");
            }
            ht.prototype = {
              parse: function (e) {
                var t,
                  i = this;
                function r() {
                  for (
                    var e = 0, t = yt((t = i.buffer));
                    e < t.length && "\r" !== t[e] && "\n" !== t[e];

                  )
                    ++e;
                  var r = t.substr(0, e);
                  return (
                    "\r" === t[e] && ++e,
                    "\n" === t[e] && ++e,
                    (i.buffer = t.substr(e)),
                    r
                  );
                }
                e &&
                  (i.buffer += i.decoder.decode(e, {
                    stream: !0,
                  }));
                try {
                  if ("INITIAL" === i.state) {
                    if (!/\r\n|\n/.test(i.buffer)) return this;
                    var a = (t = r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);
                    if (!a || !a[0])
                      throw new Error("Malformed WebVTT signature.");
                    i.state = "HEADER";
                  }
                  for (var n = !1; i.buffer; ) {
                    if (!/\r\n|\n/.test(i.buffer)) return this;
                    switch ((n ? (n = !1) : (t = r()), i.state)) {
                      case "HEADER":
                        /:/.test(t)
                          ? gt(t, function (e, t) {}, /:/)
                          : t || (i.state = "ID");
                        continue;
                      case "NOTE":
                        t || (i.state = "ID");
                        continue;
                      case "ID":
                        if (/^NOTE($|[ \t])/.test(t)) {
                          i.state = "NOTE";
                          break;
                        }
                        if (!t) continue;
                        if (
                          ((i.cue = new ct(0, 0, "")),
                          (i.state = "CUE"),
                          -1 === t.indexOf("--\x3e"))
                        ) {
                          i.cue.id = t;
                          continue;
                        }
                      case "CUE":
                        try {
                          vt(t, i.cue, i.regionList);
                        } catch (e) {
                          (i.cue = null), (i.state = "BADCUE");
                          continue;
                        }
                        i.state = "CUETEXT";
                        continue;
                      case "CUETEXT":
                        var s = -1 !== t.indexOf("--\x3e");
                        if (!t || (s && (n = !0))) {
                          i.oncue && i.oncue(i.cue),
                            (i.cue = null),
                            (i.state = "ID");
                          continue;
                        }
                        i.cue.text && (i.cue.text += "\n"), (i.cue.text += t);
                        continue;
                      case "BADCUE":
                        t || (i.state = "ID");
                        continue;
                    }
                  }
                } catch (e) {
                  "CUETEXT" === i.state && i.cue && i.oncue && i.oncue(i.cue),
                    (i.cue = null),
                    (i.state = "INITIAL" === i.state ? "BADWEBVTT" : "BADCUE");
                }
                return this;
              },
              flush: function () {
                try {
                  if (
                    ((this.buffer += this.decoder.decode()),
                    (!this.cue && "HEADER" !== this.state) ||
                      ((this.buffer += "\n\n"), this.parse()),
                    "INITIAL" === this.state)
                  )
                    throw new Error("Malformed WebVTT signature.");
                } catch (e) {
                  throw e;
                }
                return this.onflush && this.onflush(), this;
              },
            };
            var bt = ht;
            function Tt(e, t, r, i) {
              for (
                var a,
                  n,
                  s,
                  o,
                  l,
                  d = [],
                  u = window.VTTCue || TextTrackCue,
                  c = 0;
                c < i.rows.length;
                c++
              )
                if (((s = !0), (o = 0), (l = ""), !(a = i.rows[c]).isEmpty())) {
                  for (var h = 0; h < a.chars.length; h++)
                    a.chars[h].uchar.match(/\s/) && s
                      ? o++
                      : ((l += a.chars[h].uchar), (s = !1));
                  (a.cueStartTime = t) === r && (r += 1e-4),
                    (n = new u(t, r, yt(l.trim()))),
                    16 <= o ? o-- : o++,
                    navigator.userAgent.match(/Firefox\//)
                      ? (n.line = c + 1)
                      : (n.line = 7 < c ? c - 2 : c + 1),
                    (n.align = "left"),
                    (n.position = Math.max(0, Math.min(100, (o / 32) * 100))),
                    d.push(n),
                    e && e.addCue(n);
                }
              return d;
            }
            function Et(e) {
              var t = e;
              return (
                _t.hasOwnProperty(e) && (t = _t[e]), String.fromCharCode(t)
              );
            }
            var St,
              _t = {
                42: 225,
                92: 233,
                94: 237,
                95: 243,
                96: 250,
                123: 231,
                124: 247,
                125: 209,
                126: 241,
                127: 9608,
                128: 174,
                129: 176,
                130: 189,
                131: 191,
                132: 8482,
                133: 162,
                134: 163,
                135: 9834,
                136: 224,
                137: 32,
                138: 232,
                139: 226,
                140: 234,
                141: 238,
                142: 244,
                143: 251,
                144: 193,
                145: 201,
                146: 211,
                147: 218,
                148: 220,
                149: 252,
                150: 8216,
                151: 161,
                152: 42,
                153: 8217,
                154: 9473,
                155: 169,
                156: 8480,
                157: 8226,
                158: 8220,
                159: 8221,
                160: 192,
                161: 194,
                162: 199,
                163: 200,
                164: 202,
                165: 203,
                166: 235,
                167: 206,
                168: 207,
                169: 239,
                170: 212,
                171: 217,
                172: 249,
                173: 219,
                174: 171,
                175: 187,
                176: 195,
                177: 227,
                178: 205,
                179: 204,
                180: 236,
                181: 210,
                182: 242,
                183: 213,
                184: 245,
                185: 123,
                186: 125,
                187: 92,
                188: 94,
                189: 95,
                190: 124,
                191: 8764,
                192: 196,
                193: 228,
                194: 214,
                195: 246,
                196: 223,
                197: 165,
                198: 164,
                199: 9475,
                200: 197,
                201: 229,
                202: 216,
                203: 248,
                204: 9487,
                205: 9491,
                206: 9495,
                207: 9499,
              },
              Rt = {
                17: 1,
                18: 3,
                21: 5,
                22: 7,
                23: 9,
                16: 11,
                19: 12,
                20: 14,
              },
              At = {
                17: 2,
                18: 4,
                21: 6,
                22: 8,
                23: 10,
                19: 13,
                20: 15,
              },
              kt = {
                25: 1,
                26: 3,
                29: 5,
                30: 7,
                31: 9,
                24: 11,
                27: 12,
                28: 14,
              },
              wt = {
                25: 2,
                26: 4,
                29: 6,
                30: 8,
                31: 10,
                27: 13,
                28: 15,
              },
              Lt = [
                "white",
                "green",
                "blue",
                "cyan",
                "red",
                "yellow",
                "magenta",
                "black",
                "transparent",
              ];
            ((tr = St = St || {})[(tr.ERROR = 0)] = "ERROR"),
              (tr[(tr.TEXT = 1)] = "TEXT"),
              (tr[(tr.WARNING = 2)] = "WARNING"),
              (tr[(tr.INFO = 2)] = "INFO"),
              (tr[(tr.DEBUG = 3)] = "DEBUG"),
              (tr[(tr.DATA = 3)] = "DATA");
            function Dt(e) {
              for (var t = [], r = 0; r < e.length; r++)
                t.push(e[r].toString(16));
              return t;
            }
            var Ot =
                ((Kt.prototype.log = function (e, t) {
                  this.verboseLevel >= e &&
                    k.b.log(this.time + " [" + e + "] " + t);
                }),
                Kt),
              Ct =
                (((ee = Gt.prototype).reset = function () {
                  (this.foreground = "white"),
                    (this.underline = !1),
                    (this.italics = !1),
                    (this.background = "black"),
                    (this.flash = !1);
                }),
                (ee.setStyles = function (e) {
                  for (
                    var t = [
                        "foreground",
                        "underline",
                        "italics",
                        "background",
                        "flash",
                      ],
                      r = 0;
                    r < t.length;
                    r++
                  ) {
                    var i = t[r];
                    e.hasOwnProperty(i) && (this[i] = e[i]);
                  }
                }),
                (ee.isDefault = function () {
                  return (
                    "white" === this.foreground &&
                    !this.underline &&
                    !this.italics &&
                    "black" === this.background &&
                    !this.flash
                  );
                }),
                (ee.equals = function (e) {
                  return (
                    this.foreground === e.foreground &&
                    this.underline === e.underline &&
                    this.italics === e.italics &&
                    this.background === e.background &&
                    this.flash === e.flash
                  );
                }),
                (ee.copy = function (e) {
                  (this.foreground = e.foreground),
                    (this.underline = e.underline),
                    (this.italics = e.italics),
                    (this.background = e.background),
                    (this.flash = e.flash);
                }),
                (ee.toString = function () {
                  return (
                    "color=" +
                    this.foreground +
                    ", underline=" +
                    this.underline +
                    ", italics=" +
                    this.italics +
                    ", background=" +
                    this.background +
                    ", flash=" +
                    this.flash
                  );
                }),
                Gt),
              It =
                (((Ee = Bt.prototype).reset = function () {
                  (this.uchar = " "), this.penState.reset();
                }),
                (Ee.setChar = function (e, t) {
                  (this.uchar = e), this.penState.copy(t);
                }),
                (Ee.setPenState = function (e) {
                  this.penState.copy(e);
                }),
                (Ee.equals = function (e) {
                  return (
                    this.uchar === e.uchar && this.penState.equals(e.penState)
                  );
                }),
                (Ee.copy = function (e) {
                  (this.uchar = e.uchar), this.penState.copy(e.penState);
                }),
                (Ee.isEmpty = function () {
                  return " " === this.uchar && this.penState.isDefault();
                }),
                Bt),
              Pt =
                (((tr = Nt.prototype).equals = function (e) {
                  for (var t = !0, r = 0; r < 100; r++)
                    if (!this.chars[r].equals(e.chars[r])) {
                      t = !1;
                      break;
                    }
                  return t;
                }),
                (tr.copy = function (e) {
                  for (var t = 0; t < 100; t++) this.chars[t].copy(e.chars[t]);
                }),
                (tr.isEmpty = function () {
                  for (var e = !0, t = 0; t < 100; t++)
                    if (!this.chars[t].isEmpty()) {
                      e = !1;
                      break;
                    }
                  return e;
                }),
                (tr.setCursor = function (e) {
                  this.pos !== e && (this.pos = e),
                    this.pos < 0
                      ? (this.logger.log(
                          St.DEBUG,
                          "Negative cursor position " + this.pos
                        ),
                        (this.pos = 0))
                      : 100 < this.pos &&
                        (this.logger.log(
                          St.DEBUG,
                          "Too large cursor position " + this.pos
                        ),
                        (this.pos = 100));
                }),
                (tr.moveCursor = function (e) {
                  var t = this.pos + e;
                  if (1 < e)
                    for (var r = this.pos + 1; r < t + 1; r++)
                      this.chars[r].setPenState(this.currPenState);
                  this.setCursor(t);
                }),
                (tr.backSpace = function () {
                  this.moveCursor(-1),
                    this.chars[this.pos].setChar(" ", this.currPenState);
                }),
                (tr.insertChar = function (e) {
                  144 <= e && this.backSpace();
                  var t = Et(e);
                  100 <= this.pos
                    ? this.logger.log(
                        St.ERROR,
                        "Cannot insert " +
                          e.toString(16) +
                          " (" +
                          t +
                          ") at position " +
                          this.pos +
                          ". Skipping it!"
                      )
                    : (this.chars[this.pos].setChar(t, this.currPenState),
                      this.moveCursor(1));
                }),
                (tr.clearFromPos = function (e) {
                  for (var t = e; t < 100; t++) this.chars[t].reset();
                }),
                (tr.clear = function () {
                  this.clearFromPos(0),
                    (this.pos = 0),
                    this.currPenState.reset();
                }),
                (tr.clearToEndOfRow = function () {
                  this.clearFromPos(this.pos);
                }),
                (tr.getTextString = function () {
                  for (var e = [], t = !0, r = 0; r < 100; r++) {
                    var i = this.chars[r].uchar;
                    " " !== i && (t = !1), e.push(i);
                  }
                  return t ? "" : e.join("");
                }),
                (tr.setPenStyles = function (e) {
                  this.currPenState.setStyles(e),
                    this.chars[this.pos].setPenState(this.currPenState);
                }),
                Nt),
              xt =
                (((ee = Ut.prototype).reset = function () {
                  for (var e = 0; e < 15; e++) this.rows[e].clear();
                  this.currRow = 14;
                }),
                (ee.equals = function (e) {
                  for (var t = !0, r = 0; r < 15; r++)
                    if (!this.rows[r].equals(e.rows[r])) {
                      t = !1;
                      break;
                    }
                  return t;
                }),
                (ee.copy = function (e) {
                  for (var t = 0; t < 15; t++) this.rows[t].copy(e.rows[t]);
                }),
                (ee.isEmpty = function () {
                  for (var e = !0, t = 0; t < 15; t++)
                    if (!this.rows[t].isEmpty()) {
                      e = !1;
                      break;
                    }
                  return e;
                }),
                (ee.backSpace = function () {
                  this.rows[this.currRow].backSpace();
                }),
                (ee.clearToEndOfRow = function () {
                  this.rows[this.currRow].clearToEndOfRow();
                }),
                (ee.insertChar = function (e) {
                  this.rows[this.currRow].insertChar(e);
                }),
                (ee.setPen = function (e) {
                  this.rows[this.currRow].setPenStyles(e);
                }),
                (ee.moveCursor = function (e) {
                  this.rows[this.currRow].moveCursor(e);
                }),
                (ee.setCursor = function (e) {
                  this.logger.log(St.INFO, "setCursor: " + e),
                    this.rows[this.currRow].setCursor(e);
                }),
                (ee.setPAC = function (e) {
                  this.logger.log(St.INFO, "pacData = " + JSON.stringify(e));
                  var t = e.row - 1;
                  if (
                    (this.nrRollUpRows &&
                      t < this.nrRollUpRows - 1 &&
                      (t = this.nrRollUpRows - 1),
                    this.nrRollUpRows && this.currRow !== t)
                  ) {
                    for (var r = 0; r < 15; r++) this.rows[r].clear();
                    var i = this.currRow + 1 - this.nrRollUpRows,
                      a = this.lastOutputScreen;
                    if (a) {
                      var n = a.rows[i].cueStartTime,
                        s = this.logger.time;
                      if (n && null !== s && n < s)
                        for (var o = 0; o < this.nrRollUpRows; o++)
                          this.rows[t - this.nrRollUpRows + o + 1].copy(
                            a.rows[i + o]
                          );
                    }
                  }
                  this.currRow = t;
                  n = this.rows[this.currRow];
                  null !== e.indent &&
                    ((s = e.indent),
                    (s = Math.max(s - 1, 0)),
                    n.setCursor(e.indent),
                    (e.color = n.chars[s].penState.foreground));
                  e = {
                    foreground: e.color,
                    underline: e.underline,
                    italics: e.italics,
                    background: "black",
                    flash: !1,
                  };
                  this.setPen(e);
                }),
                (ee.setBkgData = function (e) {
                  this.logger.log(St.INFO, "bkgData = " + JSON.stringify(e)),
                    this.backSpace(),
                    this.setPen(e),
                    this.insertChar(32);
                }),
                (ee.setRollUpRows = function (e) {
                  this.nrRollUpRows = e;
                }),
                (ee.rollUp = function () {
                  var e;
                  null !== this.nrRollUpRows
                    ? (this.logger.log(St.TEXT, this.getDisplayText()),
                      (e = this.currRow + 1 - this.nrRollUpRows),
                      (e = this.rows.splice(e, 1)[0]).clear(),
                      this.rows.splice(this.currRow, 0, e),
                      this.logger.log(St.INFO, "Rolling up"))
                    : this.logger.log(
                        St.DEBUG,
                        "roll_up but nrRollUpRows not set yet"
                      );
                }),
                (ee.getDisplayText = function (e) {
                  e = e || !1;
                  for (var t, r = [], i = "", a = 0; a < 15; a++) {
                    var n = this.rows[a].getTextString();
                    n &&
                      ((t = a + 1),
                      e
                        ? r.push("Row " + t + ": '" + n + "'")
                        : r.push(n.trim()));
                  }
                  return (
                    0 < r.length &&
                      (i = e ? "[" + r.join(" | ") + "]" : r.join("\n")),
                    i
                  );
                }),
                (ee.getTextAndFormat = function () {
                  return this.rows;
                }),
                Ut),
              Mt =
                (((Ee = Ft.prototype).reset = function () {
                  (this.mode = null),
                    this.displayedMemory.reset(),
                    this.nonDisplayedMemory.reset(),
                    this.lastOutputScreen.reset(),
                    this.outputFilter.reset(),
                    (this.currRollUpRow = this.displayedMemory.rows[14]),
                    (this.writeScreen = this.displayedMemory),
                    (this.mode = null),
                    (this.cueStartTime = null);
                }),
                (Ee.getHandler = function () {
                  return this.outputFilter;
                }),
                (Ee.setHandler = function (e) {
                  this.outputFilter = e;
                }),
                (Ee.setPAC = function (e) {
                  this.writeScreen.setPAC(e);
                }),
                (Ee.setBkgData = function (e) {
                  this.writeScreen.setBkgData(e);
                }),
                (Ee.setMode = function (e) {
                  e !== this.mode &&
                    ((this.mode = e),
                    this.logger.log(St.INFO, "MODE=" + e),
                    "MODE_POP-ON" === this.mode
                      ? (this.writeScreen = this.nonDisplayedMemory)
                      : ((this.writeScreen = this.displayedMemory),
                        this.writeScreen.reset()),
                    "MODE_ROLL-UP" !== this.mode &&
                      ((this.displayedMemory.nrRollUpRows = null),
                      (this.nonDisplayedMemory.nrRollUpRows = null)),
                    (this.mode = e));
                }),
                (Ee.insertChars = function (e) {
                  for (var t = 0; t < e.length; t++)
                    this.writeScreen.insertChar(e[t]);
                  var r =
                    this.writeScreen === this.displayedMemory
                      ? "DISP"
                      : "NON_DISP";
                  this.logger.log(
                    St.INFO,
                    r + ": " + this.writeScreen.getDisplayText(!0)
                  ),
                    ("MODE_PAINT-ON" !== this.mode &&
                      "MODE_ROLL-UP" !== this.mode) ||
                      (this.logger.log(
                        St.TEXT,
                        "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)
                      ),
                      this.outputDataUpdate());
                }),
                (Ee.ccRCL = function () {
                  this.logger.log(St.INFO, "RCL - Resume Caption Loading"),
                    this.setMode("MODE_POP-ON");
                }),
                (Ee.ccBS = function () {
                  this.logger.log(St.INFO, "BS - BackSpace"),
                    "MODE_TEXT" !== this.mode &&
                      (this.writeScreen.backSpace(),
                      this.writeScreen === this.displayedMemory &&
                        this.outputDataUpdate());
                }),
                (Ee.ccAOF = function () {}),
                (Ee.ccAON = function () {}),
                (Ee.ccDER = function () {
                  this.logger.log(St.INFO, "DER- Delete to End of Row"),
                    this.writeScreen.clearToEndOfRow(),
                    this.outputDataUpdate();
                }),
                (Ee.ccRU = function (e) {
                  this.logger.log(St.INFO, "RU(" + e + ") - Roll Up"),
                    (this.writeScreen = this.displayedMemory),
                    this.setMode("MODE_ROLL-UP"),
                    this.writeScreen.setRollUpRows(e);
                }),
                (Ee.ccFON = function () {
                  this.logger.log(St.INFO, "FON - Flash On"),
                    this.writeScreen.setPen({
                      flash: !0,
                    });
                }),
                (Ee.ccRDC = function () {
                  this.logger.log(St.INFO, "RDC - Resume Direct Captioning"),
                    this.setMode("MODE_PAINT-ON");
                }),
                (Ee.ccTR = function () {
                  this.logger.log(St.INFO, "TR"), this.setMode("MODE_TEXT");
                }),
                (Ee.ccRTD = function () {
                  this.logger.log(St.INFO, "RTD"), this.setMode("MODE_TEXT");
                }),
                (Ee.ccEDM = function () {
                  this.logger.log(St.INFO, "EDM - Erase Displayed Memory"),
                    this.displayedMemory.reset(),
                    this.outputDataUpdate(!0);
                }),
                (Ee.ccCR = function () {
                  this.logger.log(St.INFO, "CR - Carriage Return"),
                    this.writeScreen.rollUp(),
                    this.outputDataUpdate(!0);
                }),
                (Ee.ccENM = function () {
                  this.logger.log(St.INFO, "ENM - Erase Non-displayed Memory"),
                    this.nonDisplayedMemory.reset();
                }),
                (Ee.ccEOC = function () {
                  var e;
                  this.logger.log(St.INFO, "EOC - End Of Caption"),
                    "MODE_POP-ON" === this.mode &&
                      ((e = this.displayedMemory),
                      (this.displayedMemory = this.nonDisplayedMemory),
                      (this.nonDisplayedMemory = e),
                      (this.writeScreen = this.nonDisplayedMemory),
                      this.logger.log(
                        St.TEXT,
                        "DISP: " + this.displayedMemory.getDisplayText()
                      )),
                    this.outputDataUpdate(!0);
                }),
                (Ee.ccTO = function (e) {
                  this.logger.log(St.INFO, "TO(" + e + ") - Tab Offset"),
                    this.writeScreen.moveCursor(e);
                }),
                (Ee.ccMIDROW = function (e) {
                  var t = {
                    flash: !1,
                  };
                  (t.underline = e % 2 == 1),
                    (t.italics = 46 <= e),
                    t.italics
                      ? (t.foreground = "white")
                      : ((e = Math.floor(e / 2) - 16),
                        (t.foreground = [
                          "white",
                          "green",
                          "blue",
                          "cyan",
                          "red",
                          "yellow",
                          "magenta",
                        ][e])),
                    this.logger.log(St.INFO, "MIDROW: " + JSON.stringify(t)),
                    this.writeScreen.setPen(t);
                }),
                (Ee.outputDataUpdate = function (e) {
                  void 0 === e && (e = !1);
                  var t = this.logger.time;
                  null !== t &&
                    this.outputFilter &&
                    (null !== this.cueStartTime ||
                    this.displayedMemory.isEmpty()
                      ? this.displayedMemory.equals(this.lastOutputScreen) ||
                        (this.outputFilter.newCue(
                          this.cueStartTime,
                          t,
                          this.lastOutputScreen
                        ),
                        e &&
                          this.outputFilter.dispatchCue &&
                          this.outputFilter.dispatchCue(),
                        (this.cueStartTime = this.displayedMemory.isEmpty()
                          ? null
                          : t))
                      : (this.cueStartTime = t),
                    this.lastOutputScreen.copy(this.displayedMemory));
                }),
                (Ee.cueSplitAtTime = function (e) {
                  this.outputFilter &&
                    (this.displayedMemory.isEmpty() ||
                      (this.outputFilter.newCue &&
                        this.outputFilter.newCue(
                          this.cueStartTime,
                          e,
                          this.displayedMemory
                        ),
                      (this.cueStartTime = e)));
                }),
                Ft);
            function Ft(e, t, r) {
              (this.chNr = void 0),
                (this.outputFilter = void 0),
                (this.mode = void 0),
                (this.verbose = void 0),
                (this.displayedMemory = void 0),
                (this.nonDisplayedMemory = void 0),
                (this.lastOutputScreen = void 0),
                (this.currRollUpRow = void 0),
                (this.writeScreen = void 0),
                (this.cueStartTime = void 0),
                (this.logger = void 0),
                (this.chNr = e),
                (this.outputFilter = t),
                (this.mode = null),
                (this.verbose = 0),
                (this.displayedMemory = new xt(r)),
                (this.nonDisplayedMemory = new xt(r)),
                (this.lastOutputScreen = new xt(r)),
                (this.currRollUpRow = this.displayedMemory.rows[14]),
                (this.writeScreen = this.displayedMemory),
                (this.mode = null),
                (this.cueStartTime = null),
                (this.logger = r);
            }
            function Ut(e) {
              (this.rows = void 0),
                (this.currRow = void 0),
                (this.nrRollUpRows = void 0),
                (this.lastOutputScreen = void 0),
                (this.logger = void 0),
                (this.rows = []);
              for (var t = 0; t < 15; t++) this.rows.push(new Pt(e));
              (this.logger = e),
                (this.currRow = 14),
                (this.nrRollUpRows = null),
                (this.lastOutputScreen = null),
                this.reset();
            }
            function Nt(e) {
              (this.chars = void 0),
                (this.pos = void 0),
                (this.currPenState = void 0),
                (this.cueStartTime = void 0),
                (this.logger = void 0),
                (this.chars = []);
              for (var t = 0; t < 100; t++) this.chars.push(new It());
              (this.logger = e), (this.pos = 0), (this.currPenState = new Ct());
            }
            function Bt(e, t, r, i, a, n) {
              (this.uchar = void 0),
                (this.penState = void 0),
                (this.uchar = e || " "),
                (this.penState = new Ct(t, r, i, a, n));
            }
            function Gt(e, t, r, i, a) {
              (this.foreground = void 0),
                (this.underline = void 0),
                (this.italics = void 0),
                (this.background = void 0),
                (this.flash = void 0),
                (this.foreground = e || "white"),
                (this.underline = t || !1),
                (this.italics = r || !1),
                (this.background = i || "black"),
                (this.flash = a || !1);
            }
            function Kt() {
              (this.time = null), (this.verboseLevel = St.ERROR);
            }
            function jt(e, t, r) {
              (r.a = e), (r.b = t);
            }
            function Ht(e, t, r) {
              return r.a === e && r.b === t;
            }
            function Vt(e, t, r) {
              return e.substr(r || 0, t.length) === t;
            }
            function Yt(e) {
              for (var t = 5381, r = e.length; r; )
                t = (33 * t) ^ e.charCodeAt(--r);
              return (t >>> 0).toString();
            }
            var Wt =
                (((tr = Qt.prototype).getHandler = function (e) {
                  return this.channels[e].getHandler();
                }),
                (tr.setHandler = function (e, t) {
                  this.channels[e].setHandler(t);
                }),
                (tr.addData = function (e, t) {
                  var r,
                    i = !1;
                  this.logger.time = e;
                  for (var a = 0; a < t.length; a += 2) {
                    var n,
                      s = 127 & t[a],
                      o = 127 & t[a + 1];
                    (0 == s && 0 == o) ||
                      (this.logger.log(
                        St.DATA,
                        "[" + Dt([t[a], t[a + 1]]) + "] -> (" + Dt([s, o]) + ")"
                      ),
                      (r = this.parseCmd(s, o)) || (r = this.parseMidrow(s, o)),
                      !(r =
                        (r = r || this.parsePAC(s, o)) ||
                        this.parseBackgroundAttributes(s, o)) &&
                        (i = this.parseChars(s, o)) &&
                        ((n = this.currentChannel) && 0 < n
                          ? this.channels[n].insertChars(i)
                          : this.logger.log(
                              St.WARNING,
                              "No channel found yet. TEXT-MODE?"
                            )),
                      r ||
                        i ||
                        this.logger.log(
                          St.WARNING,
                          "Couldn't parse cleaned data " +
                            Dt([s, o]) +
                            " orig: " +
                            Dt([t[a], t[a + 1]])
                        ));
                  }
                }),
                (tr.parseCmd = function (e, t) {
                  var r = this.cmdHistory;
                  if (
                    !(
                      ((20 === e || 28 === e || 21 === e || 29 === e) &&
                        32 <= t &&
                        t <= 47) ||
                      ((23 === e || 31 === e) && 33 <= t && t <= 35)
                    )
                  )
                    return !1;
                  if (Ht(e, t, r))
                    return (
                      jt(null, null, r),
                      this.logger.log(
                        St.DEBUG,
                        "Repeated command (" + Dt([e, t]) + ") is dropped"
                      ),
                      !0
                    );
                  var i = 20 === e || 21 === e || 23 === e ? 1 : 2,
                    a = this.channels[i];
                  return (
                    20 === e || 21 === e || 28 === e || 29 === e
                      ? 32 === t
                        ? a.ccRCL()
                        : 33 === t
                        ? a.ccBS()
                        : 34 === t
                        ? a.ccAOF()
                        : 35 === t
                        ? a.ccAON()
                        : 36 === t
                        ? a.ccDER()
                        : 37 === t
                        ? a.ccRU(2)
                        : 38 === t
                        ? a.ccRU(3)
                        : 39 === t
                        ? a.ccRU(4)
                        : 40 === t
                        ? a.ccFON()
                        : 41 === t
                        ? a.ccRDC()
                        : 42 === t
                        ? a.ccTR()
                        : 43 === t
                        ? a.ccRTD()
                        : 44 === t
                        ? a.ccEDM()
                        : 45 === t
                        ? a.ccCR()
                        : 46 === t
                        ? a.ccENM()
                        : 47 === t && a.ccEOC()
                      : a.ccTO(t - 32),
                    jt(e, t, r),
                    (this.currentChannel = i),
                    !0
                  );
                }),
                (tr.parseMidrow = function (e, t) {
                  var r = 0;
                  if ((17 === e || 25 === e) && 32 <= t && t <= 47) {
                    if ((r = 17 === e ? 1 : 2) !== this.currentChannel)
                      return (
                        this.logger.log(
                          St.ERROR,
                          "Mismatch channel in midrow parsing"
                        ),
                        !1
                      );
                    r = this.channels[r];
                    return (
                      !!r &&
                      (r.ccMIDROW(t),
                      this.logger.log(St.DEBUG, "MIDROW (" + Dt([e, t]) + ")"),
                      !0)
                    );
                  }
                  return !1;
                }),
                (tr.parsePAC = function (e, t) {
                  var r = this.cmdHistory;
                  if (
                    !(
                      (((17 <= e && e <= 23) || (25 <= e && e <= 31)) &&
                        64 <= t &&
                        t <= 127) ||
                      ((16 === e || 24 === e) && 64 <= t && t <= 95)
                    )
                  )
                    return !1;
                  if (Ht(e, t, r)) return jt(null, null, r), !0;
                  var i = e <= 23 ? 1 : 2,
                    a = (
                      64 <= t && t <= 95 ? (1 == i ? Rt : kt) : 1 == i ? At : wt
                    )[e],
                    n = this.channels[i];
                  return (
                    !!n &&
                    (n.setPAC(this.interpretPAC(a, t)),
                    jt(e, t, r),
                    (this.currentChannel = i),
                    !0)
                  );
                }),
                (tr.interpretPAC = function (e, t) {
                  var e = {
                      color: null,
                      italics: !1,
                      indent: null,
                      underline: !1,
                      row: e,
                    },
                    r = 95 < t ? t - 96 : t - 64;
                  return (
                    (e.underline = 1 == (1 & r)),
                    r <= 13
                      ? (e.color = [
                          "white",
                          "green",
                          "blue",
                          "cyan",
                          "red",
                          "yellow",
                          "magenta",
                          "white",
                        ][Math.floor(r / 2)])
                      : r <= 15
                      ? ((e.italics = !0), (e.color = "white"))
                      : (e.indent = 4 * Math.floor((r - 16) / 2)),
                    e
                  );
                }),
                (tr.parseChars = function (e, t) {
                  var r,
                    i,
                    a = null,
                    n = null;
                  return (
                    17 <= (n = 25 <= e ? ((r = 2), e - 8) : ((r = 1), e)) &&
                    n <= 19
                      ? ((i = t),
                        (i = 17 === n ? t + 80 : 18 === n ? t + 112 : t + 144),
                        this.logger.log(
                          St.INFO,
                          "Special char '" + Et(i) + "' in channel " + r
                        ),
                        (a = [i]))
                      : 32 <= e && e <= 127 && (a = 0 === t ? [e] : [e, t]),
                    a &&
                      ((i = Dt(a)),
                      this.logger.log(St.DEBUG, "Char codes =  " + i.join(",")),
                      jt(e, t, this.cmdHistory)),
                    a
                  );
                }),
                (tr.parseBackgroundAttributes = function (e, t) {
                  if (
                    !(
                      ((16 === e || 24 === e) && 32 <= t && t <= 47) ||
                      ((23 === e || 31 === e) && 45 <= t && t <= 47)
                    )
                  )
                    return !1;
                  var r = {};
                  16 === e || 24 === e
                    ? ((i = Math.floor((t - 32) / 2)),
                      (r.background = Lt[i]),
                      t % 2 == 1 && (r.background = r.background + "_semi"))
                    : 45 === t
                    ? (r.background = "transparent")
                    : ((r.foreground = "black"),
                      47 === t && (r.underline = !0));
                  var i = e <= 23 ? 1 : 2;
                  return (
                    this.channels[i].setBkgData(r),
                    jt(e, t, this.cmdHistory),
                    !0
                  );
                }),
                (tr.reset = function () {
                  for (var e = 0; e < Object.keys(this.channels).length; e++) {
                    var t = this.channels[e];
                    t && t.reset();
                  }
                  this.cmdHistory = {
                    a: null,
                    b: null,
                  };
                }),
                (tr.cueSplitAtTime = function (e) {
                  for (var t = 0; t < this.channels.length; t++) {
                    var r = this.channels[t];
                    r && r.cueSplitAtTime(e);
                  }
                }),
                Qt),
              qt =
                (((ee = zt.prototype).dispatchCue = function () {
                  null !== this.startTime &&
                    (this.timelineController.addCues(
                      this.trackName,
                      this.startTime,
                      this.endTime,
                      this.screen,
                      this.cueRanges
                    ),
                    (this.startTime = null));
                }),
                (ee.newCue = function (e, t, r) {
                  (null === this.startTime || this.startTime > e) &&
                    (this.startTime = e),
                    (this.endTime = t),
                    (this.screen = r),
                    this.timelineController.createCaptionsTrack(this.trackName);
                }),
                (ee.reset = function () {
                  this.cueRanges = [];
                }),
                zt),
              Xt = function (e, t, i, a, r, n) {
                var s,
                  e = Object(je.b)(new Uint8Array(e))
                    .trim()
                    .replace(/\r\n|\n\r|\n|\r/g, "\n")
                    .split("\n"),
                  o = "00:00.000",
                  l = 0,
                  d = 0,
                  u = 0,
                  c = [],
                  h = !0,
                  f = !1,
                  g = new bt();
                (g.oncue = function (e) {
                  var t = i[a],
                    r = i.ccOffset;
                  t &&
                    t.new &&
                    (void 0 !== d
                      ? (r = i.ccOffset = t.start)
                      : (function (e, t) {
                          var r = e[a],
                            i = e[r.prevCC];
                          if (!i || (!i.new && r.new))
                            return (
                              (e.ccOffset = e.presentationOffset = r.start),
                              (r.new = !1)
                            );
                          for (; i && i.new; )
                            (e.ccOffset += r.start - i.start),
                              (r.new = !1),
                              (i = e[(r = i).prevCC]);
                          e.presentationOffset = t;
                        })(i, u)),
                    u && (r = u - i.presentationOffset),
                    f && ((e.startTime += r - d), (e.endTime += r - d)),
                    (e.id =
                      Yt(e.startTime.toString()) +
                      Yt(e.endTime.toString()) +
                      Yt(e.text)),
                    (e.text = decodeURIComponent(encodeURIComponent(e.text))),
                    0 < e.endTime && c.push(e);
                }),
                  (g.onparsingerror = function (e) {
                    s = e;
                  }),
                  (g.onflush = function () {
                    s && n ? n(s) : r(c);
                  }),
                  e.forEach(function (e) {
                    if (h) {
                      if (Vt(e, "X-TIMESTAMP-MAP=")) {
                        (f = !(h = !1)),
                          e
                            .substr(16)
                            .split(",")
                            .forEach(function (e) {
                              Vt(e, "LOCAL:")
                                ? (o = e.substr(6))
                                : Vt(e, "MPEGTS:") &&
                                  (l = parseInt(e.substr(7)));
                            });
                        try {
                          t + (9e4 * i[a].start || 0) < 0 && (t += 8589934592),
                            (l -= t),
                            (d =
                              (function (e) {
                                var t = parseInt(e.substr(-3)),
                                  r = parseInt(e.substr(-6, 2)),
                                  i = parseInt(e.substr(-9, 2)),
                                  a =
                                    9 < e.length
                                      ? parseInt(e.substr(0, e.indexOf(":")))
                                      : 0;
                                if (
                                  !(
                                    Object(A.a)(t) &&
                                    Object(A.a)(r) &&
                                    Object(A.a)(i) &&
                                    Object(A.a)(a)
                                  )
                                )
                                  throw Error(
                                    "Malformed X-TIMESTAMP-MAP: Local:" + e
                                  );
                                return (
                                  (t += 1e3 * r), (t += 6e4 * i) + 36e5 * a
                                );
                              })(o) / 1e3),
                            (u = l / 9e4);
                        } catch (e) {
                          (f = !1), (s = e);
                        }
                        return;
                      }
                      "" === e && (h = !1);
                    }
                    g.parse(e + "\n");
                  }),
                  g.flush();
              };
            function zt(e, t) {
              (this.timelineController = void 0),
                (this.cueRanges = []),
                (this.trackName = void 0),
                (this.startTime = null),
                (this.endTime = null),
                (this.screen = null),
                (this.timelineController = e),
                (this.trackName = t);
            }
            function Qt(e, t, r) {
              (this.channels = void 0),
                (this.currentChannel = 0),
                (this.cmdHistory = void 0),
                (this.logger = void 0);
              var i = new Ot();
              (this.channels = [null, new Mt(e, t, i), new Mt(e + 1, r, i)]),
                (this.cmdHistory = {
                  a: null,
                  b: null,
                }),
                (this.logger = i);
            }
            function $t(e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            }
            Ee = (function (n) {
              var e;
              function t(e) {
                var t, r, i, a;
                return (
                  ((t =
                    n.call(
                      this,
                      e,
                      E.a.MEDIA_ATTACHING,
                      E.a.MEDIA_DETACHING,
                      E.a.FRAG_PARSING_USERDATA,
                      E.a.FRAG_DECRYPTED,
                      E.a.MANIFEST_LOADING,
                      E.a.MANIFEST_LOADED,
                      E.a.FRAG_LOADED,
                      E.a.INIT_PTS_FOUND
                    ) || this).media = null),
                  (t.config = void 0),
                  (t.enabled = !0),
                  (t.Cues = void 0),
                  (t.textTracks = []),
                  (t.tracks = []),
                  (t.initPTS = []),
                  (t.unparsedVttFrags = []),
                  (t.captionsTracks = {}),
                  (t.nonNativeCaptionsTracks = {}),
                  (t.captionsProperties = void 0),
                  (t.cea608Parser1 = void 0),
                  (t.cea608Parser2 = void 0),
                  (t.lastSn = -1),
                  (t.prevCC = -1),
                  (t.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                      start: 0,
                      prevCC: -1,
                      new: !1,
                    },
                  }),
                  (t.hls = e),
                  (t.config = e.config),
                  (t.Cues = e.config.cueHandler),
                  (t.captionsProperties = {
                    textTrack1: {
                      label: t.config.captionsTextTrack1Label,
                      languageCode: t.config.captionsTextTrack1LanguageCode,
                    },
                    textTrack2: {
                      label: t.config.captionsTextTrack2Label,
                      languageCode: t.config.captionsTextTrack2LanguageCode,
                    },
                    textTrack3: {
                      label: t.config.captionsTextTrack3Label,
                      languageCode: t.config.captionsTextTrack3LanguageCode,
                    },
                    textTrack4: {
                      label: t.config.captionsTextTrack4Label,
                      languageCode: t.config.captionsTextTrack4LanguageCode,
                    },
                  }),
                  t.config.enableCEA708Captions &&
                    ((r = new qt($t(t), "textTrack1")),
                    (i = new qt($t(t), "textTrack2")),
                    (a = new qt($t(t), "textTrack3")),
                    (e = new qt($t(t), "textTrack4")),
                    (t.cea608Parser1 = new Wt(1, r, i)),
                    (t.cea608Parser2 = new Wt(3, a, e))),
                  t
                );
              }
              (r = n),
                ((e = t).prototype = Object.create(r.prototype)),
                ((e.prototype.constructor = e).__proto__ = r);
              var r = t.prototype;
              return (
                (r.addCues = function (e, t, r, i, a) {
                  for (var n, s, o = !1, l = a.length; l--; ) {
                    var d = a[l],
                      u =
                        ((n = d[0]),
                        (s = d[1]),
                        (u = t),
                        Math.min(s, r) - Math.max(n, u));
                    if (
                      0 <= u &&
                      ((d[0] = Math.min(d[0], t)),
                      (d[1] = Math.max(d[1], r)),
                      (o = !0),
                      0.5 < u / (r - t))
                    )
                      return;
                  }
                  o || a.push([t, r]),
                    this.config.renderTextTracksNatively
                      ? this.Cues.newCue(this.captionsTracks[e], t, r, i)
                      : ((i = this.Cues.newCue(null, t, r, i)),
                        this.hls.trigger(E.a.CUES_PARSED, {
                          type: "captions",
                          cues: i,
                          track: e,
                        }));
                }),
                (r.onInitPtsFound = function (e) {
                  var t = this,
                    r = e.frag,
                    i = e.id,
                    a = e.initPTS,
                    e = this.unparsedVttFrags;
                  "main" === i && (this.initPTS[r.cc] = a),
                    e.length &&
                      ((this.unparsedVttFrags = []),
                      e.forEach(function (e) {
                        t.onFragLoaded(e);
                      }));
                }),
                (r.getExistingTrack = function (e) {
                  var t = this.media;
                  if (t)
                    for (var r = 0; r < t.textTracks.length; r++) {
                      var i = t.textTracks[r];
                      if (i[e]) return i;
                    }
                  return null;
                }),
                (r.createCaptionsTrack = function (e) {
                  this.config.renderTextTracksNatively
                    ? this.createNativeTrack(e)
                    : this.createNonNativeTrack(e);
                }),
                (r.createNativeTrack = function (e) {
                  var t, r, i, a, n;
                  this.captionsTracks[e] ||
                    ((n = this.captionsProperties),
                    (t = this.captionsTracks),
                    (r = this.media),
                    (i = (a = n[e]).label),
                    (n = a.languageCode),
                    (a = this.getExistingTrack(e))
                      ? ((t[e] = a), Ve(t[e]), He(t[e], r))
                      : (n = this.createTextTrack("captions", i, n)) &&
                        ((n[e] = !0), (t[e] = n)));
                }),
                (r.createNonNativeTrack = function (e) {
                  var t;
                  this.nonNativeCaptionsTracks[e] ||
                    ((t = this.captionsProperties[e]) &&
                      ((t = {
                        _id: e,
                        label: t.label,
                        kind: "captions",
                        default: !!t.media && !!t.media.default,
                        closedCaptions: t.media,
                      }),
                      (this.nonNativeCaptionsTracks[e] = t),
                      this.hls.trigger(E.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                        tracks: [t],
                      })));
                }),
                (r.createTextTrack = function (e, t, r) {
                  var i = this.media;
                  if (i) return i.addTextTrack(e, t, r);
                }),
                (r.destroy = function () {
                  n.prototype.destroy.call(this);
                }),
                (r.onMediaAttaching = function (e) {
                  (this.media = e.media), this._cleanTracks();
                }),
                (r.onMediaDetaching = function () {
                  var t = this.captionsTracks;
                  Object.keys(t).forEach(function (e) {
                    Ve(t[e]), delete t[e];
                  }),
                    (this.nonNativeCaptionsTracks = {});
                }),
                (r.onManifestLoading = function () {
                  (this.lastSn = -1),
                    (this.prevCC = -1),
                    (this.vttCCs = {
                      ccOffset: 0,
                      presentationOffset: 0,
                      0: {
                        start: 0,
                        prevCC: -1,
                        new: !1,
                      },
                    }),
                    this._cleanTracks(),
                    (this.tracks = []),
                    (this.captionsTracks = {}),
                    (this.nonNativeCaptionsTracks = {});
                }),
                (r._cleanTracks = function () {
                  var e = this.media;
                  if (e) {
                    var t = e.textTracks;
                    if (t) for (var r = 0; r < t.length; r++) Ve(t[r]);
                  }
                }),
                (r.onManifestLoaded = function (e) {
                  var o,
                    t,
                    l = this;
                  (this.textTracks = []),
                    (this.unparsedVttFrags = this.unparsedVttFrags || []),
                    (this.initPTS = []),
                    this.cea608Parser1 &&
                      this.cea608Parser2 &&
                      (this.cea608Parser1.reset(), this.cea608Parser2.reset()),
                    this.config.enableWebVTT &&
                      ((t = e.subtitles || []),
                      (t = this.tracks && t && this.tracks.length === t.length),
                      (this.tracks = e.subtitles || []),
                      this.config.renderTextTracksNatively
                        ? ((o = this.media ? this.media.textTracks : []),
                          this.tracks.forEach(function (e, t) {
                            var r, i, a;
                            if (t < o.length) {
                              for (var n = null, s = 0; s < o.length; s++)
                                if (
                                  ((i = o[s]),
                                  (a = e),
                                  i &&
                                    i.label === a.name &&
                                    !i.textTrack1 &&
                                    !i.textTrack2)
                                ) {
                                  n = o[s];
                                  break;
                                }
                              n && (r = n);
                            }
                            (r =
                              r ||
                              l.createTextTrack("subtitles", e.name, e.lang)),
                              e.default
                                ? (r.mode = l.hls.subtitleDisplay
                                    ? "showing"
                                    : "hidden")
                                : (r.mode = "disabled"),
                              l.textTracks.push(r);
                          }))
                        : !t &&
                          this.tracks &&
                          this.tracks.length &&
                          ((t = this.tracks.map(function (e) {
                            return {
                              label: e.name,
                              kind: e.type.toLowerCase(),
                              default: e.default,
                              subtitleTrack: e,
                            };
                          })),
                          this.hls.trigger(E.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: t,
                          }))),
                    this.config.enableCEA708Captions &&
                      e.captions &&
                      e.captions.forEach(function (e) {
                        var t = /(?:CC|SERVICE)([1-4])/.exec(e.instreamId);
                        t &&
                          ((t = "textTrack" + t[1]),
                          (t = l.captionsProperties[t]) &&
                            ((t.label = e.name),
                            e.lang && (t.languageCode = e.lang),
                            (t.media = e)));
                      });
                }),
                (r.onFragLoaded = function (e) {
                  var t = e.frag,
                    r = e.payload,
                    i = this.cea608Parser1,
                    a = this.cea608Parser2,
                    n = this.initPTS,
                    s = this.lastSn,
                    o = this.unparsedVttFrags;
                  if ("main" === t.type) {
                    var l = t.sn;
                    t.sn !== s + 1 && i && a && (i.reset(), a.reset()),
                      (this.lastSn = l);
                  } else if ("subtitle" === t.type)
                    if (r.byteLength) {
                      if (!Object(A.a)(n[t.cc]))
                        return (
                          o.push(e),
                          void (
                            n.length &&
                            this.hls.trigger(E.a.SUBTITLE_FRAG_PROCESSED, {
                              success: !1,
                              frag: t,
                            })
                          )
                        );
                      n = t.decryptdata;
                      (null != n && null != n.key && "AES-128" === n.method) ||
                        this._parseVTTs(t, r);
                    } else
                      this.hls.trigger(E.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: t,
                      });
                }),
                (r._parseVTTs = function (r, e) {
                  var a = this,
                    n = this.hls,
                    t = this.prevCC,
                    s = this.textTracks,
                    i = this.vttCCs;
                  i[r.cc] ||
                    ((i[r.cc] = {
                      start: r.start,
                      prevCC: t,
                      new: !0,
                    }),
                    (this.prevCC = r.cc)),
                    Xt(
                      e,
                      this.initPTS[r.cc],
                      i,
                      r.cc,
                      function (e) {
                        if (a.config.renderTextTracksNatively) {
                          var i = s[r.level];
                          if ("disabled" === i.mode)
                            return void n.trigger(E.a.SUBTITLE_FRAG_PROCESSED, {
                              success: !1,
                              frag: r,
                            });
                          e.forEach(function (t) {
                            if (!i.cues.getCueById(t.id))
                              try {
                                if ((i.addCue(t), !i.cues.getCueById(t.id)))
                                  throw new Error("addCue is failed for: " + t);
                              } catch (e) {
                                k.b.debug(
                                  "Failed occurred on adding cues: " + e
                                );
                                var r = new window.TextTrackCue(
                                  t.startTime,
                                  t.endTime,
                                  t.text
                                );
                                (r.id = t.id), i.addCue(r);
                              }
                          });
                        } else {
                          var t = a.tracks[r.level].default
                            ? "default"
                            : "subtitles" + r.level;
                          n.trigger(E.a.CUES_PARSED, {
                            type: "subtitles",
                            cues: e,
                            track: t,
                          });
                        }
                        n.trigger(E.a.SUBTITLE_FRAG_PROCESSED, {
                          success: !0,
                          frag: r,
                        });
                      },
                      function (e) {
                        k.b.log("Failed to parse VTT cue: " + e),
                          n.trigger(E.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: r,
                          });
                      }
                    );
                }),
                (r.onFragDecrypted = function (e) {
                  var t = e.frag,
                    r = e.payload;
                  "subtitle" === t.type &&
                    (Object(A.a)(this.initPTS[t.cc])
                      ? this._parseVTTs(t, r)
                      : this.unparsedVttFrags.push(e));
                }),
                (r.onFragParsingUserdata = function (e) {
                  var t = this.cea608Parser1,
                    r = this.cea608Parser2;
                  if (this.enabled && t && r)
                    for (var i = 0; i < e.samples.length; i++) {
                      var a = e.samples[i].bytes;
                      a &&
                        ((a = this.extractCea608Data(a)),
                        t.addData(e.samples[i].pts, a[0]),
                        r.addData(e.samples[i].pts, a[1]));
                    }
                }),
                (r.extractCea608Data = function (e) {
                  for (
                    var t = 31 & e[0], r = 2, i = [[], []], a = 0;
                    a < t;
                    a++
                  ) {
                    var n = e[r++],
                      s = 127 & e[r++],
                      o = 127 & e[r++],
                      l = 3 & n;
                    (0 == s && 0 == o) ||
                      (0 != (4 & n) &&
                        ((0 != l && 1 != l) || (i[l].push(s), i[l].push(o))));
                  }
                  return i;
                }),
                t
              );
            })(o);
            function Jt(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            function Zt(e) {
              for (var t = [], r = 0; r < e.length; r++) {
                var i = e[r];
                "subtitles" === i.kind && i.label && t.push(e[r]);
              }
              return t;
            }
            var er,
              tr = (function (t) {
                var e;
                function r(e) {
                  return (
                    ((e =
                      t.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHED,
                        E.a.MEDIA_DETACHING,
                        E.a.MANIFEST_LOADED,
                        E.a.SUBTITLE_TRACK_LOADED
                      ) || this).tracks = []),
                    (e.trackId = -1),
                    (e.media = null),
                    (e.stopped = !0),
                    (e.subtitleDisplay = !0),
                    (e.queuedDefaultTrack = null),
                    e
                  );
                }
                (i = t),
                  ((e = r).prototype = Object.create(i.prototype)),
                  ((e.prototype.constructor = e).__proto__ = i);
                var i = r.prototype;
                return (
                  (i.destroy = function () {
                    o.prototype.destroy.call(this);
                  }),
                  (i.onMediaAttached = function (e) {
                    var t = this;
                    (this.media = e.media),
                      this.media &&
                        (Object(A.a)(this.queuedDefaultTrack) &&
                          ((this.subtitleTrack = this.queuedDefaultTrack),
                          (this.queuedDefaultTrack = null)),
                        (this.trackChangeListener =
                          this._onTextTracksChanged.bind(this)),
                        (this.useTextTrackPolling = !(
                          this.media.textTracks &&
                          "onchange" in this.media.textTracks
                        )),
                        this.useTextTrackPolling
                          ? (this.subtitlePollingInterval = setInterval(
                              function () {
                                t.trackChangeListener();
                              },
                              500
                            ))
                          : this.media.textTracks.addEventListener(
                              "change",
                              this.trackChangeListener
                            ));
                  }),
                  (i.onMediaDetaching = function () {
                    this.media &&
                      (this.useTextTrackPolling
                        ? clearInterval(this.subtitlePollingInterval)
                        : this.media.textTracks.removeEventListener(
                            "change",
                            this.trackChangeListener
                          ),
                      Object(A.a)(this.subtitleTrack) &&
                        (this.queuedDefaultTrack = this.subtitleTrack),
                      Zt(this.media.textTracks).forEach(function (e) {
                        Ve(e);
                      }),
                      (this.subtitleTrack = -1),
                      (this.media = null));
                  }),
                  (i.onManifestLoaded = function (e) {
                    var t = this,
                      e = e.subtitles || [];
                    (this.tracks = e),
                      this.hls.trigger(E.a.SUBTITLE_TRACKS_UPDATED, {
                        subtitleTracks: e,
                      }),
                      e.forEach(function (e) {
                        e.default &&
                          (t.media
                            ? (t.subtitleTrack = e.id)
                            : (t.queuedDefaultTrack = e.id));
                      });
                  }),
                  (i.onSubtitleTrackLoaded = function (e) {
                    var t = this,
                      r = e.id,
                      i = e.details,
                      a = this.trackId,
                      n = this.tracks,
                      s = n[a];
                    r >= n.length || r !== a || !s || this.stopped
                      ? this._clearReloadTimer()
                      : (k.b.log("subtitle track " + r + " loaded"),
                        i.live
                          ? ((e = he(s.details, i, e.stats.trequest)),
                            k.b.log(
                              "Reloading live subtitle playlist in " + e + "ms"
                            ),
                            (this.timer = setTimeout(function () {
                              t._loadCurrentTrack();
                            }, e)))
                          : this._clearReloadTimer());
                  }),
                  (i.startLoad = function () {
                    (this.stopped = !1), this._loadCurrentTrack();
                  }),
                  (i.stopLoad = function () {
                    (this.stopped = !0), this._clearReloadTimer();
                  }),
                  (i._clearReloadTimer = function () {
                    this.timer &&
                      (clearTimeout(this.timer), (this.timer = null));
                  }),
                  (i._loadCurrentTrack = function () {
                    var e = this.trackId,
                      t = this.tracks,
                      r = this.hls,
                      t = t[e];
                    e < 0 ||
                      !t ||
                      (t.details && !t.details.live) ||
                      (k.b.log("Loading subtitle track " + e),
                      r.trigger(E.a.SUBTITLE_TRACK_LOADING, {
                        url: t.url,
                        id: e,
                      }));
                  }),
                  (i._toggleTrackModes = function (e) {
                    var t = this.media,
                      r = this.subtitleDisplay,
                      i = this.trackId;
                    t &&
                      ((t = Zt(t.textTracks)),
                      -1 === e
                        ? [].slice.call(t).forEach(function (e) {
                            e.mode = "disabled";
                          })
                        : (i = t[i]) && (i.mode = "disabled"),
                      (e = t[e]) && (e.mode = r ? "showing" : "hidden"));
                  }),
                  (i._setSubtitleTrackInternal = function (e) {
                    var t = this.hls,
                      r = this.tracks;
                    !Object(A.a)(e) ||
                      e < -1 ||
                      e >= r.length ||
                      ((this.trackId = e),
                      k.b.log("Switching to subtitle track " + e),
                      t.trigger(E.a.SUBTITLE_TRACK_SWITCH, {
                        id: e,
                      }),
                      this._loadCurrentTrack());
                  }),
                  (i._onTextTracksChanged = function () {
                    if (
                      this.media &&
                      this.hls.config.renderTextTracksNatively
                    ) {
                      for (
                        var e = -1, t = Zt(this.media.textTracks), r = 0;
                        r < t.length;
                        r++
                      )
                        if ("hidden" === t[r].mode) e = r;
                        else if ("showing" === t[r].mode) {
                          e = r;
                          break;
                        }
                      this.subtitleTrack = e;
                    }
                  }),
                  Jt(r.prototype, [
                    {
                      key: "subtitleTracks",
                      get: function () {
                        return this.tracks;
                      },
                    },
                    {
                      key: "subtitleTrack",
                      get: function () {
                        return this.trackId;
                      },
                      set: function (e) {
                        this.trackId !== e &&
                          (this._toggleTrackModes(e),
                          this._setSubtitleTrackInternal(e));
                      },
                    },
                  ]),
                  r
                );
              })(o),
              rr = r(7),
              ir = window.performance,
              ee = (function (i) {
                var e;
                function t(e, t) {
                  var r;
                  return (
                    ((r =
                      i.call(
                        this,
                        e,
                        E.a.MEDIA_ATTACHED,
                        E.a.MEDIA_DETACHING,
                        E.a.ERROR,
                        E.a.KEY_LOADED,
                        E.a.FRAG_LOADED,
                        E.a.SUBTITLE_TRACKS_UPDATED,
                        E.a.SUBTITLE_TRACK_SWITCH,
                        E.a.SUBTITLE_TRACK_LOADED,
                        E.a.SUBTITLE_FRAG_PROCESSED,
                        E.a.LEVEL_UPDATED
                      ) || this).fragmentTracker = t),
                    (r.config = e.config),
                    (r.state = Se),
                    (r.tracks = []),
                    (r.tracksBuffered = []),
                    (r.currentTrackId = -1),
                    (r.decrypter = new rr.a(e, e.config)),
                    (r.lastAVStart = 0),
                    (r._onMediaSeeking = r.onMediaSeeking.bind(
                      (function (e) {
                        if (void 0 === e)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return e;
                      })(r)
                    )),
                    r
                  );
                }
                (r = i),
                  ((e = t).prototype = Object.create(r.prototype)),
                  ((e.prototype.constructor = e).__proto__ = r);
                var r = t.prototype;
                return (
                  (r.onSubtitleFragProcessed = function (e) {
                    var t = e.frag,
                      e = e.success;
                    if (((this.fragPrevious = t), (this.state = Re), e)) {
                      var r = this.tracksBuffered[this.currentTrackId];
                      if (r) {
                        for (var i, a = t.start, n = 0; n < r.length; n++)
                          if (a >= r[n].start && a <= r[n].end) {
                            i = r[n];
                            break;
                          }
                        t = t.start + t.duration;
                        i
                          ? (i.end = t)
                          : ((i = {
                              start: a,
                              end: t,
                            }),
                            r.push(i));
                      }
                    }
                  }),
                  (r.onMediaAttached = function (e) {
                    e = e.media;
                    (this.media = e).addEventListener(
                      "seeking",
                      this._onMediaSeeking
                    ),
                      (this.state = Re);
                  }),
                  (r.onMediaDetaching = function () {
                    var t = this;
                    this.media &&
                      (this.media.removeEventListener(
                        "seeking",
                        this._onMediaSeeking
                      ),
                      this.fragmentTracker.removeAllFragments(),
                      (this.currentTrackId = -1),
                      this.tracks.forEach(function (e) {
                        t.tracksBuffered[e.id] = [];
                      }),
                      (this.media = null),
                      (this.state = Se));
                  }),
                  (r.onError = function (e) {
                    e = e.frag;
                    e && "subtitle" === e.type && (this.state = Re);
                  }),
                  (r.onSubtitleTracksUpdated = function (e) {
                    var t = this;
                    k.b.log("subtitle tracks updated"),
                      (this.tracksBuffered = []),
                      (this.tracks = e.subtitleTracks),
                      this.tracks.forEach(function (e) {
                        t.tracksBuffered[e.id] = [];
                      });
                  }),
                  (r.onSubtitleTrackSwitch = function (e) {
                    (this.currentTrackId = e.id),
                      this.tracks &&
                      this.tracks.length &&
                      -1 !== this.currentTrackId
                        ? (e = this.tracks[this.currentTrackId]) &&
                          e.details &&
                          this.setInterval(500)
                        : this.clearInterval();
                  }),
                  (r.onSubtitleTrackLoaded = function (e) {
                    var t = e.id,
                      r = e.details,
                      i = this.currentTrackId,
                      a = this.tracks,
                      e = a[i];
                    t >= a.length ||
                      t !== i ||
                      !e ||
                      (r.live &&
                        (function (e, t, r) {
                          void 0 === r && (r = 0);
                          var i = -1;
                          ce(e, t, function (e, t, r) {
                            (t.start = e.start), (i = r);
                          });
                          var a = t.fragments;
                          if (i < 0)
                            a.forEach(function (e) {
                              e.start += r;
                            });
                          else
                            for (var n = i + 1; n < a.length; n++)
                              a[n].start = a[n - 1].start + a[n - 1].duration;
                        })(e.details, r, this.lastAVStart),
                      (e.details = r),
                      this.setInterval(500));
                  }),
                  (r.onKeyLoaded = function () {
                    this.state === Ae && (this.state = Re);
                  }),
                  (r.onFragLoaded = function (e) {
                    var r,
                      t = this.fragCurrent,
                      i = e.frag.decryptdata,
                      a = e.frag,
                      n = this.hls;
                    this.state === ke &&
                      t &&
                      "subtitle" === e.frag.type &&
                      t.sn === e.frag.sn &&
                      0 < e.payload.byteLength &&
                      i &&
                      i.key &&
                      "AES-128" === i.method &&
                      ((r = ir.now()),
                      this.decrypter.decrypt(
                        e.payload,
                        i.key.buffer,
                        i.iv.buffer,
                        function (e) {
                          var t = ir.now();
                          n.trigger(E.a.FRAG_DECRYPTED, {
                            frag: a,
                            payload: e,
                            stats: {
                              tstart: r,
                              tdecrypt: t,
                            },
                          });
                        }
                      ));
                  }),
                  (r.onLevelUpdated = function (e) {
                    e = e.details.fragments;
                    this.lastAVStart = e.length ? e[0].start : 0;
                  }),
                  (r.doTick = function () {
                    if (this.media)
                      switch (this.state) {
                        case Re:
                          var e = this.config,
                            t = this.currentTrackId,
                            r = this.fragmentTracker,
                            i = this.media,
                            a = this.tracks;
                          if (!a || !a[t] || !a[t].details) break;
                          var n = e.maxBufferHole,
                            s = e.maxFragLookUpTolerance,
                            o = Math.min(
                              e.maxBufferLength,
                              e.maxMaxBufferLength
                            ),
                            l = q.bufferedInfo(
                              this._getBuffered(),
                              i.currentTime,
                              n
                            ),
                            e = l.end,
                            i = l.len,
                            n = a[t].details,
                            l = n.fragments,
                            a = l.length,
                            t = l[a - 1].start + l[a - 1].duration;
                          if (o < i) return;
                          var d,
                            i = this.fragPrevious;
                          (d =
                            e < t
                              ? (i &&
                                  n.hasProgramDateTime &&
                                  (d = me(l, i.endProgramDateTime, s)),
                                d || ve(i, l, e, s))
                              : l[a - 1]) && d.encrypted
                            ? (k.b.log("Loading key for " + d.sn),
                              (this.state = Ae),
                              this.hls.trigger(E.a.KEY_LOADING, {
                                frag: d,
                              }))
                            : d &&
                              r.getState(d) === j &&
                              ((this.fragCurrent = d),
                              (this.state = ke),
                              this.hls.trigger(E.a.FRAG_LOADING, {
                                frag: d,
                              }));
                      }
                    else this.state = Re;
                  }),
                  (r.stopLoad = function () {
                    (this.lastAVStart = 0), i.prototype.stopLoad.call(this);
                  }),
                  (r._getBuffered = function () {
                    return this.tracksBuffered[this.currentTrackId] || [];
                  }),
                  (r.onMediaSeeking = function () {
                    this.fragPrevious = null;
                  }),
                  t
                );
              })(Fe);
            ((r = er = er || {}).WIDEVINE = "com.widevine.alpha"),
              (r.PLAYREADY = "com.microsoft.playready");
            Fe =
              "undefined" != typeof window &&
              window.navigator &&
              window.navigator.requestMediaKeySystemAccess
                ? window.navigator.requestMediaKeySystemAccess.bind(
                    window.navigator
                  )
                : null;
            function ar(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            r = (function (t) {
              var e;
              function r(e) {
                var r;
                return (
                  ((r =
                    t.call(
                      this,
                      e,
                      E.a.MEDIA_ATTACHED,
                      E.a.MEDIA_DETACHED,
                      E.a.MANIFEST_PARSED
                    ) || this)._widevineLicenseUrl = void 0),
                  (r._licenseXhrSetup = void 0),
                  (r._emeEnabled = void 0),
                  (r._requestMediaKeySystemAccess = void 0),
                  (r._drmSystemOptions = void 0),
                  (r._config = void 0),
                  (r._mediaKeysList = []),
                  (r._media = null),
                  (r._hasSetMediaKeys = !1),
                  (r._requestLicenseFailureCount = 0),
                  (r.mediaKeysPromise = null),
                  (r._onMediaEncrypted = function (t) {
                    if (
                      (k.b.log(
                        'Media is encrypted using "' +
                          t.initDataType +
                          '" init data type'
                      ),
                      !r.mediaKeysPromise)
                    )
                      return (
                        k.b.error(
                          "Fatal: Media is encrypted but no CDM access or no keys have been requested"
                        ),
                        void r.hls.trigger(E.a.ERROR, {
                          type: m.b.KEY_SYSTEM_ERROR,
                          details: m.a.KEY_SYSTEM_NO_KEYS,
                          fatal: !0,
                        })
                      );
                    function e(e) {
                      r._media &&
                        (r._attemptSetMediaKeys(e),
                        r._generateRequestWithPreferredKeySession(
                          t.initDataType,
                          t.initData
                        ));
                    }
                    r.mediaKeysPromise.then(e).catch(e);
                  }),
                  (r._config = e.config),
                  (r._widevineLicenseUrl = r._config.widevineLicenseUrl),
                  (r._licenseXhrSetup = r._config.licenseXhrSetup),
                  (r._emeEnabled = r._config.emeEnabled),
                  (r._requestMediaKeySystemAccess =
                    r._config.requestMediaKeySystemAccessFunc),
                  (r._drmSystemOptions = e.config.drmSystemOptions),
                  r
                );
              }
              (i = t),
                ((e = r).prototype = Object.create(i.prototype)),
                ((e.prototype.constructor = e).__proto__ = i);
              var i = r.prototype;
              return (
                (i.getLicenseServerUrl = function (e) {
                  switch (e) {
                    case er.WIDEVINE:
                      if (!this._widevineLicenseUrl) break;
                      return this._widevineLicenseUrl;
                  }
                  throw new Error(
                    'no license server URL configured for key-system "' +
                      e +
                      '"'
                  );
                }),
                (i._attemptKeySystemAccess = function (t, e, r) {
                  var i = this,
                    r = (function (e, t, r, i) {
                      if (e !== er.WIDEVINE)
                        throw new Error("Unknown key-system: " + e);
                      return (
                        (r = r),
                        (a = i),
                        (n = {
                          audioCapabilities: [],
                          videoCapabilities: [],
                        }),
                        t.forEach(function (e) {
                          n.audioCapabilities.push({
                            contentType: 'audio/mp4; codecs="' + e + '"',
                            robustness: a.audioRobustness || "",
                          });
                        }),
                        r.forEach(function (e) {
                          n.videoCapabilities.push({
                            contentType: 'video/mp4; codecs="' + e + '"',
                            robustness: a.videoRobustness || "",
                          });
                        }),
                        [n]
                      );
                      var a, n;
                    })(t, e, r, this._drmSystemOptions);
                  k.b.log("Requesting encrypted media key-system access");
                  r = this.requestMediaKeySystemAccess(t, r);
                  (this.mediaKeysPromise = r.then(function (e) {
                    return i._onMediaKeySystemAccessObtained(t, e);
                  })),
                    r.catch(function (e) {
                      k.b.error(
                        'Failed to obtain key-system "' + t + '" access:',
                        e
                      );
                    });
                }),
                (i._onMediaKeySystemAccessObtained = function (t, e) {
                  var r = this;
                  k.b.log('Access for key-system "' + t + '" obtained');
                  var i = {
                    mediaKeysSessionInitialized: !1,
                    mediaKeySystemAccess: e,
                    mediaKeySystemDomain: t,
                  };
                  this._mediaKeysList.push(i);
                  var a = Promise.resolve()
                    .then(function () {
                      return e.createMediaKeys();
                    })
                    .then(function (e) {
                      return (
                        (i.mediaKeys = e),
                        k.b.log(
                          'Media-keys created for key-system "' + t + '"'
                        ),
                        r._onMediaKeysCreated(),
                        e
                      );
                    });
                  return (
                    a.catch(function (e) {
                      k.b.error("Failed to create media-keys:", e);
                    }),
                    a
                  );
                }),
                (i._onMediaKeysCreated = function () {
                  var t = this;
                  this._mediaKeysList.forEach(function (e) {
                    e.mediaKeysSession ||
                      ((e.mediaKeysSession = e.mediaKeys.createSession()),
                      t._onNewMediaKeySession(e.mediaKeysSession));
                  });
                }),
                (i._onNewMediaKeySession = function (t) {
                  var r = this;
                  k.b.log("New key-system session " + t.sessionId),
                    t.addEventListener(
                      "message",
                      function (e) {
                        r._onKeySessionMessage(t, e.message);
                      },
                      !1
                    );
                }),
                (i._onKeySessionMessage = function (t, e) {
                  k.b.log("Got EME message event, creating license request"),
                    this._requestLicense(e, function (e) {
                      k.b.log(
                        "Received license data (length: " +
                          (e && e.byteLength) +
                          "), updating key-session"
                      ),
                        t.update(e);
                    });
                }),
                (i._attemptSetMediaKeys = function (e) {
                  if (!this._media)
                    throw new Error(
                      "Attempted to set mediaKeys without first attaching a media element"
                    );
                  if (!this._hasSetMediaKeys) {
                    var t = this._mediaKeysList[0];
                    if (!t || !t.mediaKeys)
                      return (
                        k.b.error(
                          "Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"
                        ),
                        void this.hls.trigger(E.a.ERROR, {
                          type: m.b.KEY_SYSTEM_ERROR,
                          details: m.a.KEY_SYSTEM_NO_KEYS,
                          fatal: !0,
                        })
                      );
                    k.b.log("Setting keys for encrypted media"),
                      this._media.setMediaKeys(t.mediaKeys),
                      (this._hasSetMediaKeys = !0);
                  }
                }),
                (i._generateRequestWithPreferredKeySession = function (e, t) {
                  var r = this,
                    i = this._mediaKeysList[0];
                  if (!i)
                    return (
                      k.b.error(
                        "Fatal: Media is encrypted but not any key-system access has been obtained yet"
                      ),
                      void this.hls.trigger(E.a.ERROR, {
                        type: m.b.KEY_SYSTEM_ERROR,
                        details: m.a.KEY_SYSTEM_NO_ACCESS,
                        fatal: !0,
                      })
                    );
                  if (!i.mediaKeysSessionInitialized) {
                    var a = i.mediaKeysSession;
                    return a
                      ? t
                        ? (k.b.log(
                            'Generating key-session request for "' +
                              e +
                              '" init data type'
                          ),
                          (i.mediaKeysSessionInitialized = !0),
                          void a
                            .generateRequest(e, t)
                            .then(function () {
                              k.b.debug("Key-session generation succeeded");
                            })
                            .catch(function (e) {
                              k.b.error(
                                "Error generating key-session request:",
                                e
                              ),
                                r.hls.trigger(E.a.ERROR, {
                                  type: m.b.KEY_SYSTEM_ERROR,
                                  details: m.a.KEY_SYSTEM_NO_SESSION,
                                  fatal: !1,
                                });
                            }))
                        : (k.b.warn(
                            "Fatal: initData required for generating a key session is null"
                          ),
                          void this.hls.trigger(E.a.ERROR, {
                            type: m.b.KEY_SYSTEM_ERROR,
                            details: m.a.KEY_SYSTEM_NO_INIT_DATA,
                            fatal: !0,
                          }))
                      : (k.b.error(
                          "Fatal: Media is encrypted but no key-session existing"
                        ),
                        void this.hls.trigger(E.a.ERROR, {
                          type: m.b.KEY_SYSTEM_ERROR,
                          details: m.a.KEY_SYSTEM_NO_SESSION,
                          fatal: !0,
                        }));
                  }
                  k.b.warn(
                    "Key-Session already initialized but requested again"
                  );
                }),
                (i._createLicenseXhr = function (e, t, r) {
                  var i = new XMLHttpRequest(),
                    a = this._licenseXhrSetup;
                  try {
                    if (a)
                      try {
                        a(i, e);
                      } catch (t) {
                        i.open("POST", e, !0), a(i, e);
                      }
                    i.readyState || i.open("POST", e, !0);
                  } catch (e) {
                    throw new Error(
                      "issue setting up KeySystem license XHR " + e
                    );
                  }
                  return (
                    (i.responseType = "arraybuffer"),
                    (i.onreadystatechange =
                      this._onLicenseRequestReadyStageChange.bind(
                        this,
                        i,
                        e,
                        t,
                        r
                      )),
                    i
                  );
                }),
                (i._onLicenseRequestReadyStageChange = function (e, t, r, i) {
                  if (4 === e.readyState)
                    if (200 === e.status)
                      (this._requestLicenseFailureCount = 0),
                        k.b.log("License request succeeded"),
                        "arraybuffer" !== e.responseType &&
                          k.b.warn(
                            "xhr response type was not set to the expected arraybuffer for license request"
                          ),
                        i(e.response);
                    else {
                      if (
                        (k.b.error(
                          "License Request XHR failed (" +
                            t +
                            "). Status: " +
                            e.status +
                            " (" +
                            e.statusText +
                            ")"
                        ),
                        this._requestLicenseFailureCount++,
                        3 < this._requestLicenseFailureCount)
                      )
                        return void this.hls.trigger(E.a.ERROR, {
                          type: m.b.KEY_SYSTEM_ERROR,
                          details: m.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                          fatal: !0,
                        });
                      e = 3 - this._requestLicenseFailureCount + 1;
                      k.b.warn(
                        "Retrying license request, " + e + " attempts left"
                      ),
                        this._requestLicense(r, i);
                    }
                }),
                (i._generateLicenseRequestChallenge = function (e, t) {
                  if (e.mediaKeySystemDomain === er.WIDEVINE) return t;
                  throw new Error(
                    "unsupported key-system: " + e.mediaKeySystemDomain
                  );
                }),
                (i._requestLicense = function (e, t) {
                  k.b.log("Requesting content license for key-system");
                  var r = this._mediaKeysList[0];
                  if (!r)
                    return (
                      k.b.error(
                        "Fatal error: Media is encrypted but no key-system access has been obtained yet"
                      ),
                      void this.hls.trigger(E.a.ERROR, {
                        type: m.b.KEY_SYSTEM_ERROR,
                        details: m.a.KEY_SYSTEM_NO_ACCESS,
                        fatal: !0,
                      })
                    );
                  try {
                    var i = this.getLicenseServerUrl(r.mediaKeySystemDomain),
                      a = this._createLicenseXhr(i, e, t);
                    k.b.log("Sending license request to URL: " + i);
                    i = this._generateLicenseRequestChallenge(r, e);
                    a.send(i);
                  } catch (e) {
                    k.b.error("Failure requesting DRM license: " + e),
                      this.hls.trigger(E.a.ERROR, {
                        type: m.b.KEY_SYSTEM_ERROR,
                        details: m.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                        fatal: !0,
                      });
                  }
                }),
                (i.onMediaAttached = function (e) {
                  this._emeEnabled &&
                    ((e = e.media),
                    (this._media = e).addEventListener(
                      "encrypted",
                      this._onMediaEncrypted
                    ));
                }),
                (i.onMediaDetached = function () {
                  var e = this._media,
                    t = this._mediaKeysList;
                  e &&
                    (e.removeEventListener("encrypted", this._onMediaEncrypted),
                    (this._media = null),
                    (this._mediaKeysList = []),
                    Promise.all(
                      t.map(function (e) {
                        if (e.mediaKeysSession)
                          return e.mediaKeysSession
                            .close()
                            .catch(function () {});
                      })
                    )
                      .then(function () {
                        return e.setMediaKeys(null);
                      })
                      .catch(function () {}));
                }),
                (i.onManifestParsed = function (e) {
                  var t;
                  this._emeEnabled &&
                    ((t = e.levels.map(function (e) {
                      return e.audioCodec;
                    })),
                    (e = e.levels.map(function (e) {
                      return e.videoCodec;
                    })),
                    this._attemptKeySystemAccess(er.WIDEVINE, t, e));
                }),
                ar(r.prototype, [
                  {
                    key: "requestMediaKeySystemAccess",
                    get: function () {
                      if (!this._requestMediaKeySystemAccess)
                        throw new Error(
                          "No requestMediaKeySystemAccess function configured"
                        );
                      return this._requestMediaKeySystemAccess;
                    },
                  },
                ]),
                r
              );
            })(o);
            function nr(t, e) {
              var r,
                i = Object.keys(t);
              return (
                Object.getOwnPropertySymbols &&
                  ((r = Object.getOwnPropertySymbols(t)),
                  e &&
                    (r = r.filter(function (e) {
                      return Object.getOwnPropertyDescriptor(t, e).enumerable;
                    })),
                  i.push.apply(i, r)),
                i
              );
            }
            function sr(i) {
              for (var e = 1; e < arguments.length; e++) {
                var a = null != arguments[e] ? arguments[e] : {};
                e % 2
                  ? nr(Object(a), !0).forEach(function (e) {
                      var t, r;
                      (t = i),
                        (e = a[(r = e)]),
                        r in t
                          ? Object.defineProperty(t, r, {
                              value: e,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                            })
                          : (t[r] = e);
                    })
                  : Object.getOwnPropertyDescriptors
                  ? Object.defineProperties(
                      i,
                      Object.getOwnPropertyDescriptors(a)
                    )
                  : nr(Object(a)).forEach(function (e) {
                      Object.defineProperty(
                        i,
                        e,
                        Object.getOwnPropertyDescriptor(a, e)
                      );
                    });
              }
              return i;
            }
            var or = sr(
              sr(
                {
                  autoStartLoad: !0,
                  startPosition: -1,
                  defaultAudioCodec: void 0,
                  debug: !1,
                  capLevelOnFPSDrop: !1,
                  capLevelToPlayerSize: !1,
                  initialLiveManifestSize: 1,
                  maxBufferLength: 30,
                  maxBufferSize: 6e7,
                  maxBufferHole: 0.5,
                  lowBufferWatchdogPeriod: 0.5,
                  highBufferWatchdogPeriod: 3,
                  nudgeOffset: 0.1,
                  nudgeMaxRetry: 3,
                  maxFragLookUpTolerance: 0.25,
                  liveSyncDurationCount: 3,
                  liveMaxLatencyDurationCount: 1 / 0,
                  liveSyncDuration: void 0,
                  liveMaxLatencyDuration: void 0,
                  liveDurationInfinity: !1,
                  liveBackBufferLength: 1 / 0,
                  maxMaxBufferLength: 600,
                  enableWorker: !0,
                  enableSoftwareAES: !0,
                  manifestLoadingTimeOut: 1e4,
                  manifestLoadingMaxRetry: 1,
                  manifestLoadingRetryDelay: 1e3,
                  manifestLoadingMaxRetryTimeout: 64e3,
                  startLevel: void 0,
                  levelLoadingTimeOut: 1e4,
                  levelLoadingMaxRetry: 4,
                  levelLoadingRetryDelay: 1e3,
                  levelLoadingMaxRetryTimeout: 64e3,
                  fragLoadingTimeOut: 2e4,
                  fragLoadingMaxRetry: 6,
                  fragLoadingRetryDelay: 1e3,
                  fragLoadingMaxRetryTimeout: 64e3,
                  startFragPrefetch: !1,
                  fpsDroppedMonitoringPeriod: 5e3,
                  fpsDroppedMonitoringThreshold: 0.2,
                  appendErrorMaxRetry: 3,
                  loader: t,
                  fLoader: void 0,
                  pLoader: void 0,
                  xhrSetup: void 0,
                  licenseXhrSetup: void 0,
                  abrController: Je,
                  bufferController: X,
                  capLevelController: tt,
                  fpsController: it,
                  stretchShortVideoTrack: !1,
                  maxAudioFramesDrift: 1,
                  forceKeyFrameOnDiscontinuity: !0,
                  abrEwmaFastLive: 3,
                  abrEwmaSlowLive: 9,
                  abrEwmaFastVoD: 3,
                  abrEwmaSlowVoD: 9,
                  abrEwmaDefaultEstimate: 5e5,
                  abrBandWidthFactor: 0.95,
                  abrBandWidthUpFactor: 0.7,
                  abrMaxWithRealBitrate: !1,
                  maxStarvationDelay: 4,
                  maxLoadingDelay: 4,
                  minAutoBitrate: 0,
                  emeEnabled: !1,
                  widevineLicenseUrl: void 0,
                  drmSystemOptions: {},
                  requestMediaKeySystemAccessFunc: Fe,
                  testBandwidth: !0,
                },
                {
                  cueHandler: i,
                  enableCEA708Captions: !0,
                  enableWebVTT: !0,
                  captionsTextTrack1Label: "English",
                  captionsTextTrack1LanguageCode: "en",
                  captionsTextTrack2Label: "Spanish",
                  captionsTextTrack2LanguageCode: "es",
                  captionsTextTrack3Label: "Unknown CC",
                  captionsTextTrack3LanguageCode: "",
                  captionsTextTrack4Label: "Unknown CC",
                  captionsTextTrack4LanguageCode: "",
                  renderTextTracksNatively: !0,
                }
              ),
              {},
              {
                subtitleStreamController: ee,
                subtitleTrackController: tr,
                timelineController: Ee,
                audioStreamController: ut,
                audioTrackController: st,
                emeController: r,
              }
            );
            function lr(t, e) {
              var r,
                i = Object.keys(t);
              return (
                Object.getOwnPropertySymbols &&
                  ((r = Object.getOwnPropertySymbols(t)),
                  e &&
                    (r = r.filter(function (e) {
                      return Object.getOwnPropertyDescriptor(t, e).enumerable;
                    })),
                  i.push.apply(i, r)),
                i
              );
            }
            function dr(i) {
              for (var e = 1; e < arguments.length; e++) {
                var a = null != arguments[e] ? arguments[e] : {};
                e % 2
                  ? lr(Object(a), !0).forEach(function (e) {
                      var t, r;
                      (t = i),
                        (e = a[(r = e)]),
                        r in t
                          ? Object.defineProperty(t, r, {
                              value: e,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                            })
                          : (t[r] = e);
                    })
                  : Object.getOwnPropertyDescriptors
                  ? Object.defineProperties(
                      i,
                      Object.getOwnPropertyDescriptors(a)
                    )
                  : lr(Object(a)).forEach(function (e) {
                      Object.defineProperty(
                        i,
                        e,
                        Object.getOwnPropertyDescriptor(a, e)
                      );
                    });
              }
              return i;
            }
            function ur(e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            }
            function cr(e, t) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(e, i.key, i);
              }
            }
            function hr(e, t, r) {
              return t && cr(e.prototype, t), r && cr(e, r), e;
            }
            var fr = (function (g) {
              var e;
              function p(e) {
                var t;
                void 0 === e && (e = {}),
                  ((t = g.call(this) || this).config = void 0),
                  (t._autoLevelCapping = void 0),
                  (t.abrController = void 0),
                  (t.capLevelController = void 0),
                  (t.levelController = void 0),
                  (t.streamController = void 0),
                  (t.networkControllers = void 0),
                  (t.audioTrackController = void 0),
                  (t.subtitleTrackController = void 0),
                  (t.emeController = void 0),
                  (t.coreComponents = void 0),
                  (t.media = null),
                  (t.url = null);
                var r = p.DefaultConfig;
                if (
                  (e.liveSyncDurationCount || e.liveMaxLatencyDurationCount) &&
                  (e.liveSyncDuration || e.liveMaxLatencyDuration)
                )
                  throw new Error(
                    "Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration"
                  );
                t.config = dr(dr({}, r), e);
                var i = ur(t).config;
                if (
                  void 0 !== i.liveMaxLatencyDurationCount &&
                  i.liveMaxLatencyDurationCount <= i.liveSyncDurationCount
                )
                  throw new Error(
                    'Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"'
                  );
                if (
                  void 0 !== i.liveMaxLatencyDuration &&
                  (void 0 === i.liveSyncDuration ||
                    i.liveMaxLatencyDuration <= i.liveSyncDuration)
                )
                  throw new Error(
                    'Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"'
                  );
                Object(k.a)(i.debug), (t._autoLevelCapping = -1);
                var a = (t.abrController = new i.abrController(ur(t))),
                  n = new i.bufferController(ur(t)),
                  s = (t.capLevelController = new i.capLevelController(ur(t))),
                  o = new i.fpsController(ur(t)),
                  l = new B(ur(t)),
                  d = new G(ur(t)),
                  u = new K(ur(t)),
                  c = new Ye(ur(t)),
                  h = (t.levelController = new Ke(ur(t))),
                  r = new Y(ur(t)),
                  e = [h, (t.streamController = new Be(ur(t), r))],
                  h = i.audioStreamController;
                h && e.push(new h(ur(t), r)), (t.networkControllers = e);
                var f,
                  o = [l, d, u, a, n, s, o, c, r];
                return (
                  (h = i.audioTrackController) &&
                    ((c = new h(ur(t))),
                    (t.audioTrackController = c),
                    o.push(c)),
                  (h = i.subtitleTrackController) &&
                    ((f = new h(ur(t))),
                    (t.subtitleTrackController = f),
                    e.push(f)),
                  (h = i.emeController) &&
                    ((f = new h(ur(t))), (t.emeController = f), o.push(f)),
                  (h = i.subtitleStreamController) && e.push(new h(ur(t), r)),
                  (h = i.timelineController) && o.push(new h(ur(t))),
                  (t.coreComponents = o),
                  t
                );
              }
              (t = g),
                ((e = p).prototype = Object.create(t.prototype)),
                ((e.prototype.constructor = e).__proto__ = t),
                (p.isSupported = function () {
                  var e = J();
                  if (!e) return !1;
                  var t = self.SourceBuffer || self.WebKitSourceBuffer,
                    e =
                      e &&
                      "function" == typeof e.isTypeSupported &&
                      e.isTypeSupported(
                        'video/mp4; codecs="avc1.42E01E,mp4a.40.2"'
                      ),
                    t =
                      !t ||
                      (t.prototype &&
                        "function" == typeof t.prototype.appendBuffer &&
                        "function" == typeof t.prototype.remove);
                  return !!e && !!t;
                }),
                hr(p, null, [
                  {
                    key: "version",
                    get: function () {
                      return "0.14.13";
                    },
                  },
                  {
                    key: "Events",
                    get: function () {
                      return E.a;
                    },
                  },
                  {
                    key: "ErrorTypes",
                    get: function () {
                      return m.b;
                    },
                  },
                  {
                    key: "ErrorDetails",
                    get: function () {
                      return m.a;
                    },
                  },
                  {
                    key: "DefaultConfig",
                    get: function () {
                      return p.defaultConfig || or;
                    },
                    set: function (e) {
                      p.defaultConfig = e;
                    },
                  },
                ]);
              var t = p.prototype;
              return (
                (t.destroy = function () {
                  k.b.log("destroy"),
                    this.trigger(E.a.DESTROYING),
                    this.detachMedia(),
                    this.coreComponents
                      .concat(this.networkControllers)
                      .forEach(function (e) {
                        e.destroy();
                      }),
                    (this.url = null),
                    this.removeAllListeners(),
                    (this._autoLevelCapping = -1);
                }),
                (t.attachMedia = function (e) {
                  k.b.log("attachMedia"),
                    (this.media = e),
                    this.trigger(E.a.MEDIA_ATTACHING, {
                      media: e,
                    });
                }),
                (t.detachMedia = function () {
                  k.b.log("detachMedia"),
                    this.trigger(E.a.MEDIA_DETACHING),
                    (this.media = null);
                }),
                (t.loadSource = function (e) {
                  (e = n.buildAbsoluteURL(window.location.href, e, {
                    alwaysNormalize: !0,
                  })),
                    k.b.log("loadSource:" + e),
                    (this.url = e),
                    this.trigger(E.a.MANIFEST_LOADING, {
                      url: e,
                    });
                }),
                (t.startLoad = function (t) {
                  void 0 === t && (t = -1),
                    k.b.log("startLoad(" + t + ")"),
                    this.networkControllers.forEach(function (e) {
                      e.startLoad(t);
                    });
                }),
                (t.stopLoad = function () {
                  k.b.log("stopLoad"),
                    this.networkControllers.forEach(function (e) {
                      e.stopLoad();
                    });
                }),
                (t.swapAudioCodec = function () {
                  k.b.log("swapAudioCodec"),
                    this.streamController.swapAudioCodec();
                }),
                (t.recoverMediaError = function () {
                  k.b.log("recoverMediaError");
                  var e = this.media;
                  this.detachMedia(), e && this.attachMedia(e);
                }),
                (t.removeLevel = function (e, t) {
                  void 0 === t && (t = 0),
                    this.levelController.removeLevel(e, t);
                }),
                hr(p, [
                  {
                    key: "levels",
                    get: function () {
                      return this.levelController.levels;
                    },
                  },
                  {
                    key: "currentLevel",
                    get: function () {
                      return this.streamController.currentLevel;
                    },
                    set: function (e) {
                      k.b.log("set currentLevel:" + e),
                        (this.loadLevel = e),
                        this.streamController.immediateLevelSwitch();
                    },
                  },
                  {
                    key: "nextLevel",
                    get: function () {
                      return this.streamController.nextLevel;
                    },
                    set: function (e) {
                      k.b.log("set nextLevel:" + e),
                        (this.levelController.manualLevel = e),
                        this.streamController.nextLevelSwitch();
                    },
                  },
                  {
                    key: "loadLevel",
                    get: function () {
                      return this.levelController.level;
                    },
                    set: function (e) {
                      k.b.log("set loadLevel:" + e),
                        (this.levelController.manualLevel = e);
                    },
                  },
                  {
                    key: "nextLoadLevel",
                    get: function () {
                      return this.levelController.nextLoadLevel;
                    },
                    set: function (e) {
                      this.levelController.nextLoadLevel = e;
                    },
                  },
                  {
                    key: "firstLevel",
                    get: function () {
                      return Math.max(
                        this.levelController.firstLevel,
                        this.minAutoLevel
                      );
                    },
                    set: function (e) {
                      k.b.log("set firstLevel:" + e),
                        (this.levelController.firstLevel = e);
                    },
                  },
                  {
                    key: "startLevel",
                    get: function () {
                      return this.levelController.startLevel;
                    },
                    set: function (e) {
                      k.b.log("set startLevel:" + e),
                        -1 !== e && (e = Math.max(e, this.minAutoLevel)),
                        (this.levelController.startLevel = e);
                    },
                  },
                  {
                    key: "capLevelToPlayerSize",
                    set: function (e) {
                      e = !!e;
                      e !== this.config.capLevelToPlayerSize &&
                        (e
                          ? this.capLevelController.startCapping()
                          : (this.capLevelController.stopCapping(),
                            (this.autoLevelCapping = -1),
                            this.streamController.nextLevelSwitch()),
                        (this.config.capLevelToPlayerSize = e));
                    },
                  },
                  {
                    key: "autoLevelCapping",
                    get: function () {
                      return this._autoLevelCapping;
                    },
                    set: function (e) {
                      k.b.log("set autoLevelCapping:" + e),
                        (this._autoLevelCapping = e);
                    },
                  },
                  {
                    key: "bandwidthEstimate",
                    get: function () {
                      var e = this.abrController._bwEstimator;
                      return e ? e.getEstimate() : NaN;
                    },
                  },
                  {
                    key: "autoLevelEnabled",
                    get: function () {
                      return -1 === this.levelController.manualLevel;
                    },
                  },
                  {
                    key: "manualLevel",
                    get: function () {
                      return this.levelController.manualLevel;
                    },
                  },
                  {
                    key: "minAutoLevel",
                    get: function () {
                      for (
                        var e = this.levels,
                          t = this.config.minAutoBitrate,
                          r = e ? e.length : 0,
                          i = 0;
                        i < r;
                        i++
                      )
                        if (
                          (e[i].realBitrate
                            ? Math.max(e[i].realBitrate, e[i].bitrate)
                            : e[i].bitrate) > t
                        )
                          return i;
                      return 0;
                    },
                  },
                  {
                    key: "maxAutoLevel",
                    get: function () {
                      var e = this.levels,
                        t = this.autoLevelCapping;
                      return -1 === t && e && e.length ? e.length - 1 : t;
                    },
                  },
                  {
                    key: "nextAutoLevel",
                    get: function () {
                      return Math.min(
                        Math.max(
                          this.abrController.nextAutoLevel,
                          this.minAutoLevel
                        ),
                        this.maxAutoLevel
                      );
                    },
                    set: function (e) {
                      this.abrController.nextAutoLevel = Math.max(
                        this.minAutoLevel,
                        e
                      );
                    },
                  },
                  {
                    key: "audioTracks",
                    get: function () {
                      var e = this.audioTrackController;
                      return e ? e.audioTracks : [];
                    },
                  },
                  {
                    key: "audioTrack",
                    get: function () {
                      var e = this.audioTrackController;
                      return e ? e.audioTrack : -1;
                    },
                    set: function (e) {
                      var t = this.audioTrackController;
                      t && (t.audioTrack = e);
                    },
                  },
                  {
                    key: "liveSyncPosition",
                    get: function () {
                      return this.streamController.liveSyncPosition;
                    },
                  },
                  {
                    key: "subtitleTracks",
                    get: function () {
                      var e = this.subtitleTrackController;
                      return e ? e.subtitleTracks : [];
                    },
                  },
                  {
                    key: "subtitleTrack",
                    get: function () {
                      var e = this.subtitleTrackController;
                      return e ? e.subtitleTrack : -1;
                    },
                    set: function (e) {
                      var t = this.subtitleTrackController;
                      t && (t.subtitleTrack = e);
                    },
                  },
                  {
                    key: "subtitleDisplay",
                    get: function () {
                      var e = this.subtitleTrackController;
                      return !!e && e.subtitleDisplay;
                    },
                    set: function (e) {
                      var t = this.subtitleTrackController;
                      t && (t.subtitleDisplay = e);
                    },
                  },
                ]),
                p
              );
            })(te);
            fr.defaultConfig = void 0;
          },
        ]),
      (a.c = i),
      (a.d = function (e, t, r) {
        a.o(e, t) ||
          Object.defineProperty(e, t, {
            enumerable: !0,
            get: r,
          });
      }),
      (a.r = function (e) {
        "undefined" != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module",
          }),
          Object.defineProperty(e, "__esModule", {
            value: !0,
          });
      }),
      (a.t = function (t, e) {
        if ((1 & e && (t = a(t)), 8 & e)) return t;
        if (4 & e && "object" == typeof t && t && t.__esModule) return t;
        var r = Object.create(null);
        if (
          (a.r(r),
          Object.defineProperty(r, "default", {
            enumerable: !0,
            value: t,
          }),
          2 & e && "string" != typeof t)
        )
          for (var i in t)
            a.d(
              r,
              i,
              function (e) {
                return t[e];
              }.bind(null, i)
            );
        return r;
      }),
      (a.n = function (e) {
        var t =
          e && e.__esModule
            ? function () {
                return e.default;
              }
            : function () {
                return e;
              };
        return a.d(t, "a", t), t;
      }),
      (a.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
      }),
      (a.p = "/dist/"),
      a((a.s = 13)).default
    );
    function a(e) {
      if (i[e]) return i[e].exports;
      var t = (i[e] = {
        i: e,
        l: !1,
        exports: {},
      });
      return r[e].call(t.exports, t, t.exports, a), (t.l = !0), t.exports;
    }
    var r, i;
  });
